import{j as e,am as j,ak as L,ap as M,aq as z,aQ as A,T as p,ar as h,U as T,ad as q,r as m,A as ae,Q as w,G as ce,aR as U,ao as P,aG as de,z as ue,y as pe,as as xe,M as he,b2 as me,aO as ge,b4 as be,au as Q,at as $,aD as G,aF as Y,aE as V,a1 as X,E as ye,K as je,b5 as fe,b6 as Se,b7 as ve,al as Ce,W as ke,av as we,Y as Pe}from"./chunk-CJVoFoqV.js";import{u as Ae,C as Ie}from"./chunk-CxcwKXog.js";import{U as Re,X as Me,N as ze,d as Te,K as H,T as Le}from"./chunk-CpqhyqeY.js";import{i as R,d as B}from"./chunk-arCWr7CA.js";import{d as Ke}from"./chunk-CsdNKD0V.js";import{z as Be,A as Ee,I as Oe}from"./chunk-CdWLCell.js";import{L as We,M as J,Y as Ne,G as Ue}from"./chunk-DdYsL39M.js";import{u as Ge}from"./chunk-B2GYjlo-.js";import{c as _,a as Ye,b as Ve}from"./chunk-q-nx_Rpp.js";import{u as He}from"./chunk-Cyp6yqb7.js";import"../assets/index-BHUshCQG.js";import"./schedule.tsx-dFnjltiV.js";import"./chunk-DvmTZbFC.js";import"./chunk-CaEDXWoe.js";import"./theme.tsx-D3MtnY0r.js";import"./chunk-KX2hDaPG.js";import"./chunk-Buz77Oyr.js";import"./chunk-DWTSEXP2.js";import"./chunk-CoxDZOLR.js";import"./chunk-D9NIOe8w.js";import"./chunk-LolS9Tp_.js";import"./chunk-DJOIqVXf.js";import"./chunk-D9_D7Pb0.js";(function(){var n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};n.SENTRY_RELEASE={id:"8380c411008c81db0d03192c8a87321e8e40e84f"}})();try{(function(){var n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new n.Error().stack;s&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[s]="c7c259f1-3b75-4918-974c-5372e6d7c291",n._sentryDebugIdIdentifier="sentry-dbid-c7c259f1-3b75-4918-974c-5372e6d7c291")})()}catch{}function O({children:n,justifyContent:s="space-evenly"}){return e.jsx(j,{sx:{mt:3,display:"flex",flexDirection:"row",justifyContent:s,alignItems:"center"},children:n})}function F({isPublic:n,onClick:s,isSelected:r}){const{t:l}=L();return e.jsx(M,{sx:{cursor:"pointer",border:r?"3px solid":"1px solid",borderColor:r?"primary.main":"grey.300",backgroundColor:r?"primary.50":"background.paper",transform:r?"scale(1.02)":"scale(1)",transition:"all 0.2s ease-in-out","&:hover":{borderColor:"primary.main",boxShadow:r?4:2,transform:"scale(1.02)"}},onClick:s,children:e.jsx(z,{sx:{p:3},children:e.jsxs(A,{direction:"row",spacing:3,alignItems:"center",children:[e.jsx(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,borderRadius:"50%",backgroundColor:r?"primary.main":"primary.50",color:r?"primary.contrastText":"primary.main",transition:"all 0.2s ease-in-out"},children:n?e.jsx(Re,{sx:{fontSize:28},"aria-label":"Public"}):e.jsx(Me,{sx:{fontSize:28},"aria-label":"Private"})}),e.jsxs(A,{spacing:.5,flex:1,children:[e.jsxs(A,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(p,{variant:"h6",component:"h3",sx:{fontWeight:600},children:e.jsx(h,{i18nKey:n?"public":"private"})}),r&&e.jsx(T,{label:l("selected"),size:"small",color:"primary",sx:{fontSize:"0.75rem",fontWeight:500,height:20}})]}),e.jsx(p,{variant:"body1",color:"text.secondary",sx:{fontSize:"0.95rem"},children:e.jsx(h,{i18nKey:n?"publicRoomBenefit":"privateRoomBenefit"})})]})]})})})}function _e({formData:n,setFormData:s,nextStep:r}){const{t:l}=L(),{id:i}=q(),[t,c]=m.useState(!R(n.room||i)),[d,f]=m.useState(n.room?.toUpperCase()||"");m.useEffect(()=>{const k=n.room||i,I=!R(k);c(I),f(k?.toUpperCase()||"")},[i,n.room,t]);const u=async k=>{try{const I=Be(),S=Ee(I,`rooms/${k}/uids`);return(await Oe(S)).exists()}catch{return!1}},a=m.useCallback(async()=>{const k=Ke("123456789ABCDEFGHJKLMNPQRSTUVWXYZ",5);let I,S=0;const C=10;do if(I=k(),S++,S>=C)break;while(await u(I));return I},[]),o=m.useCallback(()=>{s({...n,room:"PUBLIC",gameMode:"online",roomRealtime:!0}),c(!1)},[n,s]),x=m.useCallback(async()=>{const k=await a();s({...n,room:k,gameMode:"online",roomRealtime:!1}),f(k.toUpperCase()),c(!0)},[n,s,a]),y=m.useCallback(k=>{s({...n,room:k,boardUpdated:!0})},[n,s]),g=m.useCallback(k=>{const I=k.target.value.toUpperCase();f(I)},[]),b=m.useCallback(()=>{y(d)},[y,d]),v=m.useCallback(k=>{k.key==="Enter"&&y(d)},[y,d]),K=R(n.room||i);function E(){r(K?3:1)}return e.jsxs(j,{sx:{m:1},children:[e.jsx(p,{variant:"h5",gutterBottom:!0,textAlign:"center",children:e.jsx(h,{i18nKey:"chooseRoomType"})}),e.jsx(p,{variant:"body1",color:"text.secondary",textAlign:"center",sx:{mb:3},children:e.jsx(h,{i18nKey:"roomTypeDescription"})}),e.jsxs(A,{spacing:2,sx:{mb:3},children:[e.jsx(F,{isPublic:!0,onClick:o,isSelected:K}),e.jsx(F,{isPublic:!1,onClick:x,isSelected:!K})]}),t&&e.jsxs(j,{sx:{p:3,borderRadius:2,backgroundColor:"primary.50",mb:2},children:[e.jsx(p,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:l("privateRoomCode")}),e.jsx(ae,{fullWidth:!0,id:"privateRoom",value:d,onBlur:b,onKeyDown:v,onChange:g,inputProps:{style:{textTransform:"uppercase",fontFamily:"monospace",fontSize:"1.25rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.2em"}},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"background.paper","& fieldset":{borderColor:"divider",borderWidth:2},"&:hover fieldset":{borderColor:"primary.main"},"&.Mui-focused fieldset":{borderColor:"primary.main",borderWidth:2}}}}),e.jsx(p,{variant:"body2",color:"text.secondary",sx:{mt:1.5,textAlign:"center"},children:l("privateRoomCodeHelp")})]}),e.jsx(O,{children:e.jsx(w,{variant:"contained",onClick:E,size:"large",children:e.jsx(h,{i18nKey:"next"})})})]})}function Fe({formData:n,setFormData:s,nextStep:r,prevStep:l}){const{t:i}=L(),{hasLocalPlayers:t,clearLocalSession:c}=Ge(),[d,f]=m.useState(!1),[u,a]=m.useState(null),o=n.room!=="PUBLIC",x=m.useCallback(()=>{f(!0),a(null)},[]),y=m.useCallback(()=>{t&&c(),s(v=>({...v,hasLocalPlayers:!1,localPlayersData:void 0,localPlayerSessionSettings:void 0,gameMode:v.gameMode==="local"?"online":v.gameMode})),r()},[t,c,r,s]),g=m.useCallback(async(v,K)=>{try{s({...n,localPlayersData:v,localPlayerSessionSettings:K,hasLocalPlayers:!0}),f(!1),r()}catch(E){a(E instanceof Error?E.message:"Failed to save local player configuration")}},[n,s,r]),b=m.useCallback(()=>{f(!1),a(null)},[]);return m.useEffect(()=>{if(!o){const v=setTimeout(()=>{r()},100);return()=>clearTimeout(v)}},[o,r]),o?d?e.jsx(ce,{in:!0,children:e.jsxs(j,{children:[u&&e.jsx(U,{severity:"error",sx:{mb:2},children:u}),e.jsx(We,{roomId:n.room||"PRIVATE",isPrivateRoom:o,onComplete:g,onCancel:b,initialPlayers:n.localPlayersData,initialSettings:n.localPlayerSessionSettings})]})}):e.jsxs(j,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[e.jsx(p,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(h,{i18nKey:"localPlayersStep.title"})}),e.jsx(p,{variant:"body1",color:"text.secondary",sx:{mb:3},children:e.jsx(h,{i18nKey:"localPlayersStep.subtitle"})}),e.jsxs(P,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(P,{size:{xs:12,sm:6},children:e.jsx(M,{sx:{cursor:"pointer",border:"1px solid",borderColor:"divider",backgroundColor:"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:x,children:e.jsx(z,{sx:{p:3},children:e.jsxs(A,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(p,{variant:"h6",sx:{fontWeight:600},children:e.jsx(h,{i18nKey:"localPlayersStep.setupOption.title"})}),e.jsx(p,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"pre-line",textAlign:"left",width:"100%",lineHeight:1.8,mb:2},children:e.jsx(h,{i18nKey:"localPlayersStep.setupOption.description"})}),e.jsx(w,{variant:"outlined",fullWidth:!0,size:"large",sx:{mt:2},"data-testid":"localPlayersStep.setupOption.button",onClick:x,children:i("localPlayersStep.setupOption.button")})]})})})}),e.jsx(P,{size:{xs:12,sm:6},children:e.jsx(M,{sx:{cursor:"pointer",border:"1px solid",borderColor:"divider",backgroundColor:"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:y,children:e.jsx(z,{sx:{p:3},children:e.jsxs(A,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(p,{variant:"h6",sx:{fontWeight:600},children:e.jsx(h,{i18nKey:"localPlayersStep.skipOption.title"})}),e.jsx(p,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"pre-line",textAlign:"left",width:"100%",lineHeight:1.8,mb:2},children:e.jsx(h,{i18nKey:"localPlayersStep.skipOption.description"})}),e.jsx(w,{variant:"outlined",fullWidth:!0,size:"large",sx:{mt:2},"data-testid":"localPlayersStep.skipOption.button",onClick:y,children:i("localPlayersStep.skipOption.button")})]})})})})]}),t&&e.jsx(U,{severity:"info",sx:{mb:3},children:e.jsx(p,{variant:"body2",children:e.jsx(h,{i18nKey:"localPlayersStep.currentStatus.hasPlayers"})})}),e.jsx(j,{sx:{flexGrow:1}}),e.jsxs(O,{children:[e.jsx(w,{onClick:l,children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(w,{variant:"contained",onClick:y,children:e.jsx(h,{i18nKey:"skip"})})]})]}):e.jsx(j,{sx:{minHeight:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:e.jsx(p,{variant:"h6",color:"text.secondary",children:i("localPlayersStep.publicRoomMessage","Local players are not available for public rooms. Continuing...")})})}function qe({formData:n,setFormData:s,nextStep:r,prevStep:l}){const{t:i}=L(),t=!!n.hasLocalPlayers;m.useEffect(()=>{t&&s(o=>({...o,gameMode:"local",roomRealtime:!1}))},[t,s]);const[c,d]=m.useState(!B(n?.gameMode)&&!t);m.useEffect(()=>{d(!B(n?.gameMode)&&!t)},[n?.gameMode,t]);const f=[{id:"local",title:"yesInteracting",description:i("physicalInteractionDesc"),isSelected:!B(n?.gameMode)},{id:"online",title:"noInteracting",description:i("soloOnlinePlayDesc"),isSelected:B(n?.gameMode)}],u=[{value:"dom",label:"Dominant",description:i("dominantRoleDesc")},{value:"vers",label:"Switch",description:i("switchRoleDesc")},{value:"sub",label:"Submissive",description:i("submissiveRoleDesc")}],a=[{id:"clothed",title:"noNaked",description:i("foreplayClothedDesc"),isSelected:!n.isNaked},{id:"naked",title:"yesNaked",description:i("intimateNudityDesc"),isSelected:n.isNaked}];return e.jsxs(j,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[!t&&e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(h,{i18nKey:"playingWithPeople"})}),e.jsx(P,{container:!0,spacing:2,sx:{mb:3},children:f.map(o=>e.jsx(P,{size:{xs:12,sm:6},children:e.jsx(M,{role:"button",tabIndex:0,sx:{cursor:"pointer",border:o.isSelected?"3px solid":"1px solid",borderColor:o.isSelected?"primary.main":"divider",backgroundColor:o.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>s({...n,gameMode:o.id==="local"?"local":"online",roomRealtime:o.id!=="local"}),onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),s({...n,gameMode:o.id==="local"?"local":"online",roomRealtime:o.id!=="local"}))},children:e.jsx(z,{sx:{p:3},children:e.jsxs(A,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(p,{variant:"h6",sx:{fontWeight:600},children:i(o.title)}),e.jsx(p,{variant:"body2",color:"text.secondary",children:o.description}),o.isSelected&&e.jsx(T,{label:i("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},o.id))})]}),t&&e.jsx(p,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(h,{i18nKey:"gameModeSelection"})}),c&&e.jsxs(j,{sx:{mb:3},children:[e.jsx(p,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:e.jsx(h,{i18nKey:"yourRole"})}),e.jsx(P,{container:!0,spacing:2,sx:{mb:3},children:u.map(o=>e.jsx(P,{size:{xs:12,sm:4},children:e.jsx(M,{role:"button",tabIndex:0,sx:{cursor:"pointer",border:n.role===o.value?"2px solid":"1px solid",borderColor:n.role===o.value?"primary.main":"divider",backgroundColor:n.role===o.value?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>s({...n,role:o.value}),onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),s({...n,role:o.value}))},children:e.jsx(z,{sx:{p:2.5},children:e.jsxs(A,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(p,{variant:"subtitle1",sx:{fontWeight:600},children:i(o.value)}),e.jsx(p,{variant:"body2",color:"text.secondary",children:o.description}),n.role===o.value&&e.jsx(T,{label:i("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},o.value))})]}),!B(n?.gameMode)&&e.jsxs(j,{sx:{mb:3},children:[e.jsx(p,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:e.jsx(h,{i18nKey:"areYouNaked"})}),e.jsx(P,{container:!0,spacing:2,children:a.map(o=>e.jsx(P,{size:{xs:12,sm:6},children:e.jsx(M,{role:"button",tabIndex:0,sx:{cursor:"pointer",border:o.isSelected?"2px solid":"1px solid",borderColor:o.isSelected?"primary.main":"divider",backgroundColor:o.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>s({...n,isNaked:o.id==="naked"}),onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),s({...n,isNaked:o.id==="naked"}))},children:e.jsx(z,{sx:{p:3},children:e.jsxs(A,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(p,{variant:"h6",sx:{fontWeight:600},children:i(o.title)}),e.jsx(p,{variant:"body2",color:"text.secondary",children:o.description}),o.isSelected&&e.jsx(T,{label:i("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},o.id))})]}),e.jsx(j,{sx:{flexGrow:1}}),e.jsxs(O,{children:[e.jsx(w,{onClick:l,children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(w,{variant:"contained",onClick:r,children:e.jsx(h,{i18nKey:"next"})})]})]})}const Qe=(n,s)=>{const{gameMode:r,isNaked:l}=n,i=B(r);return i&&["foreplay","sex"].includes(s.type)||!i&&l&&["solo","foreplay"].includes(s.type)||!i&&!l&&["solo","sex"].includes(s.type)},$e=n=>{const s={...n},r=n.selectedActions||{},l={};return Object.entries(r).forEach(([i,t])=>{Qe(n,t)||(l[i]=t)}),s.selectedActions=l,s},Z=(n,s,r)=>{const l=n.selectedActions||{};return Object.entries(l).map(([i,t])=>{const c=s.find(d=>d.value===i);return t.type!==r||!c?null:i}).filter(i=>!!i)},Xe=(n,s,r)=>{const l={...n},i={...l.selectedActions};return Object.keys(i).forEach(t=>{i[t].type===s&&!r.includes(t)&&delete i[t]}),l.selectedActions=i,l},D=(n,s,r)=>{r(l=>{const i=Xe(l,s,n),t={...i.selectedActions};return n.forEach(c=>{if(t[c])return;let d={type:s,levels:[1]};s==="consumption"&&(d={...d,variation:i.isAppend?"appendMost":"standalone"}),t[c]=d}),{...i,selectedActions:t}})},ee=(n,s,r,l,i=null)=>{l(t=>{const c={...t.selectedActions||{}};return n.length===0?delete c[s]:c[s]={...c[s]||{},type:r,levels:n,...!!i&&{variation:i}},{...t,selectedActions:c}})},Je=n=>!!(n&&Object.keys(n).some(s=>{const r=n[s];return r?.levels&&r.levels.length>0&&r?.variation!=="appendMost"}));function ne(){return e.jsxs(p,{variant:"h6",sx:{mt:2},children:[e.jsx(h,{i18nKey:"setIntensityLevel"}),e.jsx(de,{title:e.jsx(p,{variant:"body1",children:e.jsx(h,{i18nKey:"intensityTooltip"})}),arrow:!0,sx:{ml:1},children:e.jsx(ze,{sx:{ml:.5,fontSize:15}})})]})}function te({onChange:n,values:s,options:r,label:l}){const i=m.useCallback(c=>r?.find(d=>d.value===c)?.label,[r]),t=m.useCallback(c=>e.jsx(j,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:c?.map(d=>e.jsx(T,{label:i(d)},d))}),[i]);return e.jsxs(ue,{fullWidth:!0,children:[e.jsx(pe,{id:`${l}-label`,children:l}),e.jsx(xe,{labelId:`${l}-label`,id:`${l}`,multiple:!0,value:s,onChange:n,fullWidth:!0,input:e.jsx(be,{label:e.jsx(h,{i18nKey:"actionsLabel"})}),renderValue:t,children:r?.map(({label:c,value:d})=>e.jsxs(he,{value:d,children:[e.jsx(me,{checked:s.includes(d)}),e.jsx(ge,{primary:c})]},d))})]})}const Ze=4,De=n=>B(n?.gameMode)?"solo":n.isNaked?"sex":"foreplay";function en({formData:n,setFormData:s,options:r,actionsList:l}){const i=De(n),t=r(i),d=Z(n,t,i)||[],f=u=>{const{value:a}=u.target,o=typeof a=="string"?a.split(","):a;o.length<=Ze&&D(o,i,s)};return e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"h6",sx:{my:2},children:e.jsx(h,{i18nKey:"pickActions"})}),e.jsx(te,{onChange:f,values:d,options:t,label:Q("actionsLabel")}),d.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ne,{}),d.map(u=>{const a=l[u],o=a?.intensities?Object.keys(a.intensities).map(Number).filter(y=>y>0).sort((y,g)=>y-g):[1,2,3,4],x=n.selectedActions?.[u]?.levels||[];return e.jsx(J,{actionName:u,actionLabel:a?.label||u,selectedLevels:x,availableLevels:o,intensityNames:a?.intensities||{},onChange:y=>ee(y,u,i,s)},u)})]})]})}const nn=2;function tn({formData:n,setFormData:s,options:r,actionsList:l}){const i="consumption",t=r(i),d=Z(n,t,i)||[],f=a=>{const{value:o}=a.target,x=typeof o=="string"?o.split(","):o;x.length<=nn&&D(x,i,s)},u=(a,o)=>{const x=a.target.checked?"appendMost":"standalone",y=a.target.checked,g={...n.selectedActions};o.forEach(v=>{g[v]&&(g[v]={...g[v],variation:x})});const b={...n,isAppend:y,selectedActions:g};s(b)};return e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"h6",sx:{my:2},children:e.jsx(h,{i18nKey:"pickConsumptions"})}),e.jsx(te,{onChange:f,values:d,options:t,label:Q("consumables")}),!!d.length&&e.jsxs(e.Fragment,{children:[e.jsx(ne,{}),d.map(a=>{const o=l[a],x=o?.intensities?Object.keys(o.intensities).map(Number).filter(g=>g>0).sort((g,b)=>g-b):[1,2,3,4],y=n.selectedActions?.[a]?.levels||[];return e.jsx(J,{actionName:a,actionLabel:o?.label||a,selectedLevels:y,availableLevels:x,intensityNames:o?.intensities||{},onChange:g=>ee(g,a,i,s,n.isAppend?"appendMost":"standalone")},a)}),e.jsx(p,{variant:"h6",sx:{mt:2},children:e.jsx(h,{i18nKey:"standaloneOrCombine"})}),e.jsx(Ne,{trueCondition:n.isAppend,onChange:a=>u(a,d),yesLabel:"combineWithActions"})]})]})}function sn({gameMode:n,onPresetSelect:s,selectedPreset:r,actionsList:l,showTitle:i=!0}){const{t}=L(),c={solo:[{id:"popperbating",name:t("presetPopperbating"),description:t("presetPopperbatingDesc"),actions:["bating"],consumptions:["poppers"],intensities:{bating:2,poppers:1}},{id:"smoking-tits",name:t("presetSmokingTits"),description:t("presetSmokingTitsDesc"),actions:["titTorture"],consumptions:["vaping"],intensities:{titTorture:2,vaping:1}},{id:"exploration-solo",name:t("presetExplorationSolo"),description:t("presetExplorationSoloDesc"),actions:["throatTraining","buttPlay","titTorture","ballBusting"],consumptions:[],intensities:{throatTraining:1,buttPlay:1,titTorture:1,ballBusting:1}},{id:"ball-busting",name:t("presetBallBusting"),description:t("presetBallBustingDesc"),actions:["ballBusting","bating"],consumptions:["poppers"],intensities:{ballBusting:2,bating:2}}],foreplay:[{id:"romantic-start",name:t("presetRomanticStart"),description:t("presetRomanticStartDesc"),actions:["kissing","stripping"],consumptions:["alcohol"],intensities:{kissing:2,stripping:1,alcohol:1}},{id:"degrading",name:t("presetDegrading"),description:t("presetDegradingDesc"),actions:["humiliation","footPlay","breathPlay"],consumptions:["poppers"],intensities:{humiliation:2,footPlay:2,breathPlay:2,poppers:2}},{id:"sensual-touch",name:t("presetSensualTouch"),description:t("presetSensualTouchDesc"),actions:["kissing","footPlay","tickling"],consumptions:[],intensities:{kissing:2,footPlay:1,tickling:1}},{id:"electric-play",name:t("presetElectricPlay"),description:t("presetElectricPlayDesc"),actions:["electric","bondage"],consumptions:["vaping"],intensities:{electric:1,bondage:2,vaping:1}}],sex:[{id:"gentle-sex",name:t("presetGentleSex"),description:t("presetGentleSexDesc"),actions:["throatTraining","bating","buttPlay"],consumptions:["alcohol"],intensities:{throatTraining:1,bating:1,buttPlay:1,alcohol:1}},{id:"fisting",name:t("presetFisting"),description:t("presetFistingDesc"),actions:["buttPlay"],consumptions:["poppers"],intensities:{buttPlay:4,poppers:4}},{id:"bdsm",name:t("presetBdsm"),description:t("presetBdsmDesc"),actions:["pissPlay","throatTraining","spanking","titTorture"],consumptions:[],intensities:{pissPlay:2,throatTraining:2,spanking:2,titTorture:2}},{id:"breath-control",name:t("presetBreathControl"),description:t("presetBreathControlDesc"),actions:["bating"],consumptions:["gasMask"],intensities:{bating:2,gasMask:2}}]},d=c[n]||c.solo,f=u=>{s(u)};return e.jsxs(j,{children:[i&&e.jsx(p,{variant:"h6",gutterBottom:!0,children:t("quickStart")}),e.jsx(P,{container:!0,spacing:2,children:d.map(u=>e.jsx(P,{size:{xs:12,sm:6,lg:3},children:e.jsx(M,{sx:{cursor:"pointer",border:r===u.id?2:1,borderColor:r===u.id?"primary.main":"divider",backgroundColor:r===u.id?"primary.dark":"background.paper",transition:"all 0.2s ease-in-out",height:"100%",boxShadow:1,"&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:3,backgroundColor:r===u.id?"primary.dark":"action.hover"}},onClick:()=>f(u),children:e.jsxs(z,{sx:{p:2.5},children:[e.jsx(p,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:u.name}),e.jsxs(j,{children:[u.actions.map((a,o)=>e.jsx(T,{label:l[a]?.label||a,size:"small",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:"primary.main",color:"primary.main","&:hover":{backgroundColor:"primary.50"}}},`action-${o}`)),u.consumptions.map((a,o)=>e.jsx(T,{label:l[a]?.label||a,size:"small",color:"secondary",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:"secondary.main",color:"secondary.main","&:hover":{backgroundColor:"secondary.50"}}},`consumption-${o}`))]})]})})},u.id))})]})}function on({formData:n,setFormData:s,nextStep:r,prevStep:l,actionsList:i,isActionsLoading:t=!1}){const{t:c}=L(),[d,f]=m.useState(""),[u,a]=m.useState(!1),[o,x]=m.useState(!0);function y(S){return Object.keys(i).filter(C=>i[C]?.type===S)}m.useEffect(()=>{const S=$e(n);s(S)},[]),m.useEffect(()=>{n.selectedActions&&Object.keys(n.selectedActions).length>0&&(a(!0),x(!1))},[]);const g=S=>y(S).map(C=>({value:C,label:i[C]?.label}));let b;n.gameMode==="online"?b="solo":n.gameMode==="local"&&!n.isNaked?b="foreplay":b="sex";const v=(S,C,se,ie)=>{S.forEach(W=>{if(i[W]){const oe=se.intensities?.[W]||C,re=Object.keys(i[W].intensities||{}).filter(N=>N!=="None").length;ie[W]={type:i[W].type,levels:Array.from({length:Math.min(oe,re)},(N,le)=>le+1)}}})},K=S=>{f(S.id);const C={};v(S.actions,2,S,C),v(S.consumptions,1,S,C),s({...n,selectedActions:C}),x(!1),a(!0)},E=(S,C)=>{x(C),C&&a(!1)},k=(S,C)=>{a(C),C&&x(!1)},I=!Je(n.selectedActions);return t?e.jsxs(j,{children:[e.jsxs(j,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:300,gap:2},children:[e.jsx($,{size:48}),e.jsx(p,{variant:"h6",color:"text.secondary",children:c("loadingAvailableActions")})]}),e.jsx(j,{sx:{mt:4},children:e.jsxs(O,{children:[e.jsx(w,{disabled:!0,children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(w,{variant:"contained",disabled:!0,size:"large",children:e.jsx(h,{i18nKey:"next"})})]})})]}):e.jsxs(j,{children:[e.jsxs(G,{expanded:o,onChange:E,sx:{backgroundColor:"background.default",borderTop:1,borderBottom:1,borderColor:"divider",borderLeft:"none",borderRight:"none",borderRadius:0,"&:before":{display:"none"},boxShadow:"none"},children:[e.jsx(Y,{expandIcon:e.jsx(H,{}),"aria-controls":"quickstart-content",id:"quickstart-header",sx:{backgroundColor:"background.default"},children:e.jsxs(A,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Te,{}),e.jsx(p,{variant:"h6",children:c("quickStart")})]})}),e.jsx(V,{sx:{pb:1},children:e.jsx(sn,{gameMode:b,onPresetSelect:K,selectedPreset:d,actionsList:i,showTitle:!1})})]}),e.jsxs(G,{expanded:u,onChange:k,sx:{backgroundColor:"background.default",borderTop:o?"none":1,borderBottom:1,borderColor:"divider",borderLeft:"none",borderRight:"none",borderRadius:0,marginTop:o?-1:0,"&:before":{display:"none"},boxShadow:"none"},children:[e.jsx(Y,{expandIcon:e.jsx(H,{}),"aria-controls":"customization-content",id:"customization-header",sx:{backgroundColor:"background.default"},children:e.jsxs(A,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Le,{}),e.jsx(p,{variant:"h6",children:c("customizeActions")})]})}),e.jsxs(V,{children:[e.jsx(p,{variant:"body2",color:"text.secondary",sx:{mb:2},children:c("customizeActionsDesc")}),e.jsx(en,{formData:n,setFormData:s,options:g,actionsList:i}),e.jsx(X,{sx:{my:3}}),e.jsx(tn,{formData:n,setFormData:s,options:g,actionsList:i})]})]}),e.jsx(j,{sx:{mt:4},children:e.jsxs(O,{children:[e.jsx(w,{onClick:()=>l(R(n.room)?3:1),children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(w,{variant:"contained",disabled:I,onClick:r,size:"large",children:e.jsx(h,{i18nKey:"next"})})]})})]})}function rn({formData:n,setFormData:s,prevStep:r,actionsList:l,close:i}){const t=[100,100],c=[0,0],[d,f]=m.useState(_(n?.finishRange||[],c)),[u,a]=m.useState(!1),o=Ye(),{t:x}=L();m.useEffect(()=>{let b={...n,boardUpdated:!0};(!d||!_(n.finishRange||[],t))&&(b.finishRange=t),s(b)},[]);async function y(){a(!0);try{await o(n,l)}catch(b){console.error("Error submitting settings:",b)}finally{a(!1)}typeof i=="function"&&i()}const g=[{id:"noOrgasm",title:"noOrgasm",description:x("noOrgasmDesc"),isSelected:!d},{id:"yesOrgasm",title:"yesOrgasm",description:x("yesOrgasmDesc"),isSelected:d}];return e.jsxs(j,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[e.jsx(p,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(h,{i18nKey:"WillYouOrgasm"})}),e.jsx(P,{container:!0,spacing:2,sx:{mb:4},children:g.map(b=>e.jsx(P,{size:{xs:12,sm:6},children:e.jsx(M,{sx:{cursor:"pointer",border:b.isSelected?"3px solid":"1px solid",borderColor:b.isSelected?"primary.main":"divider",backgroundColor:b.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%",transform:b.isSelected?"scale(1.02)":"scale(1)","&:hover":{borderColor:"primary.main",transform:"scale(1.02)",boxShadow:2}},onClick:()=>{const v=b.id==="yesOrgasm";s({...n,finishRange:v?c:t}),f(v)},children:e.jsx(z,{sx:{p:3},children:e.jsxs(A,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(p,{variant:"h6",sx:{fontWeight:600},children:x(b.title)}),e.jsx(p,{variant:"body2",color:"text.secondary",children:b.description}),b.isSelected&&e.jsx(T,{label:x("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},b.id))}),e.jsx(j,{sx:{flexGrow:1}}),e.jsxs(O,{children:[e.jsx(w,{onClick:r,disabled:u,children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(w,{variant:"contained",onClick:y,disabled:u,startIcon:u?e.jsx($,{size:20}):null,size:"large",sx:{px:4},children:e.jsx(h,{i18nKey:"buildGame"})})]})]})}function ln({currentStep:n,isPublicRoom:s,onStepClick:r}){const{t:l}=L(),i=ye(),t=je(i.breakpoints.down("md")),c=s?[{label:String(l("roomSelection","Room Selection")),wizardStep:1},{label:String(l("actionsSelection","Actions Selection")),wizardStep:4},{label:String(l("finishSetup","Finish Setup")),wizardStep:5}]:[{label:String(l("roomSelection","Room Selection")),wizardStep:1},{label:String(l("localPlayersStep.title","Local Players")),wizardStep:2},{label:String(l("gameModeSelection","Game Mode Selection")),wizardStep:3},{label:String(l("actionsSelection","Actions Selection")),wizardStep:4},{label:String(l("finishSetup","Finish Setup")),wizardStep:5}],d=c.findIndex(u=>u.wizardStep===n),f=u=>{if(r){const a=c[u].wizardStep;r(a)}};return e.jsx(fe,{activeStep:d,alternativeLabel:!t,orientation:"horizontal",sx:{...t&&{"& .MuiStepLabel-label":{display:"none"}}},children:c.map((u,a)=>e.jsx(Se,{children:e.jsx(ve,{onClick:()=>f(a),sx:{cursor:r?"pointer":"default","&:hover":r?{"& .MuiStepLabel-label":{color:"primary.main"}}:{}},children:t?null:u.label})},a))})}function an({close:n}){const{id:s}=q(),[r,l]=m.useState(1),i={room:s||"PUBLIC"},[t,c]=He({gameMode:"online",roomRealtime:!0,actions:[],consumption:[],role:"sub",boardUpdated:!1,room:s||"PUBLIC",selectedActions:{}},i),{actionsList:d,isLoading:f}=Ve(t.gameMode),u=g=>{if(!Number.isInteger(g))return l(r+1);l(r+(g||1))},a=g=>{if(!Number.isInteger(g))return l(r-1);l(r-(g||1))},o=()=>l(0),x=()=>{R(t.room)||t.gameMode==="online"?l(4):l(1)},y=()=>{switch(r){case 1:return e.jsx(_e,{formData:t,setFormData:c,nextStep:u});case 2:return R(t.room)?(l(4),null):e.jsx(Fe,{formData:t,setFormData:c,nextStep:u,prevStep:a});case 3:return R(t.room)?(l(4),null):e.jsx(qe,{formData:t,setFormData:c,nextStep:u,prevStep:a});case 4:return e.jsx(on,{formData:t,setFormData:c,nextStep:u,prevStep:a,actionsList:d,isActionsLoading:f});case 5:return e.jsx(rn,{formData:t,setFormData:c,prevStep:a,actionsList:d,close:n});default:return null}};return r===0?e.jsx(Ue,{closeDialog:n,onOpenSetupWizard:x}):e.jsxs(j,{children:[e.jsx(j,{sx:{width:"100%",mt:2,mb:4},children:e.jsx(ln,{currentStep:r,isPublicRoom:R(t.room),onStepClick:l})}),y(),e.jsx(X,{sx:{mt:3}}),e.jsx(w,{onClick:o,children:e.jsx(h,{i18nKey:"advancedSetup"})})]})}function Ln({open:n,close:s}){const r=Ae(),[l]=Ce();return l.get("importBoard")?null:e.jsxs(ke,{fullScreen:r,open:n,maxWidth:"md",children:[e.jsxs(we,{children:[e.jsx(h,{i18nKey:"gameSettingsHeading"}),typeof s=="function"&&e.jsx(Ie,{close:s})]}),e.jsx(Pe,{children:e.jsx(an,{close:typeof s=="function"?s:void 0})})]})}export{Ln as default};
//# sourceMappingURL=index.tsx-BOPYyR7P.js.map
