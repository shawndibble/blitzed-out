import{E as $,ak as z,r as k,j as e,Q as M,m as p,aM as _,M as T,aN as C,aO as I,ao as L,am as j,T as x,U as H,W as Y,av as K,ar as R,Y as q,ap as N,aP as P,aq as O,aQ as V,P as Q,A as Z}from"./chunk-u7ZaklyY.js";import{a as J,C as X}from"./chunk-CND3TB5P.js";import{T as ee}from"./chunk-EGvb8o6m.js";import{d as W}from"./chunk-BiwWZ2hC.js";import{a as te}from"./chunk-6vR-ehJY.js";import{m as F,n as ne,G as ae,M as oe,o as re,p as se,E as U,V as le,q as ie,L as de,r as ce,s as me}from"./chunk-DjaG2sW1.js";import{A as pe}from"./chunk-VKJ94J0n.js";import"./chunk-C1hnJ-He.js";import"../assets/index-CVlHkNKo.js";import"./schedule.tsx-DOJtXiNw.js";import"./chunk-CaZ9lMwi.js";import"./chunk-D4nXmTaT.js";import"./theme.tsx-DwaA67xR.js";import"./chunk-C9_0996G.js";import"./chunk-DWzmHgJq.js";import"./chunk-Bgbo4R2z.js";(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"b0aec1b7336667c3da787da9b7139ec106644213"}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new t.Error().stack;a&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[a]="f0f39132-62d2-497b-810a-b9674a8e9728",t._sentryDebugIdIdentifier="sentry-dbid-f0f39132-62d2-497b-810a-b9674a8e9728")})()}catch{}function he({title:t,date:a,url:o,description:n="",location:s="",baseUrl:l="https://blitzedout.com/PUBLIC",downloadIcs:i,buttonSx:f={}}){const d=$(),{t:r}=z(),[D,v]=k.useState(null),h=!!D,S=m=>{v(m.currentTarget)},g=()=>{v(null)},c=()=>t||r("calendar.gameTitle"),w=()=>{i(c(),a,o,u()),g()},u=()=>{let m=`${c()}`;return l&&(m+=`
${l}`),o&&(m+=`

${r("calendar.videoLink")}: ${o}`),n&&(m+=`

${n}`),m},E=()=>{const m=a.toISOString().replace(/-|:|\.\d+/g,""),b=new Date(a.getTime()+3600*1e3).toISOString().replace(/-|:|\.\d+/g,""),A="https://calendar.google.com/calendar/render",y=new URLSearchParams({action:"TEMPLATE",text:c(),dates:`${m}/${b}`,details:u()});return(s||o)&&y.append("location",s||o||""),`${A}?${y.toString()}`},B=()=>{const m="https://outlook.live.com/calendar/0/deeplink/compose",b=new URLSearchParams({path:"/calendar/action/compose",rru:"addevent",subject:c(),startdt:a.toISOString(),enddt:new Date(a.getTime()+36e5).toISOString(),body:u()});return(s||o)&&b.append("location",s||o||""),`${m}?${b.toString()}`},G=()=>{const m=Math.floor(a.getTime()/1e3),b=Math.floor((a.getTime()+3600*1e3)/1e3),A="https://calendar.yahoo.com/",y=new URLSearchParams({v:"60",title:c(),st:m.toString(),et:b.toString(),desc:u()});return(s||o)&&y.append("in_loc",s||o||""),`${A}?${y.toString()}`};return e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"outlined",size:"small",startIcon:e.jsx(F,{fontSize:"small"}),onClick:S,"aria-controls":h?"calendar-menu":void 0,"aria-haspopup":"true","aria-expanded":h?"true":void 0,sx:{borderColor:p(d.palette.secondary.main,.3),color:d.palette.secondary.main,"&:hover":{borderColor:d.palette.secondary.main,backgroundColor:p(d.palette.secondary.main,.05)},...f},children:r("calendar.addToCalendar")}),e.jsxs(_,{id:"calendar-menu",anchorEl:D,open:h,onClose:g,MenuListProps:{"aria-labelledby":"calendar-button",dense:!0},children:[e.jsxs(T,{onClick:w,children:[e.jsx(C,{children:e.jsx(ne,{fontSize:"small"})}),e.jsx(I,{children:r("calendar.downloadIcs")})]}),e.jsxs(T,{component:"a",href:E(),target:"_blank",rel:"noopener noreferrer",onClick:g,children:[e.jsx(C,{children:e.jsx(ae,{fontSize:"small"})}),e.jsx(I,{children:r("calendar.googleCalendar")})]}),e.jsxs(T,{component:"a",href:B(),target:"_blank",rel:"noopener noreferrer",onClick:g,children:[e.jsx(C,{children:e.jsx(oe,{fontSize:"small"})}),e.jsx(I,{children:r("calendar.outlookCalendar")})]}),e.jsxs(T,{component:"a",href:G(),target:"_blank",rel:"noopener noreferrer",onClick:g,children:[e.jsx(C,{children:e.jsx(re,{fontSize:"small"})}),e.jsx(I,{children:r("calendar.yahooCalendar")})]}),e.jsxs(T,{onClick:w,children:[e.jsx(C,{children:e.jsx(se,{fontSize:"small"})}),e.jsx(I,{children:r("calendar.appleCalendar")})]})]})]})}const ue=(t,a,o,n)=>{const s=new Date(a.getTime()+36e5),l=r=>r.toISOString().replace(/-|:|\.\d+/g,"").slice(0,15)+"Z",i=l(a),f=l(s);let d=["BEGIN:VCALENDAR","VERSION:2.0","CALSCALE:GREGORIAN","METHOD:PUBLISH","BEGIN:VEVENT",`DTSTART:${i}`,`DTEND:${f}`,`SUMMARY:${t}`,`DESCRIPTION:${n?.replace(/\n/g,"\\n")||t}`,"STATUS:CONFIRMED"];return o&&d.push(`URL:${o}`),d=d.concat(["END:VEVENT","END:VCALENDAR"]),d.join(`\r
`)},xe=(t,a,o,n)=>{const s=ue(t,a,o,n),l=new Blob([s],{type:"text/calendar;charset=utf-8"}),i=document.createElement("a");i.href=URL.createObjectURL(l),i.download=`blitzed-out-game-${a.toISOString().split("T")[0]}.ics`,document.body.appendChild(i),i.click(),document.body.removeChild(i)},ge=t=>{try{const{href:a}=new URL(t),o=te(t);return e.jsx(M,{href:a,target:"_blank",rel:"noreferrer",variant:"outlined",size:"small",startIcon:t.includes("meet")||t.includes("zoom")?e.jsx(le,{}):e.jsx(ie,{}),children:o})}catch{return null}};function fe({game:t}){const a=$(),{t:o}=z(),n=t.dateTime.toDate(),s=new Date().toDateString()===n.toDateString(),l=n.getTime()-new Date().getTime()<1440*60*1e3&&n>new Date;return e.jsxs(L,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(L,{size:12,children:e.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(U,{fontSize:"small",color:s?"secondary":"action",sx:{opacity:s?1:.7}}),e.jsxs(j,{sx:{display:"flex",gap:2},children:[e.jsx(x,{variant:"body2",fontWeight:s?"bold":"normal",children:n.toLocaleString([],{weekday:"short",month:"short",day:"numeric"})}),e.jsx(x,{variant:"body2",color:"text.secondary",children:n.toLocaleString([],{hour:"numeric",minute:"2-digit"})})]}),l&&e.jsx(H,{label:o("soon"),size:"small",color:"primary",sx:{height:20,fontSize:"0.7rem",ml:1,borderRadius:1,fontWeight:"bold",backgroundColor:p(a.palette.success.main,.8)}})]})}),e.jsx(L,{size:12,children:e.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.url?ge(t.url):e.jsx(x,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic",fontSize:"0.85rem"},children:o("noLinkProvided")}),e.jsx(he,{title:o("calendar.gameTitle"),date:n,url:t.url,downloadIcs:xe,buttonSx:{ml:1}})]})})]})}function $e({open:t,close:a,isMobile:o}){const{t:n}=z(),[s,l]=k.useState(""),{schedule:i,addToSchedule:f}=J(),d=W().add(2,"week"),r=$(),D=k.useCallback(()=>{l(null)},[]),v=k.useCallback(h=>{h.preventDefault();const S=h.currentTarget,g=S.elements.namedItem("date-time"),c=new Date(g.value),u=S.elements.namedItem("link").value;if(!c||!(c instanceof Date)){l(n("scheduleValidation.selectDateTime"));return}if(c<W().toDate()){l(n("scheduleValidation.selectFutureDateTime"));return}if(i.find(E=>E.dateTime.toDate().toUTCString()===c.toUTCString())){l(n("scheduleValidation.gameAlreadyScheduled"));return}if(c>d.toDate()){l(n("scheduleValidation.selectWithinTwoWeeks"));return}if(u&&!u.startsWith("http")){l(n("scheduleValidation.enterValidUrl"));return}f(c,u),S.reset()},[i,f,d,n]);return e.jsx(e.Fragment,{children:e.jsxs(de,{dateAdapter:pe,children:[e.jsx(Y,{fullScreen:o,open:t,onClose:a,maxWidth:"md",children:e.jsxs("form",{onSubmit:v,children:[e.jsxs(K,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(F,{color:"primary"}),e.jsx(x,{variant:"h5",component:"span",fontWeight:"bold",children:e.jsx(R,{i18nKey:"schedule"})}),e.jsx(X,{close:a})]}),e.jsxs(q,{children:[e.jsxs(N,{elevation:3,sx:{mb:4,background:p(r.palette.primary.main,.05),border:`1px solid ${p(r.palette.primary.main,.1)}`,borderRadius:2,overflow:"visible",position:"relative"},children:[e.jsx(P,{title:e.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(U,{color:"primary"}),e.jsx(x,{variant:"h6",fontWeight:"bold",children:n("upcomingGames")})]}),sx:{pb:1,borderBottom:`1px solid ${p(r.palette.divider,.1)}`}}),e.jsx(O,{sx:{p:2},children:i.length?e.jsx(V,{spacing:2,children:i?.map(h=>e.jsx(Q,{elevation:1,sx:{p:1.5,borderRadius:1.5},children:e.jsx(fe,{game:h})},h.id))}):e.jsxs(j,{sx:{p:3,textAlign:"center",color:p(r.palette.text.primary,.6),borderRadius:1,background:p(r.palette.background.paper,.5)},children:[e.jsx(x,{variant:"body1",children:n("noPlannedGames")}),e.jsx(x,{variant:"body2",sx:{mt:1,fontSize:"0.85rem"},children:n("scheduleFirstGame")})]})})]}),e.jsxs(N,{elevation:2,sx:{background:p(r.palette.background.paper,.7),borderRadius:2},children:[e.jsx(P,{title:e.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ce,{color:"secondary"}),e.jsx(x,{variant:"h6",fontWeight:"bold",children:e.jsx(R,{i18nKey:"scheduleGame"})})]}),sx:{pb:1,borderBottom:`1px solid ${p(r.palette.divider,.1)}`}}),e.jsx(O,{children:e.jsxs(V,{spacing:3,sx:{mt:1},children:[e.jsx(me,{name:"date-time",label:n("dateTime"),closeOnSelect:!1,disablePast:!0,maxDate:d,timeSteps:{minutes:30},sx:{width:"100%"},slotProps:{textField:{variant:"outlined",fullWidth:!0}}}),e.jsx(Z,{label:n("camUrl"),variant:"outlined",name:"link",fullWidth:!0,placeholder:"https://...",helperText:n("optionalLinkHelper")}),e.jsx(M,{variant:"contained",type:"submit",fullWidth:!0,size:"large",startIcon:e.jsx(U,{}),sx:{mt:2,py:1.2,borderRadius:1.5,fontWeight:"bold",textTransform:"none",boxShadow:r.shadows[4],"&:hover":{boxShadow:r.shadows[8]}},children:e.jsx(R,{i18nKey:"schedule"})})]})})]})]})]})}),e.jsx(ee,{open:!!s,close:D,children:s})]})})}export{$e as default};
//# sourceMappingURL=index.tsx-CVBS639N.js.map
