import{am as G,r as s,ad as W,as as R,j as a,M as V,at as q,au as i,av as d,aw as g,ax as n,aa as x,z as U,Q as h,a1 as Q,T as H,y as J,x as X,ay as Y,ab as Z}from"./chunk-C6Pi8TK2.js";import{u as _}from"./chunk-Dfz0O4C-.js";import{u as $}from"./chunk-GcFiVWk3.js";import{u as aa,l as N}from"./chunk-BOGMcbnZ.js";import{u as ea}from"./chunk-BHOpngOq.js";import{e as sa}from"../assets/index-CrMGNACz.js";import{N as na}from"./chunk-DTgB_MJ6.js";import ta from"./index.tsx-uTw_DTQv.js";import{A as ia}from"./chunk-DCPr_d17.js";import{a as ra,b as p}from"./chunk-BhAE5QJ2.js";import"./chunk-gA50YDka.js";import"./chunk-qOLLNyCc.js";import"./chunk-DwZ1iRu-.js";import"./chunk-C7PvMB7v.js";import"./chunk-D2GT55zG.js";import"./chunk-DT32YDKJ.js";function Na(){const{i18n:r,t:v}=G(),{login:j,user:w}=_(),[S,o]=s.useState(!1),[D,y]=s.useState("login"),[f,b]=s.useState(!1),I=()=>{y("login"),o(!0)},K=()=>{y("register"),o(!0)},A=W(),[z]=R(),P=!!z.get("importBoard"),u=A.id??"PUBLIC",k=ea(),c=$("sm"),[l,M]=s.useState(w?.displayName||""),[L,C]=aa(),m=s.useCallback(async e=>{e.preventDefault(),await C({...L,displayName:l,room:u}),await j(l)},[l,j,u,L,C]),O=s.useCallback(async e=>{e.key==="Enter"&&await m(e)},[m]),B=r.resolvedLanguage||"en",E=s.useCallback(async e=>{const t=e.target.value;b(!0);try{await sa(t),await r.changeLanguage(t)}catch(T){console.error("Error changing language:",T),await r.changeLanguage(t)}finally{b(!1)}},[r]),F=s.useMemo(()=>Object.entries(N).map(([e,t])=>a.jsx(V,{value:e,children:t.label},e)),[N]);return a.jsxs(a.Fragment,{children:[a.jsx(na,{room:u,playerList:k}),a.jsxs(q,{maxWidth:"sm",sx:{mt:8},children:[a.jsx(i,{container:!0,flexDirection:"column",children:a.jsx(d,{className:"unauthenticated-card",children:a.jsxs(g,{children:[a.jsx("h2",{className:"setup",children:a.jsx(n,{i18nKey:"setup"})}),a.jsxs(x,{component:"form",method:"post",onSubmit:m,className:"settings-box",children:[a.jsx(U,{fullWidth:!0,id:"displayName",label:v("displayName"),value:l,onChange:e=>M(e.target.value),required:!0,autoFocus:!0,onKeyDown:e=>O(e),margin:"normal"}),a.jsx(h,{variant:"contained",type:"submit",sx:{mr:1},fullWidth:!0,children:P?a.jsx(n,{i18nKey:"import"}):a.jsx(n,{i18nKey:"anonymousLogin"})}),a.jsx(Q,{sx:{my:2},children:a.jsx(H,{variant:"body2",color:"text.secondary",children:a.jsx(n,{i18nKey:"or",children:"OR"})})}),a.jsxs(x,{sx:{display:"flex",justifyContent:"space-evenly"},children:[a.jsx(h,{variant:"outlined",startIcon:a.jsx(ra,{}),onClick:I,sx:{mr:1},children:a.jsx(n,{i18nKey:"signIn"})}),a.jsx(h,{variant:"outlined",onClick:K,children:a.jsx(n,{i18nKey:"createAccount"})})]})]})]})})}),a.jsx(i,{container:!0,sx:{mt:1},children:a.jsx(i,{className:"language",children:a.jsx(d,{className:"unauthenticated-card",children:a.jsx(g,{className:"translation-card-content",children:a.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:2},children:[!c&&a.jsx(p,{}),a.jsxs(J,{size:"small",sx:{minWidth:160,flexGrow:1},children:[a.jsxs(X,{id:"unauth-language-label",sx:{display:"flex",alignItems:"center",fontSize:"0.875rem"},children:[c&&a.jsx(p,{sx:{mr:.5,fontSize:"1rem"}}),a.jsx(n,{i18nKey:"language"})]}),a.jsx(Y,{labelId:"unauth-language-label",id:"unauth-language-select",value:B,disabled:f,label:a.jsxs(a.Fragment,{children:[c&&a.jsx(p,{sx:{fontSize:"1rem"}}),a.jsx(n,{i18nKey:"language"})]}),onChange:E,size:"small",inputProps:{endAdornment:f&&a.jsx(Z,{size:16})},children:F})]})]})})})})}),a.jsx(i,{container:!0,sx:{mt:1},children:a.jsx(i,{className:"language",children:a.jsx(d,{className:"unauthenticated-card",children:a.jsx(g,{children:a.jsx(ta,{})})})})})]}),a.jsx(ia,{open:S,close:()=>o(!1),initialView:D})]})}export{Na as default};
