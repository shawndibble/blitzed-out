const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/chunk-Bf-e8bbj.js","js/chunk-C6Pi8TK2.js","js/chunk-gA50YDka.js","js/index.tsx-tbmjocBq.js","js/chunk-C7PvMB7v.js","js/chunk-C7wxs7ys.js","js/chunk-BmWi31QJ.js","js/chunk-BhAE5QJ2.js","js/chunk-Dfz0O4C-.js","assets/index-CrMGNACz.js","js/chunk-DwZ1iRu-.js","js/chunk-BOGMcbnZ.js","js/chunk-6l9AHZes.js","js/chunk-GcFiVWk3.js","js/chunk-D2GT55zG.js","js/chunk-D8DJqpIn.js","js/chunk-D558-eaS.js","js/chunk-B4PEA_xj.js","js/chunk-qOLLNyCc.js","js/index.tsx-supiABQE.js","js/chunk-ipf7_Nij.js","js/chunk-DT32YDKJ.js","js/chunk-CDN5XWnr.js","js/index.tsx-q-xdrTVS.js","js/index.tsx-CLfWeGB_.js","js/chunk-D-ZjOuMB.js","js/chunk-BHOpngOq.js","js/index.tsx-COCBPDLe.js","js/chunk-DTgB_MJ6.js"])))=>i.map(i=>d[i]);
import{_ as U,p as se,d as q,l as H,a as ue,s as ce,b as de,g as me,c as fe,u as pe,f as ge}from"../assets/index-CrMGNACz.js";import{am as B,r as i,j as e,aA as he,aB as xe,E as ye,aa as _,T as L,ax as E,a1 as X,Q as P,a7 as w,ac as be,as as je,az as I,O as Se,K as ve,P as Ce,aC as Re,n as Me,M as Te,W as ke,aD as De,Y as Ne,aE as Ae,aF as we,z as K,A as Be,R as Oe,aG as _e,ad as Le,ab as Ee}from"./chunk-C6Pi8TK2.js";import Pe from"./index.tsx-CLfWeGB_.js";import{C as Ie}from"./chunk-DT32YDKJ.js";import{u as ne,C as $e,G as Ge,s as Fe}from"./chunk-ipf7_Nij.js";import{e as ae,a as Ue,i as G,b as re}from"./chunk-C7PvMB7v.js";import{u as z}from"./chunk-BOGMcbnZ.js";import{t as ze}from"./chunk-C7wxs7ys.js";import{u as V}from"./chunk-Dfz0O4C-.js";import{u as Q}from"./chunk-qOLLNyCc.js";import{u as oe,g as Ve,R as Ke}from"./chunk-D-ZjOuMB.js";import{T as ie}from"./chunk-BmWi31QJ.js";import We from"./index.tsx-COCBPDLe.js";import{u as Je}from"./chunk-BHOpngOq.js";import{u as He,s as Qe}from"./chunk-D558-eaS.js";import{i as Ye}from"./chunk-6l9AHZes.js";import{u as le}from"./chunk-gA50YDka.js";import{u as qe}from"./chunk-GcFiVWk3.js";import{N as Z}from"./chunk-DTgB_MJ6.js";import{A as Xe,C as ee,c as Ze}from"./chunk-BhAE5QJ2.js";const et=t=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:800,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,[t.breakpoints.down("sm")]:{width:"90%"}});function tt({open:t,text:s="",displayName:a="",handleClose:r,stopAutoClose:o=()=>null,nextPlayer:u=null,isMyMessage:l=!1}){const{t:d}=B(),[p,g]=i.useState(!1),b=s?.match(/#\d*:.*(?=\n)/gs),v=ae(s)||"",x=Ue(s,d("seconds")),{timeLeft:m,togglePause:h}=ne(20,!1),[f,n]=i.useState(!0),c=u?.displayName,S=i.useCallback(()=>{h(),o(),n(!1)},[h,o,n]),j=i.useCallback(()=>{S(),g(!0)},[S]),D=i.useCallback(()=>{g(!1)},[]);return e.jsxs("div",{children:[e.jsx(he,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:t,onClose:r,slots:{backdrop:xe},slotProps:{backdrop:{timeout:500}},children:e.jsx(ye,{in:t,children:e.jsxs(_,{sx:et,children:[e.jsx(L,{id:"transition-modal-title",variant:"h6",component:"h2",children:`${b} ${d("for")} ${a}`}),e.jsx(Ie,{close:r}),e.jsx(L,{id:"transition-modal-description",variant:"h4",sx:{mt:2},children:v}),e.jsx("br",{}),e.jsx(L,{variant:"caption",children:f?e.jsx(E,{i18nKey:"autoCloseModal",values:{timeLeft:m}}):e.jsx(E,{i18nKey:"autoCloseStopped"})}),e.jsx("br",{}),x?.length&&e.jsxs(e.Fragment,{children:[e.jsx(E,{i18nKey:"timers"}),x.map(y=>e.jsx($e,{textString:y,preventParentClose:S},y))]}),!!u&&e.jsxs(_,{textAlign:"center",children:[e.jsx(X,{style:{margin:"1rem 0 0.5rem"}}),e.jsx(L,{variant:"body1",children:u.isSelf?e.jsx(E,{i18nKey:"yourTurn"}):e.jsx(E,{i18nKey:"nextPlayersTurn",values:{player:c}})})]}),!!l&&s.includes(d("finish"))&&e.jsxs(_,{textAlign:"center",children:[e.jsx(X,{style:{margin:"1rem 0 0.5rem"}}),e.jsx(P,{onClick:j,children:e.jsx(L,{children:d("playAgain")})})]})]})})}),e.jsx(Ge,{isOpen:p,close:D})]})}const st="/audio/roll-dice-DysgIh_A.mp3",nt="/audio/message-CBVROrdp.mp3";function F(){return F=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)({}).hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},F.apply(null,arguments)}function at(t,s){if(t==null)return{};var a={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(s.indexOf(r)!==-1)continue;a[r]=t[r]}return a}function rt(t){i.useEffect(t,[])}var ot=["id","volume","playbackRate","soundEnabled","interrupt","onload"];function te(t,s){var a={},r=a.volume,o=r===void 0?1:r,u=a.playbackRate,l=u===void 0?1:u,d=a.soundEnabled,p=d===void 0?!0:d,g=a.interrupt,b=g===void 0?!1:g,v=a.onload,x=at(a,ot),m=w.useRef(null),h=w.useRef(!1),f=w.useState(null),n=f[0],c=f[1],S=w.useState(null),j=S[0],D=S[1],y=function(){typeof v=="function"&&v.call(this),h.current&&c(this.duration()*1e3),D(this)};rt(function(){return U(()=>import("./chunk-Bf-e8bbj.js").then(C=>C.h),__vite__mapDeps([0,1,2])).then(function(C){if(!h.current){var O;m.current=(O=C.Howl)!==null&&O!==void 0?O:C.default.Howl,h.current=!0,new m.current(F({src:Array.isArray(t)?t:[t],volume:o,rate:l,onload:y},x))}}),function(){h.current=!1}}),w.useEffect(function(){m.current&&j&&D(new m.current(F({src:Array.isArray(t)?t:[t],volume:o,onload:y},x)))},[JSON.stringify(t)]),w.useEffect(function(){j&&(j.volume(o),x.sprite||j.rate(l))},[j,o,l]);var R=w.useCallback(function(C){typeof C>"u"&&(C={}),!(!j||!p&&!C.forceSoundEnabled)&&(b&&j.stop(),C.playbackRate&&j.rate(C.playbackRate),j.play(C.id))},[j,p,b]),M=w.useCallback(function(C){j&&j.stop(C)},[j]),T=w.useCallback(function(C){j&&j.pause(C)},[j]),N=[R,{sound:j,stop:M,pause:T,duration:n}];return N}async function it(t,s){try{await ze.speak(t,s,-2)}catch(a){console.error("TTS failed:",a)}}function lt(){const{i18n:t}=B(),{user:s}=V(),{messages:a}=Q(),[r,o]=i.useState(!1),[u]=te(st),[l]=te(nt),[d]=z(),{playerDialog:p,othersDialog:g,mySound:b,otherSound:v,chatSound:x,readRoll:m,voicePreference:h}=d||{},f=i.useMemo(()=>[...a].pop(),[a]),n=i.useCallback(async T=>{if(T)try{await it(T,h)}catch(N){console.error("Failed to speak text:",N)}},[h]),c=i.useMemo(()=>{if(!f?.timestamp)return!1;const T=se(f.timestamp);return T?q(T).diff(q(),"seconds")>=-2:!1},[f]),S=i.useMemo(()=>f?.uid===s?.uid,[f,s]),j=!!(p&&S),D=!!(g&&!S),y=(S&&b||!S&&v)&&f?.type==="actions",R=S&&m&&f?.type==="actions",M=x&&f?.type==="chat";return i.useEffect(()=>{if(Fe(t.resolvedLanguage||t.language),c&&f?.type==="actions"&&(j||D)&&o(f),c&&f){if(y&&u(),R){const T=ae(f?.text);n(T)}M&&l()}},[t.resolvedLanguage,t.language,f,S,j,D,y,R,M,u,l,n,c]),{message:r,setMessage:o,isMyMessage:!!S}}const ut=()=>{const{t}=B(),{message:s,setMessage:a,isMyMessage:r}=lt(),o=oe(s),u=i.useRef(void 0);i.useEffect(()=>(s&&(u.current=setTimeout(()=>a(!1),21e3)),()=>{u.current&&clearTimeout(u.current)}),[s,a]);const l=i.useCallback(()=>{u.current&&clearTimeout(u.current),a(!1)},[a]),d=i.useCallback(()=>{u.current&&clearTimeout(u.current)},[]);return!s||typeof s!="object"||!s.text||s.text.includes(t("start"))?null:e.jsx(tt,{text:s?.text,displayName:s?.displayName,open:!0,handleClose:l,stopAutoClose:d,nextPlayer:o,isMyMessage:r})};function ct(){const{messages:t}=Q(),[s,a]=i.useState(!1),r=H(t,"actions"),o=ue(t),u=oe(r),{playerDialog:l,othersDialog:d}=z()[0];if(i.useEffect(()=>{!u||o!==r||a(!0)},[u,o,r]),!r||!u)return null;const p=u?.isSelf;return!d&&p||!l&&!p?e.jsx(ie,{open:s,close:()=>a(!1),type:p?"error":"info",vertical:"top",horizontal:"center",disableAutoHide:!0,children:p?e.jsx(E,{i18nKey:"yourTurn"}):e.jsx(E,{i18nKey:"playersTurn",values:{player:u.displayName}})}):null}const{t:dt}=be;function mt(t){return t.replace(/(?:^|\.\s|!\s)(\w)/g,s=>s.toUpperCase())}function ft(t,s,a){const r=Math.random(),o=t.includes("{dom}")&&t.includes("{sub}"),u=s==="vers";function l(d){if(d==="{player}")return!0;const p=d==="{dom}"||d==="{sub}";if(!u&&d===`{${s}}`||!o&&u&&p)return!0;if(o&&u){const g=d==="{dom}"&&r<.5,b=d==="{sub}"&&r>=.5;return g||b}return!1}return t.replace(/{(player|dom|sub)}/g,d=>l(d)?a:d)}function pt(t,s,a){const r=ft(t,s,a).replace(/{(dom|sub)}/g,dt("anotherPlayer"));return mt(r)}function gt(t){const s=t.filter(o=>o).map(o=>o.split(": ")),a=[];s.forEach((o,u)=>{if(Number(o[1])===0)return;const l=Array(Number(o[1])).fill(u);a.push(...l)});const r=a[Math.floor(Math.random()*a.length)];return s.map(([o])=>o)[r]?.replace(/(\r\n|\n|\r)/gm,"")||""}function ht(t,s,a){if(!t)return"";const r=t.split("%");return r.length<=1?pt(t,s||"",a||""):gt(r)}function xt(t,s,a=[]){const{user:r}=V(),{t:o}=B(),u=Je(),l=a.length,[d,p]=i.useState(a[0]||{}),g=l-1,b=i.useRef(0),v=i.useCallback((m,h,f,n)=>{if(!m){console.error("Tile not found at location:",f);return}let c="";const S=ht(m.description||"",m.role||"",r?.displayName||"");h!==-1&&(c+=`${o("roll")}: ${h}
`),c+=`#${f+1}: ${m.title||o("unknownTile")}
`,c+=`${o("action")}: ${S}`,ce({room:t,user:r,text:n?n+c:c,type:"actions"})},[t,r,o]),x=i.useCallback(m=>{if(m===-1)return{preMessage:`${o("restartingGame")}
`,newLocation:0};const h=u.find(n=>n.isSelf)?.location||0;if(h===g)return{preMessage:`${o("alreadyFinished")}
`,newLocation:m};const f=m+h;return f>=g?{newLocation:g}:{newLocation:f}},[o,u,g]);return i.useEffect(()=>{const m=Array.isArray(s.value)?s.value[0]:s.value,h=s.time;if(m===0||h<=b.current)return;b.current=h;const{preMessage:f,newLocation:n}=x(m);n>=0&&n<a.length&&a[n]?(p({...a[n],index:n}),v(a[n],m,n,f)):console.error(`Invalid location or missing tile: ${n}, gameBoard length: ${a.length}`)},[s,a,v,x]),{tile:d,playerList:u}}function yt(t,s){const{user:{displayName:a}}=V(),[r,o]=i.useState(null),[u,l]=i.useState(a||"");i.useEffect(()=>{(r!==t||a!==u)&&(de({newRoom:t,oldRoom:r,newDisplayName:a||"",oldDisplayName:u,removeOnDisconnect:s||t?.toUpperCase()==="PUBLIC"}),o(t),l(a||""))},[t,a,r,u,s])}function bt(t,s){const a=i.useRef(void 0);return i.useCallback((...r)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>t(...r),s)},[t,s])}function jt(t,s){const{i18n:r,t:o}=B(),{user:u}=V(),[l,d]=z(),p=le(()=>me(l?.gameMode)),{messages:g,isLoading:b}=Q(),[v,x]=i.useState("1d6"),[m,h]=i.useState(""),f=He(),n=i.useRef(!1),c=i.useRef(!0),S=i.useCallback(async(y,R=null)=>{if(!n.current){n.current=!0;try{const{gameMode:M,newBoard:T}=await f(y),N={formData:{...l,...y},user:u,customTiles:p,actionsList:await Ye(r.resolvedLanguage,M||"online"),tiles:T,title:o("settingsGenerated")};R&&(N.reason=o("rebuiltBoard",{messageUser:R})),await Qe(N)}finally{setTimeout(()=>{n.current=!1},500)}}},[l,u,p,r.resolvedLanguage,o,f]),j=i.useCallback(async()=>{l?.room!==t&&(await d({...l,room:t}),await S({...l,roomUpdated:!0,room:t}))},[l,t,d,S]),D=bt(j,200);return i.useEffect(()=>{if(!(b||!g.length))try{const y=H(g,"room");if(y){const R=JSON.parse(y.settings),{roomDice:M,roomBackgroundURL:T,roomTileCount:N}=R;let C="1d6";!G(t)&&M&&(C=M),x(C),h(T||"");const O=se(y.timestamp),A=(O?Date.now()-O.getTime():1/0)<300*1e3;y.uid!==u?.uid&&N&&s?.length&&N!==s?.length&&A&&!n.current&&S(R,y.displayName)}}catch(y){console.error("Error processing room message:",y)}},[g,b,t,u,s,S]),i.useEffect(()=>{if(!b)try{const y=H(g,"room");if(y||!G(t)&&!y||G(t)&&!re(l?.gameMode||""))return;if(c.current){c.current=!1,l?.roomBackgroundURL?.length&&h(l.roomBackgroundURL);return}const R=t!==l?.room,M=l&&typeof l.room<"u",T=s?.length,N=!n.current;if(M&&R&&T&&N){D();return}l?.roomBackgroundURL?.length&&h(l.roomBackgroundURL)}catch(y){console.error("Error in room change effect:",y)}},[t,l,s,g,b,D]),{roller:v,roomBgUrl:m}}function St(t,s){const[a,r]=i.useState(null),[o,u]=je(),l=o.get("importBoard"),{t:d}=B(),p=i.useCallback(()=>{r(null)},[]),g=i.useCallback(x=>{try{const m=JSON.parse(x);return Array.isArray(m)?m:null}catch{return null}},[]),b=i.useCallback(x=>{try{return x?JSON.parse(x):{}}catch{return{}}},[]),v=i.useCallback(async()=>{if(u({}),!l)return;const x=await fe(l);if(!x?.gameBoard)return r(d("failedBoardImport"));const m=g(x.gameBoard);if(!m)return r(d("failedBoardImport"));const h=x?.title!==d("settingsGenerated")?x.title:d("importedBoard");pe({...x,title:h,tiles:m,isActive:1});const f=b(x?.settings);s({...t,...f}),a!==d("updated")&&r(d("updated"))},[l,g,b,t,s,d,a,u]);return i.useEffect(()=>{l&&v()},[l,v]),[a,p]}const vt=({selectedRoll:t,handleMenuItemClick:s})=>{const[a,r]=i.useState(!1),o=i.useRef(null),u=()=>{r(p=>!p)},l=p=>{p.target instanceof Node&&o.current?.contains(p.target)||r(!1)},d=new Map;return d.set("restart",I("restart")).set("manual",I("manual")).set("30",I("auto30")).set("60",I("auto60")).set("90",I("auto90")).set("custom",I("setTimer")),e.jsxs(e.Fragment,{children:[e.jsx(P,{size:"small","aria-controls":a?"split-button-menu":void 0,"aria-expanded":a?"true":void 0,"aria-label":"select roll options","aria-haspopup":"menu",onClick:u,ref:o,children:e.jsx(Xe,{})}),e.jsx(Se,{sx:{zIndex:1},open:a,anchorEl:o.current,transition:!0,disablePortal:!0,placement:"top-end",children:({TransitionProps:p})=>e.jsx(ve,{...p,style:{transformOrigin:"right bottom"},children:e.jsx(Ce,{children:e.jsx(Re,{onClickAway:l,children:e.jsx(Me,{id:"split-button-menu",autoFocusItem:!0,children:Array.from(d).map(([g,b])=>e.jsx(Te,{selected:g===t,onClick:()=>s(g),children:b},g))})})})})})]})},$=10,Ct=({isOpen:t,onClose:s,onSubmit:a})=>{const{t:r}=B(),[o,u]=i.useState(30),[l,d]=i.useState(!1),[p,g]=i.useState(!1),[b,v]=i.useState(20),[x,m]=i.useState(60),h=()=>{if(p){let n=Number.parseInt(String(b),10),c=Number.parseInt(String(x),10);Number.isNaN(n)?(n=l?1:$,v(n)):!l&&n<$&&(n=$),Number.isNaN(c)||c<n?(c=n,m(c)):c===0&&(c=180,m(c)),l&&(n*=60,c*=60);const S=Math.floor(Math.random()*(c-n+1))+n;a(S,{isRange:!0,min:n,max:c})}else{let n=Number.parseInt(String(o),10);Number.isNaN(n)?(n=l?1:$,u(n)):l?n*=60:n<$&&(n=$),a(n,{isRange:!1})}s()},f=()=>{u(n=>{const c=Number.parseFloat(String(n));return Number.isNaN(c)||c<=0?n:l?(c*60).toString():(c/60).toString()}),v(n=>{const c=Number.parseFloat(String(n));return Number.isNaN(c)||c<=0?n:l?(c*60).toString():(c/60).toString()}),m(n=>{const c=Number.parseFloat(String(n));return Number.isNaN(c)||c<=0?n:l?(c*60).toString():(c/60).toString()}),d(n=>!n)};return e.jsxs(ke,{open:t,onClose:s,maxWidth:"xs",children:[e.jsx(De,{children:r("setTimer")}),e.jsxs(Ne,{children:[e.jsx(_,{sx:{mb:2},children:e.jsx(Ae,{control:e.jsx(we,{checked:p,onChange:n=>g(n.target.checked)}),label:r("useRandomRange")})}),p?e.jsxs(_,{children:[e.jsx(L,{variant:"subtitle2",children:r("randomTimerRange")}),e.jsxs(_,{sx:{display:"flex",gap:2,my:2},children:[e.jsx(K,{label:r("minValue"),type:"number",value:b,onChange:n=>{const c=parseInt(n.target.value,10);v(c)},fullWidth:!0}),e.jsx(L,{variant:"body1",sx:{alignSelf:"center"},children:"-"}),e.jsx(K,{label:r("maxValue"),type:"number",value:x,onChange:n=>{const c=parseInt(n.target.value,10);m(Math.max(Number(b),c))},fullWidth:!0})]}),e.jsxs(P,{onClick:f,variant:"outlined",size:"small",children:[r(l?"minutes":"seconds"),e.jsx(ee,{sx:{ml:1}})]})]}):e.jsx(K,{autoFocus:!0,type:"number",value:o,onChange:n=>u(n.target.value),sx:{width:"15rem"},slotProps:{input:{endAdornment:e.jsx(Be,{position:"end",children:e.jsxs(P,{onClick:f,variant:"text",children:[r(l?"minutes":"seconds"),e.jsx(ee,{sx:{ml:1}})]})})}}})]}),e.jsxs(Oe,{children:[e.jsx(P,{onClick:s,children:r("cancel")}),e.jsx(P,{onClick:h,children:r("set")})]})]})};function Rt(t){return/^-?\d+$/.test(String(t))}function W(t,s,a){let r=0;for(let o=0;o<Number(t);o+=1)r+=Math.floor(Math.random()*Number(s))+1;a(r)}const Mt=i.memo(function({setRollValue:s,dice:a,isEndOfBoard:r}){const{t:o}=B(),[u,l]=i.useState(!1),[d,p]=i.useState("manual"),[g,b]=i.useState(0),[v,x]=i.useState(o("roll")),{timeLeft:m,setTimeLeft:h,togglePause:f,isPaused:n}=ne(g),[c,S]=i.useState(!1),[j,D]=i.useState({isRange:!1,min:30,max:120}),y=i.useCallback(k=>{s(k)},[s]),[R,M]=a.split("d"),T=()=>{if(d==="manual"){W(R,M,y),l(!0),setTimeout(()=>l(!1),4e3);return}n&&m===g&&W(R,M,y),f()},N=i.useCallback(k=>{if(k==="restart"){y(-1);return}if(p(String(k)),k==="custom"){S(!0);return}if(Rt(k)){n||f();const A=Number(k);b(A),h(A)}},[n,h,f,y]),C=()=>{S(!1)},O=(k,A={isRange:!1})=>{n||f(),b(k),h(k),D({...j,...A}),p("custom"),S(!1)};return i.useEffect(()=>{r&&f()},[r,f]),i.useEffect(()=>{if(u)x(o("wait"));else if(d==="manual")x(o("roll"));else if(n)x(`${o("play")} (${m})`);else if(m>0)x(`${o("pause")} (${m})`);else if(m===0&&!n&&d!=="manual"){W(R,M,y);let k;if(j.isRange){const{min:A,max:Y}=j;k=Math.floor(Math.random()*(Y-A+1))+A}else k=g;b(k),h(k),x(`${o("pause")} (${k})`)}},[u,d,m,n,g,j,o,R,M,y,h]),e.jsxs(e.Fragment,{children:[e.jsxs(_e,{variant:"contained",className:"dice-roller",children:[e.jsxs(P,{"aria-label":o("roll"),onClick:T,disabled:u,size:"large",children:[e.jsx(Ze,{sx:{mr:1}}),v]}),e.jsx(vt,{selectedRoll:d,handleMenuItemClick:N})]}),e.jsx(Ct,{isOpen:c,onClose:C,onSubmit:O})]})}),Tt=i.lazy(()=>U(()=>import("./index.tsx-tbmjocBq.js"),__vite__mapDeps([3,1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),kt=i.lazy(()=>U(()=>import("./index.tsx-supiABQE.js"),__vite__mapDeps([19,1,2,4,8,9,10,7,18,16,11,17,12,13,6,14,15,20,21,5,22]))),Dt=i.lazy(()=>U(()=>import("./index.tsx-q-xdrTVS.js"),__vite__mapDeps([23,1,2,8,9,10,7,22,24,6,21,20,13,16,4,11,17,18,5,12,14,15,25,26,27,28])));function J(){return e.jsx(_,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100px",children:e.jsx(Ee,{size:24})})}function Nt(){const t=Le(),s=t.id||"",a=qe(),{t:r}=B(),[o,u]=z();yt(s,o?.roomRealtime);const[l,d]=i.useState({value:0,time:0}),p=le(ge)?.tiles,g=i.useCallback(T=>{d({value:T,time:Date.now()})},[]),{playerList:b,tile:v}=xt(s,l,p),{roller:x,roomBgUrl:m}=jt(s,p),[h,f]=St(o,u);if(!p||!p.length||!Object.keys(o).length||G(s)&&!re(o.gameMode))return e.jsxs(e.Fragment,{children:[e.jsx(Z,{room:t.id,playerList:b}),e.jsx(We,{open:!0})]});const{isVideo:n,url:c}=Ve(o,s,m),S=n?"video-adjust":"",{background:j,roomBackground:D}=o,y=!G(s)&&D!=="app"||j!=="color",R=e.jsx(i.Suspense,{fallback:e.jsx(J,{}),children:e.jsx(Dt,{playerList:b,isTransparent:y,gameBoard:p,settings:o})}),M=e.jsx("div",{className:"messages-container",children:e.jsxs(i.Suspense,{fallback:e.jsx(J,{}),children:[e.jsx(kt,{room:s,isTransparent:y,currentGameBoardSize:p.length}),e.jsx(Pe,{room:s,isTransparent:y})]})});return e.jsxs(e.Fragment,{children:[e.jsx(Z,{room:s,playerList:b}),e.jsx(Mt,{setRollValue:g,dice:x,isEndOfBoard:v?.index!==void 0&&v.index>=(p?.length??0)-1}),e.jsx(Ke,{isVideo:n,url:c}),e.jsx(ct,{}),a?e.jsx(i.Suspense,{fallback:e.jsx(J,{}),children:e.jsx(Tt,{tab1:R,tab2:M})}):e.jsxs(_,{className:`desktop-container ${S}`,children:[R,M]}),e.jsx(ut,{}),e.jsx(ie,{type:h===r("updated")?"success":"error",open:!!h,close:f,children:h})]})}const Yt=Object.freeze(Object.defineProperty({__proto__:null,default:Nt},Symbol.toStringTag,{value:"Module"}));export{pt as a,Yt as i};
