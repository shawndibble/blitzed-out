import{r as l,a7 as m,au as g}from"./chunk-CJVoFoqV.js";import{M as y,o as h}from"./chunk-KX2hDaPG.js";import{A as b}from"./chunk-DvmTZbFC.js";import{u as w}from"./chunk-Buz77Oyr.js";(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"8380c411008c81db0d03192c8a87321e8e40e84f"}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6a36daa9-ed95-49be-939e-0647c5795385",e._sentryDebugIdIdentifier="sentry-dbid-6a36daa9-ed95-49be-939e-0647c5795385")})()}catch{}function T(e){const t=e?.replace(/([A-Z])/g," $1").trim();return t?t.charAt(0).toUpperCase()+t.slice(1):""}function L(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}function _(e){const t=e?.split(/\r?\n/)||[];return t[t.length-1]?.split(":")[1]}function D(e,t){const i=new RegExp(`\\d+\\s${t}`,"g");return e.match(i)?.filter((o,c,u)=>u.indexOf(o)===c)}function N(e){return e?.toUpperCase()==="PUBLIC"}function P(e){return e==="online"}function x(){const e=l.useContext(b);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function v(){const e=m.useContext(y);if(!e)throw new Error("MessagesContext's value is undefined.");return e}function A(e){const t=h(e,"actions","DESC");return[...new Map(t.map(i=>[i.uid,i])).values()]}function R(){const{user:e}=x(),{messages:t,isLoading:i}=v(),{onlineUsers:o}=w();return l.useMemo(()=>{if(i||!e)return[];const u=A(t);return Object.values(o).map(s=>{const n=u.find(a=>a.uid===s.uid)?.text,d=/(?:#)[\d]*(?=:)/gs;let r=0;if(n&&n.match(d)){const a=n.match(d);a&&a[0]&&(r=Number(a[0].replace("#","")))}const f=r>0?r-1:r,p=!!n?.includes(g("finish"));return{displayName:s.displayName||"Unknown",uid:s.uid,isSelf:s.uid===e.uid,location:s.gameState?.location||f,isFinished:s.gameState?.isFinished||p,status:s.status||"away",lastActivity:s.lastSeen||new Date(0)}}).sort((s,n)=>s.isSelf?-1:n.isSelf?1:s.status==="active"&&n.status!=="active"?-1:n.status==="active"&&s.status!=="active"?1:s.displayName.localeCompare(n.displayName))},[e,o,t,i])}export{R as a,v as b,D as c,P as d,_ as e,L as f,T as g,N as i,x as u};
//# sourceMappingURL=chunk-arCWr7CA.js.map
