import{a9 as f,aa as d,ab as a,b as y,g as o}from"./chunk-Cd9zmNqH.js";import"./chunk-CGxrUmmO.js";import"./chunk-IKWv-kc7.js";import"./chunk-B02e1Wac.js";import"./chunk-B-WiPcoy.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{};e.SENTRY_RELEASE={id:"d2324bc05e2dad8cbb200b2c80ad08ee5be2e602"}}catch(t){}})();try{(function(){var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="379c02e3-8244-46b4-b67e-6923fd2d0779",e._sentryDebugIdIdentifier="sentry-dbid-379c02e3-8244-46b4-b67e-6923fd2d0779")})()}catch(e){}const s="blitzed-out-sync-recovery-status",l=f,b=50;let r=null;async function R(){return r?await r:(r=(async()=>{try{const e=g();return e!=null&&e.recoveryPerformed&&(e==null?void 0:e.version)===l?!1:await p()?(await d(),n(!0),!0):(n(!1),!1)}catch(e){return console.error("[Sync Recovery] Error during recovery:",e),!1}finally{r=null}})(),await r)}async function p(){try{const t=(await y({isDefault:!0})).length>0,i=(await o({})).length,c=(await o({isCustom:0,isEnabled:1})).length>0,u={noDefaultGroups:!t,fewTotalActions:i<b,noEnabledDefaults:!c};return Object.values(u).filter(Boolean).length>=2}catch(e){return console.error("[Sync Recovery] Error detecting corruption:",e),!1}}function g(){return a.getJSON(s)}function n(e){const t={version:l,recoveryPerformed:!0,detectedCorruption:e,recoveryTimestamp:Date.now()};a.setJSON(s,t)}export{R as runSyncRecovery};
//# sourceMappingURL=syncRecoveryService.ts-C6rcKb-9.js.map
