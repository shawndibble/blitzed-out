import{j as e,aa as f,ah as M,av as B,aw as z,aV as w,T as p,ax as g,U as R,r as h,A as se,Q as P,au as A,b6 as ie,aI as oe,z as re,y as ae,ay as ce,M as le,b7 as de,aP as ue,b8 as pe,az as q,b1 as L,b2 as F,b3 as G,a1 as Q,ab as xe,E as me,K as he,b9 as ge,ba as be,bb as je,ad as ye,as as fe,W as Se,aD as ve,Y as Ce}from"./chunk-D2_qQxSg.js";import{C as ke}from"./chunk-DFIsvTz4.js";import{u as Ae}from"./chunk-CmBVKN-k.js";import{K as we,N as Ie,O as Re,Q as Pe,R as V,T as Me}from"./chunk-DZ7Mr-wA.js";import{d as Te,e as U,b as Be,c as ze}from"./chunk-Df8Zq5RO.js";import{i as I,b as T}from"./chunk-C7PvMB7v.js";import{d as We}from"./chunk-D8BtDPHk.js";import{t as Ke,v as Oe,I as Ee}from"./chunk-C8C4XuLE.js";import{I as H,Y as Ne,G as Le}from"./chunk-mjp6v34K.js";import{u as Fe}from"./chunk-BT3enpNr.js";import"./chunk-CahDYY_a.js";import"../assets/index-BicJ8E66.js";import"./chunk-B4PEA_xj.js";import"./chunk-Bo4_NF39.js";import"./chunk-yLOK5aTh.js";import"./chunk-DHrS90Mu.js";import"./chunk-C7feziKp.js";import"./chunk-BXlYzlZ6.js";import"./chunk-DRvdNVj8.js";function E({children:n,justifyContent:s="space-evenly"}){return e.jsx(f,{sx:{mt:3,display:"flex",flexDirection:"row",justifyContent:s,alignItems:"center"},children:n})}function Y({isPublic:n,onClick:s,isSelected:r}){const{t:a}=M();return e.jsx(B,{sx:{cursor:"pointer",border:r?"3px solid":"1px solid",borderColor:r?"primary.main":"grey.300",backgroundColor:r?"primary.50":"background.paper",transform:r?"scale(1.02)":"scale(1)",transition:"all 0.2s ease-in-out","&:hover":{borderColor:"primary.main",boxShadow:r?4:2,transform:"scale(1.02)"}},onClick:s,children:e.jsx(z,{sx:{p:3},children:e.jsxs(w,{direction:"row",spacing:3,alignItems:"center",children:[e.jsx(f,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,borderRadius:"50%",backgroundColor:r?"primary.main":"primary.50",color:r?"primary.contrastText":"primary.main",transition:"all 0.2s ease-in-out"},children:n?e.jsx(we,{sx:{fontSize:28},"aria-label":"Public"}):e.jsx(Ie,{sx:{fontSize:28},"aria-label":"Private"})}),e.jsxs(w,{spacing:.5,flex:1,children:[e.jsxs(w,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(p,{variant:"h6",component:"h3",sx:{fontWeight:600},children:e.jsx(g,{i18nKey:n?"public":"private"})}),r&&e.jsx(R,{label:a("selected"),size:"small",color:"primary",sx:{fontSize:"0.75rem",fontWeight:500,height:20}})]}),e.jsx(p,{variant:"body1",color:"text.secondary",sx:{fontSize:"0.95rem"},children:e.jsx(g,{i18nKey:n?"publicRoomBenefit":"privateRoomBenefit"})})]})]})})})}function Ge({formData:n,setFormData:s,nextStep:r}){const a=Te(),{t:o}=M(),[t,l]=h.useState(!I(n.room)),[c,u]=h.useState(n.room?.toUpperCase()||""),d=async v=>{try{const m=Ke(),j=Oe(m,`rooms/${v}/uids`);return(await Ee(j)).exists()}catch(m){return console.warn("Error checking room existence:",m),!1}},i=h.useCallback(async()=>{const v=We("123456789ABCDEFGHJKLMNPQRSTUVWXYZ",5);let m,j=0;const O=10;do if(m=v(),j++,j>=O){console.warn("Max attempts reached for room ID generation, using generated ID");break}while(await d(m));return m},[]),x=h.useCallback(()=>{s({...n,room:"PUBLIC",gameMode:"online"}),l(!1)},[n,s]),S=h.useCallback(async()=>{if(I(n.room)){const v=await i();s({...n,room:v}),u(v.toUpperCase())}l(!0)},[n,s,i]),C=h.useCallback(v=>{s({...n,room:v,boardUpdated:!0})},[n,s]),y=h.useCallback(v=>{const m=v.target.value.toUpperCase();u(m)},[]),b=h.useCallback(()=>{C(c)},[C,c]),k=h.useCallback(v=>{v.key==="Enter"&&C(c)},[C,c]);function N(){a(n.room),r(I(n.room)?2:1)}const W=I(n.room);return e.jsxs(f,{sx:{m:1},children:[e.jsx(p,{variant:"h5",gutterBottom:!0,textAlign:"center",children:e.jsx(g,{i18nKey:"chooseRoomType"})}),e.jsx(p,{variant:"body1",color:"text.secondary",textAlign:"center",sx:{mb:3},children:e.jsx(g,{i18nKey:"roomTypeDescription"})}),e.jsxs(w,{spacing:2,sx:{mb:3},children:[e.jsx(Y,{isPublic:!0,onClick:x,isSelected:W}),e.jsx(Y,{isPublic:!1,onClick:S,isSelected:!W})]}),t&&e.jsxs(f,{sx:{p:3,borderRadius:2,backgroundColor:"primary.50",mb:2},children:[e.jsx(p,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:o("privateRoomCode")}),e.jsx(se,{fullWidth:!0,id:"privateRoom",value:c,onBlur:b,onKeyDown:k,onChange:y,inputProps:{style:{textTransform:"uppercase",fontFamily:"monospace",fontSize:"1.25rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.2em"}},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"background.paper","& fieldset":{borderColor:"divider",borderWidth:2},"&:hover fieldset":{borderColor:"primary.main"},"&.Mui-focused fieldset":{borderColor:"primary.main",borderWidth:2}}}}),e.jsx(p,{variant:"body2",color:"text.secondary",sx:{mt:1.5,textAlign:"center"},children:o("privateRoomCodeHelp")})]}),e.jsx(E,{children:e.jsx(P,{variant:"contained",onClick:N,size:"large",children:e.jsx(g,{i18nKey:W?"nextSkip":"next"})})})]})}function Ve({formData:n,setFormData:s,nextStep:r,prevStep:a}){const[o,t]=h.useState(!T(n?.gameMode)),{t:l}=M();h.useEffect(()=>{t(!T(n?.gameMode))},[n?.gameMode]);const c=[{id:"local",title:"yesInteracting",description:l("physicalInteractionDesc"),isSelected:!T(n?.gameMode)},{id:"online",title:"noInteracting",description:l("soloOnlinePlayDesc"),isSelected:T(n?.gameMode)}],u=[{value:"dom",label:"Dominant",description:l("dominantRoleDesc")},{value:"vers",label:"Switch",description:l("switchRoleDesc")},{value:"sub",label:"Submissive",description:l("submissiveRoleDesc")}],d=[{id:"clothed",title:"noNaked",description:l("foreplayClothedDesc"),isSelected:!n.isNaked},{id:"naked",title:"yesNaked",description:l("intimateNudityDesc"),isSelected:n.isNaked}];return e.jsxs(f,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[e.jsx(p,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(g,{i18nKey:"playingWithPeople"})}),e.jsx(A,{container:!0,spacing:2,sx:{mb:3},children:c.map(i=>e.jsx(A,{size:{xs:12,sm:6},children:e.jsx(B,{sx:{cursor:"pointer",border:i.isSelected?"3px solid":"1px solid",borderColor:i.isSelected?"primary.main":"divider",backgroundColor:i.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>s({...n,gameMode:i.id==="local"?"local":"online",roomRealtime:i.id!=="local"}),children:e.jsx(z,{sx:{p:3},children:e.jsxs(w,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(p,{variant:"h6",sx:{fontWeight:600},children:l(i.title)}),e.jsx(p,{variant:"body2",color:"text.secondary",children:i.description}),i.isSelected&&e.jsx(R,{label:l("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},i.id))}),e.jsx(ie,{in:o,timeout:500,children:e.jsxs(f,{sx:{mb:3},children:[e.jsx(p,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:e.jsx(g,{i18nKey:"yourRole"})}),e.jsx(A,{container:!0,spacing:2,sx:{mb:3},children:u.map(i=>e.jsx(A,{size:{xs:12,sm:4},children:e.jsx(B,{sx:{cursor:"pointer",border:n.role===i.value?"2px solid":"1px solid",borderColor:n.role===i.value?"primary.main":"divider",backgroundColor:n.role===i.value?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>s({...n,role:i.value}),children:e.jsx(z,{sx:{p:2.5},children:e.jsxs(w,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(p,{variant:"subtitle1",sx:{fontWeight:600},children:l(i.value)}),e.jsx(p,{variant:"body2",color:"text.secondary",children:i.description}),n.role===i.value&&e.jsx(R,{label:l("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},i.value))}),e.jsx(p,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:e.jsx(g,{i18nKey:"areYouNaked"})}),e.jsx(A,{container:!0,spacing:2,children:d.map(i=>e.jsx(A,{size:{xs:12,sm:6},children:e.jsx(B,{sx:{cursor:"pointer",border:i.isSelected?"2px solid":"1px solid",borderColor:i.isSelected?"primary.main":"divider",backgroundColor:i.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>s({...n,isNaked:i.id==="naked"}),children:e.jsx(z,{sx:{p:3},children:e.jsxs(w,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(p,{variant:"h6",sx:{fontWeight:600},children:l(i.title)}),e.jsx(p,{variant:"body2",color:"text.secondary",children:i.description}),i.isSelected&&e.jsx(R,{label:l("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},i.id))})]})}),e.jsx(f,{sx:{flexGrow:1}}),e.jsxs(E,{children:[e.jsx(P,{onClick:a,children:e.jsx(g,{i18nKey:"previous"})}),e.jsx(P,{variant:"contained",onClick:r,children:e.jsx(g,{i18nKey:"next"})})]})]})}function Ue({gameMode:n,onPresetSelect:s,selectedPreset:r,actionsList:a,showTitle:o=!0}){const{t}=M(),l={solo:[{id:"popperbating",name:t("presetPopperbating"),description:t("presetPopperbatingDesc"),actions:["bating"],consumptions:["poppers"],intensities:{bating:2,poppers:1}},{id:"smoking-tits",name:t("presetSmokingTits"),description:t("presetSmokingTitsDesc"),actions:["titTorture"],consumptions:["vaping"],intensities:{titTorture:2,vaping:1}},{id:"exploration-solo",name:t("presetExplorationSolo"),description:t("presetExplorationSoloDesc"),actions:["throatTraining","buttPlay","titTorture","ballBusting"],consumptions:[],intensities:{throatTraining:1,buttPlay:1,titTorture:1,ballBusting:1}},{id:"ball-busting",name:t("presetBallBusting"),description:t("presetBallBustingDesc"),actions:["ballBusting","bating"],consumptions:["poppers"],intensities:{ballBusting:2,bating:2}}],foreplay:[{id:"romantic-start",name:t("presetRomanticStart"),description:t("presetRomanticStartDesc"),actions:["kissing","stripping"],consumptions:["alcohol"],intensities:{kissing:2,stripping:1,alcohol:1}},{id:"degrading",name:t("presetDegrading"),description:t("presetDegradingDesc"),actions:["humiliation","footPlay","breathPlay"],consumptions:["poppers"],intensities:{humiliation:2,footPlay:2,breathPlay:2,poppers:2}},{id:"sensual-touch",name:t("presetSensualTouch"),description:t("presetSensualTouchDesc"),actions:["kissing","footPlay","tickling"],consumptions:[],intensities:{kissing:2,footPlay:1,tickling:1}},{id:"electric-play",name:t("presetElectricPlay"),description:t("presetElectricPlayDesc"),actions:["electric","bondage"],consumptions:["vaping"],intensities:{electric:1,bondage:2,vaping:1}}],sex:[{id:"gentle-sex",name:t("presetGentleSex"),description:t("presetGentleSexDesc"),actions:["throatTraining","bating","buttPlay"],consumptions:["alcohol"],intensities:{throatTraining:1,bating:1,buttPlay:1,alcohol:1}},{id:"fisting",name:t("presetFisting"),description:t("presetFistingDesc"),actions:["buttPlay"],consumptions:["poppers"],intensities:{buttPlay:4,poppers:4}},{id:"bdsm",name:t("presetBdsm"),description:t("presetBdsmDesc"),actions:["pissPlay","throatTraining","spanking","titTorture"],consumptions:[],intensities:{pissPlay:2,throatTraining:2,spanking:2,titTorture:2}},{id:"breath-control",name:t("presetBreathControl"),description:t("presetBreathControlDesc"),actions:["bating"],consumptions:["gasMask"],intensities:{bating:2,gasMask:2}}]},c=l[n]||l.solo,u=d=>{s(d)};return e.jsxs(f,{children:[o&&e.jsx(p,{variant:"h6",gutterBottom:!0,children:t("quickStart")}),e.jsx(A,{container:!0,spacing:2,children:c.map(d=>e.jsx(A,{size:{xs:12,sm:6,lg:3},children:e.jsx(B,{sx:{cursor:"pointer",border:r===d.id?2:1,borderColor:r===d.id?"primary.main":"divider",backgroundColor:r===d.id?"primary.dark":"background.paper",transition:"all 0.2s ease-in-out",height:"100%",boxShadow:1,"&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:3,backgroundColor:r===d.id?"primary.dark":"action.hover"}},onClick:()=>u(d),children:e.jsxs(z,{sx:{p:2.5},children:[e.jsx(p,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:d.name}),e.jsxs(f,{children:[d.actions.map((i,x)=>e.jsx(R,{label:a[i]?.label||i,size:"small",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:"primary.main",color:"primary.main","&:hover":{backgroundColor:"primary.50"}}},`action-${x}`)),d.consumptions.map((i,x)=>e.jsx(R,{label:a[i]?.label||i,size:"small",color:"secondary",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:"secondary.main",color:"secondary.main","&:hover":{backgroundColor:"secondary.50"}}},`consumption-${x}`))]})]})})},d.id))})]})}function $(){return e.jsxs(p,{variant:"h6",sx:{mt:2},children:[e.jsx(g,{i18nKey:"setIntensityLevel"}),e.jsx(oe,{title:e.jsx(p,{variant:"body1",children:e.jsx(g,{i18nKey:"intensityTooltip"})}),arrow:!0,sx:{ml:1},children:e.jsx(Re,{sx:{ml:.5,fontSize:15}})})]})}const Ye=(n,s)=>{const{gameMode:r,isNaked:a}=n,o=T(r);return o&&["foreplay","sex"].includes(s.type)||!o&&a&&["solo","foreplay"].includes(s.type)||!o&&!a&&["solo","sex"].includes(s.type)},qe=n=>{const s={...n},r=n.selectedActions||{},a={};return Object.entries(r).forEach(([o,t])=>{Ye(n,t)||(a[o]=t)}),s.selectedActions=a,s},_=(n,s,r)=>{const a=n.selectedActions||{};return Object.entries(a).map(([o,t])=>{const l=s.find(c=>c.value===o);return t.type!==r||!l?null:o}).filter(o=>!!o)},Qe=(n,s,r)=>{const a={...n},o={...a.selectedActions};return Object.keys(o).forEach(t=>{o[t].type===s&&!r.includes(t)&&delete o[t]}),a.selectedActions=o,a},X=(n,s,r)=>{r(a=>{const o=Qe(a,s,n),t={...o.selectedActions};return n.forEach(l=>{if(t[l])return;let c={type:s,level:1};s==="consumption"&&(c={...c,variation:o.isAppend?"appendMost":"standalone"}),t[l]=c}),{...o,selectedActions:t}})},J=(n,s,r,a,o,t=null)=>{const l=n?.target?.value;if(l===0)return o(c=>c.filter(u=>u!==s)),a(c=>{const u={...c.selectedActions||{}};return delete u[s],{...c,selectedActions:u}});a(c=>{const u={...c.selectedActions||{}};return u[s]={...u[s]||{},type:r,level:typeof l=="number"?l:isNaN(Number(l))?0:Number(l),...!!t&&{variation:t}},{...c,selectedActions:u}})},He=n=>!!(n&&Object.keys(n).some(s=>{const r=n[s];return(r?.level??0)>0&&r?.variation!=="appendMost"}));function Z({onChange:n,values:s,options:r,label:a}){const o=h.useCallback(l=>r?.find(c=>c.value===l)?.label,[r]),t=h.useCallback(l=>e.jsx(f,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:l?.map(c=>e.jsx(R,{label:o(c)},c))}),[o]);return e.jsxs(re,{fullWidth:!0,children:[e.jsx(ae,{id:`${a}-label`,children:a}),e.jsx(ce,{labelId:`${a}-label`,id:`${a}`,multiple:!0,value:s,onChange:n,fullWidth:!0,input:e.jsx(pe,{label:e.jsx(g,{i18nKey:"actionsLabel"})}),renderValue:t,children:r?.map(({label:l,value:c})=>e.jsxs(le,{value:c,children:[e.jsx(de,{checked:s.includes(c)}),e.jsx(ue,{primary:l})]},c))})]})}const $e=2;function _e({formData:n,setFormData:s,options:r,actionsList:a}){const o="consumption",t=r(o),c=_(n,t,o)||[],u=i=>{const{value:x}=i.target,S=typeof x=="string"?x.split(","):x;S.length<=$e&&X(S,o,s)},d=(i,x)=>{const S=i.target.checked?"appendMost":"standalone",C=i.target.checked,y={...n.selectedActions};x.forEach(k=>{y[k]&&(y[k]={...y[k],variation:S})});const b={...n,isAppend:C,selectedActions:y};s(b)};return e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"h6",sx:{my:2},children:e.jsx(g,{i18nKey:"pickConsumptions"})}),e.jsx(Z,{onChange:u,values:c,options:t,label:q("consumables")}),!!c.length&&e.jsxs(e.Fragment,{children:[e.jsx($,{}),c.map(i=>e.jsx(H,{actionsFolder:a,settings:n,option:i,initValue:1,onChange:x=>J(x,i,o,s,()=>{},n.isAppend?"appendMost":"standalone")},i)),e.jsx(p,{variant:"h6",sx:{mt:2},children:e.jsx(g,{i18nKey:"standaloneOrCombine"})}),e.jsx(Ne,{trueCondition:n.isAppend,onChange:i=>d(i,c),yesLabel:"combineWithActions"})]})]})}const Xe=4,Je=n=>T(n?.gameMode)?"solo":n.isNaked?"sex":"foreplay";function Ze({formData:n,setFormData:s,options:r,actionsList:a}){const o=Je(n),t=r(o),c=_(n,t,o)||[],u=d=>{const{value:i}=d.target,x=typeof i=="string"?i.split(","):i;x.length<=Xe&&X(x,o,s)};return e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"h6",sx:{my:2},children:e.jsx(g,{i18nKey:"pickActions"})}),e.jsx(Z,{onChange:u,values:c,options:t,label:q("actionsLabel")}),c.length>0&&e.jsxs(e.Fragment,{children:[e.jsx($,{}),c.map(d=>e.jsx(H,{actionsFolder:a,settings:n,option:d,initValue:1,onChange:i=>J(i,d,o,s,()=>{})},d))]})]})}function De({formData:n,setFormData:s,nextStep:r,prevStep:a,actionsList:o}){const{t}=M(),[l,c]=h.useState(""),[u,d]=h.useState(!1),[i,x]=h.useState(!0);function S(m){return Object.keys(o).filter(j=>o[j]?.type===m)}h.useEffect(()=>{const m=qe(n);s(m)},[]),h.useEffect(()=>{n.selectedActions&&Object.keys(n.selectedActions).length>0&&(d(!0),x(!1))},[]);const C=m=>S(m).map(j=>({value:j,label:o[j]?.label}));let y;n.gameMode==="online"?y="solo":n.gameMode==="local"&&!n.isNaked?y="foreplay":y="sex";const b=(m,j,O,D)=>{m.forEach(K=>{if(o[K]){const ee=O.intensities?.[K]||j,ne=Object.keys(o[K].intensities||{}).filter(te=>te!=="None").length;D[K]={type:o[K].type,level:Math.min(ee,ne)}}})},k=m=>{c(m.id);const j={};b(m.actions,2,m,j),b(m.consumptions,1,m,j),s({...n,selectedActions:j}),x(!1),d(!0)},N=(m,j)=>{x(j),j&&d(!1)},W=(m,j)=>{d(j),j&&x(!1)},v=!He(n.selectedActions);return e.jsxs(f,{children:[e.jsxs(L,{expanded:i,onChange:N,sx:{backgroundColor:"background.default",borderTop:1,borderBottom:1,borderColor:"divider",borderLeft:"none",borderRight:"none",borderRadius:0,"&:before":{display:"none"},boxShadow:"none"},children:[e.jsx(F,{expandIcon:e.jsx(V,{}),"aria-controls":"quickstart-content",id:"quickstart-header",sx:{backgroundColor:"background.default"},children:e.jsxs(w,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Pe,{}),e.jsx(p,{variant:"h6",children:t("quickStart")})]})}),e.jsx(G,{sx:{pb:1},children:e.jsx(Ue,{gameMode:y,onPresetSelect:k,selectedPreset:l,actionsList:o,showTitle:!1})})]}),e.jsxs(L,{expanded:u,onChange:W,sx:{backgroundColor:"background.default",borderTop:i?"none":1,borderBottom:1,borderColor:"divider",borderLeft:"none",borderRight:"none",borderRadius:0,marginTop:i?-1:0,"&:before":{display:"none"},boxShadow:"none"},children:[e.jsx(F,{expandIcon:e.jsx(V,{}),"aria-controls":"customization-content",id:"customization-header",sx:{backgroundColor:"background.default"},children:e.jsxs(w,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Me,{}),e.jsx(p,{variant:"h6",children:t("customizeActions")})]})}),e.jsxs(G,{children:[e.jsx(p,{variant:"body2",color:"text.secondary",sx:{mb:2},children:t("customizeActionsDesc")}),e.jsx(Ze,{formData:n,setFormData:s,options:C,actionsList:o}),e.jsx(Q,{sx:{my:3}}),e.jsx(_e,{formData:n,setFormData:s,options:C,actionsList:o})]})]}),e.jsx(f,{sx:{mt:4},children:e.jsxs(E,{children:[e.jsx(P,{onClick:()=>a(I(n.room)?2:1),children:e.jsx(g,{i18nKey:"previous"})}),e.jsx(P,{variant:"contained",disabled:v,onClick:r,size:"large",children:e.jsx(g,{i18nKey:"next"})})]})})]})}function en({formData:n,setFormData:s,prevStep:r,actionsList:a,close:o}){const t=[100,100],l=[0,0],[c,u]=h.useState(U(n?.finishRange||[],l)),[d,i]=h.useState(!1),x=Be(),{t:S}=M();h.useEffect(()=>{let b={...n,boardUpdated:!0};(!c||!U(n.finishRange||[],t))&&(b.finishRange=t),s(b)},[]);async function C(){i(!0);try{await x(n,a)}catch(b){console.error("Error submitting settings:",b)}finally{i(!1)}typeof o=="function"&&o()}const y=[{id:"noOrgasm",title:"noOrgasm",description:S("noOrgasmDesc"),isSelected:!c},{id:"yesOrgasm",title:"yesOrgasm",description:S("yesOrgasmDesc"),isSelected:c}];return e.jsxs(f,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[e.jsx(p,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(g,{i18nKey:"WillYouOrgasm"})}),e.jsx(A,{container:!0,spacing:2,sx:{mb:4},children:y.map(b=>e.jsx(A,{size:{xs:12,sm:6},children:e.jsx(B,{sx:{cursor:"pointer",border:b.isSelected?"3px solid":"1px solid",borderColor:b.isSelected?"primary.main":"divider",backgroundColor:b.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%",transform:b.isSelected?"scale(1.02)":"scale(1)","&:hover":{borderColor:"primary.main",transform:"scale(1.02)",boxShadow:2}},onClick:()=>{const k=b.id==="yesOrgasm";s({...n,finishRange:k?l:t}),u(k)},children:e.jsx(z,{sx:{p:3},children:e.jsxs(w,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(p,{variant:"h6",sx:{fontWeight:600},children:S(b.title)}),e.jsx(p,{variant:"body2",color:"text.secondary",children:b.description}),b.isSelected&&e.jsx(R,{label:S("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},b.id))}),e.jsx(f,{sx:{flexGrow:1}}),e.jsxs(E,{children:[e.jsx(P,{onClick:r,disabled:d,children:e.jsx(g,{i18nKey:"previous"})}),e.jsx(P,{variant:"contained",onClick:C,disabled:d,startIcon:d?e.jsx(xe,{size:20,color:"inherit"}):null,size:"large",sx:{px:4},children:e.jsx(g,{i18nKey:"buildGame"})})]})]})}function nn({currentStep:n,isPublicRoom:s}){const{t:r}=M(),a=me(),o=he(a.breakpoints.down("md")),t=s?[r("roomSelection","Room Selection"),r("actionsSelection","Actions Selection"),r("finishSetup","Finish Setup")]:[r("roomSelection","Room Selection"),r("gameModeSelection","Game Mode Selection"),r("actionsSelection","Actions Selection"),r("finishSetup","Finish Setup")],c=(u=>{if(s)switch(u){case 1:return 0;case 3:return 1;case 4:return 2;default:return 0}return u-1})(n);return e.jsx(ge,{activeStep:c,alternativeLabel:!o,orientation:"horizontal",sx:{...o&&{"& .MuiStepLabel-label":{display:"none"}}},children:t.map((u,d)=>e.jsx(be,{children:e.jsx(je,{children:o?"":u})},d))})}function tn({close:n}){const{id:s}=ye(),[r,a]=h.useState(1),o={room:s};I(s)&&(o.gameMode="online",o.roomRealtime=!0);const[t,l]=Fe({gameMode:"online",roomRealtime:!0,actions:[],consumption:[],role:"sub",boardUpdated:!1,room:s||"PUBLIC"},o),c=h.useRef(!0),{actionsList:u}=ze(t.gameMode);h.useEffect(()=>{if(c.current){if(c.current=!1,t.advancedSettings){x();return}if(typeof n=="function"){if(I(s)){a(3);return}if(t.gameMode==="online"){a(3);return}a(2)}}},[t,n,s]);const d=y=>{if(!Number.isInteger(y))return a(r+1);a(r+(y||1))},i=y=>{if(!Number.isInteger(y))return a(r-1);a(r-(y||1))},x=()=>a(0),S=()=>{I(s)||t.gameMode==="online"?a(3):a(1)},C=()=>{switch(r){case 1:return e.jsx(Ge,{formData:t,setFormData:l,nextStep:d});case 2:return e.jsx(Ve,{formData:t,setFormData:l,nextStep:d,prevStep:i});case 3:return e.jsx(De,{formData:t,setFormData:l,nextStep:d,prevStep:i,actionsList:u});case 4:return e.jsx(en,{formData:t,setFormData:l,prevStep:i,actionsList:u,close:n});default:return null}};return r===0?e.jsx(Le,{closeDialog:n,onOpenSetupWizard:S}):e.jsxs(f,{children:[e.jsx(f,{sx:{width:"100%",mt:2,mb:4},children:e.jsx(nn,{currentStep:r,isPublicRoom:I(s)})}),C(),e.jsx(Q,{sx:{mt:3}}),e.jsx(P,{onClick:x,children:e.jsx(g,{i18nKey:"advancedSetup"})})]})}function kn({open:n,close:s}){const r=Ae(),[a]=fe();return a.get("importBoard")?null:e.jsxs(Se,{fullScreen:r,open:n,maxWidth:"md",children:[e.jsxs(ve,{children:[e.jsx(g,{i18nKey:"gameSettingsHeading"}),typeof s=="function"&&e.jsx(ke,{close:s})]}),e.jsx(Ce,{children:e.jsx(tn,{close:typeof s=="function"?s:void 0})})]})}export{kn as default};
