import{W as U,u as _,b as w,j as e,a3 as $,D as p,aT as Y,M as T,aU as C,aV as I,at as L,ar as j,t as x,a6 as K,a8 as X,aA as Z,aw as R,aa as Q,au as P,aX as z,av as N,a$ as V,a1 as q,S as J}from"./chunk-CVSdvP5Z.js";import{c as ee,C as te}from"./chunk-BeueL4UK.js";import{T as ne}from"./chunk-84IffDWI.js";import{A as M,N as ae}from"./chunk-B-cyqPC2.js";import{a as re}from"./chunk-Pkb0UFv2.js";import{m as B,O as oe,G as se,Q as le,M as ie,U as de,X as O,Y as ce,Z as me,L as pe,p as he,_ as ue}from"./chunk-_SwOSjSw.js";import"./chunk-CNqt7FHs.js";import"./chunk-guvQFVv-.js";import"./chunk-BUoOus3c.js";import"./chunk-E8HqAuJ1.js";import"../assets/index-CZH-e7F_.js";import"./chunk-BVO8KFPS.js";import"./chunk-AkXvan0D.js";(function(){var n=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{};n.SENTRY_RELEASE={id:"874067a760cfa9079dd7f585e4ceff298b0e879f"}})();try{(function(){var n=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{},t=new n.Error().stack;t&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[t]="0805acd3-e35b-47c1-9ef7-6ab379cfd1dd",n._sentryDebugIdIdentifier="sentry-dbid-0805acd3-e35b-47c1-9ef7-6ab379cfd1dd")})()}catch(n){}var xe=Object.defineProperty,W=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,F=(n,t,a)=>t in n?xe(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,be=(n,t)=>{for(var a in t||(t={}))fe.call(t,a)&&F(n,a,t[a]);if(W)for(var a of W(t))ge.call(t,a)&&F(n,a,t[a]);return n};function je({title:n,date:t,url:a,description:r="",location:s="",baseUrl:l="https://blitzedout.com/PUBLIC",downloadIcs:i,buttonSx:g={}}){const d=U(),{t:o}=_(),[v,D]=w.useState(null),h=!!v,S=m=>{D(m.currentTarget)},f=()=>{D(null)},c=()=>n||o("calendar.gameTitle"),k=()=>{i(c(),t,a,u()),f()},u=()=>{let m=`${c()}`;return l&&(m+=`
${l}`),a&&(m+=`

${o("calendar.videoLink")}: ${a}`),r&&(m+=`

${r}`),m},E=()=>{const m=t.toISOString().replace(/-|:|\.\d+/g,""),b=new Date(t.getTime()+3600*1e3).toISOString().replace(/-|:|\.\d+/g,""),A="https://calendar.google.com/calendar/render",y=new URLSearchParams({action:"TEMPLATE",text:c(),dates:`${m}/${b}`,details:u()});return(s||a)&&y.append("location",s||a||""),`${A}?${y.toString()}`},G=()=>{const m="https://outlook.live.com/calendar/0/deeplink/compose",b=new URLSearchParams({path:"/calendar/action/compose",rru:"addevent",subject:c(),startdt:t.toISOString(),enddt:new Date(t.getTime()+36e5).toISOString(),body:u()});return(s||a)&&b.append("location",s||a||""),`${m}?${b.toString()}`},H=()=>{const m=Math.floor(t.getTime()/1e3),b=Math.floor((t.getTime()+3600*1e3)/1e3),A="https://calendar.yahoo.com/",y=new URLSearchParams({v:"60",title:c(),st:m.toString(),et:b.toString(),desc:u()});return(s||a)&&y.append("in_loc",s||a||""),`${A}?${y.toString()}`};return e.jsxs(e.Fragment,{children:[e.jsx($,{variant:"outlined",size:"small",startIcon:e.jsx(B,{fontSize:"small"}),onClick:S,"aria-controls":h?"calendar-menu":void 0,"aria-haspopup":"true","aria-expanded":h?"true":void 0,sx:be({borderColor:p(d.palette.secondary.main,.3),color:d.palette.secondary.main,"&:hover":{borderColor:d.palette.secondary.main,backgroundColor:p(d.palette.secondary.main,.05)}},g),children:o("calendar.addToCalendar")}),e.jsxs(Y,{id:"calendar-menu",anchorEl:v,open:h,onClose:f,MenuListProps:{"aria-labelledby":"calendar-button",dense:!0},children:[e.jsxs(T,{onClick:k,children:[e.jsx(C,{children:e.jsx(oe,{fontSize:"small"})}),e.jsx(I,{children:o("calendar.downloadIcs")})]}),e.jsxs(T,{component:"a",href:E(),target:"_blank",rel:"noopener noreferrer",onClick:f,children:[e.jsx(C,{children:e.jsx(se,{fontSize:"small"})}),e.jsx(I,{children:o("calendar.googleCalendar")})]}),e.jsxs(T,{component:"a",href:G(),target:"_blank",rel:"noopener noreferrer",onClick:f,children:[e.jsx(C,{children:e.jsx(le,{fontSize:"small"})}),e.jsx(I,{children:o("calendar.outlookCalendar")})]}),e.jsxs(T,{component:"a",href:H(),target:"_blank",rel:"noopener noreferrer",onClick:f,children:[e.jsx(C,{children:e.jsx(ie,{fontSize:"small"})}),e.jsx(I,{children:o("calendar.yahooCalendar")})]}),e.jsxs(T,{onClick:k,children:[e.jsx(C,{children:e.jsx(de,{fontSize:"small"})}),e.jsx(I,{children:o("calendar.appleCalendar")})]})]})]})}const Se=(n,t,a,r)=>{const s=new Date(t.getTime()+36e5),l=o=>o.toISOString().replace(/-|:|\.\d+/g,"").slice(0,15)+"Z",i=l(t),g=l(s);let d=["BEGIN:VCALENDAR","VERSION:2.0","CALSCALE:GREGORIAN","METHOD:PUBLISH","BEGIN:VEVENT",`DTSTART:${i}`,`DTEND:${g}`,`SUMMARY:${n}`,`DESCRIPTION:${(r==null?void 0:r.replace(/\n/g,"\\n"))||n}`,"STATUS:CONFIRMED"];return a&&d.push(`URL:${a}`),d=d.concat(["END:VEVENT","END:VCALENDAR"]),d.join(`\r
`)},ye=(n,t,a,r)=>{const s=Se(n,t,a,r),l=new Blob([s],{type:"text/calendar;charset=utf-8"}),i=document.createElement("a");i.href=URL.createObjectURL(l),i.download=`blitzed-out-game-${t.toISOString().split("T")[0]}.ics`,document.body.appendChild(i),i.click(),document.body.removeChild(i)},Te=n=>{try{const{href:t}=new URL(n),a=re(n);return e.jsx($,{href:t,target:"_blank",rel:"noreferrer",variant:"outlined",size:"small",startIcon:n.includes("meet")||n.includes("zoom")?e.jsx(ce,{}):e.jsx(me,{}),children:a})}catch(t){return null}};function Ce({game:n}){const t=U(),{t:a}=_(),r=n.dateTime.toDate(),s=new Date().toDateString()===r.toDateString(),l=r.getTime()-new Date().getTime()<1440*60*1e3&&r>new Date;return e.jsxs(L,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(L,{size:12,children:e.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(O,{fontSize:"small",color:s?"secondary":"action",sx:{opacity:s?1:.7}}),e.jsxs(j,{sx:{display:"flex",gap:2},children:[e.jsx(x,{variant:"body2",fontWeight:s?"bold":"normal",children:r.toLocaleString([],{weekday:"short",month:"short",day:"numeric"})}),e.jsx(x,{variant:"body2",color:"text.secondary",children:r.toLocaleString([],{hour:"numeric",minute:"2-digit"})})]}),l&&e.jsx(K,{label:a("soon"),size:"small",color:"primary",sx:{height:20,fontSize:"0.7rem",ml:1,borderRadius:1,fontWeight:"bold",backgroundColor:p(t.palette.success.main,.8)}})]})}),e.jsx(L,{size:12,children:e.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.url?Te(n.url):e.jsx(x,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic",fontSize:"0.85rem"},children:a("noLinkProvided")}),e.jsx(je,{title:a("calendar.gameTitle"),date:r,url:n.url,downloadIcs:ye,buttonSx:{ml:1}})]})})]})}function Pe({open:n,close:t,isMobile:a}){const{t:r}=_(),[s,l]=w.useState(""),{schedule:i,addToSchedule:g}=ee(),d=M().add(2,"week"),o=U(),v=w.useCallback(()=>{l(null)},[]),D=w.useCallback(h=>{h.preventDefault();const S=h.currentTarget,f=S.elements.namedItem("date-time"),c=new Date(f.value),u=S.elements.namedItem("link").value;if(!c||!(c instanceof Date)){l(r("scheduleValidation.selectDateTime"));return}if(c<M().toDate()){l(r("scheduleValidation.selectFutureDateTime"));return}if(i.find(E=>E.dateTime.toDate().toUTCString()===c.toUTCString())){l(r("scheduleValidation.gameAlreadyScheduled"));return}if(c>d.toDate()){l(r("scheduleValidation.selectWithinTwoWeeks"));return}if(u&&!u.startsWith("http")){l(r("scheduleValidation.enterValidUrl"));return}g(c,u),S.reset()},[i,g,d,r]);return e.jsx(e.Fragment,{children:e.jsxs(pe,{dateAdapter:ae,children:[e.jsx(X,{fullScreen:a,open:n,onClose:t,maxWidth:"md",children:e.jsxs("form",{onSubmit:D,children:[e.jsxs(Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(B,{color:"primary"}),e.jsx(x,{variant:"h5",component:"span",fontWeight:"bold",children:e.jsx(R,{i18nKey:"schedule"})}),e.jsx(te,{close:t})]}),e.jsxs(Q,{children:[e.jsxs(P,{elevation:3,sx:{mb:4,background:p(o.palette.primary.main,.05),border:`1px solid ${p(o.palette.primary.main,.1)}`,borderRadius:2,overflow:"visible",position:"relative"},children:[e.jsx(z,{title:e.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(O,{color:"primary"}),e.jsx(x,{variant:"h6",fontWeight:"bold",children:r("upcomingGames")})]}),sx:{pb:1,borderBottom:`1px solid ${p(o.palette.divider,.1)}`}}),e.jsx(N,{sx:{p:2},children:i.length?e.jsx(V,{spacing:2,children:i==null?void 0:i.map(h=>e.jsx(q,{elevation:1,sx:{p:1.5,borderRadius:1.5},children:e.jsx(Ce,{game:h})},h.id))}):e.jsxs(j,{sx:{p:3,textAlign:"center",color:p(o.palette.text.primary,.6),borderRadius:1,background:p(o.palette.background.paper,.5)},children:[e.jsx(x,{variant:"body1",children:r("noPlannedGames")}),e.jsx(x,{variant:"body2",sx:{mt:1,fontSize:"0.85rem"},children:r("scheduleFirstGame")})]})})]}),e.jsxs(P,{elevation:2,sx:{background:p(o.palette.background.paper,.7),borderRadius:2},children:[e.jsx(z,{title:e.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(he,{color:"secondary"}),e.jsx(x,{variant:"h6",fontWeight:"bold",children:e.jsx(R,{i18nKey:"scheduleGame"})})]}),sx:{pb:1,borderBottom:`1px solid ${p(o.palette.divider,.1)}`}}),e.jsx(N,{children:e.jsxs(V,{spacing:3,sx:{mt:1},children:[e.jsx(ue,{name:"date-time",label:r("dateTime"),closeOnSelect:!1,disablePast:!0,maxDate:d,timeSteps:{minutes:30},sx:{width:"100%"},slotProps:{textField:{variant:"outlined",fullWidth:!0}}}),e.jsx(J,{label:r("camUrl"),variant:"outlined",name:"link",fullWidth:!0,placeholder:"https://...",helperText:r("optionalLinkHelper")}),e.jsx($,{variant:"contained",type:"submit",fullWidth:!0,size:"large",startIcon:e.jsx(O,{}),sx:{mt:2,py:1.2,borderRadius:1.5,fontWeight:"bold",textTransform:"none",boxShadow:o.shadows[4],"&:hover":{boxShadow:o.shadows[8]}},children:e.jsx(R,{i18nKey:"schedule"})})]})})]})]})]})}),e.jsx(ne,{open:!!s,close:v,children:s})]})})}export{Pe as default};
//# sourceMappingURL=index.tsx-BONABiTc.js.map
