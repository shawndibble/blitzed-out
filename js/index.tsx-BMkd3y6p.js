import{r as o,ad as R,au as w,j as e,am as m,ao as u,T as n,Q as B,ar as F,a1 as L}from"./chunk-DJZJtpVs.js";import{T as I}from"./chunk-9fkTg0gS.js";import{l as A}from"./chunk-Cuv_9q2v.js";import{b as H}from"./chunk-4ruemlWu.js";import{p as M,u as V,R as S}from"./chunk-Dk1wwQS1.js";import{l as W}from"./chunk-ChctAPco.js";import{g as P}from"./chunk-B4ipE-Yx.js";import"./chunk-7OQk-BoX.js";import"./chunk-DEqUmdJg.js";import"../assets/index-DQfYkwCD.js";import"./chunk-DtF_b7C9.js";import"./chunk-B4PEA_xj.js";import"./chunk-yLOK5aTh.js";function $(s){const a=A(s,"room");let r=!1,t="";if(a){const{roomBackgroundURL:i}=JSON.parse(a.settings),c=M(i);c?.isVideo&&(r=c.isVideo),c?.url&&(t=c.url)}return["color","gray"].some(i=>t.includes(i))&&(t=""),{isVideo:r,url:t}}function O(){const[s,a]=o.useState(document.fullscreenElement!=null);o.useEffect(()=>{const t=()=>{a(document.fullscreenElement!=null)};return document.addEventListener("fullscreenchange",t),()=>{document.removeEventListener("fullscreenchange",t)}},[]);const r=o.useCallback(()=>{document.fullscreenElement==null?document.documentElement.requestFullscreen().catch(t=>{console.error("Error attempting to enable fullscreen:",t)}):document.exitFullscreen().catch(t=>{console.error("Error attempting to exit fullscreen:",t)})},[]);return{isFullscreen:s,toggleFullscreen:r}}const D="actions",K=s=>{const{text:a,displayName:r}=s;if(!r)return{};const t=a?.split(`
`),[i,c]=t?.slice(1)||[],h=i?.split(":")[1]?.trim(),l=c?.split(":")[1]?.trim();return{displayName:r,type:h,activity:l}};function ne(){const{id:s}=R(),[a,r]=o.useState(""),[t,i]=o.useState(!1),[c,h]=o.useState(!1),{messages:l,isLoading:g}=H(),{isVideo:b,url:p}=$(l),f=A(l,D),v=V(f),{isFullscreen:N,toggleFullscreen:k}=O();if(o.useEffect(()=>{P().currentUser||W("Cast Viewer").catch(x=>{console.error("Anonymous login failed:",x)})},[s]),o.useEffect(()=>{const d=window.cast?.framework?.CastReceiverContext,x=navigator.userAgent,z=x.includes("CrKey")||x.includes("TV"),j=window.self!==window.top,C=d||z||window.location.search.includes("chromecast")||window.location.search.includes("receiver");return C&&(document.body.classList.add("cast-receiver-mode"),document.body.classList.remove("theme-light"),h(!0)),j&&document.body.classList.add("in-iframe"),()=>{C&&document.body.classList.remove("cast-receiver-mode"),j&&document.body.classList.remove("in-iframe")}},[]),o.useEffect(()=>{if(g)return;const d=l[l.length-1];d?.type==="settings"&&(i(!0),r(`${d.displayName} ${w("changedSettings")}`))},[l,g]),!f)return e.jsxs(m,{className:"flex-column",style:{backgroundColor:"transparent",color:"white",minHeight:"100vh"},children:[!!p&&e.jsx(S,{url:p,isVideo:b}),e.jsx(u,{container:!0,spacing:0,direction:"column",alignItems:"center",justifyContent:"center",className:"cast-container",style:{minHeight:"100vh"},children:e.jsx(u,{container:!0,justifyContent:"center",children:e.jsxs("div",{className:"action-box responsive-cast-box",style:{backgroundColor:"rgba(0,0,0,0.7)",padding:"clamp(1rem, 4vw, 4rem)",borderRadius:"clamp(0.5rem, 1vw, 1rem)",textAlign:"center",width:"clamp(320px, 90vw, 1400px)",margin:"0 auto"},children:[e.jsxs(n,{variant:"h2",style:{color:"white",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",marginBottom:"1rem",fontSize:"clamp(1.5rem, 6vw, 4rem)"},children:["blitzedout.com/",s]}),g?e.jsx(n,{variant:"h4",style:{color:"#90CAF9",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontSize:"clamp(1rem, 4vw, 2.5rem)"},children:"Connecting to game..."}):e.jsx(n,{variant:"h4",style:{color:"#A5D6A7",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontSize:"clamp(1rem, 4vw, 2.5rem)"},children:"Ready for game to start"})]})})})]});const{displayName:E,type:T,activity:y}=K(f);return e.jsxs(m,{className:"flex-column",style:{backgroundColor:"transparent",color:"white",minHeight:"100vh"},children:[!!p&&e.jsx(S,{url:p,isVideo:b}),e.jsxs(m,{display:"flex",justifyContent:"space-between",sx:{mx:2,mt:2,mb:-2},children:[e.jsx(m,{flex:"1",children:!c&&!N&&e.jsx(B,{variant:"text",onClick:k,style:{color:"white"},children:w("fullscreen")})}),e.jsx(m,{textAlign:"center",flex:"1",children:!!v?.displayName&&e.jsx(n,{variant:"h4",style:{color:"white",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",fontSize:"clamp(1rem, 3vw, 2rem)"},children:e.jsx(F,{i18nKey:"nextPlayersTurn",values:{player:v.displayName}})})},v?.displayName),e.jsx(m,{flex:"1",textAlign:"right",className:"text-stroke",children:y&&e.jsxs(n,{variant:"h4",style:{color:"white",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",fontSize:"clamp(0.8rem, 2.5vw, 1.5rem)"},children:["blitzedout.com/",s]})})]}),e.jsx(u,{container:!0,spacing:0,direction:"column",alignItems:"center",justifyContent:"center",className:"cast-container",style:{minHeight:"calc(100vh - 5rem)"},children:e.jsx(u,{container:!0,justifyContent:"center",children:y?e.jsxs(u,{size:12,className:"action-box responsive-cast-box",style:{backgroundColor:"rgba(0,0,0,0.7)",padding:"clamp(1rem, 4vw, 4rem)",borderRadius:"clamp(0.5rem, 1vw, 1rem)",maxWidth:"95vw",minWidth:"fit-content",margin:"0 auto"},children:[e.jsx(n,{variant:"h3",style:{color:"white",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",fontSize:"clamp(1.2rem, 5vw, 3rem)"},children:`${T} ${w("for")} ${E}`}),e.jsx(m,{className:"divider",style:{marginTop:"-0.5rem",height:"0.5rem",backgroundColor:"white",border:"2px solid black"},children:e.jsx(L,{})}),e.jsx(n,{variant:"h1",style:{color:"white",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",fontWeight:600,fontSize:"clamp(1.8rem, 8vw, 6rem)",lineHeight:1.2},children:y})]}):e.jsx("div",{className:"action-box responsive-cast-box",style:{backgroundColor:"rgba(0,0,0,0.7)",padding:"clamp(1rem, 4vw, 4rem)",borderRadius:"clamp(0.5rem, 1vw, 1rem)",maxWidth:"95vw",minWidth:"fit-content",margin:"0 auto"},children:e.jsxs(n,{variant:"h1",style:{color:"white",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",fontWeight:600,fontSize:"clamp(1.8rem, 8vw, 6rem)",lineHeight:1.2},children:["blitzedout.com/",s]})})})},l.length),e.jsx(I,{open:!!t,close:()=>i(!1),hideCloseButton:!0,children:e.jsx(n,{variant:"h5",style:{color:"white"},children:a})})]})}export{ne as default};
