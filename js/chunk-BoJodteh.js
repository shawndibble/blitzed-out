import{b as m,R as v,az as b}from"./chunk-DEpGQMoM.js";import{M as h,o as w}from"./chunk-DfnjTLcn.js";import{A as x}from"./chunk-CZcF1WFm.js";import{u as _}from"./chunk-CoGo4D6A.js";(function(){var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{};e.SENTRY_RELEASE={id:"b82d01bea29447e452b49ba3e85b9fac2f7942a4"}})();try{(function(){var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0a1797de-f074-41ea-9a57-052946f3cf7c",e._sentryDebugIdIdentifier="sentry-dbid-0a1797de-f074-41ea-9a57-052946f3cf7c")})()}catch(e){}function R(e){const t=e==null?void 0:e.replace(/([A-Z])/g," $1").trim();return t?t.charAt(0).toUpperCase()+t.slice(1):""}function D(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}function N(e){var t;const s=(e==null?void 0:e.split(/\r?\n/))||[];return(t=s[s.length-1])==null?void 0:t.split(":")[1]}function P(e,t){var s;const r=new RegExp(`\\d+\\s${t}`,"g");return(s=e.match(r))==null?void 0:s.filter((d,l,n)=>n.indexOf(d)===l)}function U(e){return(e==null?void 0:e.toUpperCase())==="PUBLIC"}function $(e){return e==="online"}function A(){const e=m.useContext(x);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function E(){const e=v.useContext(h);if(!e)throw new Error("MessagesContext's value is undefined.");return e}function M(e){const t=w(e,"actions","DESC");return[...new Map(t.map(s=>[s.uid,s])).values()]}function B(){const{user:e}=A(),{messages:t,isLoading:s}=E(),{onlineUsers:r}=_();return m.useMemo(()=>{if(s||!e)return[];const l=M(t);return Object.values(r).map(n=>{var i,c,f;const a=(i=l.find(o=>o.uid===n.uid))==null?void 0:i.text,p=/(?:#)[\d]*(?=:)/gs;let u=0;if(a&&a.match(p)){const o=a.match(p);o&&o[0]&&(u=Number(o[0].replace("#","")))}const g=u>0?u-1:u,y=!!(a!=null&&a.includes(b("finish")));return{displayName:n.displayName||"Unknown",uid:n.uid,isSelf:n.uid===e.uid,location:((c=n.gameState)==null?void 0:c.location)||g,isFinished:((f=n.gameState)==null?void 0:f.isFinished)||y,status:n.status||"away",lastActivity:n.lastSeen||new Date(0)}}).sort((n,i)=>n.isSelf?-1:i.isSelf?1:n.status==="active"&&i.status!=="active"?-1:i.status==="active"&&n.status!=="active"?1:n.displayName.localeCompare(i.displayName))},[e,r,t,s])}export{B as a,E as b,P as c,$ as d,N as e,D as f,R as g,U as i,A as u};
//# sourceMappingURL=chunk-BoJodteh.js.map
