const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index.tsx-DgntVoCU.js","js/chunk-D2_qQxSg.js","js/chunk-D8BtDPHk.js","js/chunk-DFIsvTz4.js","js/chunk-DZ7Mr-wA.js","js/chunk-C7feziKp.js","assets/index-BicJ8E66.js","js/chunk-C8C4XuLE.js","js/chunk-B4PEA_xj.js","js/chunk-CmBVKN-k.js","js/chunk-C7PvMB7v.js","js/index.tsx-DOAGmsTg.js","js/chunk-BBp9zMJf.js","js/chunk-DHrS90Mu.js","js/chunk-Df8Zq5RO.js","js/chunk-CahDYY_a.js","js/chunk-Bo4_NF39.js","js/chunk-yLOK5aTh.js"])))=>i.map(i=>d[i]);
import{S as D,m as L,_ as E}from"../assets/index-BicJ8E66.js";import{a7 as O,r as i,ad as B,j as e,aI as S,az as k,I as C,E as G,ah as M,aN as $,G as F,M as W,aO as q,aP as H,T as _,ax as J,aR as U,aS as V,aa as K,aT as X,aG as Y,ab as Q}from"./chunk-D2_qQxSg.js";import{u as Z}from"./chunk-CmBVKN-k.js";import{h as ee,i as te,j as A,k as se,l as ne,m as re,n as oe}from"./chunk-DZ7Mr-wA.js";import{i as ae}from"./chunk-C7PvMB7v.js";function ie(){const t=O.useContext(D);if(!t)throw new Error("ScheduleContext's value is undefined.");return t}const ce="/img/blitzed-out-DGhYHOgx.png";window.__castApiInitialized=window.__castApiInitialized||!1;function le(){const[t,n]=i.useState(!1),[o,d]=i.useState(null),{id:c}=B(),f=i.useRef(null),[h,m]=i.useState(!1),u=i.useCallback(r=>{try{const a=`${window.location.origin}/${c}/cast`;r.sendMessage("urn:x-cast:com.blitzedout.app",{type:"LOAD",url:a})}catch(a){console.error("Error sending cast message:",a)}},[c]);i.useEffect(()=>{const r=()=>{try{if(!window?.cast?.framework)return;if(window.__castApiInitialized){m(!0),a();return}window.cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:"1227B8DE",autoJoinPolicy:window.chrome?.cast?.AutoJoinPolicy?.ORIGIN_SCOPED}),window.__castApiInitialized=!0,m(!0),a()}catch(s){console.error("Error initializing Cast API:",s)}},a=()=>{try{const s=window.cast?.framework?.CastContext.getInstance();if(!s)return;const g=s.getCurrentSession();if(g&&(n(!0),d(g),c&&u(g)),!window?.cast?.framework)return;s.addEventListener(window.cast.framework.CastContextEventType.SESSION_STATE_CHANGED,j=>{const x=s.getCurrentSession();switch(j.sessionState){case window.cast?.framework?.SessionState.SESSION_STARTED:case window.cast?.framework?.SessionState.SESSION_RESUMED:n(!0),d(x),x&&c&&u(x);break;case window.cast?.framework?.SessionState.SESSION_ENDED:n(!1),d(null);break;default:break}})}catch(s){console.error("Error setting up session listener:",s)}};if(window.chrome&&window.chrome.cast&&window.cast)r();else if(window.__onGCastApiAvailable=function(s){s&&r()},!document.querySelector('script[src*="cast_sender.js"]')){const s=document.createElement("script");s.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.head.appendChild(s)}return()=>{}},[c,u]);const p=()=>{if(h)if(t)o&&o.endSession(!0);else try{const r=window.cast?.framework?.CastContext.getInstance();r&&r.requestSession().catch(a=>console.error("Error requesting cast session:",a))}catch(r){console.error("Error requesting cast session:",r)}};return i.useEffect(()=>{t&&o&&c&&u(o)},[c,t,o,u]),h?e.jsx(S,{title:t?k("stopCasting"):k("startCasting"),children:e.jsx(C,{ref:f,onClick:p,color:t?"primary":"default",children:t?e.jsx(ee,{}):e.jsx(te,{})})}):null}const b={light:ne,dark:se,system:A},ue={light:"Light theme",dark:"Dark theme",system:"Follow system"};function de({size:t="medium",variant:n="menu",tooltip:o,showLabels:d=!0,"aria-label":c}){const f=G(),{themeMode:h,resolvedThemeMode:m,setThemeMode:u,toggleTheme:p}=L(),{t:r}=M(),[a,s]=O.useState(null),g=!!a,x=h==="system"?A:b[m],I=()=>{n==="toggle"?p():s(null)},P=l=>{n==="menu"?s(l.currentTarget):I()},y=()=>{s(null)},R=l=>{u(l),y()},v=()=>o||(n==="toggle"?m==="light"?r("theme.switchToDark","Switch to dark theme"):r("theme.switchToLight","Switch to light theme"):r("theme.chooseTheme","Choose theme")),T=()=>c||(n==="toggle"?`Toggle theme, currently ${m}`:`Theme menu, currently ${h}`);return n==="toggle"?e.jsx(S,{title:v(),arrow:!0,children:e.jsx(C,{onClick:I,size:t,"aria-label":T(),sx:{transition:"all 0.3s ease","&:hover":{transform:"scale(1.1)",backgroundColor:"action.hover"},"& .MuiSvgIcon-root":{transition:"transform 0.3s ease"},"&:hover .MuiSvgIcon-root":{transform:"rotate(180deg)"}},children:e.jsx(x,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(S,{title:v(),arrow:!0,children:e.jsx(C,{onClick:P,size:t,"aria-label":T(),"aria-controls":g?"theme-menu":void 0,"aria-haspopup":"true","aria-expanded":g?"true":void 0,sx:{transition:"all 0.3s ease",backgroundColor:g?"action.selected":"transparent","&:hover":{transform:"scale(1.05)",backgroundColor:"action.hover"},"& .MuiSvgIcon-root":{transition:"transform 0.3s ease"}},children:e.jsx(x,{})})}),e.jsx($,{id:"theme-menu",anchorEl:a,open:g,onClose:y,TransitionComponent:F,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},PaperProps:{elevation:8,sx:{mt:1,minWidth:160,borderRadius:2,border:`1px solid ${f.palette.divider}`,"& .MuiMenuItem-root":{borderRadius:1,margin:"2px 4px",transition:"all 0.2s ease","&:hover":{backgroundColor:"action.hover",transform:"translateX(4px)"}}}},children:["light","dark","system"].map(l=>{const N=b[l],w=h===l;return e.jsxs(W,{onClick:()=>R(l),selected:w,sx:{fontWeight:w?600:400,backgroundColor:w?"action.selected":"transparent"},children:[e.jsx(q,{sx:{minWidth:36},children:e.jsx(N,{fontSize:"small",sx:{color:w?"primary.main":"text.secondary",transition:"color 0.2s ease"}})}),d&&e.jsx(H,{primary:r(`theme.${l}`,ue[l]),sx:{"& .MuiListItemText-primary":{fontSize:"0.875rem",color:w?"primary.main":"text.primary",transition:"color 0.2s ease"}}})]},l)})})]})}function he({playerList:t,innerRef:n,...o}){return e.jsxs("div",{...o,ref:n,children:[e.jsx(re,{color:"success",sx:{fontSize:8,marginRight:"0.2rem"}}),t.length]})}const me=i.lazy(()=>E(()=>import("./index.tsx-DgntVoCU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),ge=i.lazy(()=>E(()=>import("./index.tsx-DOAGmsTg.js"),__vite__mapDeps([11,6,1,2,7,4,12,3,9,13,14,15,10,8,16,17])));function xe(){return e.jsx(Q,{size:16})}function fe({room:t,playerList:n=[]}){const{t:o}=M(),[d,c]=i.useState(!1),[f,h]=i.useState(!1),{schedule:m}=ie(),u=Z(),p=()=>{c(!0),h(!0)},r=e.jsxs(e.Fragment,{children:[e.jsx(_,{variant:"h6",children:e.jsx(J,{i18nKey:"online"})}),e.jsx("ul",{children:n.map(a=>e.jsx("li",{children:e.jsx(_,{variant:"body1",children:a.displayName})},a.uid))})]});return e.jsx(U,{position:"fixed",children:e.jsxs(V,{disableGutters:!0,variant:"dense",component:"nav",className:"nav",children:[e.jsxs("div",{className:"site-name",children:[e.jsx(K,{component:"img",sx:{height:32},alt:"Blitzed Out Logo",src:ce}),e.jsx("h1",{className:"gradient-text",children:"Blitzed Out"})]}),e.jsx("div",{children:e.jsxs("div",{className:"nav-room-name",children:[e.jsx("h2",{children:ae(t)||t===void 0?o("public"):t}),e.jsx(S,{title:r,children:e.jsx(z,{playerList:n})}),e.jsx(C,{onClick:p,"aria-label":"schedule game",sx:{ml:2},children:e.jsx(X,{color:"primary",badgeContent:f?null:m.length,children:e.jsx(oe,{})})}),d&&e.jsx(Y,{children:e.jsx(i.Suspense,{fallback:e.jsx(xe,{}),children:e.jsx(me,{open:d,close:()=>c(!1),isMobile:u})})})]})}),e.jsxs("div",{className:"menu-drawer",children:[e.jsx(de,{size:"medium",variant:"menu","aria-label":"Toggle theme menu - choose between light, dark, or system theme"}),e.jsx(le,{}),e.jsx(i.Suspense,{fallback:null,children:e.jsx(ge,{})})]})]})})}const z=i.forwardRef(({playerList:t,...n},o)=>e.jsx(he,{playerList:t,...n,innerRef:o}));z.displayName="WrapPlayersOnline";const Ie=Object.freeze(Object.defineProperty({__proto__:null,default:fe},Symbol.toStringTag,{value:"Module"}));export{fe as N,Ie as i,ie as u};
