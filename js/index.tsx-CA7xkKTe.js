const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index.tsx-Ct68WTka.js","assets/index-CxGCeJLO.js","js/chunk-BgixYSR_.js","js/chunk-BSt5prxn.js","js/chunk-DwZ1iRu-.js","js/chunk-DrDkBt_V.js","js/chunk-hbSUYYRY.js","js/chunk-Cx_qUD5L.js","js/index.tsx-BiBxIsBA.js","js/chunk-CACYpAkC.js","js/chunk-Dd4tuh4O.js","js/chunk-C7PvMB7v.js","js/chunk-Bwg9F6F9.js","js/chunk-BWsq5OBy.js","js/chunk-D-j20EYA.js","js/chunk-B1ySd6_S.js","js/chunk-Bqb_EgiR.js","js/chunk-Cznjk1BU.js","js/chunk-B4PEA_xj.js","js/chunk-eXrMvu-N.js","js/index.tsx-G4gv_Vfv.js","js/index.tsx-DoSTmS-m.js","js/index.tsx-BYCZSXOO.js","js/chunk-Cj8mlm6Y.js","js/index.tsx-rZHKSmJL.js"])))=>i.map(i=>d[i]);
import{e as $,_ as C}from"../assets/index-CxGCeJLO.js";import{j as e,W as q,aw as H,Y as J,aI as X,b3 as Z,R as ee,Q as R,ac as ae,r as a,b4 as ne,M as se,S as te,b5 as oe,b2 as ie,aQ as le,I as re,b6 as ce,aa as O,V as ue,y as ge,x as de,as as me,ab as he}from"./chunk-BgixYSR_.js";import{T as pe,w as xe,u as fe,x as be,y as je,b as W,z as Ce,B as ye,F as Le,h as ke,I as Se}from"./chunk-DrDkBt_V.js";import{u as _e,D as Ie,A as we}from"./chunk-ZeU1iebl.js";import{u as V}from"./chunk-Cx_qUD5L.js";import{l as A,u as Te,b as De}from"./chunk-BWsq5OBy.js";import{u as B,T as l}from"./chunk-BSt5prxn.js";import{d as Me,e as Ae}from"./chunk-Cznjk1BU.js";import"./chunk-DwZ1iRu-.js";import"./chunk-hbSUYYRY.js";import"./chunk-Bwg9F6F9.js";import"./chunk-C7PvMB7v.js";import"./chunk-B4PEA_xj.js";import"./chunk-eXrMvu-N.js";function Be({open:m,onClose:c,onConfirm:h,onCancel:d,title:p,message:i,confirmText:x,cancelText:y,severity:r="info",confirmColor:u="primary"}){const{t}=B(),L=V(),o=()=>{d?d():c()},k=async()=>{try{await h(),c()}catch(S){console.error("Confirmation action failed:",S)}};return e.jsxs(q,{open:m,onClose:c,fullScreen:L,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"confirmation-dialog-title","aria-describedby":"confirmation-dialog-description",children:[e.jsx(H,{id:"confirmation-dialog-title",children:p}),e.jsxs(J,{children:[r!=="info"&&e.jsxs(X,{severity:r,sx:{mb:2},children:[r==="warning"&&t("warning"),r==="error"&&t("error"),r==="success"&&t("success")]}),e.jsx(Z,{id:"confirmation-dialog-description",children:i})]}),e.jsxs(ee,{sx:{p:2,gap:1},children:[e.jsx(R,{onClick:o,variant:"outlined",color:"inherit",fullWidth:L,children:y||t("cancel")}),e.jsx(R,{onClick:k,variant:"contained",color:u,fullWidth:L,autoFocus:!0,children:x||t("confirm")})]})]})}function ve({open:m,onClose:c,onRebuildBoard:h,onKeepBoard:d,fromLanguage:p,toLanguage:i}){const{t:x}=B(),y=A[p]?.label||p,r=A[i]?.label||i,u=()=>{h(),c()},t=()=>{d(),c()};return e.jsx(Be,{open:m,onClose:c,onConfirm:u,onCancel:t,title:e.jsx(l,{i18nKey:"languageChangeTitle"}),message:e.jsxs(e.Fragment,{children:[e.jsx(l,{i18nKey:"languageChangeMessage",values:{fromLanguage:y,toLanguage:r}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(l,{i18nKey:"languageChangeExplanation"})]}),confirmText:x("rebuildBoardAction"),cancelText:x("keepCurrentBoard"),severity:"info",confirmColor:"primary"})}const ze=a.lazy(()=>C(()=>import("./index.tsx-Ct68WTka.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),Ee=a.lazy(()=>C(()=>import("./index.tsx-BiBxIsBA.js"),__vite__mapDeps([8,2,3,6,5,7,9,10,11,12,1,4,13,14,15,16,17,18,19]))),Ke=a.lazy(()=>C(()=>import("./index.tsx-G4gv_Vfv.js"),__vite__mapDeps([20,2,3,15,5]))),Pe=a.lazy(()=>C(()=>import("./index.tsx-DoSTmS-m.js"),__vite__mapDeps([21,2,3,6,5,16,10,1,4,15,13,12]))),Re=a.lazy(()=>C(()=>import("./index.tsx-BYCZSXOO.js"),__vite__mapDeps([22,2,3,6,5,10,1,4,23,7,11,18]))),Oe=a.lazy(()=>C(()=>import("./index.tsx-rZHKSmJL.js"),__vite__mapDeps([24,2,3,14,1,4,5,7,10,15,16,11,17,12,13,18,19])));function aa(){const{id:m}=ae(),{user:c,logout:h,isAnonymous:d}=_e(),p=V(),{i18n:i}=B(),[x,y]=a.useState(!1),r=a.useCallback(n=>y(n),[]),u=Te()[0],[t,L]=a.useState({settings:!1,gameBoard:!1,about:!1,schedule:!1,customTiles:!1,linkAccount:!1,appSettings:!1,languageChange:!1}),o=a.useCallback((n,s)=>L(g=>({...g,[n]:s})),[]),k=a.useCallback(async()=>{await h(),r(!1)},[h,r]),S=n=>window.open(n,"_blank","noreferrer"),v=a.useMemo(()=>e.jsx(ne,{children:e.jsx("path",{d:"M18.942 5.556a16.299 16.299 0 0 0-4.126-1.297c-.178.321-.385.754-.529 1.097a15.175 15.175 0 0 0-4.573 0 11.583 11.583 0 0 0-.535-1.097 16.274 16.274 0 0 0-4.129 1.3c-2.611 3.946-3.319 7.794-2.965 11.587a16.494 16.494 0 0 0 5.061 2.593 12.65 12.65 0 0 0 1.084-1.785 10.689 10.689 0 0 1-1.707-.831c.143-.106.283-.217.418-.331 3.291 1.539 6.866 1.539 10.118 0 .137.114.277.225.418.331-.541.326-1.114.606-1.71.832a12.52 12.52 0 0 0 1.084 1.785 16.46 16.46 0 0 0 5.064-2.595c.415-4.396-.709-8.209-2.973-11.589zM8.678 14.813c-.988 0-1.798-.922-1.798-2.045s.793-2.047 1.798-2.047 1.815.922 1.798 2.047c.001 1.123-.793 2.045-1.798 2.045zm6.644 0c-.988 0-1.798-.922-1.798-2.045s.793-2.047 1.798-2.047 1.815.922 1.798 2.047c0 1.123-.793 2.045-1.798 2.045z"})}),[]),{setLocale:w,updateSettings:z}=De(),[E,K]=a.useState(!1),[T,_]=a.useState(null),P=Me(),{actionsList:D}=Ae(u?.gameMode),F=a.useCallback(async n=>{const s=n.target.value,g=i.resolvedLanguage||"en";if(g!==s){K(!0);try{await $(s),await i.changeLanguage(s),w(s),await new Promise(b=>{const j=()=>{i.off("languageChanged",j),b(void 0)};i.on("languageChanged",j),setTimeout(()=>{i.off("languageChanged",j),b(void 0)},500)}),_({from:g,to:s}),o("languageChange",!0)}catch(b){console.error("Error changing language:",b),await i.changeLanguage(s),w(s),await new Promise(j=>{const M=()=>{i.off("languageChanged",M),j(void 0)};i.on("languageChanged",M),setTimeout(()=>{i.off("languageChanged",M),j(void 0)},500)}),_({from:g,to:s}),o("languageChange",!0)}finally{K(!1)}}},[i,w,o]),I=a.useCallback(async n=>{if(n&&D)try{await P({...u,boardUpdated:!0},D)}catch(s){console.error("Error rebuilding board:",s),z({boardUpdated:!0})}_(null)},[P,u,D,z]),G=a.useCallback(async()=>{await I(!0)},[I]),U=a.useCallback(async()=>{await I(!1)},[I]),Q=a.useCallback(()=>{_(null),o("languageChange",!1)},[o]),N=a.useMemo(()=>Object.entries(A).map(([n,s])=>e.jsx(se,{value:n,children:s.label},n)),[]),Y=a.useMemo(()=>{const n=[{key:"gameBoard",title:e.jsx(l,{i18nKey:"gameBoards"}),icon:e.jsx(Ce,{}),onClick:()=>o("gameBoard",!0)},{key:"customTiles",title:e.jsx(l,{i18nKey:"customTilesLabel"}),icon:e.jsx(ye,{}),onClick:()=>o("customTiles",!0)},{key:"cast",title:e.jsx(l,{i18nKey:"tvMode"}),icon:e.jsx(Le,{}),onClick:()=>S(`/${m?.toUpperCase()}/cast`)},{key:"schedule",title:e.jsx(l,{i18nKey:"schedule"}),icon:e.jsx(ke,{}),onClick:()=>o("schedule",!0)},{key:"discord",title:"Discord",icon:v,onClick:()=>S("https://discord.gg/mSPBE2hFef")},{key:"about",title:e.jsx(l,{i18nKey:"about"}),icon:e.jsx(Se,{}),onClick:()=>o("about",!0)}];return c&&(n.unshift({key:"appSettings",title:e.jsx(l,{i18nKey:"appSettings"}),icon:e.jsx(pe,{}),onClick:()=>o("appSettings",!0)}),n.unshift({key:"settings",title:e.jsx(l,{i18nKey:u.advancedSettings?"settings":"setupWizard"}),icon:e.jsx(xe,{}),onClick:()=>o("settings",!0)}),d&&n.push({key:"linkAccount",title:e.jsx(l,{i18nKey:"linkAccount"}),icon:e.jsx(fe,{}),onClick:()=>o("linkAccount",!0)}),n.push({key:"logout",title:e.jsx(l,{i18nKey:"logout"}),icon:e.jsx(be,{}),onClick:()=>k()})),n},[c,m,d,u.advancedSettings,v,k,o]).map(({key:n,title:s,icon:g,onClick:b})=>e.jsx(te,{disablePadding:!0,onClick:b,children:e.jsxs(oe,{children:[e.jsx(ie,{children:g}),e.jsx(le,{primary:s})]})},n)),f=(n,s,g={})=>e.jsx(a.Suspense,{fallback:null,children:e.jsx(n,{open:t[s],close:()=>o(s.toString(),!1),isMobile:p,...g})});return e.jsxs(e.Fragment,{children:[e.jsx(re,{onClick:()=>r(!0),"aria-label":"open menu",children:e.jsx(je,{})}),e.jsx(ce,{anchor:"right",open:x,onClose:()=>r(!1),children:e.jsxs(O,{role:"presentation",onClick:()=>r(!1),sx:{width:250,display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(ue,{sx:{flexGrow:1},children:Y}),e.jsx(O,{sx:{borderTop:"1px solid rgba(0, 0, 0, 0.12)",p:2},children:e.jsxs(ge,{fullWidth:!0,size:"small",sx:{maxWidth:200},children:[e.jsxs(de,{id:"drawer-language-label",sx:{display:"flex",alignItems:"center","& .MuiInputLabel-root":{fontSize:"0.875rem"}},children:[e.jsx(W,{sx:{mr:.5,fontSize:"1rem"}}),e.jsx(l,{i18nKey:"language"})]}),e.jsx(me,{labelId:"drawer-language-label",id:"drawer-language-select",value:i.resolvedLanguage||"en",disabled:E,label:e.jsxs(e.Fragment,{children:[e.jsx(W,{sx:{fontSize:"1rem"}}),e.jsx(l,{i18nKey:"language"})]}),onChange:F,size:"small",inputProps:{endAdornment:E&&e.jsx(he,{size:16})},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},children:N})]})})]})}),t.settings&&f(Ee,"settings"),t.appSettings&&f(ze,"appSettings"),t.about&&e.jsx(a.Suspense,{fallback:null,children:e.jsx(Ie,{open:t.about,close:()=>o("about",!1),children:e.jsx(Ke,{})})}),t.gameBoard&&f(Pe,"gameBoard"),t.schedule&&f(Re,"schedule"),t.customTiles&&f(Oe,"customTiles"),t.linkAccount&&f(we,"linkAccount"),T&&e.jsx(ve,{open:t.languageChange,onClose:Q,onRebuildBoard:G,onKeepBoard:U,fromLanguage:T.from,toLanguage:T.to})]})}export{aa as default};
