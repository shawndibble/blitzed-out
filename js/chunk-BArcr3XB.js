const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index.tsx-Bmzk92Ao.js","js/chunk-C6Pi8TK2.js","js/chunk-gA50YDka.js","js/chunk-DT32YDKJ.js","js/chunk-BhAE5QJ2.js","js/chunk-BmWi31QJ.js","assets/index-vo-hWdNm.js","js/chunk-DwZ1iRu-.js","js/chunk-B4PEA_xj.js","js/chunk-GcFiVWk3.js","js/chunk-C7PvMB7v.js","js/index.tsx-CWWif5m7.js","js/chunk-CfvZARXT.js","js/chunk-pqaPnv92.js","js/chunk-CIYZIrix.js","js/chunk-BrNA7Hwt.js","js/chunk-DLJ2DhuC.js"])))=>i.map(i=>d[i]);
import{S as v,_ as C}from"../assets/index-vo-hWdNm.js";import{a7 as y,r as n,ad as I,j as e,aH as g,az as w,I as j,am as b,T as S,ax as O,aK as k,aM as A,aa as z,aN as N,aO as P,ab as R}from"./chunk-C6Pi8TK2.js";import{u as T}from"./chunk-GcFiVWk3.js";import{e as D,f as B,g as M,h as L}from"./chunk-BhAE5QJ2.js";import{i as G}from"./chunk-C7PvMB7v.js";function q(){const s=y.useContext(v);if(!s)throw new Error("ScheduleContext's value is undefined.");return s}const H="/img/blitzed-out-DGhYHOgx.png";window.__castApiInitialized=window.__castApiInitialized||!1;function F(){const[s,i]=n.useState(!1),[a,d]=n.useState(null),{id:c}=I(),p=n.useRef(null),[u,f]=n.useState(!1),l=n.useCallback(r=>{try{const o=`${window.location.origin}/${c}/cast`;r.sendMessage("urn:x-cast:com.blitzedout.app",{type:"LOAD",url:o})}catch(o){console.error("Error sending cast message:",o)}},[c]);n.useEffect(()=>{const r=()=>{try{if(!window?.cast?.framework)return;if(window.__castApiInitialized){f(!0),o();return}window.cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:"1227B8DE",autoJoinPolicy:window.chrome?.cast?.AutoJoinPolicy?.ORIGIN_SCOPED}),window.__castApiInitialized=!0,f(!0),o()}catch(t){console.error("Error initializing Cast API:",t)}},o=()=>{try{const t=window.cast?.framework?.CastContext.getInstance();if(!t)return;const x=t.getCurrentSession();if(x&&(i(!0),d(x),c&&l(x)),!window?.cast?.framework)return;t.addEventListener(window.cast.framework.CastContextEventType.SESSION_STATE_CHANGED,E=>{const h=t.getCurrentSession();switch(E.sessionState){case window.cast?.framework?.SessionState.SESSION_STARTED:case window.cast?.framework?.SessionState.SESSION_RESUMED:i(!0),d(h),h&&c&&l(h);break;case window.cast?.framework?.SessionState.SESSION_ENDED:i(!1),d(null);break;default:break}})}catch(t){console.error("Error setting up session listener:",t)}};if(window.chrome&&window.chrome.cast&&window.cast)r();else if(window.__onGCastApiAvailable=function(t){t&&r()},!document.querySelector('script[src*="cast_sender.js"]')){const t=document.createElement("script");t.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.head.appendChild(t)}return()=>{}},[c,l]);const m=()=>{if(u)if(s)a&&a.endSession(!0);else try{const r=window.cast?.framework?.CastContext.getInstance();r&&r.requestSession().catch(o=>console.error("Error requesting cast session:",o))}catch(r){console.error("Error requesting cast session:",r)}};return n.useEffect(()=>{s&&a&&c&&l(a)},[c,s,a,l]),u?e.jsx(g,{title:s?w("stopCasting"):w("startCasting"),children:e.jsx(j,{ref:p,onClick:m,color:s?"primary":"default",children:s?e.jsx(D,{}):e.jsx(B,{})})}):null}function J({playerList:s,innerRef:i,...a}){return e.jsxs("div",{...a,ref:i,children:[e.jsx(M,{color:"success",sx:{fontSize:8,marginRight:"0.2rem"}}),s.length]})}const K=n.lazy(()=>C(()=>import("./index.tsx-Bmzk92Ao.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),U=n.lazy(()=>C(()=>import("./index.tsx-CWWif5m7.js"),__vite__mapDeps([11,6,1,2,7,4,12,3,9,13,14,15,10,8,16])));function V(){return e.jsx(R,{size:16})}function W({room:s,playerList:i=[]}){const{t:a}=b(),[d,c]=n.useState(!1),[p,u]=n.useState(!1),{schedule:f}=q(),l=T(),m=()=>{c(!0),u(!0)},r=e.jsxs(e.Fragment,{children:[e.jsx(S,{variant:"h6",children:e.jsx(O,{i18nKey:"online"})}),e.jsx("ul",{children:i.map(o=>e.jsx("li",{children:e.jsx(S,{variant:"body1",children:o.displayName})},o.uid))})]});return e.jsx(k,{position:"fixed",children:e.jsxs(A,{disableGutters:!0,variant:"dense",component:"nav",className:"nav",children:[e.jsxs("div",{className:"site-name",children:[e.jsx(z,{component:"img",sx:{height:32},alt:"Blitzed Out Logo",src:H}),e.jsx("h1",{children:"Blitzed Out"})]}),e.jsx("div",{children:e.jsxs("div",{className:"nav-room-name",children:[e.jsx("h2",{children:G(s)||s===void 0?a("public"):s}),e.jsx(g,{title:r,children:e.jsx(_,{playerList:i})}),e.jsx(j,{onClick:m,"aria-label":"schedule game",sx:{ml:2},children:e.jsx(N,{color:"primary",badgeContent:p?null:f.length,children:e.jsx(L,{})})}),d&&e.jsx(P,{children:e.jsx(n.Suspense,{fallback:e.jsx(V,{}),children:e.jsx(K,{open:d,close:()=>c(!1),isMobile:l})})})]})}),e.jsxs("div",{className:"menu-drawer",children:[e.jsx(F,{}),e.jsx(n.Suspense,{fallback:null,children:e.jsx(U,{})})]})]})})}const _=n.forwardRef(({playerList:s,...i},a)=>e.jsx(J,{playerList:s,...i,innerRef:a}));_.displayName="WrapPlayersOnline";const ee=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as N,ee as i,q as u};
