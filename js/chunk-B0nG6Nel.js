import{r as u,q as O,j as e,t as E,v as me}from"./chunk-DDoLnHI0.js";import{n as oe,q as ae,t as he,v as pe,w as se,x as fe,y as xe,z as ye,i as Y,B as je,a as be}from"../assets/index-BodytYbc.js";import{u as ne}from"./chunk-BICGdz9x.js";import{T as ve}from"./chunk-BDM5WtNj.js";import{A as z,a as U,b as V}from"./chunk-BFzXl2Wc.js";import{C as Ce}from"./chunk-Ds_NjC-1.js";import{d as Te}from"./chunk-Bp62TkGl.js";import{i as q}from"./chunk-Dk7I1tJi.js";import{T as M,B as P,m as X,h as Z,ap as H,aq as J,ar as _,w as B,aE as Ae,k as we,aF as Me,S as Se,Q as ee,aG as Ee,R as Ie,aH as Le,au as ie,F as ke,C as Ge,aI as Fe,x as De,y as Pe,ak as Ne,z as Ke,G as Q,D as Oe}from"./chunk-D59Sa5ya.js";import{a as re,u as qe}from"./chunk-BmcVylZL.js";import{u as Be}from"./chunk-CrCBoQmf.js";function N(i){return[...Object.entries(i).flatMap(([d,{label:a,actions:p}])=>p?Object.keys(p).filter(x=>x!=="None").map((x,o)=>({group:Te(d),groupLabel:a,value:d,intensity:Number(o+1),translatedIntensity:x,label:`${a} - ${x}`})):[]),{group:q.t("misc"),groupLabel:q.t("misc"),value:"misc",intensity:1,translatedIntensity:q.t("all"),label:`${q.t("misc")} - ${q.t("all")}`}]}function $e(i){if(i.match(/\[|\]/g)?.length!==2)throw new Error("ctSeparatorError")}function Re(i,j){const d=i?.sort()||[],a=j?.sort()||[];return JSON.stringify(d)===JSON.stringify(a)}function We(i,j){const d=i.split(`
`).filter(Boolean),a=d[0],p=d[1],x=d.find(m=>m.startsWith("Tags:"))?.replace("Tags:","")?.trim()?.split(", ")?.filter(Boolean)||[],h=d.find(m=>m.startsWith("GameMode:"))?.replace("GameMode:","")?.trim()||"online",l=a.replace(/\[|\]/g,""),[c,y]=l.split(" - "),T=N(j[h]||{}).find(m=>m.translatedIntensity===y&&m.group===c);if(!T)throw new Error("ctGroupError");if(!p)throw new Error("ctActionError");return{group:T.value,intensity:T.intensity,action:p,tags:x,gameMode:h,isCustom:1}}function ze(i,j,d){const a=i?.split("---")||[];a.forEach($e);const p=a.map(o=>We(o,d)).filter(Boolean),C=[],x=[];return p.forEach(o=>{const h=j.find(l=>l.group===o.group&&l.intensity===o.intensity&&l.action===o.action&&l.gameMode===o.gameMode);h?h&&!Re(h.tags,o.tags)&&x.push({...h,tags:o.tags}):C.push(o)}),{newUniqueRecords:C,changedTagRecords:x}}function Ue({expanded:i,handleChange:j,customTiles:d,mappedGroups:a,setSubmitMessage:p,bulkImport:C}){const x=u.useRef(null),{t:o}=O(),[h,l]=u.useState(""),c=u.useCallback(()=>{const T=d.filter(m=>m.isCustom).map(({group:m,intensity:f,action:I,tags:n,gameMode:A="online"})=>{const t=N(a[A]||{}).find(b=>b?.intensity===Number(f)&&b?.value===m);let s="";return s+=`[${t?.group||m} - ${t?.translatedIntensity||f}]
`,s+=I,s+=n?.length?`
Tags: `+n?.join(", "):"",s+=`
GameMode: ${A}`,s});l(T.join(`
---
`))},[d,a,l]);async function y(r){if(!r.current)return;const m=r.current.importData.value;let f=[],I=[];try{const{newUniqueRecords:n,changedTagRecords:A}=ze(m,d,a);f=n,I=A}catch(n){if(n instanceof Error)return p({type:"error",message:o(n.message)})}return!f.length&&!I.length?p({type:"error",message:o("ctNoNewError")}):(f.length&&(f.forEach(async n=>{oe(`${n.group} - ${n.intensity}`,n.action)}),C(f)),I.length&&await Promise.all(I.map(async n=>{n.id!==void 0&&await ae(n.id,n)})),c())}return u.useEffect(()=>{i==="ctImport"&&c()},[i,d,c]),e.jsxs(z,{expanded:i==="ctImport",onChange:j("ctImport"),children:[e.jsx(U,{"aria-controls":"ctImport-content",id:"ctImport-header",children:e.jsx(M,{children:e.jsx(E,{i18nKey:"importExport"})})}),e.jsxs(V,{children:[e.jsx(M,{variant:"body1",sx:{mb:2},children:e.jsx(E,{i18nKey:"ctImportDescription"})}),e.jsxs(P,{component:"form",method:"post",ref:x,children:[e.jsx(X,{id:"importData",name:"importData",multiline:!0,required:!0,fullWidth:!0,sx:{pb:2},value:h,onChange:r=>l(r.target.value),InputProps:{endAdornment:e.jsx(Ce,{text:h}),sx:{alignItems:"flex-start"}}}),e.jsx(Z,{fullWidth:!0,variant:"contained",type:"button",onClick:()=>y(x),children:e.jsx(E,{i18nKey:"import"})})]})]})]})}function le({gameMode:i,groupFilter:j,intensityFilter:d,groups:a,mappedGroups:p,onGameModeChange:C,onGroupChange:x,onIntensityChange:o,hideAll:h=!1,sx:l={}}){const{t:c}=O(),[y,r]=u.useState([]),T=h?1:"all";u.useEffect(()=>{if(a){const n=Object.keys(a);r(n)}},[a,i]);function m(n){const A=n.target.value;x(A),o(T)}if(!y?.length)return null;const f=y.length===0||y.includes(j)?j:"",I=d==="all"?"all":d;return e.jsxs(P,{sx:{display:"flex",flexWrap:"wrap",gap:2,...l},children:[e.jsxs(H,{sx:{width:125,flexShrink:0},children:[e.jsx(J,{id:"game-mode-filter-label",children:e.jsx(E,{i18nKey:"customTiles.gameMode"})}),e.jsxs(_,{labelId:"game-mode-filter-label",id:"game-mode-filter",value:i,label:c("customTiles.gameMode","Game Mode"),onChange:n=>{C(n.target.value)},slotProps:{input:{"aria-label":c("customTiles.gameMode","Game Mode")}},children:[e.jsx(B,{value:"online",children:e.jsx(E,{i18nKey:"online"})}),e.jsx(B,{value:"local",children:e.jsx(E,{i18nKey:"local"})})]})]}),e.jsxs(H,{sx:{minWidth:150,flex:1},children:[e.jsx(J,{id:"group-filter-label",children:e.jsx(E,{i18nKey:"group"})}),e.jsx(_,{labelId:"group-filter-label",id:"group-filter",value:f,label:c("group"),onChange:m,slotProps:{input:{"aria-label":c("group")}},children:y.map(n=>e.jsxs(B,{value:n,children:[p?.[i]&&Array.isArray(N(p[i]))&&N(p[i]).find(A=>A.value===n)?.groupLabel||n,!h&&a[n]&&` (${a[n].count})`]},n))})]}),e.jsxs(H,{sx:{minWidth:200,flex:1},disabled:!f,children:[e.jsx(J,{id:"intensity-filter-label",children:e.jsx(E,{i18nKey:"customTiles.intensityLevel",children:"Intensity Level"})}),e.jsxs(_,{labelId:"intensity-filter-label",id:"intensity-filter",value:I,label:c("customTiles.intensityLevel","Intensity Level"),onChange:n=>o(n.target.value),slotProps:{input:{"aria-label":c("customTiles.intensityLevel","Intensity Level")}},children:[!h&&e.jsx(B,{value:"all",children:e.jsx(E,{i18nKey:"all",children:"All"})},"all"),f&&a&&a[f]&&Object.entries(a[f].intensities||{}).sort(([n],[A])=>Number(n)-Number(A)).map(([n,A])=>e.jsxs(B,{value:Number(n),children:[p?.[i]&&Array.isArray(N(p[i]))?N(p[i]).find(S=>S.value===f&&S.intensity===Number(n))?.translatedIntensity||`Level ${n}`:`Level ${n}`,!h&&A!==void 0?` (${A})`:""]},n))]})]})]})}function Ve({setSubmitMessage:i,boardUpdated:j,customTiles:d,mappedGroups:a,expanded:p,handleChange:C,tagList:x,updateTileId:o,setUpdateTileId:h}){const{t:l}=O(),{settings:c}=re(),[y,r]=u.useState({gameMode:c.gameMode||"online",group:"",intensity:"",action:"",tags:[l("custom")]}),[T,m]=u.useState({});u.useEffect(()=>{try{const t={};a[y.gameMode]&&N(a[y.gameMode]).forEach(b=>{const{value:L,label:k,intensity:v}=b;t[L]||(t[L]={label:k,intensities:{}}),v!==void 0&&(t[L].intensities[v]=1)}),m(t),setTimeout(()=>{r(s=>{if(!s.group||!t[s.group]){const b=Object.keys(t)[0];let L="";return b&&t[b]&&Object.keys(t[b].intensities).length>0&&(L=Number(Object.keys(t[b].intensities)[0])),{...s,group:s.group||b||"",intensity:y.intensity||L||""}}return s})},0)}catch(t){console.error("Error processing groups:",t),m({})}},[y.gameMode,a]),u.useEffect(()=>{const s=(Array.isArray(d)?d:[]).find(({id:b})=>b===o);if(s){const b=s.gameMode||c.gameMode;r({gameMode:b,group:s.group||"",intensity:s.intensity||"",action:s.action||"",tags:s.tags||[l("custom")]})}else r(b=>({...b,gameMode:c.gameMode}))},[o,c.gameMode,d,l]);function f(t,s,b){return(Array.isArray(d)?d:[]).find(k=>k.group===t&&k.intensity===s&&k.action===b)}function I(){h(null),r({gameMode:c.gameMode,group:y.group||"alcohol",intensity:y.intensity||1,action:"",tags:[l("custom")]})}async function n(){const t=document.querySelector('input[name="tags"]'),s=[...y.tags];t&&t.value.trim()&&(s.push(t.value.trim()),t.value="");const{gameMode:b,group:L,intensity:k,action:v}=y;if(!b||!L||!k||!v)return i({message:l("allFieldsRequired","All fields are required"),type:"error"});if(o==null&&f(L,k,v))return i({message:l("actionExists"),type:"error"});const F={group:L,intensity:Number(k),action:v,tags:s,gameMode:b,isCustom:1};if(o===null){let D=`${L} - Level ${k}`;if(Array.isArray(N(a?.[b]))){const $=N(a[b]).find(R=>R.value===L&&R.intensity===Number(k));$?.label&&(D=$.label)}oe(D,v),he(F)}else ae(o,F);return j(),r(D=>({...D,action:"",tags:[l("custom")]})),i({message:l("customAdded"),type:"success"})}const A=t=>{switch(t.key){case",":case"Enter":{t.preventDefault(),t.stopPropagation(),t.currentTarget.value.length>0&&(r(s=>({...s,tags:[...s.tags,t.currentTarget.value]})),t.currentTarget.value="");break}}},S=t=>{t.target.value.length>0&&(r(s=>({...s,tags:[...s.tags,t.target.value]})),t.target.value=""),setTimeout(()=>{const s=document.querySelector(".MuiAutocomplete-popper");s&&(s.style.display="none")},150)};return e.jsxs(z,{expanded:p==="ctAdd",onChange:C("ctAdd"),children:[e.jsx(U,{"aria-controls":"ctAdd-content",id:"ctAdd-header",children:e.jsx(M,{children:e.jsx(E,{i18nKey:o?"ctUpdate":"ctAdd"})})}),e.jsx(V,{children:e.jsxs(P,{component:"form",method:"post",className:"settings-box",children:[e.jsx(le,{gameMode:y.gameMode,groupFilter:y.group,intensityFilter:y.intensity,groups:T,mappedGroups:a,onGameModeChange:t=>{r(s=>({...s,gameMode:t,group:"",intensity:""}))},onGroupChange:t=>{r(s=>({...s,group:t,intensity:""}))},onIntensityChange:t=>{r(s=>({...s,intensity:Number(t)}))},hideAll:!0,sx:{mb:2}}),e.jsx(X,{id:"action",name:"action",required:!0,fullWidth:!0,label:l("action"),sx:{pb:2},value:y.action,onChange:t=>{r({...y,action:t.target.value})}}),e.jsx(Ae,{id:"tags",disableCloseOnSelect:!0,multiple:!0,freeSolo:!0,options:x,value:y.tags,onChange:(t,s)=>{r({...y,tags:s})},renderInput:t=>(t.inputProps.onKeyDown=A,t.inputProps.onBlur=S,e.jsx(X,{...t,label:l("tags")})),sx:{pb:2},clearOnBlur:!0,blurOnSelect:!0,openOnFocus:!0,disablePortal:!1,componentsProps:{popper:{modifiers:[{name:"preventOverflow",options:{altAxis:!0,altBoundary:!0,padding:8}}]}}}),e.jsxs(P,{display:"flex",justifyContent:"space-evenly",children:[e.jsx(Z,{variant:"contained",type:"button",onClick:()=>I(),children:e.jsx(E,{i18nKey:"clear"})}),e.jsx(Z,{variant:"contained",type:"button",onClick:n,children:e.jsx(E,{i18nKey:o?"ctUpdate":"ctAdd"})})]})]})})]})}function He({expanded:i,handleChange:j}){return e.jsxs(e.Fragment,{children:[e.jsxs(z,{expanded:i==="help1",onChange:j("help1"),children:[e.jsx(U,{"aria-controls":"help1-content",id:"help1-header",children:e.jsx(M,{children:e.jsx(E,{i18nKey:"ctExplained"})})}),e.jsx(V,{children:e.jsxs(E,{i18nKey:"ctExplainedDescription",children:[e.jsx(M,{sx:{mb:2},children:"Custom tiles let you add your own variations to the game board. Utilize this dialog to add and remove tiles as you see fit."}),e.jsx(M,{sx:{mb:2},children:"Custom tiles are added based on the kink and intensity you pick from the drop down. As such, you need to have that kink and intensity (or a higher intensity) selected for your custom tiles to show on the board."}),e.jsx(M,{children:"Miscellaneous tiles are the only exception to the above. Regardless of what other options you pick, Miscellaneous tiles will show as their own group. If you use this option, ensure that you add multiple tiles to minimize repeats."})]})})]}),e.jsxs(z,{expanded:i==="help2",onChange:j("help2"),children:[e.jsx(U,{"aria-controls":"help2-content",id:"help2-header",children:e.jsx(M,{children:e.jsx(E,{i18nKey:"ctIdeas"})})}),e.jsx(V,{children:e.jsxs(E,{i18nKey:"ctIdeasDescription",children:[e.jsx(M,{variant:"h6",children:"Add new Activities"}),e.jsx(M,{variant:"subtitle2",sx:{mb:2},children:"Come up with new activities that are not part of the existing list"}),e.jsx(M,{variant:"h6",children:"Add harder tiles to easier intensities"}),e.jsx(M,{variant:"subtitle2",sx:{mb:1},children:"When you pick higher intensity levels, the game will use the earlier intensity level and gradual move to whatyou picked. If you want harder tiles early on, add several to lower intensities."}),e.jsx(M,{variant:"subtitle2",sx:{mb:2},children:"Example: You play Poppers - Advanced. Add advanced tiles to Poppers - Beginner"}),e.jsx(M,{variant:"h6",children:"Combine activities into a single tile"}),e.jsx(M,{variant:"subtitle2",sx:{mb:1},children:"Combine multiple activites together in a single tile that normally would not go together."}),e.jsx(M,{variant:"subtitle2",sx:{mb:2},children:"Example: Spit roast. Use a toy in your throat and ass at the same time."}),e.jsx(M,{variant:"h6",children:"Miscellaneous custom tiles"}),e.jsx(M,{variant:"subtitle2",sx:{mb:1},children:"Miscellaneous tiles allow you to add your own tiles without including other groups. Be aware, you will want to add several options to this group to minimize repeats."})]})})]})]})}function Je({tagList:i,boardUpdated:j,mappedGroups:d,updateTile:a,refreshTrigger:p}){const{t:C,i18n:x}=O(),{settings:o}=re(),[h,l]=u.useState(null),[c,y]=u.useState(o.gameMode||"online"),[r,T]=u.useState(""),[m,f]=u.useState(""),[I,n]=u.useState(1),[A,S]=u.useState(!0),[t,s]=u.useState({items:[],total:0,totalPages:1}),[b,L]=u.useState({}),k=10;u.useEffect(()=>{async function g(){try{S(!0);const w=await pe(x.resolvedLanguage,c,h);L(w);const G=Object.keys(w),K=G.includes(r);(!r||!K)&&G.length>0?(T(G[0]),f("all")):K&&m!=="all"&&(Object.keys(w[r]?.intensities||{}).includes(String(m))||f("all"))}catch(w){console.error("Error loading groups:",w)}finally{S(!1)}}g()},[c,x.resolvedLanguage,h,r,m]),u.useEffect(()=>{let g=!0;async function w(){try{S(!0);const G={group:r,intensity:m==="all"?null:Number(m),tag:h,gameMode:c,locale:o.locale,page:I,limit:k,paginated:!0},K=await se(G);g&&(s(K),setTimeout(()=>{g&&S(!1)},300))}catch(G){console.error("Error loading tiles:",G),g&&S(!1)}}return r?w():S(!1),()=>{g=!1}},[r,m,h,c,I,k,p,o.locale]);function v(g){S(!0),l(h===g?null:g)}function F(g,w){S(!0),n(w)}async function D(g){await fe(g),j();const w={group:r,intensity:m==="all"?null:m,tag:h,gameMode:c,locale:o.locale,page:I,limit:k,paginated:!0},G=await se(w);s(G)}async function $(g){await xe(g),j(),s(w=>({...w,items:w.items.map(G=>G.id===g?{...G,isEnabled:!G.isEnabled}:G)}))}function R(g){a(g);const w=document.querySelector(".MuiDialogContent-root");w&&(w.scrollTop=0)}const ce=t.items?.map(({id:g,group:w,intensity:G,action:K,tags:te,isEnabled:ue=!0,isCustom:de=!0})=>e.jsxs(we,{sx:{my:2},children:[e.jsx(Me,{title:K,slotProps:{title:{variant:"body1"},subheader:{variant:"body2"},action:{"aria-label":C("customTiles.actions")}},subheader:d?.[c]&&Array.isArray(N(d[c]))?N(d[c]).find(({value:W,intensity:ge})=>W===w&&ge===Number(G))?.label:`${w} - Level ${G}`,action:e.jsxs(e.Fragment,{children:[e.jsx(Se,{checked:!!ue,onChange:()=>g!==void 0&&$(g),slotProps:{input:{"aria-label":C("customTiles.toggleTile")}}}),!!de&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{onClick:()=>g!==void 0&&R(g),"aria-label":C("customTiles.update"),children:e.jsx(Ee,{})}),e.jsx(ee,{onClick:()=>g!==void 0&&D(g),"aria-label":C("customTiles.delete"),children:e.jsx(Ie,{})})]})]}),sx:{pb:0}}),e.jsx(Le,{children:te?.map(W=>e.jsx(ie,{label:W,sx:{m:.5}},W))})]},g));return e.jsxs(P,{children:[e.jsx(P,{children:i?.map(g=>e.jsx(ie,{label:g,sx:{m:.5},color:h===g?"primary":"default",onClick:()=>v(g)},g))}),e.jsx(P,{sx:{display:"flex",flexDirection:"column",gap:2,my:2,transition:"all 0.3s ease-in-out"},children:e.jsx(le,{gameMode:c,groupFilter:r,intensityFilter:m,groups:b,mappedGroups:d,onGameModeChange:g=>{y(g),T(""),f(""),n(1)},onGroupChange:g=>{T(g),n(1)},onIntensityChange:g=>{f(g),n(1)}})}),e.jsxs(P,{sx:{position:"relative",minHeight:"200px"},children:[e.jsx(ke,{in:A,timeout:300,children:e.jsx(P,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0)",zIndex:1,borderRadius:1},children:e.jsx(Ge,{})})}),e.jsx(P,{sx:{opacity:A?.3:1,transition:"opacity 0.3s ease-in-out",pointerEvents:A?"none":"auto"},children:t.items.length===0?e.jsx(M,{variant:"body1",sx:{textAlign:"center",my:4},children:e.jsx(E,{i18nKey:"customTiles.noTilesFound",children:"No tiles found with the selected filters."})}):e.jsxs(e.Fragment,{children:[ce,t.totalPages>1&&e.jsx(P,{sx:{display:"flex",justifyContent:"center",mt:3,mb:2},children:e.jsx(Fe,{count:t.totalPages,page:I,onChange:F,color:"primary"})}),e.jsx(M,{variant:"body2",sx:{textAlign:"center",mt:2,color:"text.secondary"},children:e.jsxs(E,{i18nKey:"customTiles.showingTiles",values:{shown:t.items.length,total:t.total},children:["Showing ",{shown:t.items.length}," of ",{total:t.total}," tiles"]})})]})})]})]})}function at({boardUpdated:i,setOpen:j,open:d=!1}){const{t:a,i18n:p}=O(),C=ne(),x=ne("md"),[o,h]=u.useState({message:"",type:"info"}),[l,c]=u.useState("ctAdd"),[y,r]=u.useState(null),[T,m]=u.useState(0),[f,I]=u.useState({online:{},local:{},solo:{}}),[n,A]=u.useState(!0),S=u.useCallback(()=>{m(v=>v+1)},[]),t=v=>(F,D)=>{c(D?v:"")};u.useEffect(()=>{async function v(){A(!0);try{const[F,D]=await Promise.all([Y(p.resolvedLanguage,"online"),Y(p.resolvedLanguage,"local")]);I({online:F,local:D,solo:{}})}catch(F){console.error("Error loading game mode actions:",F)}finally{A(!1)}}v()},[p.resolvedLanguage]);const s=me(()=>je({locale:p.resolvedLanguage})),b=u.useMemo(()=>s?Array.isArray(s)?s.map(({tags:v})=>v).flat().filter((v,F,D)=>v&&D.indexOf(v)===F).sort():[]:[],[s]),L=u.useCallback(async v=>{await ye(v),i(),S()},[i,S]);if(!s||n)return null;const k=()=>{const v=e.jsxs(e.Fragment,{children:[e.jsx(He,{expanded:l,handleChange:t}),e.jsx(Ve,{setSubmitMessage:h,boardUpdated:()=>{i(),S()},customTiles:s,mappedGroups:f,expanded:l,handleChange:t,tagList:b,updateTileId:y,setUpdateTileId:r}),e.jsx(Ue,{expanded:l,handleChange:t,customTiles:s,mappedGroups:f,setSubmitMessage:h,bulkImport:L})]}),F=Array.isArray(s)&&s.length>0&&e.jsx(P,{children:e.jsx(Je,{tagList:b,boardUpdated:()=>{i(),S()},mappedGroups:f,updateTile:D=>{r(D),c("ctAdd")},refreshTrigger:T})});return x?e.jsxs(e.Fragment,{children:[v,F&&e.jsxs(e.Fragment,{children:[e.jsx(Oe,{sx:{my:2}}),F]})]}):e.jsxs(Q,{container:!0,spacing:2,children:[e.jsx(Q,{size:{xs:12,md:6},children:v}),e.jsx(Q,{size:{xs:12,md:6},children:F})]})};return e.jsxs(e.Fragment,{children:[e.jsxs(De,{fullScreen:C,open:d,onClose:()=>j(!1),maxWidth:x?"sm":"lg",fullWidth:!0,children:[e.jsxs(Pe,{children:[e.jsx(E,{i18nKey:"manageTiles"}),e.jsx(ee,{"aria-label":a("close"),onClick:()=>j(!1),sx:{position:"absolute",right:8,top:8,color:v=>v.palette.grey[500]},children:e.jsx(Ne,{})})]}),e.jsx(Ke,{children:k()})]}),e.jsx(ve,{open:!!o.message,close:()=>h({message:"",type:"info"}),type:o.type,children:o.message})]})}function rt(i={},j={}){const[d]=qe(),[a,p]=u.useState({...i,...d||{},...j}),{messages:C}=Be(),[x,o]=u.useState(!1);return u.useEffect(()=>{const h=be(C,"room");if(h?.settings)try{const l=JSON.parse(h.settings);p(c=>{if(!x)return o(!0),{...c,...l};if(Object.keys(c).some(r=>{const T=c[r];return T?.type&&["solo","foreplay","sex","consumption"].includes(T.type)})){const r=Object.keys(l).reduce((T,m)=>{const f=l[m];return(!f?.type||!["solo","foreplay","sex","consumption"].includes(f.type))&&(T[m]=f),T},{});return{...c,...r}}return{...c,...l}})}catch(l){console.error("Error parsing message settings:",l)}else x||o(!0)},[C,x]),[a,p]}function lt(i){const{i18n:j}=O(),[d,a]=u.useState({}),[p,C]=u.useState(!0),x=u.useCallback(async()=>{if(i){C(!0);try{const o=await Y(j.resolvedLanguage,i);a(o)}catch(o){console.error("Error importing actions:",o),a({})}finally{C(!1)}}},[i,j.resolvedLanguage]);return u.useEffect(()=>{x()},[x]),{actionsList:d,isLoading:p}}export{at as C,lt as a,rt as u};
