import{r as i,u as S,j as e,t as k}from"./chunk-DDoLnHI0.js";import{T as B}from"./chunk-BDM5WtNj.js";import{a as j}from"../assets/index-BodytYbc.js";import{u as F}from"./chunk-CrCBoQmf.js";import{p as A,R}from"./chunk-CbNvPdBh.js";import{u as L}from"./chunk-jE3-WMs2.js";import{t as y}from"./chunk-Dk7I1tJi.js";import{B as a,h as M,T as l,G as g,D as I}from"./chunk-D59Sa5ya.js";import"./chunk-CtIAsvv6.js";import"./chunk-CoPHbQIg.js";import"./chunk-CbUvEgHM.js";import"./chunk-COViFSNc.js";import"./chunk-Bp62TkGl.js";import"./chunk-B4PEA_xj.js";import"./chunk-dH9yT-e4.js";import"./chunk-CXIw3Iqt.js";function P(r){const s=j(r,"room");let n=!1,t="";if(s){const{roomBackgroundURL:c}=JSON.parse(s.settings),o=A(c);o?.isVideo&&(n=o.isVideo),o?.url&&(t=o.url)}return["color","gray"].some(c=>t.includes(c))&&(t=""),{isVideo:n,url:t}}function $(){const[r,s]=i.useState(document.fullscreenElement!=null);i.useEffect(()=>{const t=()=>{s(document.fullscreenElement!=null)};return document.addEventListener("fullscreenchange",t),()=>{document.removeEventListener("fullscreenchange",t)}},[]);const n=i.useCallback(()=>{document.fullscreenElement==null?document.documentElement.requestFullscreen().catch(t=>{console.error("Error attempting to enable fullscreen:",t)}):document.exitFullscreen().catch(t=>{console.error("Error attempting to exit fullscreen:",t)})},[]);return{isFullscreen:r,toggleFullscreen:n}}const w="actions",V=r=>{const{text:s,displayName:n}=r;if(!n)return{};const t=s?.split(`
`),[c,o]=t?.slice(1)||[],m=c?.split(":")[1]?.trim(),d=o?.split(":")[1]?.trim();return{displayName:n,type:m,activity:d}};function te(){const{id:r}=S(),{messages:s,isLoading:n}=F(),[t,c]=i.useState(""),[o,m]=i.useState(!1),[d,v]=i.useState(!1),{isVideo:C,url:h}=P(s),f=j(s,w),p=L(f),{isFullscreen:E,toggleFullscreen:N}=$();if(i.useEffect(()=>{const u=window.cast?.framework?.CastReceiverContext;return u&&(document.body.classList.add("cast-receiver-mode"),v(!0)),()=>{u&&document.body.classList.remove("cast-receiver-mode")}},[]),i.useEffect(()=>{if(n)return;const u=s[s.length-1];u?.type==="settings"&&(m(!0),c(`${u.displayName} ${y("changedSettings")}`))},[s,n]),!f)return null;const{displayName:b,type:T,activity:x}=V(f);return e.jsxs(a,{className:"flex-column",children:[!!h&&e.jsx(R,{url:h,isVideo:C}),e.jsxs(a,{display:"flex",justifyContent:"space-between",sx:{mx:2,mt:2,mb:-2},children:[e.jsx(a,{flex:"1",children:!d&&!E&&e.jsx(M,{variant:"text",onClick:N,children:"Fullscreen"})}),e.jsx(a,{textAlign:"center",flex:"1",children:!!p?.displayName&&e.jsx(l,{variant:"h4",children:e.jsx(k,{i18nKey:"nextPlayersTurn",values:{player:p.displayName}})})},p?.displayName),e.jsx(a,{flex:"1",textAlign:"right",className:"text-stroke",children:x&&e.jsxs(l,{variant:"h4",children:["blitzedout.com/",r]})})]}),e.jsx(g,{container:!0,spacing:0,direction:"column",alignItems:"center",justifyContent:"center",className:"cast-container",children:e.jsx(g,{container:!0,justifyContent:"center",children:x?e.jsxs(g,{size:12,className:"action-box",children:[e.jsx(l,{variant:"h3",children:`${T} ${y("for")} ${b}`}),e.jsx(a,{className:"divider",children:e.jsx(I,{})}),e.jsx(l,{variant:"h1",children:x})]}):e.jsx("div",{className:"action-box",children:e.jsxs(l,{variant:"h1",children:["blitzedout.com/",r]})})})},s.length),e.jsx(B,{open:!!o,close:()=>m(!1),hideCloseButton:!0,children:e.jsx(l,{variant:"h5",children:t})})]})}export{te as default};
