const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/chunk-OoHi2jf4.js","js/chunk-CMb_ATvh.js","js/chunk-BVhHzeSz.js","js/index.tsx-CKuyLebH.js","js/chunk-C7PvMB7v.js","js/chunk-BfQNrE3P.js","js/chunk-ClYjm9Ad.js","js/chunk-jdmcjs0s.js","js/chunk-B-Pfj4Vk.js","assets/index-BPZ_Msrf.js","js/chunk-B90GCnie.js","js/chunk-BUE_ixxi.js","js/chunk-DOVm5_QK.js","js/chunk-DQWlF9SU.js","js/chunk-Bp-jfObm.js","js/chunk-DF6wAis7.js","js/chunk-BHUSFDWr.js","js/chunk-B4PEA_xj.js","js/chunk-B8IgU524.js","js/index.tsx-DuTeNfDS.js","js/chunk-j1Ux3wQQ.js","js/chunk-BBrONRl2.js","js/chunk-Db3fAQdt.js","js/index.tsx-BdzEoj22.js","js/index.tsx-B9jxi_dd.js","js/chunk-Co42b5Hr.js","js/chunk-CD5zLcyF.js","js/index.tsx-36CMtzy8.js","js/chunk-CSHjYO8F.js"])))=>i.map(i=>d[i]);
import{_ as z,p as se,d as q,l as H,a as ue,s as ce,b as de,g as me,c as fe,u as pe,f as ge}from"../assets/index-BPZ_Msrf.js";import{am as B,r as i,j as e,aA as he,aB as xe,E as be,aa as _,T as E,ax as L,a1 as X,Q as P,a7 as w,ac as ye,as as je,az as I,O as Se,K as ve,P as Ce,aC as Re,n as Me,M as Te,W as ke,aD as De,Y as Ne,aE as Ae,aF as we,z as K,A as Be,R as Oe,aG as _e,ad as Ee,ab as Le}from"./chunk-CMb_ATvh.js";import Pe from"./index.tsx-B9jxi_dd.js";import{C as Ie}from"./chunk-BBrONRl2.js";import{u as ne,C as $e,G as Ge,s as Fe}from"./chunk-j1Ux3wQQ.js";import{e as ae,a as Ue,i as G,b as re}from"./chunk-C7PvMB7v.js";import{u as F}from"./chunk-BUE_ixxi.js";import{t as ze}from"./chunk-BfQNrE3P.js";import{u as V}from"./chunk-B-Pfj4Vk.js";import{u as Q}from"./chunk-B8IgU524.js";import{u as oe,g as Ve,R as Ke}from"./chunk-Co42b5Hr.js";import{T as ie}from"./chunk-ClYjm9Ad.js";import We from"./index.tsx-36CMtzy8.js";import{u as Je}from"./chunk-CD5zLcyF.js";import{u as He,s as Qe}from"./chunk-BHUSFDWr.js";import{i as Ye}from"./chunk-DOVm5_QK.js";import{u as le}from"./chunk-BVhHzeSz.js";import{u as qe}from"./chunk-DQWlF9SU.js";import{N as Z}from"./chunk-CSHjYO8F.js";import{A as Xe,C as ee,c as Ze}from"./chunk-jdmcjs0s.js";const et=t=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:800,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,[t.breakpoints.down("sm")]:{width:"90%"}});function tt({open:t,text:s="",displayName:a="",handleClose:n,stopAutoClose:r=()=>null,nextPlayer:u=null,isMyMessage:l=!1}){const{t:d}=B(),[f,b]=i.useState(!1),g=s?.match(/#\d*:.*(?=\n)/gs),v=ae(s)||"",h=Ue(s,d("seconds")),{timeLeft:y,togglePause:p}=ne(20,!1),[m,o]=i.useState(!0),c=u?.displayName,j=i.useCallback(()=>{p(),r(),o(!1)},[p,r,o]),S=i.useCallback(()=>{j(),b(!0)},[j]),D=i.useCallback(()=>{b(!1)},[]);return e.jsxs("div",{children:[e.jsx(he,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:t,onClose:n,slots:{backdrop:xe},slotProps:{backdrop:{timeout:500}},children:e.jsx(be,{in:t,children:e.jsxs(_,{sx:et,children:[e.jsx(E,{id:"transition-modal-title",variant:"h6",component:"h2",children:`${g} ${d("for")} ${a}`}),e.jsx(Ie,{close:n}),e.jsx(E,{id:"transition-modal-description",variant:"h4",sx:{mt:2},children:v}),e.jsx("br",{}),e.jsx(E,{variant:"caption",children:m?e.jsx(L,{i18nKey:"autoCloseModal",values:{timeLeft:y}}):e.jsx(L,{i18nKey:"autoCloseStopped"})}),e.jsx("br",{}),h?.length&&e.jsxs(e.Fragment,{children:[e.jsx(L,{i18nKey:"timers"}),h.map(x=>e.jsx($e,{textString:x,preventParentClose:j},x))]}),!!u&&e.jsxs(_,{textAlign:"center",children:[e.jsx(X,{style:{margin:"1rem 0 0.5rem"}}),e.jsx(E,{variant:"body1",children:u.isSelf?e.jsx(L,{i18nKey:"yourTurn"}):e.jsx(L,{i18nKey:"nextPlayersTurn",values:{player:c}})})]}),!!l&&s.includes(d("finish"))&&e.jsxs(_,{textAlign:"center",children:[e.jsx(X,{style:{margin:"1rem 0 0.5rem"}}),e.jsx(P,{onClick:S,children:e.jsx(E,{children:d("playAgain")})})]})]})})}),e.jsx(Ge,{isOpen:f,close:D})]})}const st="/audio/roll-dice-DysgIh_A.mp3",nt="/audio/message-CBVROrdp.mp3";function U(){return U=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},U.apply(null,arguments)}function at(t,s){if(t==null)return{};var a={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(s.indexOf(n)!==-1)continue;a[n]=t[n]}return a}function rt(t){i.useEffect(t,[])}var ot=["id","volume","playbackRate","soundEnabled","interrupt","onload"];function te(t,s){var a={},n=a.volume,r=n===void 0?1:n,u=a.playbackRate,l=u===void 0?1:u,d=a.soundEnabled,f=d===void 0?!0:d,b=a.interrupt,g=b===void 0?!1:b,v=a.onload,h=at(a,ot),y=w.useRef(null),p=w.useRef(!1),m=w.useState(null),o=m[0],c=m[1],j=w.useState(null),S=j[0],D=j[1],x=function(){typeof v=="function"&&v.call(this),p.current&&c(this.duration()*1e3),D(this)};rt(function(){return z(()=>import("./chunk-OoHi2jf4.js").then(C=>C.h),__vite__mapDeps([0,1,2])).then(function(C){if(!p.current){var O;y.current=(O=C.Howl)!==null&&O!==void 0?O:C.default.Howl,p.current=!0,new y.current(U({src:Array.isArray(t)?t:[t],volume:r,rate:l,onload:x},h))}}),function(){p.current=!1}}),w.useEffect(function(){y.current&&S&&D(new y.current(U({src:Array.isArray(t)?t:[t],volume:r,onload:x},h)))},[JSON.stringify(t)]),w.useEffect(function(){S&&(S.volume(r),h.sprite||S.rate(l))},[S,r,l]);var R=w.useCallback(function(C){typeof C>"u"&&(C={}),!(!S||!f&&!C.forceSoundEnabled)&&(g&&S.stop(),C.playbackRate&&S.rate(C.playbackRate),S.play(C.id))},[S,f,g]),M=w.useCallback(function(C){S&&S.stop(C)},[S]),T=w.useCallback(function(C){S&&S.pause(C)},[S]),N=[R,{sound:S,stop:M,pause:T,duration:o}];return N}async function it(t,s){try{await ze.speak(t,s,-2)}catch(a){console.error("TTS failed:",a)}}function lt(){const{i18n:t}=B(),{user:s}=V(),{messages:a}=Q(),[n,r]=i.useState(!1),[u]=te(st),[l]=te(nt),[d]=F(),{playerDialog:f,othersDialog:b,mySound:g,otherSound:v,chatSound:h,readRoll:y,voicePreference:p}=d||{},m=i.useMemo(()=>[...a].pop(),[a]),o=i.useCallback(async T=>{if(T)try{await it(T,p)}catch(N){console.error("Failed to speak text:",N)}},[p]),c=i.useMemo(()=>{if(!m?.timestamp)return!1;const T=se(m.timestamp);return T?q(T).diff(q(),"seconds")>=-2:!1},[m]),j=i.useMemo(()=>m?.uid===s?.uid,[m,s]),S=!!(f&&j),D=!!(b&&!j),x=(j&&g||!j&&v)&&m?.type==="actions",R=j&&y&&m?.type==="actions",M=h&&m?.type==="chat";return i.useEffect(()=>{if(Fe(t.resolvedLanguage||t.language),c&&m?.type==="actions"&&(S||D)&&r(m),c&&m){if(x&&u(),R){const T=ae(m?.text);o(T)}M&&l()}},[t.resolvedLanguage,t.language,m,j,S,D,x,R,M,u,l,o,c]),{message:n,setMessage:r,isMyMessage:!!j}}const ut=()=>{const{t}=B(),{message:s,setMessage:a,isMyMessage:n}=lt(),r=oe(s),u=i.useRef(void 0);i.useEffect(()=>(s&&(u.current=setTimeout(()=>a(!1),21e3)),()=>{u.current&&clearTimeout(u.current)}),[s,a]);const l=i.useCallback(()=>{u.current&&clearTimeout(u.current),a(!1)},[a]),d=i.useCallback(()=>{u.current&&clearTimeout(u.current)},[]);return!s||typeof s!="object"||!s.text||s.text.includes(t("start"))?null:e.jsx(tt,{text:s?.text,displayName:s?.displayName,open:!0,handleClose:l,stopAutoClose:d,nextPlayer:r,isMyMessage:n})};function ct(){const{messages:t}=Q(),[s,a]=i.useState(!1),n=H(t,"actions"),r=ue(t),u=oe(n),{playerDialog:l,othersDialog:d}=F()[0];if(i.useEffect(()=>{!u||r!==n||a(!0)},[u,r,n]),!n||!u)return null;const f=u?.isSelf;return!d&&f||!l&&!f?e.jsx(ie,{open:s,close:()=>a(!1),type:f?"error":"info",vertical:"top",horizontal:"center",disableAutoHide:!0,children:f?e.jsx(L,{i18nKey:"yourTurn"}):e.jsx(L,{i18nKey:"playersTurn",values:{player:u.displayName}})}):null}const{t:dt}=ye;function mt(t){return t.replace(/(?:^|\.\s|!\s)(\w)/g,s=>s.toUpperCase())}function ft(t,s,a){const n=Math.random(),r=t.includes("{dom}")&&t.includes("{sub}"),u=s==="vers";function l(d){if(d==="{player}")return!0;const f=d==="{dom}"||d==="{sub}";if(!u&&d===`{${s}}`||!r&&u&&f)return!0;if(r&&u){const b=d==="{dom}"&&n<.5,g=d==="{sub}"&&n>=.5;return b||g}return!1}return t.replace(/{(player|dom|sub)}/g,d=>l(d)?a:d)}function pt(t,s,a){let n=ft(t,s,a);if(!n.includes(a)&&s!=="vers"&&(n.includes("{dom}")||n.includes("{sub}"))){const u=new RegExp(`\\{${s}\\}`);n.match(u)?n=n.replace(u,a):n=n.replace(/{(dom|sub)}/,a)}return n=n.replace(/{(dom|sub)}/g,dt("anotherPlayer")),mt(n)}function gt(t){const s=t.filter(r=>r).map(r=>r.split(": ")),a=[];s.forEach((r,u)=>{if(Number(r[1])===0)return;const l=Array(Number(r[1])).fill(u);a.push(...l)});const n=a[Math.floor(Math.random()*a.length)];return s.map(([r])=>r)[n]?.replace(/(\r\n|\n|\r)/gm,"")||""}function ht(t,s,a){if(!t)return"";const n=t.split("%");return n.length<=1?pt(t,s,a||""):gt(n)}function xt(t,s,a=[]){const{user:n}=V(),{t:r}=B(),[u]=F(),l=Je(),d=a.length,[f,b]=i.useState(a[0]||{}),g=d-1,v=i.useRef(0),h=i.useCallback((p,m,o,c)=>{if(!p){console.error("Tile not found at location:",o);return}let j="";const S=ht(p.description||"",u.role||"sub",n?.displayName||"");m!==-1&&(j+=`${r("roll")}: ${m}
`),j+=`#${o+1}: ${p.title||r("unknownTile")}
`,j+=`${r("action")}: ${S}`,ce({room:t,user:n,text:c?c+j:j,type:"actions"})},[t,n,r,u.role]),y=i.useCallback(p=>{if(p===-1)return{preMessage:`${r("restartingGame")}
`,newLocation:0};const m=l.find(c=>c.isSelf)?.location||0;if(m===g)return{preMessage:`${r("alreadyFinished")}
`,newLocation:p};const o=p+m;return o>=g?{newLocation:g}:{newLocation:o}},[r,l,g]);return i.useEffect(()=>{const p=Array.isArray(s.value)?s.value[0]:s.value,m=s.time;if(p===0||m<=v.current)return;v.current=m;const{preMessage:o,newLocation:c}=y(p);c>=0&&c<a.length&&a[c]?(b({...a[c],index:c}),h(a[c],p,c,o)):console.error(`Invalid location or missing tile: ${c}, gameBoard length: ${a.length}`)},[s,a,h,y]),{tile:f,playerList:l}}function bt(t,s){const{user:{displayName:a}}=V(),[n,r]=i.useState(null),[u,l]=i.useState(a||"");i.useEffect(()=>{(n!==t||a!==u)&&(de({newRoom:t,oldRoom:n,newDisplayName:a||"",oldDisplayName:u,removeOnDisconnect:s||t?.toUpperCase()==="PUBLIC"}),r(t),l(a||""))},[t,a,n,u,s])}function yt(t,s){const a=i.useRef(void 0);return i.useCallback((...n)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>t(...n),s)},[t,s])}function jt(t,s){const{i18n:n,t:r}=B(),{user:u}=V(),[l,d]=F(),f=le(()=>me(l?.gameMode)),{messages:b,isLoading:g}=Q(),[v,h]=i.useState("1d6"),[y,p]=i.useState(""),m=He(),o=i.useRef(!1),c=i.useRef(!0),j=i.useCallback(async(x,R=null)=>{if(!o.current){o.current=!0;try{const{gameMode:M,newBoard:T}=await m(x),N={formData:{...l,...x},user:u,customTiles:f,actionsList:await Ye(n.resolvedLanguage,M||"online"),tiles:T,title:r("settingsGenerated")};R&&(N.reason=r("rebuiltBoard",{messageUser:R})),await Qe(N)}finally{setTimeout(()=>{o.current=!1},500)}}},[l,u,f,n.resolvedLanguage,r,m]),S=i.useCallback(async()=>{l?.room!==t&&(await d({...l,room:t}),await j({...l,roomUpdated:!0,room:t}))},[l,t,d,j]),D=yt(S,200);return i.useEffect(()=>{if(!(g||!b.length))try{const x=H(b,"room");if(x){const R=JSON.parse(x.settings),{roomDice:M,roomBackgroundURL:T,roomTileCount:N}=R;let C="1d6";!G(t)&&M&&(C=M),h(C),p(T||"");const O=se(x.timestamp),A=(O?Date.now()-O.getTime():1/0)<300*1e3;x.uid!==u?.uid&&N&&s?.length&&N!==s?.length&&A&&!o.current&&j(R,x.displayName)}}catch(x){console.error("Error processing room message:",x)}},[b,g,t,u,s,j]),i.useEffect(()=>{if(!g)try{const x=H(b,"room");if(x||!G(t)&&!x||G(t)&&!re(l?.gameMode||""))return;if(c.current){c.current=!1,l?.roomBackgroundURL?.length&&p(l.roomBackgroundURL);return}const R=t!==l?.room,M=l&&typeof l.room<"u",T=s?.length,N=!o.current;if(M&&R&&T&&N){D();return}l?.roomBackgroundURL?.length&&p(l.roomBackgroundURL)}catch(x){console.error("Error in room change effect:",x)}},[t,l,s,b,g,D]),{roller:v,roomBgUrl:y}}function St(t,s){const[a,n]=i.useState(null),[r,u]=je(),l=r.get("importBoard"),{t:d}=B(),f=i.useCallback(()=>{n(null)},[]),b=i.useCallback(h=>{try{const y=JSON.parse(h);return Array.isArray(y)?y:null}catch{return null}},[]),g=i.useCallback(h=>{try{return h?JSON.parse(h):{}}catch{return{}}},[]),v=i.useCallback(async()=>{if(u({}),!l)return;const h=await fe(l);if(!h?.gameBoard)return n(d("failedBoardImport"));const y=b(h.gameBoard);if(!y)return n(d("failedBoardImport"));const p=h?.title!==d("settingsGenerated")?h.title:d("importedBoard");pe({...h,title:p,tiles:y,isActive:1});const m=g(h?.settings);s({...t,...m}),a!==d("updated")&&n(d("updated"))},[l,b,g,t,s,d,a,u]);return i.useEffect(()=>{l&&v()},[l,v]),[a,f]}const vt=({selectedRoll:t,handleMenuItemClick:s})=>{const[a,n]=i.useState(!1),r=i.useRef(null),u=()=>{n(f=>!f)},l=f=>{f.target instanceof Node&&r.current?.contains(f.target)||n(!1)},d=new Map;return d.set("restart",I("restart")).set("manual",I("manual")).set("30",I("auto30")).set("60",I("auto60")).set("90",I("auto90")).set("custom",I("setTimer")),e.jsxs(e.Fragment,{children:[e.jsx(P,{size:"small","aria-controls":a?"split-button-menu":void 0,"aria-expanded":a?"true":void 0,"aria-label":"select roll options","aria-haspopup":"menu",onClick:u,ref:r,children:e.jsx(Xe,{})}),e.jsx(Se,{sx:{zIndex:1},open:a,anchorEl:r.current,transition:!0,disablePortal:!0,placement:"top-end",children:({TransitionProps:f})=>e.jsx(ve,{...f,style:{transformOrigin:"right bottom"},children:e.jsx(Ce,{children:e.jsx(Re,{onClickAway:l,children:e.jsx(Me,{id:"split-button-menu",autoFocusItem:!0,children:Array.from(d).map(([b,g])=>e.jsx(Te,{selected:b===t,onClick:()=>s(b),children:g},b))})})})})})]})},$=10,Ct=({isOpen:t,onClose:s,onSubmit:a})=>{const{t:n}=B(),[r,u]=i.useState(30),[l,d]=i.useState(!1),[f,b]=i.useState(!1),[g,v]=i.useState(20),[h,y]=i.useState(60),p=()=>{if(f){let o=Number.parseInt(String(g),10),c=Number.parseInt(String(h),10);Number.isNaN(o)?(o=l?1:$,v(o)):!l&&o<$&&(o=$),Number.isNaN(c)||c<o?(c=o,y(c)):c===0&&(c=180,y(c)),l&&(o*=60,c*=60);const j=Math.floor(Math.random()*(c-o+1))+o;a(j,{isRange:!0,min:o,max:c})}else{let o=Number.parseInt(String(r),10);Number.isNaN(o)?(o=l?1:$,u(o)):l?o*=60:o<$&&(o=$),a(o,{isRange:!1})}s()},m=()=>{u(o=>{const c=Number.parseFloat(String(o));return Number.isNaN(c)||c<=0?o:l?(c*60).toString():(c/60).toString()}),v(o=>{const c=Number.parseFloat(String(o));return Number.isNaN(c)||c<=0?o:l?(c*60).toString():(c/60).toString()}),y(o=>{const c=Number.parseFloat(String(o));return Number.isNaN(c)||c<=0?o:l?(c*60).toString():(c/60).toString()}),d(o=>!o)};return e.jsxs(ke,{open:t,onClose:s,maxWidth:"xs",children:[e.jsx(De,{children:n("setTimer")}),e.jsxs(Ne,{children:[e.jsx(_,{sx:{mb:2},children:e.jsx(Ae,{control:e.jsx(we,{checked:f,onChange:o=>b(o.target.checked)}),label:n("useRandomRange")})}),f?e.jsxs(_,{children:[e.jsx(E,{variant:"subtitle2",children:n("randomTimerRange")}),e.jsxs(_,{sx:{display:"flex",gap:2,my:2},children:[e.jsx(K,{label:n("minValue"),type:"number",value:g,onChange:o=>{const c=parseInt(o.target.value,10);v(c)},fullWidth:!0}),e.jsx(E,{variant:"body1",sx:{alignSelf:"center"},children:"-"}),e.jsx(K,{label:n("maxValue"),type:"number",value:h,onChange:o=>{const c=parseInt(o.target.value,10);y(Math.max(Number(g),c))},fullWidth:!0})]}),e.jsxs(P,{onClick:m,variant:"outlined",size:"small",children:[n(l?"minutes":"seconds"),e.jsx(ee,{sx:{ml:1}})]})]}):e.jsx(K,{autoFocus:!0,type:"number",value:r,onChange:o=>u(o.target.value),sx:{width:"15rem"},slotProps:{input:{endAdornment:e.jsx(Be,{position:"end",children:e.jsxs(P,{onClick:m,variant:"text",children:[n(l?"minutes":"seconds"),e.jsx(ee,{sx:{ml:1}})]})})}}})]}),e.jsxs(Oe,{children:[e.jsx(P,{onClick:s,children:n("cancel")}),e.jsx(P,{onClick:p,children:n("set")})]})]})};function Rt(t){return/^-?\d+$/.test(String(t))}function W(t,s,a){let n=0;for(let r=0;r<Number(t);r+=1)n+=Math.floor(Math.random()*Number(s))+1;a(n)}const Mt=i.memo(function({setRollValue:s,dice:a,isEndOfBoard:n}){const{t:r}=B(),[u,l]=i.useState(!1),[d,f]=i.useState("manual"),[b,g]=i.useState(0),[v,h]=i.useState(r("roll")),{timeLeft:y,setTimeLeft:p,togglePause:m,isPaused:o}=ne(b),[c,j]=i.useState(!1),[S,D]=i.useState({isRange:!1,min:30,max:120}),x=i.useCallback(k=>{s(k)},[s]),[R,M]=a.split("d"),T=()=>{if(d==="manual"){W(R,M,x),l(!0),setTimeout(()=>l(!1),4e3);return}o&&y===b&&W(R,M,x),m()},N=i.useCallback(k=>{if(k==="restart"){x(-1);return}if(f(String(k)),k==="custom"){j(!0);return}if(Rt(k)){o||m();const A=Number(k);g(A),p(A)}},[o,p,m,x]),C=()=>{j(!1)},O=(k,A={isRange:!1})=>{o||m(),g(k),p(k),D({...S,...A}),f("custom"),j(!1)};return i.useEffect(()=>{n&&m()},[n,m]),i.useEffect(()=>{if(u)h(r("wait"));else if(d==="manual")h(r("roll"));else if(o)h(`${r("play")} (${y})`);else if(y>0)h(`${r("pause")} (${y})`);else if(y===0&&!o&&d!=="manual"){W(R,M,x);let k;if(S.isRange){const{min:A,max:Y}=S;k=Math.floor(Math.random()*(Y-A+1))+A}else k=b;g(k),p(k),h(`${r("pause")} (${k})`)}},[u,d,y,o,b,S,r,R,M,x,p]),e.jsxs(e.Fragment,{children:[e.jsxs(_e,{variant:"contained",className:"dice-roller",children:[e.jsxs(P,{"aria-label":r("roll"),onClick:T,disabled:u,size:"large",children:[e.jsx(Ze,{sx:{mr:1}}),v]}),e.jsx(vt,{selectedRoll:d,handleMenuItemClick:N})]}),e.jsx(Ct,{isOpen:c,onClose:C,onSubmit:O})]})}),Tt=i.lazy(()=>z(()=>import("./index.tsx-CKuyLebH.js"),__vite__mapDeps([3,1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),kt=i.lazy(()=>z(()=>import("./index.tsx-DuTeNfDS.js"),__vite__mapDeps([19,1,2,4,8,9,10,7,18,16,11,17,12,13,6,14,15,20,21,5,22]))),Dt=i.lazy(()=>z(()=>import("./index.tsx-BdzEoj22.js"),__vite__mapDeps([23,1,2,8,9,10,7,22,24,6,21,20,13,16,4,11,17,18,5,12,14,15,25,26,27,28])));function J(){return e.jsx(_,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100px",children:e.jsx(Le,{size:24})})}function Nt(){const t=Ee(),s=t.id||"",a=qe(),{t:n}=B(),[r,u]=F();bt(s,r?.roomRealtime);const[l,d]=i.useState({value:0,time:0}),f=le(ge)?.tiles,b=i.useCallback(T=>{d({value:T,time:Date.now()})},[]),{playerList:g,tile:v}=xt(s,l,f),{roller:h,roomBgUrl:y}=jt(s,f),[p,m]=St(r,u);if(!f||!f.length||!Object.keys(r).length||G(s)&&!re(r.gameMode))return e.jsxs(e.Fragment,{children:[e.jsx(Z,{room:t.id,playerList:g}),e.jsx(We,{open:!0})]});const{isVideo:o,url:c}=Ve(r,s,y),j=o?"video-adjust":"",{background:S,roomBackground:D}=r,x=!G(s)&&D!=="app"||S!=="color",R=e.jsx(i.Suspense,{fallback:e.jsx(J,{}),children:e.jsx(Dt,{playerList:g,isTransparent:x,gameBoard:f,settings:r})}),M=e.jsx("div",{className:"messages-container",children:e.jsxs(i.Suspense,{fallback:e.jsx(J,{}),children:[e.jsx(kt,{room:s,isTransparent:x,currentGameBoardSize:f.length}),e.jsx(Pe,{room:s,isTransparent:x})]})});return e.jsxs(e.Fragment,{children:[e.jsx(Z,{room:s,playerList:g}),e.jsx(Mt,{setRollValue:b,dice:h,isEndOfBoard:v?.index!==void 0&&v.index>=(f?.length??0)-1}),e.jsx(Ke,{isVideo:o,url:c}),e.jsx(ct,{}),a?e.jsx(i.Suspense,{fallback:e.jsx(J,{}),children:e.jsx(Tt,{tab1:R,tab2:M})}):e.jsxs(_,{className:`desktop-container ${j}`,children:[R,M]}),e.jsx(ut,{}),e.jsx(ie,{type:p===n("updated")?"success":"error",open:!!p,close:m,children:p})]})}const Yt=Object.freeze(Object.defineProperty({__proto__:null,default:Nt},Symbol.toStringTag,{value:"Module"}));export{pt as a,Yt as i};
