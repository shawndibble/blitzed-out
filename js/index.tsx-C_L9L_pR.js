import{j as e,M as G,e as W,G as i,f as g,g as d,B as x,h as R,i as h,D as V,T as q,L as U,k as p,l as H,I as J,S as Q,C as X}from"./chunk-Vuzv59E5.js";import{u as Y}from"./chunk-Cx3PWYtd.js";import{u as Z}from"./chunk-6JIRnTv3.js";import{u as _,l as N}from"./chunk-DwDV8mEA.js";import{u as $}from"./chunk-PTntF1Bg.js";import{r as s,u as ee,m as ae}from"./chunk-CfN-ANIX.js";import{u as se,e as ne}from"../assets/index-NXMOp5SB.js";import{N as te}from"./chunk-y6TAERsj.js";import ie from"./index.tsx-BVMoTHpU.js";import{A as re}from"./chunk-CHKC9RoJ.js";import{T as n}from"./chunk-C3rktb3S.js";import"./chunk-CuMUTfgR.js";import"./chunk-DXy1pfJx.js";import"./chunk-Bde8qXua.js";import"./chunk-Bp62TkGl.js";import"./chunk-D0hPV1-j.js";import"./chunk-DRmAB0Tz.js";function Se(){const{i18n:r,t:S}=se(),{login:j,user:v}=Y(),[w,o]=s.useState(!1),[D,y]=s.useState("login"),[f,L]=s.useState(!1),I=()=>{y("login"),o(!0)},K=()=>{y("register"),o(!0)},A=ee(),[k]=ae(),P=!!k.get("importBoard"),u=A.id??"PUBLIC",z=$(),c=Z("sm"),[l,B]=s.useState(v?.displayName||""),[b,C]=_(),m=s.useCallback(async a=>{a.preventDefault(),await C({...b,displayName:l,room:u}),await j(l)},[l,j,u,b,C]),M=s.useCallback(async a=>{a.key==="Enter"&&await m(a)},[m]),O=r.resolvedLanguage||"en",T=s.useCallback(async a=>{const t=a.target.value;L(!0);try{await ne(t),await r.changeLanguage(t)}catch(F){console.error("Error changing language:",F),await r.changeLanguage(t)}finally{L(!1)}},[r]),E=s.useMemo(()=>Object.entries(N).map(([a,t])=>e.jsx(G,{value:a,children:t.label},a)),[N]);return e.jsxs(e.Fragment,{children:[e.jsx(te,{room:u,playerList:z}),e.jsxs(W,{maxWidth:"sm",sx:{mt:8},children:[e.jsx(i,{container:!0,flexDirection:"column",children:e.jsx(g,{className:"unauthenticated-card",children:e.jsxs(d,{children:[e.jsx("h2",{className:"setup",children:e.jsx(n,{i18nKey:"setup"})}),e.jsxs(x,{component:"form",method:"post",onSubmit:m,className:"settings-box",children:[e.jsx(R,{fullWidth:!0,id:"displayName",label:S("displayName"),value:l,onChange:a=>B(a.target.value),required:!0,autoFocus:!0,onKeyDown:a=>M(a),margin:"normal"}),e.jsx(h,{variant:"contained",type:"submit",sx:{mr:1},fullWidth:!0,children:P?e.jsx(n,{i18nKey:"import"}):e.jsx(n,{i18nKey:"anonymousLogin"})}),e.jsx(V,{sx:{my:2},children:e.jsx(q,{variant:"body2",color:"text.secondary",children:e.jsx(n,{i18nKey:"or",children:"OR"})})}),e.jsxs(x,{sx:{display:"flex",justifyContent:"space-evenly"},children:[e.jsx(h,{variant:"outlined",startIcon:e.jsx(U,{}),onClick:I,sx:{mr:1},children:e.jsx(n,{i18nKey:"signIn"})}),e.jsx(h,{variant:"outlined",onClick:K,children:e.jsx(n,{i18nKey:"createAccount"})})]})]})]})})}),e.jsx(i,{container:!0,sx:{mt:1},children:e.jsx(i,{className:"language",children:e.jsx(g,{className:"unauthenticated-card",children:e.jsx(d,{className:"translation-card-content",children:e.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:2},children:[!c&&e.jsx(p,{}),e.jsxs(H,{size:"small",sx:{minWidth:160,flexGrow:1},children:[e.jsxs(J,{id:"unauth-language-label",sx:{display:"flex",alignItems:"center",fontSize:"0.875rem"},children:[c&&e.jsx(p,{sx:{mr:.5,fontSize:"1rem"}}),e.jsx(n,{i18nKey:"language"})]}),e.jsx(Q,{labelId:"unauth-language-label",id:"unauth-language-select",value:O,disabled:f,label:e.jsxs(e.Fragment,{children:[c&&e.jsx(p,{sx:{fontSize:"1rem"}}),e.jsx(n,{i18nKey:"language"})]}),onChange:T,size:"small",inputProps:{endAdornment:f&&e.jsx(X,{size:16})},children:E})]})]})})})})}),e.jsx(i,{container:!0,sx:{mt:1},children:e.jsx(i,{className:"language",children:e.jsx(g,{className:"unauthenticated-card",children:e.jsx(d,{children:e.jsx(ie,{})})})})})]}),e.jsx(re,{open:w,close:()=>o(!1),initialView:D})]})}export{Se as default};
