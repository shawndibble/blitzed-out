import{h as f,s}from"./chunk-DMUP_vQ_.js";import{g as d}from"./chunk-D30iZu0M.js";import{M as y,b as o}from"../assets/index-b2evtKsw.js";import"./chunk-s18jxxRU.js";import"./chunk-h4wvAFNn.js";import"./chunk-DP1hin9J.js";import"./chunk-CWko-_pS.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{};e.SENTRY_RELEASE={id:"c93c7ad3341c87edecdbc394e4836e646286114e"}}catch(t){}})();try{(function(){var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4a4f320c-ec23-4fd7-b65b-376a78febc59",e._sentryDebugIdIdentifier="sentry-dbid-4a4f320c-ec23-4fd7-b65b-376a78febc59")})()}catch(e){}const a="blitzed-out-sync-recovery-status",l=y,p=50;let r=null;async function _(){return r?await r:(r=(async()=>{try{const e=g();return e!=null&&e.recoveryPerformed&&(e==null?void 0:e.version)===l?!1:await b()?(await f(),n(!0),!0):(n(!1),!1)}catch(e){return console.error("[Sync Recovery] Error during recovery:",e),!1}finally{r=null}})(),await r)}async function b(){try{const t=(await d({isDefault:!0})).length>0,c=(await o({})).length,i=(await o({isCustom:0,isEnabled:1})).length>0,u={noDefaultGroups:!t,fewTotalActions:c<p,noEnabledDefaults:!i};return Object.values(u).filter(Boolean).length>=2}catch(e){return console.error("[Sync Recovery] Error detecting corruption:",e),!1}}function g(){return s.getJSON(a)}function n(e){const t={version:l,recoveryPerformed:!0,detectedCorruption:e,recoveryTimestamp:Date.now()};s.setJSON(a,t)}export{_ as runSyncRecovery};
//# sourceMappingURL=syncRecoveryService.ts-BthoPGaH.js.map
