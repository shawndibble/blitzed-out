import{ak as A,r,j as e,am as v,aU as S,A as b,Q as y,at as C,ar as d,T as k,a1 as L,au as W,W as P,av as F,Y as K,R as I}from"./chunk-DzAIPjqH.js";import{o as R,q as G,t as q,A as N}from"./chunk-BmjRqaQ3.js";import{G as B}from"./chunk-DzzEA-5n.js";import{u as _,C as z}from"./chunk-ePhi2-8W.js";(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"b0aec1b7336667c3da787da9b7139ec106644213"}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new t.Error().stack;n&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[n]="85366cde-c4a5-41ad-878a-2688bdb0660d",t._sentryDebugIdIdentifier="sentry-dbid-85366cde-c4a5-41ad-878a-2688bdb0660d")})()}catch{}function V({onSuccess:t,onSwitchToRegister:n,onSwitchToForgotPassword:l,isLinking:s=!1}){const{t:a}=A(),[o,i]=r.useState(""),[u,c]=r.useState(""),[h,m]=r.useState(""),[g,x]=r.useState(!1),j=async p=>{p.preventDefault(),m(""),x(!0);try{await R(o,u),t&&t()}catch(w){console.error("Login error:",w),m(w.message||"Failed to sign in")}finally{x(!1)}};return e.jsxs(v,{component:"form",onSubmit:j,sx:{mt:1},children:[h&&e.jsx(S,{severity:"error",sx:{mb:2},children:h}),e.jsx(b,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:a("email"),name:"email",autoComplete:"email",autoFocus:!0,value:o,onChange:p=>i(p.target.value)}),e.jsx(b,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:a("password"),type:"password",id:"password",autoComplete:"current-password",value:u,onChange:p=>c(p.target.value)}),e.jsx(y,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:g,children:g?e.jsx(C,{size:24}):s?e.jsx(d,{i18nKey:"linkAccount",children:"Link Account"}):e.jsx(d,{i18nKey:"signIn"})}),e.jsxs(k,{align:"center",children:[e.jsx(y,{onClick:n,variant:"text",children:e.jsx(d,{i18nKey:"needAccount"})})," | ",e.jsx(y,{onClick:l,variant:"text",children:e.jsx(d,{i18nKey:"forgotPassword"})})]})]})}function Y({onSuccess:t,onSwitchToLogin:n,isAnonymous:l=!1}){const{t:s}=A(),[a,o]=r.useState(""),[i,u]=r.useState(""),[c,h]=r.useState(""),[m,g]=r.useState(""),[x,j]=r.useState(""),[p,w]=r.useState(!1),T=async f=>{if(f.preventDefault(),j(""),c!==m){j(s("passwordsDoNotMatch")||"Passwords do not match");return}w(!0);try{await G(i?.trim(),c,a?.trim()),t&&t()}catch(E){console.error("Registration error:",E),j(E.message||"Failed to create account")}finally{w(!1)}};return e.jsxs(v,{component:"form",onSubmit:T,sx:{mt:1},children:[x&&e.jsx(S,{severity:"error",sx:{mb:2},children:x}),e.jsx(b,{margin:"normal",required:!0,fullWidth:!0,id:"displayName",label:s("displayName"),name:"displayName",autoComplete:"name",autoFocus:!0,value:a,onChange:f=>o(f.target.value)}),e.jsx(b,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:s("email"),name:"email",autoComplete:"email",value:i,onChange:f=>u(f.target.value)}),e.jsx(b,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:s("password"),type:"password",id:"password",autoComplete:"new-password",value:c,onChange:f=>h(f.target.value)}),e.jsx(b,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:s("confirmPassword"),type:"password",id:"confirmPassword",autoComplete:"new-password",value:m,onChange:f=>g(f.target.value)}),e.jsx(y,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:p,children:p?e.jsx(C,{size:24}):l?e.jsx(d,{i18nKey:"linkAccount"}):e.jsx(d,{i18nKey:"createAccount"})}),e.jsx(k,{align:"center",children:e.jsx(y,{onClick:n,variant:"text",children:e.jsx(d,{i18nKey:"alreadyHaveAccount"})})})]})}function H({onSuccess:t,isLinking:n=!1}){const[l,s]=r.useState(""),[a,o]=r.useState(!1),i=async()=>{s(""),o(!0);try{await q(),t&&t()}catch(u){s(u.message||"Failed to sign in with Google")}finally{o(!1)}};return e.jsxs(v,{sx:{mt:2,mb:2},children:[l&&e.jsx(S,{severity:"error",sx:{mb:2},children:l}),e.jsx(L,{sx:{mb:2},children:e.jsx(k,{variant:"body2",color:"text.secondary",children:e.jsx(d,{i18nKey:"or",children:"OR"})})}),e.jsx(y,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(B,{}),onClick:i,disabled:a,sx:{mb:1},"aria-busy":a,"aria-live":"polite",children:a?e.jsx(C,{size:24}):n?W("linkWithGoogle","Link with Google"):W("signInWithGoogle","Sign in with Google")})]})}function D(){const t=r.useContext(N);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function M({children:t,open:n,close:l=null,isMobile:s=null,title:a=null,isLoading:o=!1,maxWidth:i="md",fullWidth:u=!1,ariaLabelledby:c,ariaDescribedby:h,actions:m}){const g=_(),x=s!==null?s:g;return o?null:e.jsxs(P,{fullScreen:x,open:n,maxWidth:i,fullWidth:u,"aria-labelledby":c,"aria-describedby":h,children:[e.jsxs(F,{children:[a,typeof l=="function"&&e.jsx(z,{close:l})]}),e.jsx(K,{children:t}),m&&e.jsx(I,{sx:{p:2,gap:1},children:m})]})}function O({onToggleForm:t}){const[n,l]=r.useState(""),[s,a]=r.useState(""),[o,i]=r.useState(!1),[u,c]=r.useState(!1),{forgotPassword:h}=D(),m=async g=>{g.preventDefault(),a(""),i(!1),c(!0);try{await h(n),i(!0)}catch(x){a(x.message||"Failed to send reset email")}finally{c(!1)}};return e.jsxs(v,{component:"form",onSubmit:m,sx:{mt:1},children:[s&&e.jsx(S,{severity:"error",sx:{mb:2},children:s}),o&&e.jsx(S,{severity:"success",sx:{mb:2},children:e.jsx(d,{i18nKey:"resetEmailSent"})}),e.jsx(b,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:e.jsx(d,{i18nKey:"email"}),name:"email",autoComplete:"email",autoFocus:!0,value:n,onChange:g=>l(g.target.value)}),e.jsx(y,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:u,children:u?e.jsx(C,{size:24}):e.jsx(d,{i18nKey:"sendResetLink"})}),e.jsx(v,{sx:{textAlign:"center"},children:e.jsx(y,{variant:"text",onClick:()=>t("login"),children:e.jsx(d,{i18nKey:"backToLogin"})})})]})}function Z({open:t,close:n,initialView:l="login"}){const[s,a]=r.useState(l),{isAnonymous:o}=D(),{t:i}=A(),u=()=>{switch(s){case"login":return i(o?"linkAccount":"signIn");case"register":return i("createAccount");case"reset":return i("resetPassword");default:return i("Authentication")}};return e.jsxs(M,{title:u(),open:t,close:n,children:[s==="login"&&e.jsxs(e.Fragment,{children:[e.jsx(V,{onSwitchToRegister:()=>a("register"),onSwitchToForgotPassword:()=>a("reset"),onSuccess:n,isLinking:o}),e.jsx(H,{onSuccess:n,isLinking:o})]}),s==="reset"&&e.jsx(O,{onToggleForm:a}),s==="register"&&e.jsx(Y,{onSwitchToLogin:()=>a("login"),onSuccess:n,isAnonymous:o})]})}export{Z as A,M as D,D as u};
//# sourceMappingURL=chunk-DSABIIYE.js.map
