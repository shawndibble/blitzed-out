const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index.tsx-LL5Ow4fe.js","js/chunk-DJZJtpVs.js","js/chunk-7OQk-BoX.js","js/chunk-9fkTg0gS.js","js/chunk-DEqUmdJg.js","js/chunk-CGbfZ7mk.js","js/chunk-B4PEA_xj.js","js/chunk-CsjAM9X4.js","assets/index-D_FJE-i5.js","js/schedule.tsx-CU7l7nHA.js","js/chunk-CHjZF5e7.js","js/chunk-B4ipE-Yx.js","js/theme.tsx-JH4JhHLF.js","js/chunk-COc20URl.js","js/chunk-B-NyfYfY.js","js/chunk-DtF_b7C9.js","js/index.tsx-B3_iyngw.js","js/chunk-DeskJ-S_.js","js/chunk-Do9O9ZuT.js","js/chunk-yLOK5aTh.js","js/chunk-BGdrqpu5.js","js/chunk-33Bn6WL3.js","js/index.tsx-BbzYcVgX.js","js/chunk-HM8k9wFq.js"])))=>i.map(i=>d[i]);
import{_ as j}from"../assets/index-D_FJE-i5.js";import{a7 as M,E as O,K as B,r,ad as G,j as e,aE as b,au as E,I as w,ak as z,aF as $,G as F,M as U,aG as W,aH as q,B as H,aI as K,aJ as J,am as V,aK as Q,aC as X,at as Y,s as v,aL as Z,aM as ee,aN as te}from"./chunk-DJZJtpVs.js";import{ScheduleContext as se}from"./schedule.tsx-CU7l7nHA.js";import{e as oe,f as ne,g as P,D as re,h as ae,i as T,j as ie,k as ce,l as le}from"./chunk-DEqUmdJg.js";import{useTheme as de}from"./theme.tsx-JH4JhHLF.js";import{i as ue}from"./chunk-COc20URl.js";const Ee={en:{label:"English",voice:"Google UK English Male"},es:{label:"EspaÃ±ol",voice:"Google espaÃ±ol de Estados Unidos"},fr:{label:"FranÃ§ais",voice:"Google franÃ§ais"},zh:{label:"ä¸­æ–‡",voice:"Google ä¸­æ–‡ï¼ˆä¸­å›½å¤§é™†ï¼‰"},hi:{label:"à¤¹à¤¿à¤¨à¥à¤¦à¥€",voice:"Google à¤¹à¤¿à¤¨à¥à¤¦à¥€"}};function ge(){const t=M.useContext(se);if(!t)throw new Error("ScheduleContext's value is undefined.");return t}function me(t="sm"){const n=O();return B(n.breakpoints.down(t))}const he="/img/blitzed-out-DGhYHOgx.png";window.__castApiInitialized=window.__castApiInitialized||!1;window.__castScriptLoading=window.__castScriptLoading||!1;function fe(){const[t,n]=r.useState(!1),[d,c]=r.useState(null),{id:l}=G(),m=r.useRef(null),[u,p]=r.useState(!1),f=r.useCallback(o=>{try{const a=`${window.location.origin}/${l}/cast`;o.sendMessage("urn:x-cast:com.blitzedout.app",{type:"LOAD",url:a})}catch(a){console.error("Error sending cast message:",a)}},[l]);r.useEffect(()=>{const o=()=>{try{if(!window?.cast?.framework)return;if(window.__castApiInitialized){p(!0),a();return}window.cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:"1227B8DE",autoJoinPolicy:window.chrome?.cast?.AutoJoinPolicy?.ORIGIN_SCOPED}),window.__castApiInitialized=!0,p(!0),a()}catch(s){console.error("Error initializing Cast API:",s)}},a=()=>{try{const s=window.cast?.framework?.CastContext.getInstance();if(!s)return;const i=s.getCurrentSession();if(i&&(n(!0),c(i),l&&f(i)),!window?.cast?.framework)return;s.addEventListener(window.cast.framework.CastContextEventType.SESSION_STATE_CHANGED,x=>{console.log("ðŸŽ­ Cast session state changed:",x.sessionState);const g=s.getCurrentSession();switch(console.log("ðŸŽ­ Current session:",g?"exists":"null"),x.sessionState){case window.cast?.framework?.SessionState.SESSION_STARTED:case window.cast?.framework?.SessionState.SESSION_RESUMED:console.log("ðŸŽ­ Cast session started/resumed - setting isCasting=true"),n(!0),c(g),g&&l&&f(g);break;case window.cast?.framework?.SessionState.SESSION_ENDED:console.log("ðŸŽ­ Cast session ended - setting isCasting=false"),n(!1),c(null);break;default:console.log("ðŸŽ­ Unhandled session state:",x.sessionState);break}})}catch(s){console.error("Error setting up session listener:",s)}};if(window.chrome&&window.chrome.cast&&window.cast)o();else if(window.__onGCastApiAvailable=function(s){s&&o()},!document.querySelector('script[src*="cast_sender.js"]')&&!window.__castScriptLoading){window.__castScriptLoading=!0;const s=document.createElement("script");s.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",s.onload=()=>{window.__castScriptLoading=!1},s.onerror=()=>{window.__castScriptLoading=!1,console.error("Failed to load Cast SDK")},document.head.appendChild(s)}return()=>{}},[l,f]);const S=()=>{if(!u){console.warn("Cast API not ready yet");return}if(t){console.log("ðŸ›‘ Stop casting button clicked");try{const o=window.cast?.framework?.CastContext.getInstance();o&&(console.log("ðŸ›‘ Calling castContext.endCurrentSession(true)"),o.endCurrentSession(!0)),d&&(console.log("ðŸ›‘ Calling castSession.endSession(true)"),d.endSession(!0)),console.log("ðŸ›‘ Setting 1-second backup timer"),setTimeout(()=>{console.log("ðŸ›‘ Backup timer fired - forcing state reset"),n(!1),c(null)},1e3)}catch(o){console.error("ðŸ›‘ Error stopping cast session:",o),console.log("ðŸ›‘ Error occurred - immediately resetting state"),n(!1),c(null)}}else try{const o=window.cast?.framework?.CastContext.getInstance();o&&o.requestSession().catch(a=>console.error("Error requesting cast session:",a))}catch(o){console.error("Error requesting cast session:",o)}};return r.useEffect(()=>{t&&d&&l&&f(d)},[l,t,d,f]),r.useEffect(()=>{if(!u)return;const o=()=>{try{const s=window.cast?.framework?.CastContext.getInstance();if(!s)return;const i=s.getCurrentSession(),x=i?i.getSessionState():"NO_SESSION",g=i&&i.getSessionState()==="CONNECTED";console.log("ðŸ” Periodic check - isCasting:",t,"sessionState:",x,"hasActiveSession:",g),t&&!g?(console.log("ðŸ”§ Fixing state: was casting but no active session - setting isCasting=false"),n(!1),c(null)):!t&&g&&(console.log("ðŸ”§ Fixing state: not casting but has active session - setting isCasting=true"),n(!0),c(i))}catch(s){console.error("Error checking cast state:",s)}};o();const a=setInterval(o,2e3);return()=>clearInterval(a)},[u,t]),u?e.jsx(b,{title:t?E("stopCasting"):E("startCasting"),children:e.jsx(w,{ref:m,onClick:S,color:t?"primary":"default",children:t?e.jsx(oe,{}):e.jsx(ne,{})})}):null}const A={light:ae,dark:re,system:P},pe={light:"Light theme",dark:"Dark theme",system:"Follow system"};function xe({size:t="medium",variant:n="menu",tooltip:d,showLabels:c=!0,"aria-label":l}){const m=O(),{themeMode:u,resolvedThemeMode:p,setThemeMode:f,toggleTheme:S}=de(),{t:o}=z(),[a,s]=M.useState(null),i=!!a,g=u==="system"?P:A[p],I=()=>{n==="toggle"?S():s(null)},R=h=>{n==="menu"?s(h.currentTarget):I()},k=()=>{s(null)},L=h=>{f(h),k()},y=()=>d||(n==="toggle"?p==="light"?o("theme.switchToDark","Switch to dark theme"):o("theme.switchToLight","Switch to light theme"):o("theme.chooseTheme","Choose theme")),_=()=>l||(n==="toggle"?`Toggle theme, currently ${p}`:`Theme menu, currently ${u}`);return n==="toggle"?e.jsx(b,{title:y(),arrow:!0,children:e.jsx(w,{onClick:I,size:t,"aria-label":_(),sx:{transition:"all 0.3s ease","&:hover":{transform:"scale(1.1)",backgroundColor:"action.hover"},"& .MuiSvgIcon-root":{transition:"transform 0.3s ease"},"&:hover .MuiSvgIcon-root":{transform:"rotate(180deg)"}},children:e.jsx(g,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(b,{title:y(),arrow:!0,children:e.jsx(w,{onClick:R,size:t,"aria-label":_(),"aria-controls":i?"theme-menu":void 0,"aria-haspopup":"true","aria-expanded":i?"true":void 0,sx:{transition:"all 0.3s ease",backgroundColor:i?"action.selected":"transparent","&:hover":{transform:"scale(1.05)",backgroundColor:"action.hover"},"& .MuiSvgIcon-root":{transition:"transform 0.3s ease"}},children:e.jsx(g,{})})}),e.jsx($,{id:"theme-menu",anchorEl:a,open:i,onClose:k,TransitionComponent:F,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},PaperProps:{elevation:8,sx:{mt:1,minWidth:160,borderRadius:2,border:`1px solid ${m.palette.divider}`,"& .MuiMenuItem-root":{borderRadius:1,margin:"2px 4px",transition:"all 0.2s ease","&:hover":{backgroundColor:"action.hover",transform:"translateX(4px)"}}}},children:["light","dark","system"].map(h=>{const N=A[h],C=u===h;return e.jsxs(U,{onClick:()=>L(h),selected:C,sx:{fontWeight:C?600:400,backgroundColor:C?"action.selected":"transparent"},children:[e.jsx(W,{sx:{minWidth:36},children:e.jsx(N,{fontSize:"small",sx:{color:C?"primary.main":"text.secondary",transition:"color 0.2s ease"}})}),c&&e.jsx(q,{primary:o(`theme.${h}`,pe[h]),sx:{"& .MuiListItemText-primary":{fontSize:"0.875rem",color:C?"primary.main":"text.primary",transition:"color 0.2s ease"}}})]},h)})})]})}const D=r.forwardRef(({playerList:t,onClick:n,innerRef:d,...c},l)=>{const m=l||d;return n?e.jsxs(H,{...c,ref:m,onClick:n,sx:{display:"flex",alignItems:"center",borderRadius:1,px:.5,py:.25,minWidth:44,minHeight:44,color:"text.primary",fontSize:"inherit",fontWeight:500,"&:hover":{backgroundColor:"action.hover"},"&:focus":{backgroundColor:"action.focus"}},children:[e.jsx(T,{color:"success",sx:{fontSize:8,marginRight:"0.2rem"}}),t.length]}):e.jsxs("div",{...c,ref:m,style:{display:"flex",alignItems:"center",color:"var(--mui-palette-text-primary)",fontWeight:500},children:[e.jsx(T,{color:"success",sx:{fontSize:8,marginRight:"0.2rem"}}),t.length]})});D.displayName="PlayersOnline";const Se=r.lazy(()=>j(()=>import("./index.tsx-LL5Ow4fe.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),Ce=r.lazy(()=>j(()=>import("./index.tsx-B3_iyngw.js"),__vite__mapDeps([16,8,1,2,4,17,10,11,18,13,14,15,6,19,20,21,9,5,12]))),we=r.lazy(()=>j(()=>import("./index.tsx-BbzYcVgX.js"),__vite__mapDeps([22,1,2,23])));function be(){return e.jsx(Y,{size:16})}function Te({room:t,playerList:n=[]}){const{t:d}=z(),[c,l]=r.useState(!1),[m,u]=r.useState(!1),[p,f]=r.useState(!1),{schedule:S}=ge(),o=me(),a=r.useRef(null),s=()=>{l(!0),f(!0)},i=()=>{u(!m)},x=()=>{u(!1)};return e.jsx(K,{position:"fixed",children:e.jsxs(J,{disableGutters:!0,variant:"dense",component:"nav",className:"nav",children:[e.jsxs("div",{className:"site-name",children:[e.jsx(V,{component:"img",sx:{height:32},alt:"Blitzed Out Logo",src:he}),e.jsx("h1",{className:"gradient-text",children:"Blitzed Out"})]}),e.jsx("div",{children:e.jsxs("div",{className:"nav-room-name",children:[e.jsx("h2",{children:ue(t)||t===void 0?d("public"):t}),e.jsx(D,{playerList:n,onClick:i,ref:a,"aria-label":d("online"),"aria-expanded":m,"aria-haspopup":"dialog"}),e.jsx(w,{onClick:s,"aria-label":"schedule game",sx:{ml:2},children:e.jsx(Q,{color:"primary",badgeContent:p?null:S.length,children:e.jsx(ie,{})})}),c&&e.jsx(X,{children:e.jsx(r.Suspense,{fallback:e.jsx(be,{}),children:e.jsx(Se,{open:c,close:()=>l(!1),isMobile:o})})}),n.length>0&&e.jsx(r.Suspense,{fallback:null,children:e.jsx(we,{isOpen:m,onClose:x,playerList:n,anchorEl:a.current})})]})}),e.jsxs("div",{className:"menu-drawer",children:[e.jsx(xe,{size:"medium",variant:"menu","aria-label":"Toggle theme menu - choose between light, dark, or system theme"}),e.jsx(fe,{}),e.jsx(r.Suspense,{fallback:null,children:e.jsx(Ce,{})})]})]})})}const Ae=v(t=>e.jsx(Z,{disableGutters:!0,elevation:0,square:!0,...t}))(({theme:t})=>({border:`1px solid ${t.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}})),Me=v(ee)(({theme:t})=>({padding:t.spacing(2),borderTop:`1px solid ${t.palette.divider}`})),Oe=v(t=>e.jsx(te,{expandIcon:e.jsx(ce,{sx:{fontSize:"0.9rem"}}),...t}))(({theme:t})=>({backgroundColor:t.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(148, 163, 184, .08)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:t.spacing(1)}}));function ze({close:t}){return e.jsx(w,{"aria-label":"close",onClick:t,sx:{position:"absolute",right:8,top:8},children:e.jsx(le,{})})}export{Ae as A,ze as C,Te as N,ge as a,Oe as b,Me as c,Ee as l,me as u};
