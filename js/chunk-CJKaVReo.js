import{i as g}from"./chunk-CalwtN_X.js";import{g as l}from"./chunk-B4PEA_xj.js";import{r as m,j as a,aa as f}from"./chunk-QuzIwS35.js";import{u as b}from"./chunk-CiUBNmqE.js";import{c as h}from"./chunk-D2XAL7ZP.js";function x(e){const o=/vimeo\.com\/(\d+)/,t=e.match(o);return`https://player.vimeo.com/video/${t?t[1]:""}?autoplay=1&loop=1&autostart=true`}function v(e){const o=/(?:youtube\.com\/(?:[^/]+\/.+\/|(?:v|e(?:mbed)?)\/|[^#]*[?&]v=|youtu\.be\/)([^"&?/ ]{11})|^(?:[^"&?/ ]{11})$)/,t=e.match(o);return`https://www.youtube.com/embed/${t?t[1]:""}?autoplay=1&loop=1&autostart=true`}function k(e){const o=/drive\.google\.com\/file\/d\/([^/]+)/,t=e.match(o);return`https://drive.google.com/file/d/${t?t[1]:""}/preview?loop=1`}function y(e){const o=/dropbox\.com\/s\/([^/]+)/,t=e.match(o);return`https://www.dropbox.com/s/${t?t[1]:""}?raw=1`}function w(e){return`https://pornhub.com/embed/${new URL(e).searchParams.get("viewkey")||""}?autoplay=1&loop=1&autostart=true`}function I(e){const o=e.split("-");return`https://xhamster.com/xembed.php?video=${o[o.length-1]}?autoplay=1&loop=1&autostart=true`}function R(e){if(e.includes("discordapp.net")&&e.includes("imgur.com")&&e.endsWith(".mp4"))return e;const o=/imgur\.com\/([a-zA-Z0-9]+)(?:\.mp4)?|images-ext-\d+\.discordapp\.net\/external\/[^/]+\/https\/i\.imgur\.com\/([a-zA-Z0-9]+)\.mp4/,t=e.match(o);return`https://i.imgur.com/${t?t[1]||t[2]:""}.mp4`}function d(e){return/\.(mp4|webm|ogg|mov)(\?.*)?$/.test(e)}function $(e){return s(e,["media.discordapp.net","cdn.discordapp.com"])&&!d(e)}function s(e,o){return o.some(t=>e.includes(t))}function B(e){let o=null,t=!0;if(!e)return{url:"",isVideo:!1};switch(!0){case e.includes("vimeo.com"):o=x(e);break;case s(e,["youtube.com","youtu.be"]):o=v(e);break;case e.includes("drive.google.com"):o=k(e);break;case e.includes("pornhub.com"):o=w(e);break;case e.includes("xhamster.com"):o=I(e);break;case e.includes("dropbox.com"):o=y(e);break;case s(e,["imgur.com","i.imgur.com","discordapp.net","imgur.com"]):o=R(e);break;case s(e,["thisvid.com","boyfriendtv.com"]):o=e;break;case $(e):o=e,t=!1;break;case d(e):o=e;break;default:o=l(e),t=!1;break}return{url:o,isVideo:t}}function N(e,o,t){const{background:n,backgroundURL:c,roomBackground:r}=e,i=n!=="custom"?n:c,p=r==="app"?r:t,u=!g(o)&&r!=="app"?p:i;return u?B(u):{url:null,isVideo:!1}}function P(e,o){const t=e.findIndex(c=>c.uid===o);if(t===-1||e.length===0)return null;const n=t+1>=e.length?0:t+1;return e[n]}function A(e){const[o,t]=m.useState(null),n=b();return m.useEffect(()=>{if(!e)return;if(n.length<=1){t(null);return}const c=n.filter(i=>!i.isFinished),r=P(c,e.uid);t(r)},[e,n]),o}function E({url:e=null,isVideo:o=null}){const t=e&&/\.(mp4|webm|ogg|mov)(\?.*)?$/i.test(e),n=e&&(e.includes("/images/color")||e.includes("/images/gray")),c=e&&!n&&(o||!o&&e);return a.jsx(f,{className:h("main-container",!c&&"default-background"),role:"presentation",sx:{backgroundImage:!o&&e&&!n?`url(${e})`:"none"},children:o&&(t?a.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,src:e||void 0,className:"video-background"}):a.jsx("iframe",{width:"100%",height:"100%",src:e||void 0,title:"video",allowFullScreen:!0,allow:"autoplay",style:{border:0}}))})}export{E as R,N as g,B as p,A as u};
