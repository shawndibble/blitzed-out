import{r as m,q as f,j as t,t as y}from"./chunk-DDoLnHI0.js";import{m as j,I as p,Q as c,a6 as I,a7 as b}from"./chunk-D59Sa5ya.js";import{u as S}from"./chunk-CXIw3Iqt.js";import{s as d}from"../assets/index-BodytYbc.js";import{a0 as T,a1 as A}from"./chunk-CtIAsvv6.js";import{T as B}from"./chunk-BDM5WtNj.js";import"./chunk-CoPHbQIg.js";import"./chunk-CbUvEgHM.js";import"./chunk-Dk7I1tJi.js";import"./chunk-COViFSNc.js";const M=s=>{const n=s.length-22;return 4*Math.ceil(n/3)*.5624896334383812/1e6};function K({room:s,isTransparent:n}){const{user:a}=S(),[r,o]=m.useState(""),[i,l]=m.useState(""),{t:h}=f(),g=e=>{o(e.target.value)},u=e=>{e.preventDefault(),d({room:s,user:a,text:r,type:"chat"}),o("")},x=async()=>{let e="";try{e=await T.getPhoto({quality:90,allowEditing:!0,resultType:A.Base64})}catch{return""}return e.base64String&&M(e.base64String)>5?l("File too large! Max size is 5MB. If you need to send a larger file, please use a link from another site."):d({room:s,user:a,type:"media",image:e})};return t.jsxs(t.Fragment,{children:[t.jsx("form",{onSubmit:u,className:`message-input-container ${n?"transparent":""}`,children:t.jsx(j,{multiline:!0,placeholder:h("messageInput"),fullWidth:!0,value:r,onChange:g,onKeyDown:e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),u(e))},required:!0,inputProps:{minLength:1},InputProps:{startAdornment:t.jsx(p,{position:"start",children:t.jsx(c,{type:"button",color:"primary",onClick:x,children:t.jsx(b,{})})}),endAdornment:t.jsx(p,{position:"end",children:t.jsx(c,{type:"submit",color:"primary",disabled:r.length<1,children:t.jsx(I,{})})})},helperText:t.jsx(y,{i18nKey:"markdown"})})}),t.jsx(B,{open:!!i,close:()=>l(""),children:i})]})}export{K as default};
