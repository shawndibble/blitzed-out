import{am as T,r as s,ad as W,as as F,j as e,M as G,aa as r,at as V,au as m,av as f,aw as b,ax as t,T as C,z as q,Q as d,a1 as R,y as U,ay as Q,ab as H}from"./chunk-QuzIwS35.js";import{u as J}from"./chunk-CZM7hJiR.js";import{u as X,l as Y}from"./chunk-CBj0jgHk.js";import{u as Z}from"./chunk-CiUBNmqE.js";import{e as _}from"../assets/index-BqbSN2YQ.js";import{N as $}from"./chunk-Dr312jl_.js";import ee from"./index.tsx-BWJp1LsK.js";import{A as ae}from"./chunk-CQRrUw-X.js";import{P as se,a as te,b as ne}from"./chunk-_5j352I4.js";import"./chunk-D2XAL7ZP.js";import"./chunk-Do76cB_1.js";import"./chunk-B90GCnie.js";import"./chunk-CtJAfh3g.js";import"./chunk-CalwtN_X.js";import"./chunk-CWRIfDP8.js";import"./chunk-ORyNdZv_.js";function Ce(){const{i18n:i,t:v}=T(),{login:g,user:L}=J(),[N,l]=s.useState(!1),[S,h]=s.useState("login"),[x,p]=s.useState(!1),z=()=>{h("login"),l(!0)},w=()=>{h("register"),l(!0)},A=W(),[D]=F(),K=!!D.get("importBoard"),c=A.id??"PUBLIC",I=Z(),[o,P]=s.useState(L?.displayName||""),[j,y]=X(),u=s.useCallback(async a=>{a.preventDefault(),await y({...j,displayName:o,room:c}),await g(o)},[o,g,c,j,y]),k=s.useCallback(async a=>{a.key==="Enter"&&await u(a)},[u]),B=i.resolvedLanguage||"en",M=s.useCallback(async a=>{const n=a.target.value;p(!0);try{await _(n),await i.changeLanguage(n)}catch(O){console.error("Error changing language:",O),await i.changeLanguage(n)}finally{p(!1)}},[i]),E=s.useMemo(()=>Object.entries(Y).map(([a,n])=>e.jsx(G,{value:a,children:n.label},a)),[]);return e.jsxs(e.Fragment,{children:[e.jsx($,{room:c,playerList:I}),e.jsxs(r,{className:"unauthenticated-container gradient-background-vibrant",children:[e.jsx(V,{maxWidth:"lg",sx:{pt:8},children:e.jsxs(m,{container:!0,spacing:4,justifyContent:"center",alignItems:"stretch",children:[e.jsx(m,{size:{xs:12,md:4,lg:4},children:e.jsx(f,{className:"unauthenticated-card main-setup-card",children:e.jsxs(b,{children:[e.jsx("h2",{className:"setup",children:e.jsx(t,{i18nKey:"setup"})}),e.jsx(C,{className:"setup-subtitle",variant:"body1",children:e.jsx(t,{i18nKey:"setupSubtitle"})}),e.jsxs(r,{component:"form",method:"post",onSubmit:u,className:"settings-box",children:[e.jsx(q,{fullWidth:!0,id:"displayName",label:v("displayName"),value:o,onChange:a=>P(a.target.value),required:!0,autoFocus:!0,onKeyDown:a=>k(a),margin:"normal"}),e.jsx(d,{variant:"contained",type:"submit",fullWidth:!0,className:"jump-in-button",size:"large",startIcon:e.jsx(se,{}),sx:{mt:2,py:1.25,fontSize:"1.1rem",fontWeight:600},children:K?e.jsx(t,{i18nKey:"import"}):e.jsx(t,{i18nKey:"anonymousLogin"})}),e.jsx(R,{sx:{my:3},children:e.jsx(C,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.9rem"},children:e.jsx(t,{i18nKey:"or"})})}),e.jsxs(r,{className:"auth-button-container",children:[e.jsx(d,{variant:"outlined",startIcon:e.jsx(te,{}),onClick:z,size:"medium",children:e.jsx(t,{i18nKey:"signIn"})}),e.jsx(d,{variant:"outlined",onClick:w,size:"medium",children:e.jsx(t,{i18nKey:"createAccount"})})]})]})]})})}),e.jsx(m,{size:{xs:12,md:8,lg:8},children:e.jsx(f,{className:"unauthenticated-card",children:e.jsx(b,{children:e.jsx(ee,{})})})})]})}),e.jsx(r,{className:"footer-language-container",children:e.jsxs(r,{className:"footer-language-selector",children:[e.jsx(ne,{sx:{fontSize:"1rem",color:"rgba(255, 255, 255, 0.5)"}}),e.jsx(U,{size:"small",sx:{minWidth:120},children:e.jsx(Q,{value:B,disabled:x,onChange:M,size:"small",variant:"standard",sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem","& .MuiSelect-icon":{color:"rgba(255, 255, 255, 0.5)"},"&:before":{borderBottomColor:"rgba(255, 255, 255, 0.3)"},"&:hover:before":{borderBottomColor:"rgba(255, 255, 255, 0.5)"}},endAdornment:x&&e.jsx(H,{size:14}),children:E})})]})})]}),e.jsx(ae,{open:N,close:()=>l(!1),initialView:S})]})}export{Ce as default};
