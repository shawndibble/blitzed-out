{"version":3,"mappings":"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","names":["ConfirmationModal","open","onClose","onConfirm","onCancel","title","message","confirmText","cancelText","severity","confirmColor","t","useTranslation","isMobile","useBreakpoint","handleCancel","handleConfirm","__async","error","jsxs","Dialog","jsx","DialogTitle","DialogContent","Alert","DialogContentText","DialogActions","Button","LanguageChangeModal","onRebuildBoard","onKeepBoard","fromLanguage","toLanguage","_a","_b","fromLanguageLabel","languages","toLanguageLabel","handleRebuildBoard","handleKeepBoard","Trans","Fragment","AppSettingsDialog","lazy","__vitePreload","GameSettingsDialog","GameGuide","ManageGameBoards","Schedule","CustomTileDialog","MenuDrawer","room","useParams","user","wipeAllData","isAnonymous","useAuth","i18n","menuOpen","setMenu","useState","toggleDrawer","useCallback","isOpen","gameSettings","useSettings","setOpen","toggleDialog","type","prev","__spreadProps","__spreadValues","handleWipeData","openInNewTab","url","discordIcon","useMemo","SvgIcon","setLocale","updateSettings","useSettingsStore","languageLoading","setLanguageLoading","pendingLanguageChange","setPendingLanguageChange","submitSettings","useSubmitGameSettings","actionsList","useUnifiedActionList","handleLanguageChange","event","newLanguage","currentLanguage","resolve","onLanguageChanged","handleBoardRebuildDecision","shouldRebuildBoard","handleLanguageModalClose","languageMenuItems","key","obj","MenuItem","menuList","items","AppRegistration","ViewModule","Tv","CalendarMonth","InfoIcon","TuneIcon","SettingsIcon","LinkIcon","Logout","icon","onClick","ListItem","ListItemButton","ListItemIcon","ListItemText","renderDialog","Component","dialogKey","props","Suspense","IconButton","MenuIcon","Drawer","Box","List","FormControl","InputLabel","Language","Select","DialogWrapper","AuthDialog"],"ignoreList":[],"sources":["../../src/components/ConfirmationModal/index.tsx","../../src/components/LanguageChangeModal/index.tsx","../../src/views/Navigation/MenuDrawer/index.tsx"],"sourcesContent":["import {\n  Alert,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@mui/material';\n\nimport { ReactNode } from 'react';\nimport useBreakpoint from '@/hooks/useBreakpoint';\nimport { useTranslation } from 'react-i18next';\n\nexport interface ConfirmationModalProps {\n  open: boolean;\n  onClose: () => void;\n  onConfirm: () => void | Promise<void>;\n  onCancel?: () => void;\n  title: ReactNode;\n  message: ReactNode;\n  confirmText?: string;\n  cancelText?: string;\n  severity?: 'info' | 'warning' | 'error' | 'success';\n  confirmColor?: 'primary' | 'secondary' | 'error' | 'warning' | 'info' | 'success';\n}\n\nexport default function ConfirmationModal({\n  open,\n  onClose,\n  onConfirm,\n  onCancel,\n  title,\n  message,\n  confirmText,\n  cancelText,\n  severity = 'info',\n  confirmColor = 'primary',\n}: ConfirmationModalProps): JSX.Element {\n  const { t } = useTranslation();\n  const isMobile = useBreakpoint();\n\n  const handleCancel = (): void => {\n    if (onCancel) {\n      onCancel();\n    } else {\n      onClose();\n    }\n  };\n\n  const handleConfirm = async (): Promise<void> => {\n    try {\n      await onConfirm();\n      onClose();\n    } catch (error) {\n      console.error('Confirmation action failed:', error);\n      // Modal stays open if confirmation fails\n    }\n  };\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      fullScreen={isMobile}\n      maxWidth=\"sm\"\n      fullWidth\n      aria-labelledby=\"confirmation-dialog-title\"\n      aria-describedby=\"confirmation-dialog-description\"\n    >\n      <DialogTitle id=\"confirmation-dialog-title\">{title}</DialogTitle>\n      <DialogContent>\n        {severity !== 'info' && (\n          <Alert severity={severity} sx={{ mb: 2 }}>\n            {severity === 'warning' && t('warning')}\n            {severity === 'error' && t('error')}\n            {severity === 'success' && t('success')}\n          </Alert>\n        )}\n        <DialogContentText id=\"confirmation-dialog-description\">{message}</DialogContentText>\n      </DialogContent>\n      <DialogActions sx={{ p: 2, gap: 1 }}>\n        <Button onClick={handleCancel} variant=\"outlined\" fullWidth={isMobile}>\n          {cancelText || t('cancel')}\n        </Button>\n        <Button\n          onClick={handleConfirm}\n          variant=\"contained\"\n          color={confirmColor}\n          fullWidth={isMobile}\n          autoFocus\n        >\n          {confirmText || t('confirm')}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import { Trans, useTranslation } from 'react-i18next';\nimport ConfirmationModal from '@/components/ConfirmationModal';\nimport { languages } from '@/services/i18nHelpers';\n\ninterface LanguageChangeModalProps {\n  open: boolean;\n  onClose: () => void;\n  onRebuildBoard: () => void;\n  onKeepBoard: () => void;\n  fromLanguage: string;\n  toLanguage: string;\n}\n\nexport default function LanguageChangeModal({\n  open,\n  onClose,\n  onRebuildBoard,\n  onKeepBoard,\n  fromLanguage,\n  toLanguage,\n}: LanguageChangeModalProps): JSX.Element {\n  const { t } = useTranslation();\n\n  const fromLanguageLabel = languages[fromLanguage]?.label || fromLanguage;\n  const toLanguageLabel = languages[toLanguage]?.label || toLanguage;\n\n  const handleRebuildBoard = (): void => {\n    onRebuildBoard();\n    onClose();\n  };\n\n  const handleKeepBoard = (): void => {\n    onKeepBoard();\n    onClose();\n  };\n\n  return (\n    <ConfirmationModal\n      open={open}\n      onClose={onClose}\n      onConfirm={handleRebuildBoard}\n      onCancel={handleKeepBoard}\n      title={<Trans i18nKey=\"languageChangeTitle\" />}\n      message={\n        <>\n          <Trans\n            i18nKey=\"languageChangeMessage\"\n            values={{\n              fromLanguage: fromLanguageLabel,\n              toLanguage: toLanguageLabel,\n            }}\n          />\n          <br />\n          <br />\n          <Trans i18nKey=\"languageChangeExplanation\" />\n        </>\n      }\n      confirmText={t('rebuildBoardAction')}\n      cancelText={t('keepCurrentBoard')}\n      severity=\"info\"\n      confirmColor=\"primary\"\n    />\n  );\n}\n","import {\n  AppRegistration,\n  CalendarMonth,\n  Language,\n  Link as LinkIcon,\n  Logout,\n  Tv,\n  ViewModule,\n} from '@mui/icons-material';\nimport InfoIcon from '@mui/icons-material/Info';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport TuneIcon from '@mui/icons-material/Tune';\nimport {\n  Box,\n  Drawer,\n  FormControl,\n  IconButton,\n  InputLabel,\n  List,\n  ListItem,\n  ListItemButton,\n  ListItemIcon,\n  ListItemText,\n  MenuItem,\n  Select,\n  SelectChangeEvent,\n  SvgIcon,\n} from '@mui/material';\nimport { useAuth } from '@/hooks/useAuth';\nimport useBreakpoint from '@/hooks/useBreakpoint';\nimport { lazy, Suspense, useMemo, useState, ReactNode, useCallback } from 'react';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { useParams } from 'react-router-dom';\nimport DialogWrapper from '@/components/DialogWrapper';\nimport AuthDialog from '@/components/auth/AuthDialog';\nimport { useSettings, useSettingsStore } from '@/stores/settingsStore';\nimport { languages } from '@/services/i18nHelpers';\nimport LanguageChangeModal from '@/components/LanguageChangeModal';\nimport useSubmitGameSettings from '@/hooks/useSubmitGameSettings';\nimport useUnifiedActionList from '@/hooks/useUnifiedActionList';\n\n// Lazy load dialogs\nconst AppSettingsDialog = lazy(() => import('@/components/AppSettingsDialog'));\nconst GameSettingsDialog = lazy(() => import('@/components/GameSettingsDialog'));\nconst GameGuide = lazy(() => import('@/views/GameGuide'));\nconst ManageGameBoards = lazy(() => import('@/views/ManageGameBoards'));\nconst Schedule = lazy(() => import('@/views/Schedule'));\nconst CustomTileDialog = lazy(() => import('@/components/CustomTilesDialog'));\n\ninterface MenuItemType {\n  key: string;\n  title: ReactNode;\n  icon: ReactNode;\n  onClick: () => void;\n}\n\ninterface DialogState {\n  settings: boolean;\n  gameBoard: boolean;\n  about: boolean;\n  schedule: boolean;\n  customTiles: boolean;\n  linkAccount: boolean;\n  appSettings: boolean;\n  languageChange: boolean;\n  [key: string]: boolean;\n}\n\nexport default function MenuDrawer(): JSX.Element {\n  const { id: room } = useParams<{ id: string }>();\n  const { user, wipeAllData, isAnonymous } = useAuth();\n  const isMobile = useBreakpoint();\n  const { i18n } = useTranslation();\n  const [menuOpen, setMenu] = useState<boolean>(false);\n  const toggleDrawer = useCallback((isOpen: boolean): void => setMenu(isOpen), []);\n  const gameSettings = useSettings()[0];\n\n  const [open, setOpen] = useState<DialogState>({\n    settings: false,\n    gameBoard: false,\n    about: false,\n    schedule: false,\n    customTiles: false,\n    linkAccount: false,\n    appSettings: false,\n    languageChange: false,\n  });\n\n  const toggleDialog = useCallback(\n    (type: string, isOpen: boolean): void => setOpen((prev) => ({ ...prev, [type]: isOpen })),\n    []\n  );\n\n  const handleWipeData = useCallback(async (): Promise<void> => {\n    await wipeAllData();\n    toggleDrawer(false);\n  }, [wipeAllData, toggleDrawer]);\n\n  const openInNewTab = (url: string): Window | null => window.open(url, '_blank', 'noreferrer');\n\n  const discordIcon = useMemo(\n    () => (\n      <SvgIcon>\n        <path d=\"M18.942 5.556a16.299 16.299 0 0 0-4.126-1.297c-.178.321-.385.754-.529 1.097a15.175 15.175 0 0 0-4.573 0 11.583 11.583 0 0 0-.535-1.097 16.274 16.274 0 0 0-4.129 1.3c-2.611 3.946-3.319 7.794-2.965 11.587a16.494 16.494 0 0 0 5.061 2.593 12.65 12.65 0 0 0 1.084-1.785 10.689 10.689 0 0 1-1.707-.831c.143-.106.283-.217.418-.331 3.291 1.539 6.866 1.539 10.118 0 .137.114.277.225.418.331-.541.326-1.114.606-1.71.832a12.52 12.52 0 0 0 1.084 1.785 16.46 16.46 0 0 0 5.064-2.595c.415-4.396-.709-8.209-2.973-11.589zM8.678 14.813c-.988 0-1.798-.922-1.798-2.045s.793-2.047 1.798-2.047 1.815.922 1.798 2.047c.001 1.123-.793 2.045-1.798 2.045zm6.644 0c-.988 0-1.798-.922-1.798-2.045s.793-2.047 1.798-2.047 1.815.922 1.798 2.047c0 1.123-.793 2.045-1.798 2.045z\" />\n      </SvgIcon>\n    ),\n    []\n  );\n\n  const { setLocale, updateSettings } = useSettingsStore();\n  const [languageLoading, setLanguageLoading] = useState(false);\n  const [pendingLanguageChange, setPendingLanguageChange] = useState<{\n    from: string;\n    to: string;\n  } | null>(null);\n  const submitSettings = useSubmitGameSettings();\n  const { actionsList } = useUnifiedActionList(gameSettings?.gameMode);\n\n  const handleLanguageChange = useCallback(\n    async (event: SelectChangeEvent<string>): Promise<void> => {\n      const newLanguage = event.target.value;\n      const currentLanguage = i18n.resolvedLanguage || 'en';\n\n      // If same language, do nothing\n      if (currentLanguage === newLanguage) return;\n\n      setLanguageLoading(true);\n\n      try {\n        // Language change will automatically trigger migration via MigrationContext\n        await i18n.changeLanguage(newLanguage);\n        setLocale(newLanguage);\n\n        // Wait for i18n to fully propagate using the languageChanged event\n        await new Promise((resolve) => {\n          const onLanguageChanged = () => {\n            i18n.off('languageChanged', onLanguageChanged);\n            resolve(undefined);\n          };\n          i18n.on('languageChanged', onLanguageChanged);\n          // Fallback timeout in case event doesn't fire\n          setTimeout(() => {\n            i18n.off('languageChanged', onLanguageChanged);\n            resolve(undefined);\n          }, 500);\n        });\n\n        // Set pending change and show modal in new language\n        setPendingLanguageChange({ from: currentLanguage, to: newLanguage });\n        toggleDialog('languageChange', true);\n      } catch (error) {\n        console.error('Error changing language:', error);\n        // Still attempt to change language even if migration fails\n        await i18n.changeLanguage(newLanguage);\n        setLocale(newLanguage);\n\n        // Wait for i18n to fully propagate using the languageChanged event\n        await new Promise((resolve) => {\n          const onLanguageChanged = () => {\n            i18n.off('languageChanged', onLanguageChanged);\n            resolve(undefined);\n          };\n          i18n.on('languageChanged', onLanguageChanged);\n          // Fallback timeout in case event doesn't fire\n          setTimeout(() => {\n            i18n.off('languageChanged', onLanguageChanged);\n            resolve(undefined);\n          }, 500);\n        });\n\n        setPendingLanguageChange({ from: currentLanguage, to: newLanguage });\n        toggleDialog('languageChange', true);\n      } finally {\n        setLanguageLoading(false);\n      }\n    },\n    [i18n, setLocale, toggleDialog]\n  );\n\n  const handleBoardRebuildDecision = useCallback(\n    async (shouldRebuildBoard: boolean): Promise<void> => {\n      // Language has already been changed, handle board rebuild properly\n      if (shouldRebuildBoard && actionsList) {\n        try {\n          // Use the complete settings submission flow to rebuild board and generate message\n          await submitSettings({ ...gameSettings, boardUpdated: true }, actionsList);\n        } catch (error) {\n          console.error('Error rebuilding board:', error);\n          // Fallback to simple board update\n          updateSettings({ boardUpdated: true });\n        }\n      }\n      setPendingLanguageChange(null);\n    },\n    [submitSettings, gameSettings, actionsList, updateSettings]\n  );\n\n  const handleRebuildBoard = useCallback(async (): Promise<void> => {\n    await handleBoardRebuildDecision(true);\n  }, [handleBoardRebuildDecision]);\n\n  const handleKeepBoard = useCallback(async (): Promise<void> => {\n    await handleBoardRebuildDecision(false);\n  }, [handleBoardRebuildDecision]);\n\n  const handleLanguageModalClose = useCallback((): void => {\n    setPendingLanguageChange(null);\n    toggleDialog('languageChange', false);\n  }, [toggleDialog]);\n\n  const languageMenuItems = useMemo(\n    () =>\n      Object.entries(languages).map(([key, obj]) => (\n        <MenuItem value={key} key={key}>\n          {obj.label}\n        </MenuItem>\n      )),\n    []\n  );\n\n  const menuItems = useMemo<MenuItemType[]>(() => {\n    const items: MenuItemType[] = [\n      {\n        key: 'gameBoard',\n        title: <Trans i18nKey=\"gameBoards\" />,\n        icon: <AppRegistration />,\n        onClick: () => toggleDialog('gameBoard', true),\n      },\n      {\n        key: 'customTiles',\n        title: <Trans i18nKey=\"customTilesLabel\" />,\n        icon: <ViewModule />,\n        onClick: () => toggleDialog('customTiles', true),\n      },\n      {\n        key: 'cast',\n        title: <Trans i18nKey=\"tvMode\" />,\n        icon: <Tv />,\n        onClick: () => openInNewTab(`/${room?.toUpperCase()}/cast`),\n      },\n      {\n        key: 'schedule',\n        title: <Trans i18nKey=\"schedule\" />,\n        icon: <CalendarMonth />,\n        onClick: () => toggleDialog('schedule', true),\n      },\n      {\n        key: 'discord',\n        title: 'Discord',\n        icon: discordIcon,\n        onClick: () => openInNewTab('https://discord.gg/mSPBE2hFef'),\n      },\n      {\n        key: 'about',\n        title: <Trans i18nKey=\"about\" />,\n        icon: <InfoIcon />,\n        onClick: () => toggleDialog('about', true),\n      },\n    ];\n\n    if (user) {\n      items.unshift({\n        key: 'appSettings',\n        title: <Trans i18nKey=\"appSettings\" />,\n        icon: <TuneIcon />,\n        onClick: () => toggleDialog('appSettings', true),\n      });\n      items.unshift({\n        key: 'settings',\n        title: <Trans i18nKey={gameSettings.advancedSettings ? 'settings' : 'setupWizard'} />,\n        icon: <SettingsIcon />,\n        onClick: () => toggleDialog('settings', true),\n      });\n      if (isAnonymous) {\n        items.push({\n          key: 'linkAccount',\n          title: <Trans i18nKey=\"linkAccount\" />,\n          icon: <LinkIcon />,\n          onClick: () => toggleDialog('linkAccount', true),\n        });\n      }\n      items.push({\n        key: 'resetApp',\n        title: <Trans i18nKey=\"resetApp\" />,\n        icon: <Logout />,\n        onClick: () => handleWipeData(),\n      });\n    }\n    return items;\n  }, [\n    user,\n    room,\n    isAnonymous,\n    gameSettings.advancedSettings,\n    discordIcon,\n    handleWipeData,\n    toggleDialog,\n  ]);\n\n  const menuList = menuItems.map(({ key, title, icon, onClick }) => (\n    <ListItem key={key} disablePadding onClick={onClick}>\n      <ListItemButton>\n        <ListItemIcon>{icon}</ListItemIcon>\n        <ListItemText primary={title} />\n      </ListItemButton>\n    </ListItem>\n  ));\n\n  const renderDialog = <T,>(\n    Component: React.ComponentType<T & { open: boolean; close: () => void; isMobile: boolean }>,\n    dialogKey: keyof DialogState,\n    props: Partial<T> = {} as any\n  ): JSX.Element => (\n    <Suspense fallback={null}>\n      <Component\n        open={open[dialogKey]}\n        close={() => toggleDialog(dialogKey.toString(), false)}\n        isMobile={isMobile}\n        {...(props as any)}\n      />\n    </Suspense>\n  );\n\n  return (\n    <>\n      <IconButton onClick={() => toggleDrawer(true)} aria-label=\"open menu\">\n        <MenuIcon />\n      </IconButton>\n      <Drawer anchor=\"right\" open={menuOpen} onClose={() => toggleDrawer(false)}>\n        <Box\n          role=\"presentation\"\n          onClick={() => toggleDrawer(false)}\n          sx={{\n            width: 250,\n            display: 'flex',\n            flexDirection: 'column',\n            height: '100%',\n          }}\n        >\n          <List sx={{ flexGrow: 1 }}>{menuList}</List>\n          <Box\n            sx={{\n              borderTop: '1px solid rgba(0, 0, 0, 0.12)',\n              p: 2,\n            }}\n          >\n            <FormControl fullWidth size=\"small\" sx={{ maxWidth: 200 }}>\n              <InputLabel\n                id=\"drawer-language-label\"\n                sx={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  '& .MuiInputLabel-root': {\n                    fontSize: '0.875rem',\n                  },\n                }}\n              >\n                <Language sx={{ mr: 0.5, fontSize: '1rem' }} />\n                <Trans i18nKey=\"language\" />\n              </InputLabel>\n              <Select\n                labelId=\"drawer-language-label\"\n                id=\"drawer-language-select\"\n                value={i18n.resolvedLanguage || 'en'}\n                disabled={languageLoading}\n                label={\n                  <>\n                    <Language sx={{ fontSize: '1rem' }} />\n                    <Trans i18nKey=\"language\" />\n                  </>\n                }\n                onChange={handleLanguageChange}\n                size=\"small\"\n                MenuProps={{\n                  anchorOrigin: {\n                    vertical: 'top',\n                    horizontal: 'left',\n                  },\n                  transformOrigin: {\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                  },\n                }}\n              >\n                {languageMenuItems}\n              </Select>\n            </FormControl>\n          </Box>\n        </Box>\n      </Drawer>\n      {open.settings && renderDialog(GameSettingsDialog, 'settings')}\n      {open.appSettings && renderDialog(AppSettingsDialog, 'appSettings')}\n      {open.about && (\n        <Suspense fallback={null}>\n          <DialogWrapper open={open.about} close={() => toggleDialog('about', false)}>\n            <GameGuide />\n          </DialogWrapper>\n        </Suspense>\n      )}\n      {open.gameBoard && renderDialog(ManageGameBoards, 'gameBoard')}\n      {open.schedule && renderDialog(Schedule, 'schedule')}\n      {open.customTiles && renderDialog(CustomTileDialog, 'customTiles')}\n      {open.linkAccount && renderDialog(AuthDialog, 'linkAccount')}\n      {pendingLanguageChange && (\n        <LanguageChangeModal\n          open={open.languageChange}\n          onClose={handleLanguageModalClose}\n          onRebuildBoard={handleRebuildBoard}\n          onKeepBoard={handleKeepBoard}\n          fromLanguage={pendingLanguageChange.from}\n          toLanguage={pendingLanguageChange.to}\n        />\n      )}\n    </>\n  );\n}\n"],"file":"js/index.tsx-DDdMMWMg.js"}