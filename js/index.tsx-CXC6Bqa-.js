import{j as e,M as G,e as M,G as t,f as m,g as d,B as x,h as P,i as g,D as E,T as W,L as R,k as h,l as V,I as q,S as U}from"./chunk-Vuzv59E5.js";import{u as H}from"./chunk-Dvs4MHig.js";import{u as J}from"./chunk-6JIRnTv3.js";import{u as Q,l as b}from"./chunk-Cc6zmSQo.js";import{u as X}from"./chunk-Fhr6cyHj.js";import{r as n,u as Y,m as Z}from"./chunk-CfN-ANIX.js";import{N as _}from"./chunk-B9xzIVcH.js";import $ from"./index.tsx-DtPLOCHZ.js";import{A as ee}from"./chunk-BaaFOajx.js";import{u as ae,T as s}from"./chunk-lCeNjzcy.js";import"./chunk-CuMUTfgR.js";import"../assets/index-BIf5SR2l.js";import"./chunk-Bde8qXua.js";import"./chunk-BDQkcwfz.js";import"./chunk-Bp62TkGl.js";import"./chunk-D0hPV1-j.js";import"./chunk-DRmAB0Tz.js";function fe(){const{i18n:r,t:C}=ae(),{login:p,user:N}=H(),[v,l]=n.useState(!1),[L,j]=n.useState("login"),S=()=>{j("login"),l(!0)},D=()=>{j("register"),l(!0)},I=Y(),[K]=Z(),w=!!K.get("importBoard"),o=I.id??"PUBLIC",k=X(),c=J("sm"),[i,A]=n.useState(N?.displayName||""),[y,f]=Q(),u=n.useCallback(async a=>{a.preventDefault(),await f({...y,displayName:i,room:o}),await p(i)},[i,p,o,y,f]),B=n.useCallback(async a=>{a.key==="Enter"&&await u(a)},[u]),O=r.resolvedLanguage||"en",T=n.useCallback(a=>{r.changeLanguage(a.target.value)},[r]),z=n.useMemo(()=>Object.entries(b).map(([a,F])=>e.jsx(G,{value:a,children:F.label},a)),[b]);return e.jsxs(e.Fragment,{children:[e.jsx(_,{room:o,playerList:k}),e.jsxs(M,{maxWidth:"sm",sx:{mt:8},children:[e.jsx(t,{container:!0,flexDirection:"column",children:e.jsx(m,{className:"unauthenticated-card",children:e.jsxs(d,{children:[e.jsx("h2",{className:"setup",children:e.jsx(s,{i18nKey:"setup"})}),e.jsxs(x,{component:"form",method:"post",onSubmit:u,className:"settings-box",children:[e.jsx(P,{fullWidth:!0,id:"displayName",label:C("displayName"),value:i,onChange:a=>A(a.target.value),required:!0,autoFocus:!0,onKeyDown:a=>B(a),margin:"normal"}),e.jsx(g,{variant:"contained",type:"submit",sx:{mr:1},fullWidth:!0,children:w?e.jsx(s,{i18nKey:"import"}):e.jsx(s,{i18nKey:"anonymousLogin"})}),e.jsx(E,{sx:{my:2},children:e.jsx(W,{variant:"body2",color:"text.secondary",children:e.jsx(s,{i18nKey:"or",children:"OR"})})}),e.jsxs(x,{sx:{display:"flex",justifyContent:"space-evenly"},children:[e.jsx(g,{variant:"outlined",startIcon:e.jsx(R,{}),onClick:S,sx:{mr:1},children:e.jsx(s,{i18nKey:"signIn"})}),e.jsx(g,{variant:"outlined",onClick:D,children:e.jsx(s,{i18nKey:"createAccount"})})]})]})]})})}),e.jsx(t,{container:!0,sx:{mt:1},children:e.jsx(t,{className:"language",children:e.jsx(m,{className:"unauthenticated-card",children:e.jsx(d,{className:"translation-card-content",children:e.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:2},children:[!c&&e.jsx(h,{}),e.jsxs(V,{size:"small",sx:{minWidth:160,flexGrow:1},children:[e.jsxs(q,{id:"unauth-language-label",sx:{display:"flex",alignItems:"center",fontSize:"0.875rem"},children:[c&&e.jsx(h,{sx:{mr:.5,fontSize:"1rem"}}),e.jsx(s,{i18nKey:"language"})]}),e.jsx(U,{labelId:"unauth-language-label",id:"unauth-language-select",value:O,label:e.jsxs(e.Fragment,{children:[c&&e.jsx(h,{sx:{fontSize:"1rem"}}),e.jsx(s,{i18nKey:"language"})]}),onChange:T,size:"small",children:z})]})]})})})})}),e.jsx(t,{container:!0,sx:{mt:1},children:e.jsx(t,{className:"language",children:e.jsx(m,{className:"unauthenticated-card",children:e.jsx(d,{children:e.jsx($,{})})})})})]}),e.jsx(ee,{open:v,close:()=>l(!1),initialView:L})]})}export{fe as default};
