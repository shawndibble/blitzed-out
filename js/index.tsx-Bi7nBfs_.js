import{u as U,r as s,aj as V,aq as J,j as e,M as Q,ar as i,as as Y,at as b,au as A,av as D,aw as o,t as y,S as $,a3 as m,ax as I,ae as H,Q as X,ay as Z}from"./chunk-gLqOAnAo.js";import{A as ee}from"./chunk-VapU_6Ln.js";import ae from"./index.tsx-DQVCdLLc.js";import{l as ne,N as te}from"./chunk-CoT3YRZL.js";import{u as se,a as re}from"./chunk-DfmEhtRA.js";import{B as oe,p as ie}from"./chunk-Ce3NdNab.js";import{P as le,a as ce,b as ue}from"./chunk-DFT8axIh.js";import"./chunk-D9KXFDlS.js";import"./chunk-C9KfLBvM.js";import"../assets/index-40AaoPFR.js";import"./chunk-DF6sfhGu.js";import"./chunk-BOQuZLLs.js";import"./chunk-Cxiyhgvx.js";(function(){var n=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{};n.SENTRY_RELEASE={id:"ba7d3cfce23f41097f343c1a83f9f2db3c72f794"}})();try{(function(){var n=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{},r=new n.Error().stack;r&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[r]="0b605421-4935-464a-8b22-cc95550ac3c3",n._sentryDebugIdIdentifier="sentry-dbid-0b605421-4935-464a-8b22-cc95550ac3c3")})()}catch(n){}function Ce(){var n;const{i18n:r,t:k}=U(),{login:j,user:v,error:f}=se(),[z,h]=s.useState(!1),[T,w]=s.useState("login"),[S,C]=s.useState(!1),[c,L]=s.useState(!1),[p,x]=s.useState(null),_=()=>{w("login"),h(!0)},P=()=>{w("register"),h(!0)},K=V(),[O]=J(),B=!!O.get("importBoard"),u=(n=K.id)!=null?n:"PUBLIC",M=re(),[l,F]=s.useState((v==null?void 0:v.displayName)||""),[N,E]=oe(),d=s.useCallback(async a=>{a.preventDefault();try{L(!0),x(null),await E({...N,displayName:l,room:u}),await j(l)}catch(t){const g=t instanceof Error?t.message:"Unknown error occurred";ie("unauthenticated_app_submit",t,{authentication:{step:"unauthenticated_app_submit",displayName:l,room:u}}),x(g),navigator.userAgent.toLowerCase().includes("firefox")&&x(`${g}. If you're using Firefox mobile, try refreshing the page or temporarily disabling uBlock Origin.`)}finally{L(!1)}},[l,j,u,N,E]),R=s.useCallback(async a=>{a.key==="Enter"&&await d(a)},[d]),W=r.resolvedLanguage||"en",q=s.useCallback(async a=>{const t=a.target.value;C(!0);try{await r.changeLanguage(t)}catch(g){console.error("Error changing language:",g),await r.changeLanguage(t)}finally{C(!1)}},[r]),G=s.useMemo(()=>Object.entries(ne).map(([a,t])=>e.jsx(Q,{value:a,children:t.label},a)),[]);return e.jsxs(e.Fragment,{children:[e.jsx(te,{room:u,playerList:M}),e.jsxs(i,{className:"unauthenticated-container gradient-background-vibrant",children:[e.jsx(Y,{maxWidth:"lg",sx:{pt:8},children:e.jsxs(b,{container:!0,spacing:4,justifyContent:"center",alignItems:"stretch",children:[e.jsx(b,{size:{xs:12,md:6,lg:4},children:e.jsx(A,{className:"unauthenticated-card main-setup-card",children:e.jsxs(D,{children:[e.jsx("h2",{className:"setup",children:e.jsx(o,{i18nKey:"setup"})}),e.jsx(y,{className:"setup-subtitle",variant:"body1",children:e.jsx(o,{i18nKey:"setupSubtitle"})}),e.jsxs(i,{component:"form",method:"post",onSubmit:d,className:"settings-box",children:[e.jsx($,{fullWidth:!0,id:"displayName",label:k("displayName"),value:l,onChange:a=>F(a.target.value),required:!0,autoFocus:!0,onKeyDown:a=>R(a),margin:"normal"}),(p||f)&&e.jsxs(i,{sx:{mt:2,p:2,borderRadius:1,backgroundColor:"error.main",color:"error.contrastText"},children:[e.jsxs(y,{variant:"body2",children:[e.jsx("strong",{children:"Error:"})," ",p||f]}),navigator.userAgent.toLowerCase().includes("firefox")&&e.jsx(m,{size:"small",variant:"text",sx:{mt:1,color:"inherit"},onClick:()=>{var a;const t={userAgent:navigator.userAgent,url:window.location.href,timestamp:new Date().toISOString(),cookiesEnabled:navigator.cookieEnabled,localStorageAvailable:typeof Storage!="undefined",error:p||f};(a=navigator.clipboard)==null||a.writeText(JSON.stringify(t,null,2)),alert("Debug info copied to clipboard. Please share this with support.")},children:"Copy Debug Info"})]}),e.jsx(m,{variant:"contained",type:"submit",fullWidth:!0,className:"jump-in-button",size:"large",disabled:c,startIcon:c?e.jsx(I,{size:20}):e.jsx(le,{}),sx:{mt:2,py:1.25,fontSize:"1.1rem",fontWeight:600,touchAction:"manipulation",cursor:c?"default":"pointer",userSelect:"none","&:focus":{outline:"2px solid",outlineColor:"primary.main",outlineOffset:"2px"}},onClick:async a=>{await d(a)},onPointerDown:()=>{},children:c?"Loading...":B?e.jsx(o,{i18nKey:"import"}):e.jsx(o,{i18nKey:"anonymousLogin"})}),e.jsx(H,{sx:{my:3},children:e.jsx(y,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.9rem"},children:e.jsx(o,{i18nKey:"or"})})}),e.jsxs(i,{className:"auth-button-container",children:[e.jsx(m,{variant:"outlined",startIcon:e.jsx(ce,{}),onClick:_,size:"medium",children:e.jsx(o,{i18nKey:"signIn"})}),e.jsx(m,{variant:"outlined",onClick:P,size:"medium",children:e.jsx(o,{i18nKey:"createAccount"})})]})]})]})})}),e.jsx(b,{size:{md:12,lg:8},children:e.jsx(A,{className:"unauthenticated-card",children:e.jsx(D,{children:e.jsx(ae,{})})})})]})}),e.jsx(i,{className:"footer-language-container",children:e.jsxs(i,{className:"footer-language-selector",children:[e.jsx(ue,{sx:{fontSize:"1rem",color:"rgba(255, 255, 255, 0.5)"}}),e.jsx(X,{size:"small",sx:{minWidth:120},children:e.jsx(Z,{value:W,disabled:S,onChange:q,size:"small",variant:"standard",sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem","& .MuiSelect-icon":{color:"rgba(255, 255, 255, 0.5)"},"&:before":{borderBottomColor:"rgba(255, 255, 255, 0.3)"},"&:hover:before":{borderBottomColor:"rgba(255, 255, 255, 0.5)"}},endAdornment:S&&e.jsx(I,{size:14}),children:G})})]})})]}),e.jsx(ee,{open:z,close:()=>h(!1),initialView:T})]})}export{Ce as default};
//# sourceMappingURL=index.tsx-Bi7nBfs_.js.map
