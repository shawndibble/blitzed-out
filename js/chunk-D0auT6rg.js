const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/userList.tsx-c3T7P66-.js","js/chunk-DzAIPjqH.js","js/chunk-BfMAFFX0.js","js/chunk-BmjRqaQ3.js","assets/index-BHv73vX6.js","js/chunk-D4nXmTaT.js","js/chunk-BjQhdd70.js","js/index.tsx-B7w-m6EZ.js","js/chunk-DSABIIYE.js","js/chunk-DzzEA-5n.js","js/chunk-ePhi2-8W.js","js/schedule.tsx-BNzepckN.js","js/chunk-SagsL35F.js","js/theme.tsx-kKI91Odf.js","js/chunk-ETJJgZWW.js","js/index.tsx-CJNQcl73.js","js/index.tsx-BF7EDTG8.js","js/chunk-7Ai2ciR0.js","js/chunk-6vR-ehJY.js","js/chunk-Co28FzxB.js","js/chunk-CfAFWqg8.js","js/chunk-QSmzoUvq.js","js/chunk-B9Y_S9Mk.js","js/chunk-DXt_N4OB.js","js/chunk-Rgv-yxJU.js","js/chunk-Byb5sHui.js","js/chunk--sFRCnns.js","js/chunk-BS7AWNIJ.js","js/chunk-CcNW6xaX.js","js/chunk-CMNMDYKn.js","js/index.tsx-CBR0V8Ko.js","js/SentryTest.tsx-D6XZY15X.js"])))=>i.map(i=>d[i]);
import{A as l,_ as d}from"../assets/index-BHv73vX6.js";import{a7 as E,ad as j,r as i,j as a,ae as v,af as b,ag as T,ah as p,ai as C,aj as R}from"./chunk-DzAIPjqH.js";import{p as D,g as S,A as P}from"./chunk-BmjRqaQ3.js";import{a as A}from"./chunk-BfMAFFX0.js";(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"b0aec1b7336667c3da787da9b7139ec106644213"}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="34cd53c5-321c-4fdb-96a7-4ed84ea1584e",e._sentryDebugIdIdentifier="sentry-dbid-34cd53c5-321c-4fdb-96a7-4ed84ea1584e")})()}catch{}function h(e){if(!e)return null;try{if(typeof e.toDate=="function")return e.toDate();if(typeof e=="string"){const s=new Date(e);if(isNaN(s.getTime()))throw new Error("Invalid serialized timestamp format");return s}else if(typeof e=="number"){const s=e<3250368e4?e*1e3:e,r=new Date(s);if(isNaN(r.getTime()))throw new Error("Invalid numeric timestamp format");return r}else if(typeof e=="object"&&e.seconds!==void 0){const s=e,r=new Date(s.seconds*1e3+(s.nanoseconds||0)/1e6);if(isNaN(r.getTime()))throw new Error("Invalid Firestore timestamp object format");return r}else{if(e instanceof Date)return e;throw console.warn("Unsupported timestamp format:",typeof e,e),new Error(`Unsupported timestamp format: ${typeof e}`)}}catch(s){return console.warn("Failed to parse timestamp:",s),null}}function m(e){return e.sort((s,r)=>{const t=h(s.timestamp),n=h(r.timestamp);return!t||!n?0:t.getTime()-n.getTime()})}function f(e){return JSON.parse(JSON.stringify(e)).reverse()}function L(e,s){return f(e).find(r=>r.type===s)}function I(e,s,r="ASC"){let t=f(e);return r==="DESC"&&(t=t.reverse()),t.filter(n=>n.type===s)}function K(e,s){return f(e).find(s)}function O(e){return f(e)[0]}const N={messages:[],loading:!0,error:null,room:null,paginationCursor:null},U=A()(D((e,s)=>({...N,loadMessages:r=>{const n=m(r);e({messages:n,loading:!1,error:null})},addMessage:r=>{const{messages:t}=s();if(t.find(c=>c.id===r.id))return;const o=[...t,r],u=m(o);e({messages:u})},updateMessage:(r,t)=>{const{messages:n}=s();let o=!1;const u=n.map(c=>{if(c.id===r){const g={...c,...t};if(Object.keys(t).some(M=>c[M]!==t[M]))return o=!0,g}return c});if(o){const c=m(u);e({messages:c})}},clearMessages:()=>{e({messages:[],loading:!1,error:null})},setLoading:r=>{const{loading:t}=s();t!==r&&e({loading:r})},setError:r=>{const{error:t}=s();t!==r&&e({error:r})},setRoom:r=>{const{room:t}=s();t!==r&&e({room:r})},setPaginationCursor:r=>{const{paginationCursor:t}=s();t!==r&&e({paginationCursor:r})},getMessagesByType:r=>{const{messages:t}=s(),n=[];for(let o=0;o<t.length;o++)t[o].type===r&&n.push(t[o]);return n},getLatestMessage:()=>{const{messages:r}=s();return O(r)},getLatestMessageByType:r=>{const{messages:t}=s();return L(t,r)},getFilteredMessages:r=>{const{messages:t}=s(),n=[];for(let o=0;o<t.length;o++)r(t[o])&&n.push(t[o]);return n},getOrderedMessagesByType:(r,t="ASC")=>{const{messages:n}=s();return I(n,r,t)}}),{name:"messages-storage",partialize:e=>({messages:e.messages,room:e.room,paginationCursor:e.paginationCursor}),onRehydrateStorage:()=>e=>{if(e){const s=new Date;s.setHours(s.getHours()-24);const r=e.messages.filter(t=>{try{const n=h(t.timestamp);if(!n)throw console.warn(`Failed to parse timestamp for message ${t.id}:`,typeof t.timestamp,t.timestamp),new Error(`Failed to parse timestamp for message ${t.id}`);return n>s}catch(n){return console.warn(`Failed to parse message timestamp for message ID ${t.id}:`,n.message),!0}});r.length!==e.messages.length&&e.loadMessages(r)}}})),z=E.createContext(void 0);function x(e){const{id:s}=j(),{messages:r,loading:t,loadMessages:n,setLoading:o,setRoom:u,clearMessages:c}=U();i.useEffect(()=>{if(o(!0),u(s||null),!s){c();return}return S(s,y=>{n(y)})},[s,n,o,u,c]);const g={messages:r,isLoading:t};return a.jsx(z.Provider,{value:g,...e})}const _=i.lazy(()=>d(()=>import("./userList.tsx-c3T7P66-.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>({default:e.UserListProvider}))),B=i.lazy(()=>d(()=>import("./index.tsx-B7w-m6EZ.js"),__vite__mapDeps([7,1,2,8,3,4,5,9,10,11,12,13,14,6,15]))),F=i.lazy(()=>d(()=>import("./index.tsx-BF7EDTG8.js"),__vite__mapDeps([16,1,2,17,18,14,3,4,5,6,19,20,21,22,9]))),k=i.lazy(()=>d(()=>import("./chunk-DXt_N4OB.js").then(e=>e.i),__vite__mapDeps([23,4,1,2,24,9,10,11,3,5,12,13,14,6,21,25,22,26,27,28,29,18,19,30,17,20]))),V=i.lazy(()=>d(()=>import("./SentryTest.tsx-D6XZY15X.js"),__vite__mapDeps([31,1,2,4])));function w({children:e}){const{id:s}=j(),r=R(),t=b();return i.useEffect(()=>{if(s&&s!==s.toUpperCase()){const n=t.pathname.replace(s,s.toUpperCase());r(n+t.search+t.hash,{replace:!0})}},[s,r,t]),a.jsx(a.Fragment,{children:e})}function $(){const e=i.useContext(P),s=b(),t=new URLSearchParams(s.search).get("sentry-test")==="true";if(i.useEffect(()=>(e&&(window.authContext=e),()=>{window.authContext=null}),[e]),!e||e.initializing)return a.jsx(l,{});if(t)return a.jsx(i.Suspense,{fallback:a.jsx(l,{}),children:a.jsx(V,{})});const n=e.user?a.jsx(k,{}):a.jsx(B,{});return a.jsxs(T,{children:[a.jsx(p,{path:"/",element:a.jsx(C,{replace:!0,to:"/PUBLIC"})}),a.jsx(p,{path:"/:id/cast",element:a.jsx(w,{children:a.jsx(i.Suspense,{fallback:a.jsx(l,{}),children:a.jsx(_,{children:a.jsx(x,{children:a.jsx(F,{})})})})})}),a.jsx(p,{path:"/:id",element:a.jsx(w,{children:a.jsx(i.Suspense,{fallback:a.jsx(l,{}),children:a.jsx(_,{children:a.jsx(x,{children:n})})})})})]})}function H(){return a.jsx(v,{children:a.jsx($,{})})}const Q=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));export{z as M,K as a,Q as i,L as l,I as o,h as p};
//# sourceMappingURL=chunk-D0auT6rg.js.map
