import{u as P,b as c,j as e,ar as w,aP as S,S as v,a3 as p,ay as C,aw as m,t as A,ae as L,az as E,a8 as T,aA as _,aa as F,a4 as K}from"./chunk-CVSdvP5Z.js";import{j as I,f as G,h as R}from"./chunk-B-cyqPC2.js";import{G as q}from"./chunk-_SwOSjSw.js";import{A as N}from"./chunk-E8HqAuJ1.js";import{u as z,C as B}from"./chunk-BeueL4UK.js";(function(){var s=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{};s.SENTRY_RELEASE={id:"874067a760cfa9079dd7f585e4ceff298b0e879f"}})();try{(function(){var s=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{},o=new s.Error().stack;o&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[o]="2beb0d9b-926f-4d2d-9b7d-0ab30ded09f9",s._sentryDebugIdIdentifier="sentry-dbid-2beb0d9b-926f-4d2d-9b7d-0ab30ded09f9")})()}catch(s){}var $=(s,o,n)=>new Promise((a,r)=>{var u=t=>{try{i(n.next(t))}catch(d){r(d)}},l=t=>{try{i(n.throw(t))}catch(d){r(d)}},i=t=>t.done?a(t.value):Promise.resolve(t.value).then(u,l);i((n=n.apply(s,o)).next())});function V({onSuccess:s,onSwitchToRegister:o,onSwitchToForgotPassword:n,isLinking:a=!1}){const{t:r}=P(),[u,l]=c.useState(""),[i,t]=c.useState(""),[d,f]=c.useState(""),[h,x]=c.useState(!1),b=y=>$(null,null,function*(){y.preventDefault(),f(""),x(!0);try{yield I(u,i),s&&s()}catch(j){console.error("Login error:",j),f(j.message||"Failed to sign in")}finally{x(!1)}});return e.jsxs(w,{component:"form",onSubmit:b,sx:{mt:1},children:[d&&e.jsx(S,{severity:"error",sx:{mb:2},children:d}),e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:r("email"),name:"email",autoComplete:"email",autoFocus:!0,value:u,onChange:y=>l(y.target.value)}),e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:r("password"),type:"password",id:"password",autoComplete:"current-password",value:i,onChange:y=>t(y.target.value)}),e.jsx(p,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:h,children:h?e.jsx(C,{size:24}):a?e.jsx(m,{i18nKey:"linkAccount",children:"Link Account"}):e.jsx(m,{i18nKey:"signIn"})}),e.jsxs(A,{align:"center",children:[e.jsx(p,{onClick:o,variant:"text",children:e.jsx(m,{i18nKey:"needAccount"})})," | ",e.jsx(p,{onClick:n,variant:"text",children:e.jsx(m,{i18nKey:"forgotPassword"})})]})]})}var H=(s,o,n)=>new Promise((a,r)=>{var u=t=>{try{i(n.next(t))}catch(d){r(d)}},l=t=>{try{i(n.throw(t))}catch(d){r(d)}},i=t=>t.done?a(t.value):Promise.resolve(t.value).then(u,l);i((n=n.apply(s,o)).next())});function M({onSuccess:s,onSwitchToLogin:o,isAnonymous:n=!1}){const{t:a}=P(),[r,u]=c.useState(""),[l,i]=c.useState(""),[t,d]=c.useState(""),[f,h]=c.useState(""),[x,b]=c.useState(""),[y,j]=c.useState(!1),W=g=>H(null,null,function*(){if(g.preventDefault(),b(""),t!==f){b(a("passwordsDoNotMatch")||"Passwords do not match");return}j(!0);try{yield G(l==null?void 0:l.trim(),t,r==null?void 0:r.trim()),s&&s()}catch(k){console.error("Registration error:",k),b(k.message||"Failed to create account")}finally{j(!1)}});return e.jsxs(w,{component:"form",onSubmit:W,sx:{mt:1},children:[x&&e.jsx(S,{severity:"error",sx:{mb:2},children:x}),e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,id:"displayName",label:a("displayName"),name:"displayName",autoComplete:"name",autoFocus:!0,value:r,onChange:g=>u(g.target.value)}),e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:a("email"),name:"email",autoComplete:"email",value:l,onChange:g=>i(g.target.value)}),e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:a("password"),type:"password",id:"password",autoComplete:"new-password",value:t,onChange:g=>d(g.target.value)}),e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:a("confirmPassword"),type:"password",id:"confirmPassword",autoComplete:"new-password",value:f,onChange:g=>h(g.target.value)}),e.jsx(p,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:y,children:y?e.jsx(C,{size:24}):n?e.jsx(m,{i18nKey:"linkAccount"}):e.jsx(m,{i18nKey:"createAccount"})}),e.jsx(A,{align:"center",children:e.jsx(p,{onClick:o,variant:"text",children:e.jsx(m,{i18nKey:"alreadyHaveAccount"})})})]})}var O=(s,o,n)=>new Promise((a,r)=>{var u=t=>{try{i(n.next(t))}catch(d){r(d)}},l=t=>{try{i(n.throw(t))}catch(d){r(d)}},i=t=>t.done?a(t.value):Promise.resolve(t.value).then(u,l);i((n=n.apply(s,o)).next())});function Y({onSuccess:s,isLinking:o=!1}){const[n,a]=c.useState(""),[r,u]=c.useState(!1),l=()=>O(null,null,function*(){a(""),u(!0);try{yield R(),s&&s()}catch(i){a(i.message||"Failed to sign in with Google")}finally{u(!1)}});return e.jsxs(w,{sx:{mt:2,mb:2},children:[n&&e.jsx(S,{severity:"error",sx:{mb:2},children:n}),e.jsx(L,{sx:{mb:2},children:e.jsx(A,{variant:"body2",color:"text.secondary",children:e.jsx(m,{i18nKey:"or",children:"OR"})})}),e.jsx(p,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(q,{}),onClick:l,disabled:r,sx:{mb:1},"aria-busy":r,"aria-live":"polite",children:r?e.jsx(C,{size:24}):o?E("linkWithGoogle","Link with Google"):E("signInWithGoogle","Sign in with Google")})]})}function D(){const s=c.useContext(N);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}function J({children:s,open:o,close:n=null,isMobile:a=null,title:r=null,isLoading:u=!1,maxWidth:l="md",fullWidth:i=!1,ariaLabelledby:t,ariaDescribedby:d,actions:f}){const h=z(),x=a!==null?a:h;return u?null:e.jsxs(T,{fullScreen:x,open:o,maxWidth:l,fullWidth:i,"aria-labelledby":t,"aria-describedby":d,children:[e.jsxs(_,{children:[r,typeof n=="function"&&e.jsx(B,{close:n})]}),e.jsx(F,{children:s}),f&&e.jsx(K,{sx:{p:2,gap:1},children:f})]})}var Q=(s,o,n)=>new Promise((a,r)=>{var u=t=>{try{i(n.next(t))}catch(d){r(d)}},l=t=>{try{i(n.throw(t))}catch(d){r(d)}},i=t=>t.done?a(t.value):Promise.resolve(t.value).then(u,l);i((n=n.apply(s,o)).next())});function U({onToggleForm:s}){const[o,n]=c.useState(""),[a,r]=c.useState(""),[u,l]=c.useState(!1),[i,t]=c.useState(!1),{forgotPassword:d}=D(),f=h=>Q(null,null,function*(){h.preventDefault(),r(""),l(!1),t(!0);try{yield d(o),l(!0)}catch(x){r(x.message||"Failed to send reset email")}finally{t(!1)}});return e.jsxs(w,{component:"form",onSubmit:f,sx:{mt:1},children:[a&&e.jsx(S,{severity:"error",sx:{mb:2},children:a}),u&&e.jsx(S,{severity:"success",sx:{mb:2},children:e.jsx(m,{i18nKey:"resetEmailSent"})}),e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:e.jsx(m,{i18nKey:"email"}),name:"email",autoComplete:"email",autoFocus:!0,value:o,onChange:h=>n(h.target.value)}),e.jsx(p,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:i,children:i?e.jsx(C,{size:24}):e.jsx(m,{i18nKey:"sendResetLink"})}),e.jsx(w,{sx:{textAlign:"center"},children:e.jsx(p,{variant:"text",onClick:()=>s("login"),children:e.jsx(m,{i18nKey:"backToLogin"})})})]})}function ne({open:s,close:o,initialView:n="login"}){const[a,r]=c.useState(n),{isAnonymous:u}=D(),{t:l}=P(),i=()=>{switch(a){case"login":return l(u?"linkAccount":"signIn");case"register":return l("createAccount");case"reset":return l("resetPassword");default:return l("Authentication")}};return e.jsxs(J,{title:i(),open:s,close:o,children:[a==="login"&&e.jsxs(e.Fragment,{children:[e.jsx(V,{onSwitchToRegister:()=>r("register"),onSwitchToForgotPassword:()=>r("reset"),onSuccess:o,isLinking:u}),e.jsx(Y,{onSuccess:o,isLinking:u})]}),a==="reset"&&e.jsx(U,{onToggleForm:r}),a==="register"&&e.jsx(M,{onSwitchToLogin:()=>r("login"),onSuccess:o,isAnonymous:u})]})}export{ne as A,J as D,D as u};
//# sourceMappingURL=chunk-D8j2avet.js.map
