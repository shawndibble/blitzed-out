import{h as d,s as a}from"./chunk-D30XSvS4.js";import{y as s,g as y}from"./chunk-p4pxY8Oa.js";import{M as p,b as o}from"../assets/index-CkzIFlXA.js";import"./chunk-yoN304NG.js";import"./chunk-4cS4U0wq.js";import"./chunk-BiwsK_3v.js";import"./chunk-CXoKBXvA.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{};e.SENTRY_RELEASE={id:"95c5b929dfa5d4a23daf998c8c04f95694a33293"}}catch(t){}})();try{(function(){var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5884b8cf-dfa6-47b5-a730-38aa453ae5a9",e._sentryDebugIdIdentifier="sentry-dbid-5884b8cf-dfa6-47b5-a730-38aa453ae5a9")})()}catch(e){}const l="blitzed-out-sync-recovery-status",i=p,g=50;let r=null;async function C(){return r?await r:(r=(async()=>{try{const e=v();return e!=null&&e.recoveryPerformed&&(e==null?void 0:e.version)===i?!1:await b()?(await d(),n(!0),!0):(n(!1),!1)}catch(e){return s.error("[Sync Recovery] Error during recovery:",e),!1}finally{r=null}})(),await r)}async function b(){try{const t=(await y({isDefault:!0})).length>0,u=(await o({})).length,c=(await o({isCustom:0,isEnabled:1})).length>0,f={noDefaultGroups:!t,fewTotalActions:u<g,noEnabledDefaults:!c};return Object.values(f).filter(Boolean).length>=2}catch(e){return s.error("[Sync Recovery] Error detecting corruption:",e),!1}}function v(){return a.getJSON(l)}function n(e){const t={version:i,recoveryPerformed:!0,detectedCorruption:e,recoveryTimestamp:Date.now()};a.setJSON(l,t)}export{C as runSyncRecovery};
//# sourceMappingURL=syncRecoveryService.ts-BcV9AB-J.js.map
