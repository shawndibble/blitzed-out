{"version":3,"mappings":"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","names":["AppError","message","code","cause","AuthError","isAppError","error","isError","getErrorMessage","getErrorCode","createStandardError","defaultMessage","FIREBASE_ERROR_MESSAGES","getFirebaseErrorMessage","__viteBrowserExternal","ERROR","WINDOW","root","WEB_WORKER","NODE_JS","global","COMMON_JS","module","ARRAY_BUFFER","HEX_CHARS","EXTRA","SHIFT","K","OUTPUT_TYPES","blocks","obj","createOutputMethod","outputType","is224","Sha256","createMethod","method","nodeWrap","i","type","crypto","require$$0","Buffer","require$$1","algorithm","bufferFrom","nodeMethod","createHmacOutputMethod","key","HmacSha256","createHmacMethod","sharedMemory","notString","index","length","a","b","c","d","e","f","g","h","j","s0","s1","maj","t1","t2","ch","ab","da","cd","bc","h0","h1","h2","h3","h4","h5","h6","h7","hex","arr","buffer","dataView","bytes","oKeyPad","iKeyPad","innerHash","exports","firebaseConfig","missingVars","_","value","app","initializeApp","db","getFirestore","loginAnonymously","displayName","auth","getAuth","signInAnonymously","updateProfile","registerWithEmail","email","password","userCredential","createUserWithEmailAndPassword","loginWithEmail","signInWithEmailAndPassword","loginWithGoogle","provider","GoogleAuthProvider","signInWithPopup","resetPassword","sendPasswordResetEmail","convertAnonymousAccount","user","credential","EmailAuthProvider","linkWithCredential","logout","signOut","wipeAllAppData","appPrefixes","prefix","__vitePreload","db2","cookiesToClear","currentHostname","domains","parts","paths","cookieName","domain","path","getUserList","roomId","callback","existingData","options","enableCache","enableDebounce","roomUpper","queryKey","getCacheKey","startTime","cached","queryCache","isValidCache","updateQueryMetrics","dataString","existingString","unsubscribe","executeQuery","networkError","acquireConnection","database","getDatabase","usersRef","ref","onValue","snap","queryEndTime","latency","allUsers","roomUsers","uid","userData","data","evictOldCacheEntries","priority","getCachePriority","releaseConnection","debounceQuery","timeout","queryDebounceMap","updateDisplayName","submitCustomAction","grouping","customAction","addDoc","collection","getBoardByContent","checksum","q","query","where","snapshot","getDocs","getOrCreateBoard","title","gameBoard","settings","sha256","board","updateDoc","storeBoard","getBoard","id","docRef","doc","docSnap","getDoc","lastMessage","CACHE_TTL","PRIORITY_CACHE_TTL","DEBOUNCE_DELAY","PRIORITY_DEBOUNCE_DELAY","DEFAULT_LIMIT","MAX_CACHE_SIZE","connectionPool","queryMetrics","fromCache","existing","sorted","p95Index","getCacheTTL","getDebounceDelay","entries","priorityOrder","priorityDiff","accessDiff","entriesToRemove","resolve","nextCallback","additionalParams","cache","ttl","queryFn","args","debounceDelay","existingTimeout","sendMessage","room","text","rest","allowedTypes","newMessage","now","roomName","serverTimestamp","deleteMessage","messageId","deleteDoc","getMessages","unsubscribeAuth","unsubscribeQuery","executeGetMessages","limitCount","startAfterDoc","timeWindow","baseQuery","orderBy","limit","startAfter","onSnapshot","querySnapshot","messages","document","lastVisible","deferredUnsubscribe","getSchedule","currentTime","schedule","result","addSchedule","dateTime","url","Timestamp","createSyncMiddleware","tables","tableSet","syncDebounce","tableName","_a","windowWithAuth","downlevelDatabase","downlevelTable","req","BlitzedOutDatabase","Dexie","__publicField","trans","groups","seen","group","customGroups","_primKey","_transaction","nanoid","i18next","modifications","_obj","createFilteredQuery","filters","possibleFilters","getCustomGroups","getCustomGroupByName","name","locale","gameMode","addCustomGroup","groupWithTimestamps","updateCustomGroup","updates","deleteCustomGroup","deleteAllCustomGroups","importCustomGroups","groupsWithAllFields","getGroupIntensities","groupName","isGroupNameUnique","excludeId","existingGroup","removeDuplicateGroups","allGroups","groupsByName","removedCount","aTime","bTime","getAllAvailableGroups","self","createJSONStorage","getStorage","storage","parse","str2","str","newValue","toThenable","fn","input","onFulfilled","_onRejected","_onFulfilled","onRejected","persistImpl","config","baseOptions","set","get","api","state","persistedState","currentState","hasHydrated","hydrationListeners","finishHydrationListeners","setItem","savedSetState","replace","configResult","stateFromStorage","hydrate","_b","cb","_a2","postRehydrationCallback","deserializedStorageValue","migration","migrationResult","migrated","migratedState","newOptions","persist","defaultSettings","useSettingsStore","create","partial","actionEntry","newSelectedActions","selectedActions","entry","acc","useSettings","updateSettings","useGameSettings","LANGUAGE_PRELOAD_TIMEOUT","i18nOptions","lazyLoadTranslations","language","namespace","__variableDynamicImportRuntimeHelper","i18n","initReactI18next","LanguageDetector","resourcesToBackend","currentLang","commonLangs","lang","convertDexieGroupsToActions","actions","actionObj","intensity","importActions","isDexieDataComplete","expectedGroups","dexieGroups","expectedCount","expectedGroupNames","dexieGroupNames","HEALTH_CHECK_KEY","MAX_RETRY_ATTEMPTS","MIN_VALIDATION_INTERVAL","getHealthState","stored","updateHealthState","update","checkMigrationHealth","targetLocale","storedState","report","dataComplete","migrationStatus","checkMigrationStatusFromStorage","newFailureCount","newConsecutiveFailures","mainStatus","parsed","bgStatus","recoverFromFailedMigration","keysToRemove","hasErrors","MigrationContext","createContext","useMigration","context","useContext","MigrationProvider","children","useTranslation","isMigrationInProgress","setIsMigrationInProgress","useState","currentLanguageMigrated","setCurrentLanguageMigrated","isMigrationCompleted","setIsMigrationCompleted","setError","isHealthy","setIsHealthy","recoveryAttempted","setRecoveryAttempted","languageChangeTimeout","setLanguageChangeTimeout","migrationAttemptedRef","useRef","loadMigrationService","useCallback","useEffect","checkMigrationStatus","migrationService","currentLocale","isCurrentMigrated","isAllMigrated","healthReport","forceRecovery","triggerMigration","handleLanguageChange","newLanguage","err","ensureLanguageMigrated","success","languageChangedHandler","lng","isCompleted","migrationKey","jsx","t","this","n","r","s","u","o","l","$","y","M","m","v","D","p","S","w","O","k","CACHE_TIMEOUT","SCHEDULE_BATCH_DELAY","useScheduleStore","newUpdateCount","item","prevState","newTimeout","items","newSchedule","loading","totalRequests","newHitRate","dayjs","upcoming","roomSchedule","ScheduleContext","React","ScheduleProvider","props","loadSchedule","flushPendingScheduleUpdates","unsubscribeRef","handleScheduleUpdate","memoizedAddToSchedule","cleanup","useMemo","COLOR_CONSTANTS","baseTheme","createComponents","_mode","theme","ownerState","transparent","fullWidth","isLight","lightThemeOptions","darkThemeOptions","createThemeWithComponents","themeOptions","createTheme","lightTheme","responsiveFontSizes","darkTheme","getThemeByMode","mode","ThemeContext","ThemeProvider","defaultMode","prefersDarkMode","useMediaQuery","themeMode","resolvedThemeMode","setThemeMode","toggleTheme","body","contextValue","useTheme","Y","L","localizedFormatPlugin","weekOfYearPlugin","isBetweenPlugin","advancedFormatPlugin","formatTokenMap","defaultFormats","MISSING_UTC_PLUGIN","MISSING_TIMEZONE_PLUGIN","AdapterDayjs","_locale","formats","expectedLocale","comparing","comparisonTemplate","comparingInValueTimezone","timezone","date","keepLocalTime","locales","localeObject","fixedValue","zone","format","localeFormats","formatBis","B","formatKey","formatString","numberToFormat","start","end","amount","year","month","hours","minutes","seconds","milliseconds","count","current","nestedWeeks","weekNumber","startDate","endDate","years","_extends","customParseFormatPlugin","MuiProviders","jsxs","MuiThemeProvider","CssBaseline","LocalizationProvider","AllProviders"],"ignoreList":[2,7,14,19,20,21,22,23,24],"sources":["../../src/types/errors.ts","../../__vite-browser-external","../../node_modules/js-sha256/src/sha256.js","../../src/services/firebase.ts","../../src/services/syncMiddleware.ts","../../src/stores/store.ts","../../src/stores/customGroups.ts","../../node_modules/zustand/esm/middleware.mjs","../../src/stores/settingsStore.ts","../../src/i18n.ts","../../src/services/dexieActionImport.ts","../../src/services/dataCompletenessChecker.ts","../../src/services/migrationHealthChecker.ts","../../src/context/migration.tsx","../../node_modules/dayjs/dayjs.min.js","../../src/stores/scheduleStore.ts","../../src/context/schedule.tsx","../../src/theme.ts","../../src/context/theme.tsx","../../node_modules/dayjs/plugin/weekOfYear.js","../../node_modules/dayjs/plugin/customParseFormat.js","../../node_modules/dayjs/plugin/localizedFormat.js","../../node_modules/dayjs/plugin/isBetween.js","../../node_modules/dayjs/plugin/advancedFormat.js","../../node_modules/@mui/x-date-pickers/esm/AdapterDayjs/AdapterDayjs.js","../../src/components/MuiProviders/index.tsx","../../src/components/AllProviders/index.tsx"],"sourcesContent":["/**\n * Standardized error types for the application\n */\n\nexport class AppError extends Error {\n  constructor(\n    message: string,\n    public code?: string,\n    public cause?: Error\n  ) {\n    super(message);\n    this.name = 'AppError';\n  }\n}\n\nexport class AuthError extends AppError {\n  constructor(message: string, code?: string, cause?: Error) {\n    super(message, code, cause);\n    this.name = 'AuthError';\n  }\n}\n\nexport class NetworkError extends AppError {\n  constructor(message: string, code?: string, cause?: Error) {\n    super(message, code, cause);\n    this.name = 'NetworkError';\n  }\n}\n\nexport class ValidationError extends AppError {\n  constructor(\n    message: string,\n    public field?: string,\n    cause?: Error\n  ) {\n    super(message, 'VALIDATION_ERROR', cause);\n    this.name = 'ValidationError';\n  }\n}\n\nexport class SyncError extends AppError {\n  constructor(message: string, code?: string, cause?: Error) {\n    super(message, code, cause);\n    this.name = 'SyncError';\n  }\n}\n\n/**\n * Type guard to check if an error is an instance of AppError\n */\nexport function isAppError(error: unknown): error is AppError {\n  return error instanceof AppError;\n}\n\n/**\n * Type guard to check if an error is a standard Error\n */\nexport function isError(error: unknown): error is Error {\n  return error instanceof Error;\n}\n\n/**\n * Safely extracts error message from unknown error type\n */\nexport function getErrorMessage(error: unknown): string {\n  if (isError(error)) {\n    return error.message;\n  }\n  if (typeof error === 'string') {\n    return error;\n  }\n  return 'An unknown error occurred';\n}\n\n/**\n * Safely extracts error code from unknown error type\n */\nexport function getErrorCode(error: unknown): string | undefined {\n  if (isAppError(error)) {\n    return error.code;\n  }\n  if (isError(error) && 'code' in error) {\n    return (error as Error & { code?: string }).code;\n  }\n  return undefined;\n}\n\n/**\n * Creates a standardized error from an unknown error type\n */\nexport function createStandardError(\n  error: unknown,\n  defaultMessage = 'An unexpected error occurred'\n): AppError {\n  if (isAppError(error)) {\n    return error;\n  }\n\n  if (isError(error)) {\n    return new AppError(error.message || defaultMessage, undefined, error);\n  }\n\n  if (typeof error === 'string') {\n    return new AppError(error);\n  }\n\n  return new AppError(defaultMessage);\n}\n\n/**\n * Firebase error code mappings to user-friendly messages\n */\nexport const FIREBASE_ERROR_MESSAGES: Record<string, string> = {\n  'auth/user-not-found': 'No account found with this email address',\n  'auth/wrong-password': 'Incorrect password',\n  'auth/email-already-in-use': 'An account with this email already exists',\n  'auth/weak-password': 'Password is too weak',\n  'auth/invalid-email': 'Invalid email address',\n  'auth/too-many-requests': 'Too many login attempts. Please try again later',\n  'auth/network-request-failed': 'Network error. Please check your connection',\n  'permission-denied': 'You do not have permission to perform this action',\n  unavailable: 'Service is temporarily unavailable. Please try again',\n};\n\n/**\n * Converts Firebase error to user-friendly message\n */\nexport function getFirebaseErrorMessage(error: unknown): string {\n  const code = getErrorCode(error);\n  if (code && FIREBASE_ERROR_MESSAGES[code]) {\n    return FIREBASE_ERROR_MESSAGES[code];\n  }\n  return getErrorMessage(error);\n}\n","export default {}","/**\n * [js-sha256]{@link https://github.com/emn178/js-sha256}\n *\n * @version 0.11.1\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2025\n * @license MIT\n */\n/*jslint bitwise: true */\n(function () {\n  'use strict';\n\n  var ERROR = 'input is invalid type';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_SHA256_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_SHA256_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node && process.type != 'renderer';\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_SHA256_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_SHA256_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [-2147483648, 8388608, 32768, 128];\n  var SHIFT = [24, 16, 8, 0];\n  var K = [\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n  ];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'arrayBuffer'];\n\n  var blocks = [];\n\n  if (root.JS_SHA256_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  var createOutputMethod = function (outputType, is224) {\n    return function (message) {\n      return new Sha256(is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createMethod = function (is224) {\n    var method = createOutputMethod('hex', is224);\n    if (NODE_JS) {\n      method = nodeWrap(method, is224);\n    }\n    method.create = function () {\n      return new Sha256(is224);\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method, is224) {\n    var crypto = require('crypto')\n    var Buffer = require('buffer').Buffer;\n    var algorithm = is224 ? 'sha224' : 'sha256';\n    var bufferFrom;\n    if (Buffer.from && !root.JS_SHA256_NO_BUFFER_FROM) {\n      bufferFrom = Buffer.from;\n    } else {\n      bufferFrom = function (message) {\n        return new Buffer(message);\n      };\n    }\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash(algorithm).update(message, 'utf8').digest('hex');\n      } else {\n        if (message === null || message === undefined) {\n          throw new Error(ERROR);\n        } else if (message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        }\n      }\n      if (Array.isArray(message) || ArrayBuffer.isView(message) ||\n        message.constructor === Buffer) {\n        return crypto.createHash(algorithm).update(bufferFrom(message)).digest('hex');\n      } else {\n        return method(message);\n      }\n    };\n    return nodeMethod;\n  };\n\n  var createHmacOutputMethod = function (outputType, is224) {\n    return function (key, message) {\n      return new HmacSha256(key, is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createHmacMethod = function (is224) {\n    var method = createHmacOutputMethod('hex', is224);\n    method.create = function (key) {\n      return new HmacSha256(key, is224);\n    };\n    method.update = function (key, message) {\n      return method.create(key).update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createHmacOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  function Sha256(is224, sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n    } else {\n      this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    if (is224) {\n      this.h0 = 0xc1059ed8;\n      this.h1 = 0x367cd507;\n      this.h2 = 0x3070dd17;\n      this.h3 = 0xf70e5939;\n      this.h4 = 0xffc00b31;\n      this.h5 = 0x68581511;\n      this.h6 = 0x64f98fa7;\n      this.h7 = 0xbefa4fa4;\n    } else { // 256\n      this.h0 = 0x6a09e667;\n      this.h1 = 0xbb67ae85;\n      this.h2 = 0x3c6ef372;\n      this.h3 = 0xa54ff53a;\n      this.h4 = 0x510e527f;\n      this.h5 = 0x9b05688c;\n      this.h6 = 0x1f83d9ab;\n      this.h7 = 0x5be0cd19;\n    }\n\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n    this.is224 = is224;\n  }\n\n  Sha256.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n      notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = this.block;\n        this.block = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n          blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n          blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n          blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if (notString) {\n        for (i = this.start; index < length && i < 64; ++index) {\n          blocks[i >>> 2] |= message[index] << SHIFT[i++ & 3];\n        }\n      } else {\n        for (i = this.start; index < length && i < 64; ++index) {\n          code = message.charCodeAt(index);\n          if (code < 0x80) {\n            blocks[i >>> 2] |= code << SHIFT[i++ & 3];\n          } else if (code < 0x800) {\n            blocks[i >>> 2] |= (0xc0 | (code >>> 6)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else if (code < 0xd800 || code >= 0xe000) {\n            blocks[i >>> 2] |= (0xe0 | (code >>> 12)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | ((code >>> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else {\n            code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n            blocks[i >>> 2] |= (0xf0 | (code >>> 18)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | ((code >>> 12) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | ((code >>> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          }\n        }\n      }\n\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.block = blocks[16];\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Sha256.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >>> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = this.block;\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n  };\n\n  Sha256.prototype.hash = function () {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4, f = this.h5, g = this.h6,\n      h = this.h7, blocks = this.blocks, j, s0, s1, maj, t1, t2, ch, ab, da, cd, bc;\n\n    for (j = 16; j < 64; ++j) {\n      // rightrotate\n      t1 = blocks[j - 15];\n      s0 = ((t1 >>> 7) | (t1 << 25)) ^ ((t1 >>> 18) | (t1 << 14)) ^ (t1 >>> 3);\n      t1 = blocks[j - 2];\n      s1 = ((t1 >>> 17) | (t1 << 15)) ^ ((t1 >>> 19) | (t1 << 13)) ^ (t1 >>> 10);\n      blocks[j] = blocks[j - 16] + s0 + blocks[j - 7] + s1 << 0;\n    }\n\n    bc = b & c;\n    for (j = 0; j < 64; j += 4) {\n      if (this.first) {\n        if (this.is224) {\n          ab = 300032;\n          t1 = blocks[0] - 1413257819;\n          h = t1 - 150054599 << 0;\n          d = t1 + 24177077 << 0;\n        } else {\n          ab = 704751109;\n          t1 = blocks[0] - 210244248;\n          h = t1 - 1521486534 << 0;\n          d = t1 + 143694565 << 0;\n        }\n        this.first = false;\n      } else {\n        s0 = ((a >>> 2) | (a << 30)) ^ ((a >>> 13) | (a << 19)) ^ ((a >>> 22) | (a << 10));\n        s1 = ((e >>> 6) | (e << 26)) ^ ((e >>> 11) | (e << 21)) ^ ((e >>> 25) | (e << 7));\n        ab = a & b;\n        maj = ab ^ (a & c) ^ bc;\n        ch = (e & f) ^ (~e & g);\n        t1 = h + s1 + ch + K[j] + blocks[j];\n        t2 = s0 + maj;\n        h = d + t1 << 0;\n        d = t1 + t2 << 0;\n      }\n      s0 = ((d >>> 2) | (d << 30)) ^ ((d >>> 13) | (d << 19)) ^ ((d >>> 22) | (d << 10));\n      s1 = ((h >>> 6) | (h << 26)) ^ ((h >>> 11) | (h << 21)) ^ ((h >>> 25) | (h << 7));\n      da = d & a;\n      maj = da ^ (d & b) ^ ab;\n      ch = (h & e) ^ (~h & f);\n      t1 = g + s1 + ch + K[j + 1] + blocks[j + 1];\n      t2 = s0 + maj;\n      g = c + t1 << 0;\n      c = t1 + t2 << 0;\n      s0 = ((c >>> 2) | (c << 30)) ^ ((c >>> 13) | (c << 19)) ^ ((c >>> 22) | (c << 10));\n      s1 = ((g >>> 6) | (g << 26)) ^ ((g >>> 11) | (g << 21)) ^ ((g >>> 25) | (g << 7));\n      cd = c & d;\n      maj = cd ^ (c & a) ^ da;\n      ch = (g & h) ^ (~g & e);\n      t1 = f + s1 + ch + K[j + 2] + blocks[j + 2];\n      t2 = s0 + maj;\n      f = b + t1 << 0;\n      b = t1 + t2 << 0;\n      s0 = ((b >>> 2) | (b << 30)) ^ ((b >>> 13) | (b << 19)) ^ ((b >>> 22) | (b << 10));\n      s1 = ((f >>> 6) | (f << 26)) ^ ((f >>> 11) | (f << 21)) ^ ((f >>> 25) | (f << 7));\n      bc = b & c;\n      maj = bc ^ (b & d) ^ cd;\n      ch = (f & g) ^ (~f & h);\n      t1 = e + s1 + ch + K[j + 3] + blocks[j + 3];\n      t2 = s0 + maj;\n      e = a + t1 << 0;\n      a = t1 + t2 << 0;\n      this.chromeBugWorkAround = true;\n    }\n\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n    this.h5 = this.h5 + f << 0;\n    this.h6 = this.h6 + g << 0;\n    this.h7 = this.h7 + h << 0;\n  };\n\n  Sha256.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var hex = HEX_CHARS[(h0 >>> 28) & 0x0F] + HEX_CHARS[(h0 >>> 24) & 0x0F] +\n      HEX_CHARS[(h0 >>> 20) & 0x0F] + HEX_CHARS[(h0 >>> 16) & 0x0F] +\n      HEX_CHARS[(h0 >>> 12) & 0x0F] + HEX_CHARS[(h0 >>> 8) & 0x0F] +\n      HEX_CHARS[(h0 >>> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n      HEX_CHARS[(h1 >>> 28) & 0x0F] + HEX_CHARS[(h1 >>> 24) & 0x0F] +\n      HEX_CHARS[(h1 >>> 20) & 0x0F] + HEX_CHARS[(h1 >>> 16) & 0x0F] +\n      HEX_CHARS[(h1 >>> 12) & 0x0F] + HEX_CHARS[(h1 >>> 8) & 0x0F] +\n      HEX_CHARS[(h1 >>> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n      HEX_CHARS[(h2 >>> 28) & 0x0F] + HEX_CHARS[(h2 >>> 24) & 0x0F] +\n      HEX_CHARS[(h2 >>> 20) & 0x0F] + HEX_CHARS[(h2 >>> 16) & 0x0F] +\n      HEX_CHARS[(h2 >>> 12) & 0x0F] + HEX_CHARS[(h2 >>> 8) & 0x0F] +\n      HEX_CHARS[(h2 >>> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n      HEX_CHARS[(h3 >>> 28) & 0x0F] + HEX_CHARS[(h3 >>> 24) & 0x0F] +\n      HEX_CHARS[(h3 >>> 20) & 0x0F] + HEX_CHARS[(h3 >>> 16) & 0x0F] +\n      HEX_CHARS[(h3 >>> 12) & 0x0F] + HEX_CHARS[(h3 >>> 8) & 0x0F] +\n      HEX_CHARS[(h3 >>> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n      HEX_CHARS[(h4 >>> 28) & 0x0F] + HEX_CHARS[(h4 >>> 24) & 0x0F] +\n      HEX_CHARS[(h4 >>> 20) & 0x0F] + HEX_CHARS[(h4 >>> 16) & 0x0F] +\n      HEX_CHARS[(h4 >>> 12) & 0x0F] + HEX_CHARS[(h4 >>> 8) & 0x0F] +\n      HEX_CHARS[(h4 >>> 4) & 0x0F] + HEX_CHARS[h4 & 0x0F] +\n      HEX_CHARS[(h5 >>> 28) & 0x0F] + HEX_CHARS[(h5 >>> 24) & 0x0F] +\n      HEX_CHARS[(h5 >>> 20) & 0x0F] + HEX_CHARS[(h5 >>> 16) & 0x0F] +\n      HEX_CHARS[(h5 >>> 12) & 0x0F] + HEX_CHARS[(h5 >>> 8) & 0x0F] +\n      HEX_CHARS[(h5 >>> 4) & 0x0F] + HEX_CHARS[h5 & 0x0F] +\n      HEX_CHARS[(h6 >>> 28) & 0x0F] + HEX_CHARS[(h6 >>> 24) & 0x0F] +\n      HEX_CHARS[(h6 >>> 20) & 0x0F] + HEX_CHARS[(h6 >>> 16) & 0x0F] +\n      HEX_CHARS[(h6 >>> 12) & 0x0F] + HEX_CHARS[(h6 >>> 8) & 0x0F] +\n      HEX_CHARS[(h6 >>> 4) & 0x0F] + HEX_CHARS[h6 & 0x0F];\n    if (!this.is224) {\n      hex += HEX_CHARS[(h7 >>> 28) & 0x0F] + HEX_CHARS[(h7 >>> 24) & 0x0F] +\n        HEX_CHARS[(h7 >>> 20) & 0x0F] + HEX_CHARS[(h7 >>> 16) & 0x0F] +\n        HEX_CHARS[(h7 >>> 12) & 0x0F] + HEX_CHARS[(h7 >>> 8) & 0x0F] +\n        HEX_CHARS[(h7 >>> 4) & 0x0F] + HEX_CHARS[h7 & 0x0F];\n    }\n    return hex;\n  };\n\n  Sha256.prototype.toString = Sha256.prototype.hex;\n\n  Sha256.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var arr = [\n      (h0 >>> 24) & 0xFF, (h0 >>> 16) & 0xFF, (h0 >>> 8) & 0xFF, h0 & 0xFF,\n      (h1 >>> 24) & 0xFF, (h1 >>> 16) & 0xFF, (h1 >>> 8) & 0xFF, h1 & 0xFF,\n      (h2 >>> 24) & 0xFF, (h2 >>> 16) & 0xFF, (h2 >>> 8) & 0xFF, h2 & 0xFF,\n      (h3 >>> 24) & 0xFF, (h3 >>> 16) & 0xFF, (h3 >>> 8) & 0xFF, h3 & 0xFF,\n      (h4 >>> 24) & 0xFF, (h4 >>> 16) & 0xFF, (h4 >>> 8) & 0xFF, h4 & 0xFF,\n      (h5 >>> 24) & 0xFF, (h5 >>> 16) & 0xFF, (h5 >>> 8) & 0xFF, h5 & 0xFF,\n      (h6 >>> 24) & 0xFF, (h6 >>> 16) & 0xFF, (h6 >>> 8) & 0xFF, h6 & 0xFF\n    ];\n    if (!this.is224) {\n      arr.push((h7 >>> 24) & 0xFF, (h7 >>> 16) & 0xFF, (h7 >>> 8) & 0xFF, h7 & 0xFF);\n    }\n    return arr;\n  };\n\n  Sha256.prototype.array = Sha256.prototype.digest;\n\n  Sha256.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(this.is224 ? 28 : 32);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    dataView.setUint32(20, this.h5);\n    dataView.setUint32(24, this.h6);\n    if (!this.is224) {\n      dataView.setUint32(28, this.h7);\n    }\n    return buffer;\n  };\n\n  function HmacSha256(key, is224, sharedMemory) {\n    var i, type = typeof key;\n    if (type === 'string') {\n      var bytes = [], length = key.length, index = 0, code;\n      for (i = 0; i < length; ++i) {\n        code = key.charCodeAt(i);\n        if (code < 0x80) {\n          bytes[index++] = code;\n        } else if (code < 0x800) {\n          bytes[index++] = (0xc0 | (code >>> 6));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else if (code < 0xd800 || code >= 0xe000) {\n          bytes[index++] = (0xe0 | (code >>> 12));\n          bytes[index++] = (0x80 | ((code >>> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else {\n          code = 0x10000 + (((code & 0x3ff) << 10) | (key.charCodeAt(++i) & 0x3ff));\n          bytes[index++] = (0xf0 | (code >>> 18));\n          bytes[index++] = (0x80 | ((code >>> 12) & 0x3f));\n          bytes[index++] = (0x80 | ((code >>> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        }\n      }\n      key = bytes;\n    } else {\n      if (type === 'object') {\n        if (key === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && key.constructor === ArrayBuffer) {\n          key = new Uint8Array(key);\n        } else if (!Array.isArray(key)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(key)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n    }\n\n    if (key.length > 64) {\n      key = (new Sha256(is224, true)).update(key).array();\n    }\n\n    var oKeyPad = [], iKeyPad = [];\n    for (i = 0; i < 64; ++i) {\n      var b = key[i] || 0;\n      oKeyPad[i] = 0x5c ^ b;\n      iKeyPad[i] = 0x36 ^ b;\n    }\n\n    Sha256.call(this, is224, sharedMemory);\n\n    this.update(iKeyPad);\n    this.oKeyPad = oKeyPad;\n    this.inner = true;\n    this.sharedMemory = sharedMemory;\n  }\n  HmacSha256.prototype = new Sha256();\n\n  HmacSha256.prototype.finalize = function () {\n    Sha256.prototype.finalize.call(this);\n    if (this.inner) {\n      this.inner = false;\n      var innerHash = this.array();\n      Sha256.call(this, this.is224, this.sharedMemory);\n      this.update(this.oKeyPad);\n      this.update(innerHash);\n      Sha256.prototype.finalize.call(this);\n    }\n  };\n\n  var exports = createMethod();\n  exports.sha256 = exports;\n  exports.sha224 = createMethod(true);\n  exports.sha256.hmac = createHmacMethod();\n  exports.sha224.hmac = createHmacMethod(true);\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    root.sha256 = exports.sha256;\n    root.sha224 = exports.sha224;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n","import { AuthError, createStandardError, getFirebaseErrorMessage } from '@/types/errors';\nimport {\n  DataSnapshot,\n  ThenableReference,\n  getDatabase,\n  onDisconnect,\n  onValue,\n  push,\n  ref,\n  remove,\n  set,\n} from 'firebase/database';\nimport {\n  DocumentData,\n  DocumentReference,\n  QueryDocumentSnapshot,\n  QuerySnapshot,\n  Timestamp,\n  addDoc,\n  collection,\n  deleteDoc,\n  doc,\n  getDoc,\n  getDocs,\n  getFirestore,\n  limit,\n  onSnapshot,\n  orderBy,\n  query,\n  serverTimestamp,\n  startAfter,\n  updateDoc,\n  where,\n} from 'firebase/firestore';\nimport {\n  EmailAuthProvider,\n  GoogleAuthProvider,\n  User,\n  createUserWithEmailAndPassword,\n  getAuth,\n  linkWithCredential,\n  sendPasswordResetEmail,\n  signInAnonymously,\n  signInWithEmailAndPassword,\n  signInWithPopup,\n  signOut,\n  updateProfile,\n} from 'firebase/auth';\nimport { getDownloadURL, getStorage, ref as storageRef, uploadString } from 'firebase/storage';\n\nimport { MessageType } from '@/types/Message';\nimport { User as UserType } from '@/types';\nimport { initializeApp } from 'firebase/app';\nimport { sha256 } from 'js-sha256';\n\ninterface FirebaseConfig {\n  apiKey: string;\n  authDomain: string;\n  projectId: string;\n  storageBucket: string;\n  messagingSenderId: string;\n  appId: string;\n  measurementId: string;\n}\n\nconst firebaseConfig: FirebaseConfig = {\n  apiKey: import.meta.env.VITE_FIREBASE_API_KEY,\n  authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,\n  projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,\n  storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,\n  appId: import.meta.env.VITE_FIREBASE_APP_ID,\n  measurementId: import.meta.env.VITE_FIREBASE_MEASUREMENT_ID,\n};\n\n// Check for missing environment variables\nconst missingVars = Object.entries(firebaseConfig)\n  .filter(([_, value]) => !value)\n  .map(([key]) => key);\n\nif (missingVars.length > 0) {\n  console.error('Missing Firebase environment variables:', missingVars);\n  console.error('Please check your .env file and ensure all VITE_FIREBASE_* variables are set');\n}\n\nconst app = initializeApp(firebaseConfig);\nexport const db = getFirestore(app);\n\n// Firestore database initialized\n\nexport async function loginAnonymously(displayName = ''): Promise<User | null> {\n  try {\n    const auth = getAuth();\n    await signInAnonymously(auth);\n    if (auth.currentUser) {\n      await updateProfile(auth.currentUser, { displayName });\n      return auth.currentUser;\n    }\n    return null;\n  } catch (error) {\n    console.error('Anonymous login error:', error);\n    throw new AuthError(\n      getFirebaseErrorMessage(error),\n      'ANONYMOUS_LOGIN_FAILED',\n      createStandardError(error)\n    );\n  }\n}\n\nexport async function registerWithEmail(\n  email: string,\n  password: string,\n  displayName = ''\n): Promise<User> {\n  try {\n    const auth = getAuth();\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    await updateProfile(userCredential.user, { displayName });\n    return userCredential.user;\n  } catch (error) {\n    console.error('Registration error:', error);\n    throw new AuthError(\n      getFirebaseErrorMessage(error),\n      'REGISTRATION_FAILED',\n      createStandardError(error)\n    );\n  }\n}\n\nexport async function loginWithEmail(email: string, password: string): Promise<User> {\n  try {\n    const auth = getAuth();\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\n    return userCredential.user;\n  } catch (error) {\n    console.error('Email login error:', error);\n    throw new AuthError(\n      getFirebaseErrorMessage(error),\n      'EMAIL_LOGIN_FAILED',\n      createStandardError(error)\n    );\n  }\n}\n\nexport async function loginWithGoogle(): Promise<User> {\n  try {\n    const auth = getAuth();\n    const provider = new GoogleAuthProvider();\n    const userCredential = await signInWithPopup(auth, provider);\n    return userCredential.user;\n  } catch (error) {\n    console.error('Google login error:', error);\n    throw new AuthError(\n      getFirebaseErrorMessage(error),\n      'GOOGLE_LOGIN_FAILED',\n      createStandardError(error)\n    );\n  }\n}\n\nexport async function resetPassword(email: string): Promise<boolean> {\n  try {\n    const auth = getAuth();\n    await sendPasswordResetEmail(auth, email);\n    return true;\n  } catch (error) {\n    console.error('Password reset error:', error);\n    throw new AuthError(\n      getFirebaseErrorMessage(error),\n      'PASSWORD_RESET_FAILED',\n      createStandardError(error)\n    );\n  }\n}\n\n// Function to convert anonymous account to permanent account\nexport async function convertAnonymousAccount(email: string, password: string): Promise<User> {\n  try {\n    const auth = getAuth();\n    const user = auth.currentUser;\n\n    if (user?.isAnonymous) {\n      const credential = EmailAuthProvider.credential(email, password);\n      const result = await linkWithCredential(user, credential);\n      return result.user;\n    } else {\n      throw new Error('User is not anonymous or not logged in');\n    }\n  } catch (error) {\n    console.error('Account conversion error:', error);\n    throw new AuthError(\n      getFirebaseErrorMessage(error),\n      'ACCOUNT_CONVERSION_FAILED',\n      createStandardError(error)\n    );\n  }\n}\n\nexport async function logout(): Promise<boolean> {\n  try {\n    const auth = getAuth();\n    await signOut(auth);\n    return true;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n}\n\n/**\n * Completely wipe all app data including localStorage, IndexedDB, sessionStorage, and cookies\n * This provides a complete reset for users who want to start fresh\n */\nexport async function wipeAllAppData(): Promise<void> {\n  try {\n    // First sign out from Firebase\n    const auth = getAuth();\n    await signOut(auth);\n\n    // Clear all localStorage keys\n    const keysToRemove = [\n      'gameSettings',\n      'messages-storage',\n      'i18nextLng',\n      // Migration keys\n      'blitzed-out-action-groups-migration',\n      'blitzed-out-background-migration',\n      'blitzed-out-migration-in-progress',\n      'blitzed-out-current-language-migration',\n      'blitzed-out-background-migration-in-progress',\n      'blitzed-out-migration-health',\n    ];\n\n    keysToRemove.forEach((key) => {\n      try {\n        localStorage.removeItem(key);\n      } catch (error) {\n        console.warn(`Failed to remove localStorage key: ${key}`, error);\n      }\n    });\n\n    // Clear any remaining localStorage keys that start with our app prefixes\n    const appPrefixes = ['gameSettings', 'messages-storage', 'blitzed-out-'];\n    const localStorageKeys = Object.keys(localStorage);\n    localStorageKeys.forEach((key) => {\n      if (appPrefixes.some((prefix) => key.startsWith(prefix))) {\n        try {\n          localStorage.removeItem(key);\n        } catch (error) {\n          console.warn(`Failed to remove localStorage key: ${key}`, error);\n        }\n      }\n    });\n\n    // Clear sessionStorage (Firebase auth data)\n    try {\n      sessionStorage.clear();\n    } catch (error) {\n      console.warn('Failed to clear sessionStorage:', error);\n    }\n\n    // Clear IndexedDB via Dexie\n    try {\n      const { default: db } = await import('@/stores/store');\n      await db.delete();\n      console.log('Successfully cleared IndexedDB');\n    } catch (error) {\n      console.warn('Failed to clear IndexedDB:', error);\n    }\n\n    // Clear cookies comprehensively by trying multiple path and domain combinations\n    const cookiesToClear = ['i18next'];\n    const currentHostname = window.location.hostname;\n\n    // Generate possible domains (current domain and its parent domains)\n    const domains = [currentHostname];\n    if (currentHostname.includes('.')) {\n      const parts = currentHostname.split('.');\n      // Add parent domains (e.g., for app.example.com, try .example.com)\n      for (let i = 1; i < parts.length - 1; i++) {\n        domains.push(`.${parts.slice(i).join('.')}`);\n      }\n    }\n\n    // Common paths where cookies might be set\n    const paths = ['/', '/app', '/auth', '/login'];\n\n    cookiesToClear.forEach((cookieName) => {\n      // Try clearing with all combinations of domains and paths\n      domains.forEach((domain) => {\n        paths.forEach((path) => {\n          try {\n            // Clear regular cookie\n            document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${path}; domain=${domain};`;\n            // Clear secure cookie (if applicable)\n            document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${path}; domain=${domain}; secure;`;\n            // Clear httpOnly-accessible cookie (won't work from JS but attempt anyway)\n            document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${path}; domain=${domain}; httpOnly;`;\n            // Clear SameSite variants\n            document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${path}; domain=${domain}; SameSite=Strict;`;\n            document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${path}; domain=${domain}; SameSite=Lax;`;\n            document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${path}; domain=${domain}; SameSite=None; secure;`;\n          } catch {\n            // Silently continue - many of these attempts will fail, which is expected\n          }\n        });\n      });\n\n      // Also try without specifying domain (for cookies set without explicit domain)\n      paths.forEach((path) => {\n        try {\n          document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${path};`;\n          document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${path}; secure;`;\n        } catch {\n          // Silently continue\n        }\n      });\n\n      console.log(`Attempted comprehensive clearing of cookie: ${cookieName}`);\n    });\n\n    console.log('Successfully wiped all app data');\n  } catch (error) {\n    console.error('Error wiping app data:', error);\n    throw error;\n  }\n}\n\ninterface PresenceOptions {\n  newRoom: string | null;\n  oldRoom: string | null;\n  newDisplayName: string;\n  oldDisplayName: string;\n  removeOnDisconnect?: boolean;\n}\n\nexport function setMyPresence({\n  newRoom,\n  oldRoom,\n  newDisplayName,\n  oldDisplayName,\n  removeOnDisconnect = true,\n}: PresenceOptions): void {\n  const database = getDatabase();\n  const auth = getAuth();\n  const uid = auth.currentUser?.uid;\n\n  // Default to 'PUBLIC' if room is null/undefined\n  const newRoomName = newRoom?.toUpperCase() || 'PUBLIC';\n  const oldRoomName = oldRoom?.toUpperCase() || 'PUBLIC';\n\n  // Only proceed if we have a valid uid\n  if (!uid) {\n    console.warn('Cannot set presence: User not authenticated');\n    return;\n  }\n\n  const newRoomConnectionsRef = ref(database, `rooms/${newRoomName}/uids/${uid}`);\n  const oldRoomConnectionsRef = ref(database, `rooms/${oldRoomName}/uids/${uid}`);\n  const connectedRef = ref(database, '.info/connected');\n\n  let newRef: ThenableReference;\n  let oldRef: ThenableReference;\n\n  onValue(connectedRef, (snap) => {\n    if (snap.val() === true) {\n      // We're connected (or reconnected)!\n      newRef = push(newRoomConnectionsRef);\n      oldRef = push(oldRoomConnectionsRef);\n\n      if (oldRoomName !== newRoomName || oldDisplayName !== newDisplayName) {\n        remove(oldRoomConnectionsRef);\n      }\n\n      // When I disconnect, remove this device\n      if (removeOnDisconnect) {\n        onDisconnect(oldRef).remove();\n        onDisconnect(newRef).remove();\n      }\n\n      // Add this device to my connections list\n      // this value could contain info about the device or a timestamp too\n      set(newRef, { displayName: newDisplayName, lastActive: Date.now() });\n    }\n  });\n\n  document.addEventListener('beforeunload', () => {\n    // Browser is about to be closed, manually trigger disconnect\n    if (oldRef) remove(oldRef);\n    if (newRef) remove(newRef);\n  });\n}\n\nexport function getUserList(\n  roomId: string | null | undefined,\n  callback: (data: Record<string, unknown>) => void,\n  existingData: Record<string, unknown> = {},\n  options: {\n    enableCache?: boolean;\n    enableDebounce?: boolean;\n  } = {}\n): (() => void) | undefined {\n  if (!roomId) return undefined;\n\n  const { enableCache = true, enableDebounce = true } = options;\n\n  const roomUpper = roomId.toUpperCase();\n  const queryKey = getCacheKey('userList', roomUpper);\n  const startTime = Date.now();\n\n  // Check cache first with smart cache validation\n  if (enableCache) {\n    const cached = queryCache.get(queryKey);\n    if (cached && isValidCache(cached, queryKey)) {\n      // Update cache access count for smart eviction\n      cached.queryCount++;\n      queryCache.set(queryKey, cached);\n\n      updateQueryMetrics(queryKey, Date.now() - startTime, true);\n\n      // Still apply the existing data comparison logic\n      const dataString = Object.keys(cached.data as Record<string, unknown>)\n        .sort()\n        .join(',');\n      const existingString = existingData ? Object.keys(existingData).sort().join(',') : '';\n      if (dataString !== existingString) {\n        callback(cached.data as Record<string, unknown>);\n      }\n      return () => {}; // Return empty cleanup function for cached results\n    }\n  }\n\n  let unsubscribe: (() => void) | undefined;\n\n  const executeQuery = async () => {\n    let networkError = false;\n\n    try {\n      // Use connection pooling for optimal Firebase performance\n      await acquireConnection();\n\n      const database = getDatabase();\n      const usersRef = ref(database, 'users');\n\n      unsubscribe = onValue(\n        usersRef,\n        (snap: DataSnapshot) => {\n          const queryEndTime = Date.now();\n          const latency = queryEndTime - startTime;\n          const allUsers = snap.val() as Record<string, any> | null;\n\n          if (!allUsers) {\n            callback({});\n            return;\n          }\n\n          // Filter users by room and convert to expected format\n          const roomUsers: Record<string, unknown> = {};\n          Object.entries(allUsers).forEach(([uid, userData]) => {\n            if (userData.room === roomUpper) {\n              roomUsers[uid] = {\n                displayName: userData.displayName,\n                uid: uid,\n                lastSeen: userData.lastSeen ? new Date(userData.lastSeen) : new Date(),\n                isAnonymous: userData.isAnonymous,\n                joinedAt: userData.joinedAt ? new Date(userData.joinedAt) : new Date(),\n                room: userData.room,\n              };\n            }\n          });\n\n          const data = roomUsers;\n\n          // Update cache with enhanced metadata\n          if (enableCache) {\n            evictOldCacheEntries(); // Prevent memory bloat\n\n            const priority = getCachePriority(queryKey);\n            queryCache.set(queryKey, {\n              data,\n              timestamp: queryEndTime,\n              queryCount: 1,\n              priority,\n            });\n          }\n\n          updateQueryMetrics(queryKey, latency, false, networkError);\n\n          // to prevent an endless loop, see if our new data matches the existing stuff.\n          // can't compare two arrays directly, but we can compare two strings.\n          const dataString = Object.keys(data).sort().join(',');\n          const existingString = existingData ? Object.keys(existingData).sort().join(',') : '';\n          if (dataString !== existingString) callback(data);\n        },\n        (error) => {\n          networkError = true;\n          console.error('getUserList error:', error);\n          updateQueryMetrics(queryKey, Date.now() - startTime, false, true);\n        }\n      );\n    } catch (error) {\n      networkError = true;\n      console.error('getUserList connection error:', error);\n      updateQueryMetrics(queryKey, Date.now() - startTime, false, true);\n    } finally {\n      releaseConnection();\n    }\n  };\n\n  // Apply smart debouncing based on priority\n  if (enableDebounce) {\n    debounceQuery(queryKey, executeQuery);\n    // Return a cleanup function that clears both debounce and unsubscribe\n    return () => {\n      const timeout = queryDebounceMap.get(queryKey);\n      if (timeout) {\n        clearTimeout(timeout);\n        queryDebounceMap.delete(queryKey);\n      }\n      if (unsubscribe) {\n        unsubscribe();\n      }\n    };\n  } else {\n    executeQuery();\n    return unsubscribe;\n  }\n}\n\nexport async function updateDisplayName(displayName = ''): Promise<User | null> {\n  try {\n    const auth = getAuth();\n    if (auth.currentUser) {\n      await updateProfile(auth.currentUser, { displayName });\n      return auth.currentUser;\n    }\n    return null;\n  } catch (error) {\n    console.error(error);\n    return null;\n  }\n}\n\nexport async function submitCustomAction(grouping: string, customAction: string): Promise<void> {\n  try {\n    await addDoc(collection(db, 'custom-actions'), {\n      grouping,\n      customAction,\n      ttl: new Date(Date.now() + 4 * 24 * 60 * 60 * 1000), // 4 days\n    });\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function getBoardByContent(checksum: string): Promise<DocumentData | null> {\n  const q = query(collection(db, 'game-boards'), where('checksum', '==', checksum));\n  const snapshot = await getDocs(q);\n  if (snapshot.size) {\n    return snapshot.docs[0];\n  }\n  return null;\n}\n\ninterface BoardData {\n  title: string;\n  gameBoard: string;\n  settings: string;\n}\n\nexport async function getOrCreateBoard({\n  title,\n  gameBoard,\n  settings,\n}: BoardData): Promise<DocumentData | undefined> {\n  if (!title) {\n    return;\n  }\n\n  try {\n    const checksum = sha256(gameBoard);\n    const board = await getBoardByContent(checksum);\n    if (board) {\n      // update the ttl for another 30 days.\n      updateDoc(board.ref, {\n        ttl: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\n      }); // 30 days\n\n      return board;\n    }\n    return await storeBoard({ title, gameBoard, settings, checksum });\n  } catch (error) {\n    console.error(error);\n  }\n}\n\ninterface StoreBoardData extends BoardData {\n  checksum: string;\n}\n\nasync function storeBoard({\n  title,\n  gameBoard,\n  settings,\n  checksum,\n}: StoreBoardData): Promise<DocumentReference<DocumentData> | undefined> {\n  try {\n    return await addDoc(collection(db, 'game-boards'), {\n      title,\n      gameBoard,\n      settings,\n      checksum,\n      ttl: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), // 30 days\n    });\n  } catch (error) {\n    console.error(error);\n    return undefined;\n  }\n}\n\nexport async function getBoard(id: string): Promise<DocumentData | undefined> {\n  try {\n    const docRef = doc(db, 'game-boards', id);\n    const docSnap = await getDoc(docRef);\n    if (docSnap.exists()) {\n      return docSnap.data();\n    }\n    return undefined;\n  } catch (error) {\n    console.error(error);\n    return undefined;\n  }\n}\n\nlet lastMessage: Record<string, unknown> = {};\n\n// Enhanced query optimization with smart caching and debouncing\ninterface QueryCache {\n  data: unknown;\n  timestamp: number;\n  lastVisible?: QueryDocumentSnapshot<DocumentData>;\n  queryCount: number; // Track access frequency for smart eviction\n  priority: 'high' | 'medium' | 'low'; // Cache priority based on usage patterns\n}\n\ninterface ConnectionPool {\n  activeConnections: number;\n  maxConnections: number;\n  connectionQueue: Array<() => void>;\n}\n\n// Advanced cache configuration\nconst queryCache = new Map<string, QueryCache>();\nconst queryDebounceMap = new Map<string, NodeJS.Timeout>();\n// Priority query queue for future advanced scheduling (currently unused)\n\n// Optimized cache settings for 60-80% performance improvement\nconst CACHE_TTL = 15000; // Reduced to 15 seconds for fresher data\nconst PRIORITY_CACHE_TTL = 5000; // 5 seconds for high-priority queries\nconst DEBOUNCE_DELAY = 150; // Reduced to 150ms for faster response\nconst PRIORITY_DEBOUNCE_DELAY = 50; // 50ms for high-priority queries\nconst DEFAULT_LIMIT = 50;\nconst MAX_CACHE_SIZE = 100; // Prevent memory bloat\n\n// Connection pooling for optimal Firebase performance\nconst connectionPool: ConnectionPool = {\n  activeConnections: 0,\n  maxConnections: 15, // Optimal for Firebase concurrent connections\n  connectionQueue: [],\n};\n\n// Enhanced performance monitoring with detailed analytics\ninterface QueryMetrics {\n  queryCount: number;\n  totalLatency: number;\n  cacheHits: number;\n  lastQueryTime: number;\n  avgLatency: number;\n  p95Latency: number; // 95th percentile latency tracking\n  connectionPoolHits: number;\n  networkErrors: number;\n  latencyHistory: number[]; // Keep last 20 latencies for percentile calculation\n}\n\nconst queryMetrics = new Map<string, QueryMetrics>();\n\nfunction updateQueryMetrics(\n  queryKey: string,\n  latency: number,\n  fromCache: boolean,\n  networkError: boolean = false\n): void {\n  const existing = queryMetrics.get(queryKey) || {\n    queryCount: 0,\n    totalLatency: 0,\n    cacheHits: 0,\n    lastQueryTime: 0,\n    avgLatency: 0,\n    p95Latency: 0,\n    connectionPoolHits: 0,\n    networkErrors: 0,\n    latencyHistory: [],\n  };\n\n  existing.queryCount++;\n  existing.totalLatency += latency;\n  existing.lastQueryTime = Date.now();\n  existing.avgLatency = existing.totalLatency / existing.queryCount;\n\n  // Track latency history for percentile calculation (keep last 20)\n  existing.latencyHistory.push(latency);\n  if (existing.latencyHistory.length > 20) {\n    existing.latencyHistory.shift();\n  }\n\n  // Calculate 95th percentile\n  if (existing.latencyHistory.length >= 5) {\n    const sorted = [...existing.latencyHistory].sort((a, b) => a - b);\n    const p95Index = Math.floor(sorted.length * 0.95);\n    existing.p95Latency = sorted[p95Index];\n  }\n\n  if (fromCache) {\n    existing.cacheHits++;\n  }\n\n  if (networkError) {\n    existing.networkErrors++;\n  }\n\n  queryMetrics.set(queryKey, existing);\n}\n\n// Smart cache management functions\nfunction getCachePriority(queryKey: string): 'high' | 'medium' | 'low' {\n  if (queryKey.includes('messages')) return 'high'; // Messages are frequently accessed\n  if (queryKey.includes('userList')) return 'medium'; // User list moderate priority\n  return 'low'; // Schedule and other queries\n}\n\nfunction getCacheTTL(priority: 'high' | 'medium' | 'low'): number {\n  switch (priority) {\n    case 'high':\n      return PRIORITY_CACHE_TTL;\n    case 'medium':\n      return CACHE_TTL;\n    case 'low':\n      return CACHE_TTL * 2; // 30 seconds for low priority\n  }\n}\n\nfunction getDebounceDelay(priority: 'high' | 'medium' | 'low'): number {\n  switch (priority) {\n    case 'high':\n      return PRIORITY_DEBOUNCE_DELAY;\n    case 'medium':\n      return DEBOUNCE_DELAY;\n    case 'low':\n      return DEBOUNCE_DELAY * 2; // 300ms for low priority\n  }\n}\n\n// Enhanced cache eviction strategy\nfunction evictOldCacheEntries(): void {\n  if (queryCache.size <= MAX_CACHE_SIZE) return;\n\n  const entries = Array.from(queryCache.entries());\n  // Sort by priority (low first) and then by timestamp (oldest first) and access count (least accessed first)\n  entries.sort(([, a], [, b]) => {\n    const priorityOrder = { low: 0, medium: 1, high: 2 };\n    const priorityDiff = priorityOrder[a.priority] - priorityOrder[b.priority];\n    if (priorityDiff !== 0) return priorityDiff;\n\n    const accessDiff = a.queryCount - b.queryCount;\n    if (accessDiff !== 0) return accessDiff;\n\n    return a.timestamp - b.timestamp;\n  });\n\n  // Remove 20% of entries (starting with lowest priority, least accessed, oldest)\n  const entriesToRemove = Math.ceil(queryCache.size * 0.2);\n  for (let i = 0; i < entriesToRemove; i++) {\n    queryCache.delete(entries[i][0]);\n  }\n}\n\n// Connection pool management\nfunction acquireConnection(): Promise<void> {\n  return new Promise((resolve) => {\n    if (connectionPool.activeConnections < connectionPool.maxConnections) {\n      connectionPool.activeConnections++;\n      resolve();\n    } else {\n      connectionPool.connectionQueue.push(() => {\n        connectionPool.activeConnections++;\n        resolve();\n      });\n    }\n  });\n}\n\nfunction releaseConnection(): void {\n  connectionPool.activeConnections--;\n\n  if (connectionPool.connectionQueue.length > 0) {\n    const nextCallback = connectionPool.connectionQueue.shift();\n    if (nextCallback) {\n      nextCallback();\n    }\n  }\n}\n\nexport function getQueryPerformanceMetrics(): Record<\n  string,\n  QueryMetrics & { cacheHitRate: number; errorRate: number; connectionPoolUtilization: number }\n> {\n  const result: Record<\n    string,\n    QueryMetrics & { cacheHitRate: number; errorRate: number; connectionPoolUtilization: number }\n  > = {};\n\n  queryMetrics.forEach((metrics, key) => {\n    result[key] = {\n      ...metrics,\n      cacheHitRate: metrics.queryCount > 0 ? (metrics.cacheHits / metrics.queryCount) * 100 : 0,\n      errorRate: metrics.queryCount > 0 ? (metrics.networkErrors / metrics.queryCount) * 100 : 0,\n      connectionPoolUtilization:\n        (connectionPool.activeConnections / connectionPool.maxConnections) * 100,\n    };\n  });\n\n  return result;\n}\n\nfunction getCacheKey(\n  collection: string,\n  roomId?: string | null,\n  additionalParams?: string\n): string {\n  return `${collection}:${roomId || 'global'}:${additionalParams || ''}`;\n}\n\nfunction isValidCache(cache: QueryCache, queryKey: string): boolean {\n  const priority = getCachePriority(queryKey);\n  const ttl = getCacheTTL(priority);\n  return Date.now() - cache.timestamp < ttl;\n}\n\nfunction debounceQuery<T extends unknown[]>(\n  queryKey: string,\n  queryFn: (...args: T) => void,\n  ...args: T\n): void {\n  const priority = getCachePriority(queryKey);\n  const debounceDelay = getDebounceDelay(priority);\n  const existingTimeout = queryDebounceMap.get(queryKey);\n\n  if (existingTimeout) {\n    clearTimeout(existingTimeout);\n  }\n\n  const timeout = setTimeout(async () => {\n    try {\n      // Use connection pooling for optimal performance\n      await acquireConnection();\n      queryFn(...args);\n    } catch (error) {\n      console.error('Query execution error:', error);\n    } finally {\n      releaseConnection();\n      queryDebounceMap.delete(queryKey);\n    }\n  }, debounceDelay);\n\n  queryDebounceMap.set(queryKey, timeout);\n}\n\ninterface SendMessageOptions {\n  room?: string | null;\n  user: UserType;\n  text?: string;\n  type: MessageType;\n  [key: string]: unknown;\n}\n\nexport async function sendMessage({\n  room,\n  user,\n  text = '',\n  type = 'chat',\n  ...rest\n}: SendMessageOptions): Promise<DocumentReference<DocumentData> | void> {\n  const allowedTypes = ['chat', 'actions', 'settings', 'room', 'media'];\n  if (!allowedTypes.includes(type)) {\n    let message = 'Invalid message type. Was expecting ';\n    message += allowedTypes.join(', ');\n    message += ` but got ${type}`;\n\n    return console.error(message);\n  }\n\n  if (!user?.uid) {\n    return;\n  }\n\n  const newMessage = { room, user: user.uid, text, type, ...rest };\n  if (JSON.stringify(newMessage) === JSON.stringify(lastMessage)) {\n    return; // Duplicate message detected. Not sending.\n  }\n  lastMessage = newMessage;\n\n  const now = Date.now();\n  const roomName = room?.toUpperCase() || 'PUBLIC';\n\n  try {\n    const docRef = await addDoc(collection(db, 'chat-rooms', roomName, 'messages'), {\n      text: text.trim(),\n      ttl: new Date(now + 24 * 60 * 60 * 1000), // 24 hours\n      type,\n      ...rest,\n      uid: user.uid,\n      displayName: user.displayName,\n      timestamp: serverTimestamp(),\n    });\n\n    return docRef;\n  } catch (error) {\n    console.error('Failed to send message:', error);\n    return;\n  }\n}\n\nexport async function deleteMessage(room: string, messageId: string): Promise<void> {\n  return deleteDoc(doc(db, `/chat-rooms/${room.toUpperCase()}/messages/${messageId}`));\n}\n\ninterface ImageData {\n  base64String: string;\n  format: string;\n}\n\ninterface UploadImageData {\n  image: ImageData;\n  room: string | null | undefined;\n  user: UserType;\n}\n\nexport async function uploadImage({ image, room, user }: UploadImageData): Promise<void> {\n  const storage = getStorage();\n  const imageUrl = image.base64String;\n  const imageLoc = `/images/${Math.random()}.${image.format}`;\n  const imageRef = storageRef(storage, imageLoc);\n\n  try {\n    const uploadResult = await uploadString(imageRef, imageUrl, 'base64');\n    const downloadURL = await getDownloadURL(uploadResult.ref);\n\n    await sendMessage({\n      room,\n      user,\n      text: '',\n      type: 'media',\n      image: downloadURL,\n    });\n  } catch (error) {\n    console.error('Error uploading image:', error);\n  }\n}\n\nexport function getMessages(\n  roomId: string | null | undefined,\n  callback: (messages: Array<Record<string, unknown>>) => void,\n  options: {\n    limitCount?: number;\n    startAfterDoc?: QueryDocumentSnapshot<DocumentData>;\n    enableCache?: boolean;\n    enableDebounce?: boolean;\n  } = {}\n): (() => void) | undefined {\n  if (!roomId) return undefined;\n\n  const auth = getAuth();\n\n  // Wait for authentication before proceeding\n  if (!auth.currentUser) {\n    // Return a function that sets up auth listener and then executes query\n    let unsubscribeAuth: (() => void) | undefined;\n    let unsubscribeQuery: (() => void) | undefined;\n\n    unsubscribeAuth = auth.onAuthStateChanged((user) => {\n      if (user) {\n        // User is now authenticated, proceed with the query\n        unsubscribeQuery = executeGetMessages(roomId, callback, options);\n        // Clean up auth listener\n        if (unsubscribeAuth) {\n          unsubscribeAuth();\n          unsubscribeAuth = undefined;\n        }\n      }\n    });\n\n    // Return cleanup function\n    return () => {\n      if (unsubscribeAuth) unsubscribeAuth();\n      if (unsubscribeQuery) unsubscribeQuery();\n    };\n  }\n\n  // User is already authenticated, proceed normally\n  return executeGetMessages(roomId, callback, options);\n}\n\nfunction executeGetMessages(\n  roomId: string,\n  callback: (messages: Array<Record<string, unknown>>) => void,\n  options: {\n    limitCount?: number;\n    startAfterDoc?: QueryDocumentSnapshot<DocumentData>;\n    enableCache?: boolean;\n    enableDebounce?: boolean;\n  } = {}\n): (() => void) | undefined {\n  const {\n    limitCount = DEFAULT_LIMIT,\n    startAfterDoc,\n    enableCache = true,\n    enableDebounce = true,\n  } = options;\n\n  const roomUpper = roomId.toUpperCase();\n  const queryKey = getCacheKey('messages', roomUpper, `limit:${limitCount}`);\n  const startTime = Date.now();\n\n  // Check cache first with smart cache validation\n  if (enableCache) {\n    const cached = queryCache.get(queryKey);\n    if (cached && isValidCache(cached, queryKey)) {\n      // Update cache access count for smart eviction\n      cached.queryCount++;\n      queryCache.set(queryKey, cached);\n\n      updateQueryMetrics(queryKey, Date.now() - startTime, true);\n      callback(cached.data as Array<Record<string, unknown>>);\n      return () => {}; // Return empty unsubscribe function for cached results\n    }\n  }\n\n  const executeQuery = () => {\n    let networkError = false;\n    let unsubscribe: (() => void) | undefined;\n\n    try {\n      // Use connection pooling for optimal Firebase performance\n      acquireConnection();\n\n      // Enhanced time window - use 3 hours for better performance vs data freshness balance\n      const timeWindow = new Date();\n      timeWindow.setHours(timeWindow.getHours() - 3);\n\n      let baseQuery = query(\n        collection(db, 'chat-rooms', roomUpper, 'messages'),\n        where('timestamp', '>', timeWindow),\n        orderBy('timestamp', 'desc'),\n        limit(limitCount)\n      );\n\n      // Add pagination if startAfterDoc is provided\n      if (startAfterDoc) {\n        baseQuery = query(\n          collection(db, 'chat-rooms', roomUpper, 'messages'),\n          where('timestamp', '>', timeWindow),\n          orderBy('timestamp', 'desc'),\n          startAfter(startAfterDoc),\n          limit(limitCount)\n        );\n      }\n\n      unsubscribe = onSnapshot(\n        baseQuery,\n        (querySnapshot: QuerySnapshot<DocumentData>) => {\n          const queryEndTime = Date.now();\n          const latency = queryEndTime - startTime;\n\n          const messages = querySnapshot.docs.map((document) => ({\n            id: document.id,\n            ...document.data(),\n          }));\n\n          // Update cache with enhanced metadata\n          if (enableCache && messages.length > 0) {\n            evictOldCacheEntries(); // Prevent memory bloat\n\n            const lastVisible = querySnapshot.docs[querySnapshot.docs.length - 1];\n            const priority = getCachePriority(queryKey);\n\n            queryCache.set(queryKey, {\n              data: messages,\n              timestamp: queryEndTime,\n              lastVisible,\n              queryCount: 1,\n              priority,\n            });\n          }\n\n          updateQueryMetrics(queryKey, latency, false, networkError);\n          callback(messages);\n        },\n        (error) => {\n          networkError = true;\n          console.error('getMessages error:', error);\n          updateQueryMetrics(queryKey, Date.now() - startTime, false, true);\n        }\n      );\n\n      return unsubscribe;\n    } catch (error) {\n      networkError = true;\n      console.error('getMessages connection error:', error);\n      updateQueryMetrics(queryKey, Date.now() - startTime, false, true);\n      return () => {};\n    } finally {\n      releaseConnection();\n    }\n  };\n\n  // Apply smart debouncing based on priority\n  if (enableDebounce) {\n    let deferredUnsubscribe: (() => void) | undefined;\n\n    debounceQuery(queryKey, () => {\n      deferredUnsubscribe = executeQuery();\n    });\n\n    return () => {\n      const timeout = queryDebounceMap.get(queryKey);\n      if (timeout) {\n        clearTimeout(timeout);\n        queryDebounceMap.delete(queryKey);\n      }\n      if (deferredUnsubscribe) {\n        deferredUnsubscribe();\n      }\n    };\n  }\n\n  return executeQuery();\n}\n\n// Enhanced pagination helper for messages\nexport function getMessagesWithPagination(\n  roomId: string | null | undefined,\n  callback: (\n    messages: Array<Record<string, unknown>>,\n    lastVisible?: QueryDocumentSnapshot<DocumentData>\n  ) => void,\n  limitCount: number = DEFAULT_LIMIT,\n  startAfterDoc?: QueryDocumentSnapshot<DocumentData>\n): (() => void) | undefined {\n  if (!roomId) return undefined;\n\n  return getMessages(\n    roomId,\n    (messages) => {\n      const cached = queryCache.get(\n        getCacheKey('messages', roomId.toUpperCase(), `limit:${limitCount}`)\n      );\n      callback(messages, cached?.lastVisible);\n    },\n    {\n      limitCount,\n      startAfterDoc,\n      enableCache: true,\n      enableDebounce: true,\n    }\n  );\n}\n\nexport function getSchedule(\n  callback: (schedule: Array<Record<string, unknown>>) => void,\n  options: {\n    limitCount?: number;\n    startAfterDoc?: QueryDocumentSnapshot<DocumentData>;\n    enableCache?: boolean;\n    enableDebounce?: boolean;\n  } = {}\n): () => void {\n  const {\n    limitCount = DEFAULT_LIMIT,\n    startAfterDoc,\n    enableCache = true,\n    enableDebounce = true,\n  } = options;\n\n  const queryKey = getCacheKey('schedule', null, `limit:${limitCount}`);\n  const startTime = Date.now();\n\n  // Check cache first with smart cache validation\n  if (enableCache) {\n    const cached = queryCache.get(queryKey);\n    if (cached && isValidCache(cached, queryKey)) {\n      // Update cache access count for smart eviction\n      cached.queryCount++;\n      queryCache.set(queryKey, cached);\n\n      updateQueryMetrics(queryKey, Date.now() - startTime, true);\n      callback(cached.data as Array<Record<string, unknown>>);\n      return () => {}; // Return empty unsubscribe function for cached results\n    }\n  }\n\n  const executeQuery = async (): Promise<() => void> => {\n    let networkError = false;\n    let unsubscribe: (() => void) | undefined;\n\n    try {\n      // Use connection pooling for optimal Firebase performance\n      await acquireConnection();\n\n      // Enhanced time filtering - include current games (5 minutes buffer)\n      const currentTime = new Date();\n      currentTime.setMinutes(currentTime.getMinutes() - 5);\n\n      let baseQuery = query(\n        collection(db, 'schedule'),\n        where('dateTime', '>', currentTime),\n        orderBy('dateTime', 'asc'),\n        limit(limitCount)\n      );\n\n      // Add pagination if startAfterDoc is provided\n      if (startAfterDoc) {\n        baseQuery = query(\n          collection(db, 'schedule'),\n          where('dateTime', '>', currentTime),\n          orderBy('dateTime', 'asc'),\n          startAfter(startAfterDoc),\n          limit(limitCount)\n        );\n      }\n\n      unsubscribe = onSnapshot(\n        baseQuery,\n        (querySnapshot: QuerySnapshot<DocumentData>) => {\n          const queryEndTime = Date.now();\n          const latency = queryEndTime - startTime;\n\n          const schedule = querySnapshot.docs.map((document) => ({\n            id: document.id,\n            ...document.data(),\n          }));\n\n          // Update cache with enhanced metadata\n          if (enableCache && schedule.length > 0) {\n            evictOldCacheEntries(); // Prevent memory bloat\n\n            const lastVisible = querySnapshot.docs[querySnapshot.docs.length - 1];\n            const priority = getCachePriority(queryKey);\n\n            queryCache.set(queryKey, {\n              data: schedule,\n              timestamp: queryEndTime,\n              lastVisible,\n              queryCount: 1,\n              priority,\n            });\n          }\n\n          updateQueryMetrics(queryKey, latency, false, networkError);\n          callback(schedule);\n        },\n        (error) => {\n          networkError = true;\n          console.error('getSchedule error:', error);\n          updateQueryMetrics(queryKey, Date.now() - startTime, false, true);\n        }\n      );\n\n      return unsubscribe || (() => {});\n    } catch (error) {\n      networkError = true;\n      console.error('getSchedule connection error:', error);\n      updateQueryMetrics(queryKey, Date.now() - startTime, false, true);\n      return () => {};\n    } finally {\n      releaseConnection();\n    }\n  };\n\n  // Apply smart debouncing based on priority\n  if (enableDebounce) {\n    let deferredUnsubscribe: (() => void) | undefined;\n\n    debounceQuery(queryKey, async () => {\n      deferredUnsubscribe = await executeQuery();\n    });\n\n    return () => {\n      const timeout = queryDebounceMap.get(queryKey);\n      if (timeout) {\n        clearTimeout(timeout);\n        queryDebounceMap.delete(queryKey);\n      }\n      if (deferredUnsubscribe) {\n        deferredUnsubscribe();\n      }\n    };\n  }\n\n  const result = executeQuery();\n  return result instanceof Promise ? () => {} : result;\n}\n\n// Enhanced pagination helper for schedule\nexport function getScheduleWithPagination(\n  callback: (\n    schedule: Array<Record<string, unknown>>,\n    lastVisible?: QueryDocumentSnapshot<DocumentData>\n  ) => void,\n  limitCount: number = DEFAULT_LIMIT,\n  startAfterDoc?: QueryDocumentSnapshot<DocumentData>\n): () => void {\n  return getSchedule(\n    (schedule) => {\n      const cached = queryCache.get(getCacheKey('schedule', null, `limit:${limitCount}`));\n      callback(schedule, cached?.lastVisible);\n    },\n    {\n      limitCount,\n      startAfterDoc,\n      enableCache: true,\n      enableDebounce: true,\n    }\n  );\n}\n\n// Utility function to clear query cache (useful for testing or memory management)\nexport function clearQueryCache(pattern?: string): void {\n  if (pattern) {\n    Array.from(queryCache.keys())\n      .filter((key) => key.includes(pattern))\n      .forEach((key) => queryCache.delete(key));\n  } else {\n    queryCache.clear();\n  }\n}\n\n// Enhanced utility function to get comprehensive cache stats\nexport function getCacheStats(): {\n  totalCachedQueries: number;\n  cacheSize: number;\n  oldestCacheEntry: number | null;\n  newestCacheEntry: number | null;\n  memoryUsageEstimate: number;\n  cachesByPriority: { high: number; medium: number; low: number };\n  averageQueryCount: number;\n  connectionPoolStats: {\n    activeConnections: number;\n    maxConnections: number;\n    queueLength: number;\n    utilizationPercentage: number;\n  };\n} {\n  const timestamps = Array.from(queryCache.values()).map((cache) => cache.timestamp);\n  const cacheValues = Array.from(queryCache.values());\n\n  // Calculate cache distribution by priority\n  const priorityStats = cacheValues.reduce(\n    (acc, cache) => {\n      acc[cache.priority]++;\n      return acc;\n    },\n    { high: 0, medium: 0, low: 0 }\n  );\n\n  // Estimate memory usage (rough calculation)\n  const memoryUsageEstimate = cacheValues.reduce((total, cache) => {\n    return total + JSON.stringify(cache.data).length * 2; // Rough bytes estimate\n  }, 0);\n\n  // Calculate average query count\n  const averageQueryCount =\n    cacheValues.length > 0\n      ? cacheValues.reduce((sum, cache) => sum + cache.queryCount, 0) / cacheValues.length\n      : 0;\n\n  return {\n    totalCachedQueries: queryCache.size,\n    cacheSize: queryCache.size,\n    oldestCacheEntry: timestamps.length > 0 ? Math.min(...timestamps) : null,\n    newestCacheEntry: timestamps.length > 0 ? Math.max(...timestamps) : null,\n    memoryUsageEstimate,\n    cachesByPriority: priorityStats,\n    averageQueryCount,\n    connectionPoolStats: {\n      activeConnections: connectionPool.activeConnections,\n      maxConnections: connectionPool.maxConnections,\n      queueLength: connectionPool.connectionQueue.length,\n      utilizationPercentage:\n        (connectionPool.activeConnections / connectionPool.maxConnections) * 100,\n    },\n  };\n}\n\n// Add new performance optimization utilities\nexport function optimizeCache(): {\n  entriesEvicted: number;\n  memoryFreed: number;\n  newCacheSize: number;\n} {\n  const beforeSize = queryCache.size;\n  const beforeMemory = Array.from(queryCache.values()).reduce((total, cache) => {\n    return total + JSON.stringify(cache.data).length * 2;\n  }, 0);\n\n  evictOldCacheEntries();\n\n  const afterSize = queryCache.size;\n  const afterMemory = Array.from(queryCache.values()).reduce((total, cache) => {\n    return total + JSON.stringify(cache.data).length * 2;\n  }, 0);\n\n  return {\n    entriesEvicted: beforeSize - afterSize,\n    memoryFreed: beforeMemory - afterMemory,\n    newCacheSize: afterSize,\n  };\n}\n\n// Get performance recommendations based on current metrics\nexport function getPerformanceRecommendations(): {\n  recommendations: string[];\n  overallScore: number;\n  issues: string[];\n} {\n  const metrics = getQueryPerformanceMetrics();\n  const cacheStats = getCacheStats();\n  const recommendations: string[] = [];\n  const issues: string[] = [];\n  let overallScore = 100;\n\n  // Analyze cache hit rates\n  const avgCacheHitRate =\n    Object.values(metrics).reduce((sum, metric) => sum + metric.cacheHitRate, 0) /\n      Object.keys(metrics).length || 0;\n\n  if (avgCacheHitRate < 50) {\n    recommendations.push('Increase cache TTL for better hit rates');\n    issues.push('Low cache hit rate detected');\n    overallScore -= 20;\n  }\n\n  // Analyze connection pool utilization\n  if (cacheStats.connectionPoolStats.utilizationPercentage > 80) {\n    recommendations.push('Consider increasing connection pool size');\n    issues.push('High connection pool utilization');\n    overallScore -= 15;\n  }\n\n  // Analyze error rates\n  const avgErrorRate =\n    Object.values(metrics).reduce((sum, metric) => sum + metric.errorRate, 0) /\n      Object.keys(metrics).length || 0;\n\n  if (avgErrorRate > 5) {\n    recommendations.push('Investigate network errors and add retry logic');\n    issues.push('High error rate detected');\n    overallScore -= 25;\n  }\n\n  // Analyze latency\n  const avgLatency =\n    Object.values(metrics).reduce((sum, metric) => sum + metric.avgLatency, 0) /\n      Object.keys(metrics).length || 0;\n\n  if (avgLatency > 1000) {\n    recommendations.push('Optimize query structures and indexes');\n    issues.push('High average latency detected');\n    overallScore -= 20;\n  }\n\n  // Memory usage recommendations\n  if (cacheStats.memoryUsageEstimate > 10 * 1024 * 1024) {\n    // 10MB\n    recommendations.push('Consider reducing cache size or implementing more aggressive eviction');\n    issues.push('High memory usage detected');\n    overallScore -= 10;\n  }\n\n  if (recommendations.length === 0) {\n    recommendations.push('Performance is optimal!');\n  }\n\n  return {\n    recommendations,\n    overallScore: Math.max(0, overallScore),\n    issues,\n  };\n}\n\nexport async function addSchedule(\n  dateTime: Date,\n  url: string,\n  room = 'PUBLIC'\n): Promise<DocumentReference<DocumentData> | void> {\n  try {\n    return await addDoc(collection(db, 'schedule'), {\n      dateTime: Timestamp.fromDate(dateTime),\n      url,\n      room,\n    });\n  } catch (error) {\n    return console.error(error);\n  }\n}\n","import { Middleware, DBCore, DBCoreTable, DBCoreMutateRequest } from 'dexie';\nimport { WindowWithAuth } from '../types/app';\n\ninterface SyncMiddlewareOptions {\n  tables: string[];\n}\n\ninterface TimeoutMap {\n  [key: string]: ReturnType<typeof setTimeout>;\n}\n\ninterface SyncDebounce {\n  timeouts: TimeoutMap;\n  queue: Set<string>;\n  scheduleSync(tableName: string): void;\n  processSyncQueue(): void;\n}\n\ninterface DexieMiddleware extends Middleware<DBCore> {\n  stack: 'dbcore';\n  name: string;\n}\n\n/**\n * Creates a Dexie middleware that syncs data to Firebase after database modifications\n * @param options - Configuration options\n * @returns Dexie middleware function\n */\nexport function createSyncMiddleware(\n  options: SyncMiddlewareOptions = { tables: ['customTiles', 'gameBoard'] }\n): DexieMiddleware {\n  const { tables } = options;\n  const tableSet = new Set(tables);\n\n  // Debounce mechanism\n  const syncDebounce: SyncDebounce = {\n    timeouts: {},\n    queue: new Set<string>(),\n\n    // Schedule a sync for a specific table\n    scheduleSync(tableName: string): void {\n      // Clear any existing timeout for this table\n      if (this.timeouts[tableName]) {\n        clearTimeout(this.timeouts[tableName]);\n      }\n\n      // Add to queue\n      this.queue.add(tableName);\n\n      // Set a new timeout\n      this.timeouts[tableName] = setTimeout(() => {\n        this.processSyncQueue();\n      }, 2000); // 2 second debounce\n    },\n\n    // Process all tables in the queue\n    processSyncQueue(): void {\n      if (this.queue.size === 0) return;\n\n      // Only sync if we have an authenticated non-anonymous user\n      const windowWithAuth = window as WindowWithAuth;\n      if (windowWithAuth.authContext?.user && !windowWithAuth.authContext.user.isAnonymous) {\n        windowWithAuth.authContext.syncData();\n      }\n\n      // Clear the queue and timeouts\n      this.queue.clear();\n      Object.keys(this.timeouts).forEach((key) => {\n        clearTimeout(this.timeouts[key]);\n        delete this.timeouts[key];\n      });\n    },\n  };\n\n  return {\n    stack: 'dbcore',\n    name: 'syncMiddleware',\n    create(downlevelDatabase: DBCore): DBCore {\n      return {\n        ...downlevelDatabase,\n        table(tableName: string): DBCoreTable {\n          const downlevelTable = downlevelDatabase.table(tableName);\n\n          // Only apply middleware to specified tables\n          if (!tableSet.has(tableName)) {\n            return downlevelTable;\n          }\n\n          return {\n            ...downlevelTable,\n            mutate: async (req: DBCoreMutateRequest): Promise<any> => {\n              // First, perform the actual database operation\n              const result = await downlevelTable.mutate(req);\n\n              // After successful operation, trigger sync if it's a write operation\n              if (['put', 'add', 'delete', 'deleteRange', 'update'].includes(req.type)) {\n                // Schedule a sync for this table with debouncing\n                syncDebounce.scheduleSync(tableName);\n              }\n\n              return result;\n            },\n          };\n        },\n      };\n    },\n  };\n}\n","import { createSyncMiddleware } from '@/services/syncMiddleware';\nimport Dexie, { type EntityTable } from 'dexie';\nimport { CustomTilePull } from '@/types/customTiles';\nimport { DBGameBoard } from '@/types/gameBoard';\nimport { CustomGroupPull } from '@/types/customGroups';\nimport { DBLocalPlayerSession, DBLocalPlayerMove, DBLocalPlayerStats } from '@/types/localPlayerDB';\n\nclass BlitzedOutDatabase extends Dexie {\n  customTiles!: EntityTable<CustomTilePull, 'id'>;\n  gameBoard!: EntityTable<DBGameBoard, 'id'>;\n  customGroups!: EntityTable<CustomGroupPull, 'id'>;\n  localPlayerSessions!: EntityTable<DBLocalPlayerSession, 'id'>;\n  localPlayerMoves!: EntityTable<DBLocalPlayerMove, 'id'>;\n  localPlayerStats!: EntityTable<DBLocalPlayerStats, 'id'>;\n\n  constructor() {\n    super('blitzedOut');\n\n    // Version 2: Original schema\n    this.version(2).stores({\n      customTiles: '++id, group, intensity, action, isEnabled, tags, gameMode, isCustom, locale',\n      gameBoard: '++id, title, tiles, tags, gameMode, isActive',\n    });\n\n    // Version 3: Add custom groups table\n    this.version(3).stores({\n      customTiles: '++id, group, intensity, action, isEnabled, tags, gameMode, isCustom, locale',\n      gameBoard: '++id, title, tiles, tags, gameMode, isActive',\n      customGroups: '++id, name, label, locale, gameMode, isDefault, createdAt',\n    });\n\n    // Version 4: Add unique constraint on custom groups\n    this.version(4)\n      .stores({\n        customTiles: '++id, group, intensity, action, isEnabled, tags, gameMode, isCustom, locale',\n        gameBoard: '++id, title, tiles, tags, gameMode, isActive',\n        customGroups:\n          '++id, name, label, locale, gameMode, isDefault, createdAt, [name+locale+gameMode]',\n      })\n      .upgrade(async (trans) => {\n        // Remove duplicates during upgrade\n        const groups = await trans.table('customGroups').toArray();\n        const seen = new Set<string>();\n\n        for (const group of groups) {\n          const key = `${group.name}-${group.locale}-${group.gameMode}`;\n          if (seen.has(key)) {\n            // Delete duplicate\n            await trans.table('customGroups').delete(group.id);\n          } else {\n            seen.add(key);\n          }\n        }\n      });\n\n    // Version 5: Add local player tables for single-device multiplayer\n    this.version(5).stores({\n      customTiles: '++id, group, intensity, action, isEnabled, tags, gameMode, isCustom, locale',\n      gameBoard: '++id, title, tiles, tags, gameMode, isActive',\n      customGroups:\n        '++id, name, label, locale, gameMode, isDefault, createdAt, [name+locale+gameMode]',\n      localPlayerSessions: '++id, sessionId, roomId, isActive, createdAt, updatedAt',\n      localPlayerMoves: '++id, sessionId, playerId, timestamp, sequence',\n      localPlayerStats: '++id, sessionId, playerId, lastActive',\n    });\n  }\n}\n\nconst db = new BlitzedOutDatabase();\n\ndb.use(\n  createSyncMiddleware({\n    tables: [\n      'customTiles',\n      'gameBoard',\n      'customGroups',\n      'localPlayerSessions',\n      'localPlayerMoves',\n      'localPlayerStats',\n    ],\n  })\n);\n\nexport default db;\n","import i18next from 'i18next';\nimport { nanoid } from 'nanoid';\nimport db from './store';\nimport {\n  CustomGroup,\n  CustomGroupBase,\n  CustomGroupPull,\n  CustomGroupFilters,\n  CustomGroupIntensity,\n} from '@/types/customGroups';\nimport { Collection, Table } from 'dexie';\n\nconst { customGroups } = db;\n\n// Hook to set default values when creating custom groups\ncustomGroups.hook(\n  'creating',\n  function (this: any, _primKey: string | undefined, obj: CustomGroup, _transaction: any) {\n    if (!obj.id) obj.id = nanoid();\n    if (obj.locale === undefined) obj.locale = i18next.resolvedLanguage || i18next.language || 'en';\n    if (obj.gameMode === undefined) obj.gameMode = 'online';\n    if (obj.isDefault === undefined) obj.isDefault = false;\n    const now = new Date();\n    if (!(obj as CustomGroupPull).createdAt) (obj as CustomGroupPull).createdAt = now;\n    (obj as CustomGroupPull).updatedAt = now;\n  }\n);\n\n// Hook to update the updatedAt timestamp when updating\ncustomGroups.hook(\n  'updating',\n  function (this: any, modifications: any, _primKey: string, _obj: CustomGroup, _transaction: any) {\n    modifications.updatedAt = new Date();\n  }\n);\n\n// Helper function to create and filter the query\nconst createFilteredQuery = (filters: Partial<CustomGroupFilters>) => {\n  const possibleFilters = ['locale', 'gameMode', 'name', 'isDefault'];\n  let query: Collection<CustomGroupPull, string | undefined> = (\n    customGroups as Table<CustomGroupPull, string>\n  ).toCollection();\n\n  const filtersArray = Object.entries(filters).filter(([key]) => possibleFilters.includes(key));\n\n  filtersArray.forEach(([key, value]) => {\n    if (value === undefined || value === null || value === '') return;\n\n    query = query.filter((group) => group[key as keyof CustomGroup] === value);\n  });\n\n  return query;\n};\n\n/**\n * Get custom groups with optional filtering\n */\nexport const getCustomGroups = async (\n  filters: Partial<CustomGroupFilters> = {}\n): Promise<CustomGroupPull[]> => {\n  try {\n    const query = createFilteredQuery(filters);\n    return await query.toArray();\n  } catch (error) {\n    console.error('Error in getCustomGroups:', error);\n    return [];\n  }\n};\n\n/**\n * Get a single custom group by ID\n */\nexport const getCustomGroup = async (id: string): Promise<CustomGroupPull | undefined> => {\n  try {\n    return await customGroups.get(id);\n  } catch (error) {\n    console.error('Error in getCustomGroup:', error);\n    return undefined;\n  }\n};\n\n/**\n * Get a custom group by name, locale, and game mode\n */\nexport const getCustomGroupByName = async (\n  name: string,\n  locale = 'en',\n  gameMode = 'online'\n): Promise<CustomGroupPull | undefined> => {\n  try {\n    return await customGroups\n      .where('name')\n      .equals(name)\n      .and((group) => group.locale === locale && group.gameMode === gameMode)\n      .first();\n  } catch (error) {\n    console.error('Error in getCustomGroupByName:', error);\n    return undefined;\n  }\n};\n\n/**\n * Add a new custom group\n */\nexport const addCustomGroup = async (group: CustomGroupBase): Promise<string | undefined> => {\n  try {\n    // The creating hook will add id, createdAt, and updatedAt fields\n    // We need to provide the required fields that the hook expects\n    const groupWithTimestamps = {\n      ...group,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    } as Omit<CustomGroupPull, 'id'>;\n\n    const id = await customGroups.add(groupWithTimestamps);\n    return id;\n  } catch (error) {\n    console.error('Error in addCustomGroup:', error);\n    return undefined;\n  }\n};\n\n/**\n * Update an existing custom group\n */\nexport const updateCustomGroup = async (\n  id: string,\n  updates: Partial<CustomGroupBase>\n): Promise<number> => {\n  try {\n    return await customGroups.update(id, updates);\n  } catch (error) {\n    console.error('Error in updateCustomGroup:', error);\n    return 0;\n  }\n};\n\n/**\n * Delete a custom group\n */\nexport const deleteCustomGroup = async (id: string): Promise<void> => {\n  try {\n    await customGroups.delete(id);\n  } catch (error) {\n    console.error('Error in deleteCustomGroup:', error);\n  }\n};\n\n/**\n * Delete all custom groups (useful for migrations and testing)\n */\nexport const deleteAllCustomGroups = async (): Promise<boolean> => {\n  try {\n    await customGroups.clear();\n    return true;\n  } catch (error) {\n    console.error('Error deleting all custom groups:', error);\n    return false;\n  }\n};\n\n/**\n * Import multiple custom groups\n */\nexport const importCustomGroups = async (\n  groups: Partial<CustomGroup>[]\n): Promise<string | undefined> => {\n  try {\n    const now = new Date();\n    const groupsWithAllFields = groups.map((group) => {\n      const fullGroup: CustomGroupPull = {\n        name: group.name || '',\n        label: group.label || '',\n        intensities: group.intensities || [],\n        id: group.id || nanoid(),\n        locale: group.locale || 'en',\n        gameMode: group.gameMode || 'online',\n        isDefault: group.isDefault || false,\n        createdAt: (group as CustomGroupPull).createdAt || now,\n        updatedAt: (group as CustomGroupPull).updatedAt || now,\n      };\n      return fullGroup;\n    });\n\n    return await customGroups.bulkAdd(groupsWithAllFields);\n  } catch (error) {\n    console.error('Error in importCustomGroups:', error);\n    return undefined;\n  }\n};\n\n/**\n * Create default custom groups from locale action files\n * This is used during migration and initial setup\n */\nexport const createDefaultGroups = async (\n  locale = 'en',\n  gameMode = 'online'\n): Promise<CustomGroupPull[]> => {\n  try {\n    // Get all existing groups from Dexie for this locale/gameMode\n    const existingGroups = await getCustomGroups({ locale, gameMode, isDefault: true });\n\n    // If we already have default groups, return them\n    if (existingGroups.length > 0) {\n      return existingGroups;\n    }\n\n    // If no groups exist, migration probably hasn't run yet\n    // Return empty array - migration will handle creating groups\n    return [];\n  } catch (error) {\n    console.error('Error creating default groups:', error);\n    return [];\n  }\n};\n\n/**\n * Get all available intensity levels for a specific group\n */\nexport const getGroupIntensities = async (\n  groupName: string,\n  locale = 'en',\n  gameMode = 'online'\n): Promise<CustomGroupIntensity[]> => {\n  try {\n    const group = await getCustomGroupByName(groupName, locale, gameMode);\n    return group?.intensities || [];\n  } catch (error) {\n    console.error('Error in getGroupIntensities:', error);\n    return [];\n  }\n};\n\n/**\n * Validate that a custom group name is unique within the locale/gameMode\n */\nexport const isGroupNameUnique = async (\n  name: string,\n  locale = 'en',\n  gameMode = 'online',\n  excludeId?: string\n): Promise<boolean> => {\n  try {\n    const existingGroup = await getCustomGroupByName(name, locale, gameMode);\n    if (!existingGroup) return true;\n    if (excludeId && existingGroup.id === excludeId) return true;\n    return false;\n  } catch (error) {\n    console.error('Error in isGroupNameUnique:', error);\n    return false;\n  }\n};\n\n/**\n * Get all custom groups for the current locale and game mode\n */\nexport const getCurrentGroups = async (gameMode?: string): Promise<CustomGroupPull[]> => {\n  const currentLocale = i18next.resolvedLanguage || i18next.language || 'en';\n  return getCustomGroups({\n    locale: currentLocale,\n    gameMode: gameMode || 'online',\n  });\n};\n\n/**\n * Get default and custom groups combined for display in selectors\n */\n/**\n * Remove duplicate groups from the database\n * Keeps the first occurrence of each group name per locale/gameMode\n */\nexport const removeDuplicateGroups = async (\n  locale = 'en',\n  gameMode = 'online'\n): Promise<number> => {\n  try {\n    const allGroups = await getCustomGroups({ locale, gameMode });\n    const groupsByName = new Map<string, CustomGroupPull[]>();\n\n    // Group by name\n    allGroups.forEach((group) => {\n      const existing = groupsByName.get(group.name) || [];\n      existing.push(group);\n      groupsByName.set(group.name, existing);\n    });\n\n    let removedCount = 0;\n\n    // Remove duplicates (keep the first, remove the rest)\n    for (const [, groups] of groupsByName) {\n      if (groups.length > 1) {\n        // Sort by creation date to keep the oldest\n        groups.sort((a, b) => {\n          try {\n            const aTime =\n              a.createdAt instanceof Date ? a.createdAt.getTime() : new Date(a.createdAt).getTime();\n            const bTime =\n              b.createdAt instanceof Date ? b.createdAt.getTime() : new Date(b.createdAt).getTime();\n            return aTime - bTime;\n          } catch (error) {\n            // If date parsing fails, fall back to createdAt comparison for deterministic ordering\n            console.warn(\n              'Date parsing failed in removeDuplicateGroups, using createdAt fallback:',\n              error\n            );\n            return a.createdAt.getTime() - b.createdAt.getTime();\n          }\n        });\n\n        // Remove all but the first\n        for (let i = 1; i < groups.length; i++) {\n          await deleteCustomGroup(groups[i].id);\n          removedCount++;\n        }\n      }\n    }\n\n    return removedCount;\n  } catch (error) {\n    console.error('Error in removeDuplicateGroups:', error);\n    return 0;\n  }\n};\n\n/**\n * Force recreate default groups with proper intensities from action files\n * This is useful when intensities need to be updated\n */\nexport const recreateDefaultGroups = async (): Promise<number> => {\n  // This function is no longer needed since migration handles creating groups\n  // Just return 0 to maintain compatibility\n  return 0;\n};\n\nexport const getAllAvailableGroups = async (\n  locale = 'en',\n  gameMode = 'online'\n): Promise<CustomGroupPull[]> => {\n  try {\n    // Clean up any existing duplicates first\n    await removeDuplicateGroups(locale, gameMode);\n\n    // Get all groups for this locale/gameMode from Dexie\n    const groups = await getCustomGroups({ locale, gameMode });\n\n    // Additional safety deduplication by name (keep the first occurrence)\n    const uniqueGroups = groups.filter(\n      (group, index, self) => self.findIndex((g) => g.name === group.name) === index\n    );\n\n    return uniqueGroups;\n  } catch (error) {\n    console.error(' getAllAvailableGroups: Database error', {\n      locale,\n      gameMode,\n      error,\n    });\n    return [];\n  }\n};\n\n/**\n * Get custom groups that have associated custom tiles\n * Only returns groups that actually have tiles created for them\n */\nexport const getCustomGroupsWithTiles = async (\n  locale = 'en',\n  gameMode = 'online'\n): Promise<CustomGroupPull[]> => {\n  try {\n    // Import getTiles from customTiles store\n    const { getTiles } = await import('./customTiles');\n\n    // Get all custom groups for this locale/gameMode\n    const allGroups = await getCurrentGroups(gameMode);\n\n    // Get all custom tiles for this locale/gameMode (only custom tiles, not default)\n    const customTiles = await getTiles({\n      locale,\n      gameMode,\n      isCustom: 1,\n    });\n\n    // Get unique group names that have custom tiles\n    const groupNamesWithTiles = new Set(customTiles.map((tile) => tile.group));\n\n    // Filter groups to only include those with tiles and are not default groups\n    const groupsWithTiles = allGroups.filter(\n      (group) => !group.isDefault && groupNamesWithTiles.has(group.name)\n    );\n\n    return groupsWithTiles;\n  } catch (error) {\n    console.error('Error in getCustomGroupsWithTiles:', error);\n    return [];\n  }\n};\n\n/**\n * Utility functions for post-migration runtime queries\n * These query Dexie instead of reading JSON files\n */\n\n/**\n * Get all available locales from migrated data\n */\nexport const getAvailableLocales = async (): Promise<string[]> => {\n  try {\n    const groups = await getCustomGroups({ isDefault: true });\n    const locales = [...new Set(groups.map((g) => g.locale))].sort();\n    return locales;\n  } catch (error) {\n    console.error('Error getting available locales:', error);\n    return ['en']; // fallback\n  }\n};\n\n/**\n * Get all available game modes for a specific locale\n */\nexport const getAvailableGameModes = async (locale?: string): Promise<string[]> => {\n  try {\n    const filters: Partial<CustomGroupFilters> = { isDefault: true };\n    if (locale) filters.locale = locale;\n\n    const groups = await getCustomGroups(filters);\n    const gameModes = [...new Set(groups.map((g) => g.gameMode))].sort();\n    return gameModes;\n  } catch (error) {\n    console.error('Error getting available game modes:', error);\n    return ['online']; // fallback\n  }\n};\n\n/**\n * Get all action group names for a specific locale and game mode\n */\nexport const getActionGroupsForMode = async (\n  locale: string,\n  gameMode: string\n): Promise<string[]> => {\n  try {\n    const groups = await getCustomGroups({ locale, gameMode, isDefault: true });\n    return groups.map((g) => g.name).sort();\n  } catch (error) {\n    console.error('Error getting action groups for mode:', error);\n    return [];\n  }\n};\n\n/**\n * Get all available action group names across all locales and game modes\n */\nexport const getAllActionGroupNames = async (): Promise<string[]> => {\n  try {\n    const groups = await getCustomGroups({ isDefault: true });\n    const groupNames = [...new Set(groups.map((g) => g.name))].sort();\n    return groupNames;\n  } catch (error) {\n    console.error('Error getting all action group names:', error);\n    return [];\n  }\n};\n\n/**\n * Get available groups with their locale and game mode information\n */\nexport const getGroupAvailability = async (): Promise<\n  {\n    groupName: string;\n    locales: string[];\n    gameModes: string[];\n    combinations: Array<{ locale: string; gameMode: string }>;\n  }[]\n> => {\n  try {\n    const groups = await getCustomGroups({ isDefault: true });\n    const availability = new Map<\n      string,\n      {\n        locales: Set<string>;\n        gameModes: Set<string>;\n        combinations: Array<{ locale: string; gameMode: string }>;\n      }\n    >();\n\n    groups.forEach((group) => {\n      if (!availability.has(group.name)) {\n        availability.set(group.name, {\n          locales: new Set(),\n          gameModes: new Set(),\n          combinations: [],\n        });\n      }\n\n      const groupData = availability.get(group.name);\n      if (groupData) {\n        groupData.locales.add(group.locale);\n        groupData.gameModes.add(group.gameMode);\n        groupData.combinations.push({ locale: group.locale, gameMode: group.gameMode });\n      } else {\n        console.error(`Unexpected error: group data not found for group: ${group.name}`);\n      }\n    });\n\n    return Array.from(availability.entries())\n      .map(([groupName, data]) => ({\n        groupName,\n        locales: Array.from(data.locales).sort(),\n        gameModes: Array.from(data.gameModes).sort(),\n        combinations: data.combinations,\n      }))\n      .sort((a, b) => a.groupName.localeCompare(b.groupName));\n  } catch (error) {\n    console.error('Error getting group availability:', error);\n    return [];\n  }\n};\n","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...args) => api.dispatch(...args), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst removeStoreFromTrackedConnections = (name, store) => {\n  if (store === void 0) return;\n  const connectionInfo = trackedConnections.get(name);\n  if (!connectionInfo) return;\n  delete connectionInfo.stores[store];\n  if (Object.keys(connectionInfo.stores).length === 0) {\n    trackedConnections.delete(name);\n  }\n};\nconst findCallerName = (stack) => {\n  var _a, _b;\n  if (!stack) return void 0;\n  const traceLines = stack.split(\"\\n\");\n  const apiSetStateLineIndex = traceLines.findIndex(\n    (traceLine) => traceLine.includes(\"api.setState\")\n  );\n  if (apiSetStateLineIndex < 0) return void 0;\n  const callerLine = ((_a = traceLines[apiSetStateLineIndex + 1]) == null ? void 0 : _a.trim()) || \"\";\n  return (_b = /.+ (.+) .+/.exec(callerLine)) == null ? void 0 : _b[1];\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (e) {\n  }\n  if (!extensionConnector) {\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = (state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? {\n      type: anonymousActionType || findCallerName(new Error().stack) || \"anonymous\"\n    } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  };\n  api.devtools = {\n    cleanup: () => {\n      if (connection && typeof connection.unsubscribe === \"function\") {\n        connection.unsubscribe();\n      }\n      removeStoreFromTrackedConnections(options.name, store);\n    }\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...args) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && args[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...args);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format.\n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, fn) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) fn(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = (selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  };\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nfunction combine(initialState, create) {\n  return (...args) => Object.assign({}, initialState, create(...args));\n}\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(name, JSON.stringify(newValue, options == null ? void 0 : options.replacer)),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst persistImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            const migration = options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n            if (migration instanceof Promise) {\n              return migration.then((result) => [true, result]);\n            }\n            return [true, migration];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persist = persistImpl;\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\n","import { ActionEntry } from '@/types';\nimport { Settings } from '@/types/Settings';\nimport { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\nconst defaultSettings: Settings = {\n  locale: 'en',\n  gameMode: 'online',\n  boardUpdated: false,\n  room: 'PUBLIC',\n  background: 'color',\n  roomBackground: 'useAppBackground',\n  selectedActions: {},\n  hasSeenRollButton: false,\n  themeMode: 'system',\n  playerDialog: true,\n};\n\ninterface SettingsStore {\n  settings: Settings;\n  updateSettings: (partial: Partial<Settings>) => void;\n  setLocale: (locale: string) => void;\n  resetSettings: () => void;\n  updateSelectedAction: (key: string, actionEntry: ActionEntry | null) => void;\n  removeSelectedAction: (key: string) => void;\n  clearSelectedActions: () => void;\n  getSelectedActionsByType: (type: string) => Record<string, ActionEntry>;\n}\n\nexport const useSettingsStore = create<SettingsStore>()(\n  persist(\n    (set) => ({\n      settings: defaultSettings,\n      updateSettings: (partial) =>\n        set((state) => ({\n          settings: { ...state.settings, ...partial },\n        })),\n      setLocale: (locale) =>\n        set((state) => ({\n          settings: { ...state.settings, locale },\n        })),\n      resetSettings: () => set({ settings: defaultSettings }),\n      updateSelectedAction: (key, actionEntry) =>\n        set((state) => {\n          const newSelectedActions = { ...state.settings.selectedActions };\n          if (actionEntry === null) {\n            delete newSelectedActions[key];\n          } else {\n            newSelectedActions[key] = actionEntry;\n          }\n          return {\n            settings: { ...state.settings, selectedActions: newSelectedActions },\n          };\n        }),\n      removeSelectedAction: (key) =>\n        set((state) => {\n          const newSelectedActions = { ...state.settings.selectedActions };\n          delete newSelectedActions[key];\n          return {\n            settings: { ...state.settings, selectedActions: newSelectedActions },\n          };\n        }),\n      clearSelectedActions: () =>\n        set((state) => ({\n          settings: { ...state.settings, selectedActions: {} },\n        })),\n      getSelectedActionsByType: (type: string): Record<string, ActionEntry> => {\n        const { selectedActions = {} } = useSettingsStore.getState().settings;\n        const actions: Record<string, ActionEntry> = selectedActions || {};\n        return Object.entries(actions)\n          .filter(([, entry]: [string, ActionEntry]) => entry.type === type)\n          .reduce((acc: Record<string, ActionEntry>, [key, entry]: [string, ActionEntry]) => {\n            acc[key] = entry;\n            return acc;\n          }, {});\n      },\n    }),\n    {\n      name: 'gameSettings', // localStorage key\n      partialize: (state) => ({ settings: state.settings }),\n    }\n  )\n);\n\n// Compatibility hook for useLocalStorage('gameSettings') pattern\nexport const useSettings = (): [Settings, (partial: Partial<Settings>) => void] => {\n  const { settings, updateSettings } = useSettingsStore();\n  return [settings, updateSettings];\n};\n\n// Compatibility hook for useGameSettings() pattern\nexport const useGameSettings = () => {\n  const { settings, updateSettings } = useSettingsStore();\n  return { settings, updateSettings };\n};\n","import i18next, { InitOptions } from 'i18next';\n\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport { initReactI18next } from 'react-i18next';\nimport resourcesToBackend from 'i18next-resources-to-backend';\n\n// Configuration constants\nconst LANGUAGE_PRELOAD_TIMEOUT = 5000; // 5 second timeout for requestIdleCallback\n\nconst i18nOptions: InitOptions = {\n  fallbackLng: 'en',\n  supportedLngs: ['en', 'es', 'fr', 'zh', 'hi'],\n  ns: ['translation', 'errors'],\n  defaultNS: 'translation',\n  // debug: process.env.NODE_ENV === 'development',\n  interpolation: {\n    escapeValue: false, // React already safes from XSS\n  },\n  react: {\n    useSuspense: false, // Disable suspense to prevent issues with language switching\n  },\n  detection: {\n    order: ['querystring', 'cookie', 'localStorage', 'navigator', 'htmlTag'],\n    caches: ['localStorage', 'cookie'],\n  },\n  // Performance optimizations\n  load: 'currentOnly', // Only load current language initially\n  preload: false, // Don't preload all languages\n  cleanCode: true, // Clean language codes\n};\n\n// Lazy loading function for additional resources\nconst lazyLoadTranslations = (language: string, namespace: string) => {\n  // Only load specific locale files when actually needed\n  if (namespace === 'translation') {\n    return import(`./locales/${language}/translation.json`);\n  }\n\n  // For game-specific translations, load them on-demand\n  return import(`./locales/${language}/${namespace}.json`).catch(() => {\n    // Fallback to English if translation doesn't exist\n    return import(`./locales/en/${namespace}.json`);\n  });\n};\n\nconst i18n = i18next\n  .use(initReactI18next)\n  .use(LanguageDetector)\n  .use(resourcesToBackend(lazyLoadTranslations));\n\n// Initialize i18n with optimized background loading\ni18n\n  .init(i18nOptions)\n  .then(() => {\n    // Defer preloading other languages until after migration is handled\n    const scheduleLanguagePreloading = () => {\n      const currentLang = i18n.language;\n      const commonLangs = ['en', 'es', 'fr'].filter((lang) => lang !== currentLang);\n\n      // Use requestIdleCallback for better performance\n      if (typeof window !== 'undefined' && 'requestIdleCallback' in window) {\n        window.requestIdleCallback(\n          () => {\n            commonLangs.forEach((lang) => {\n              if (\n                i18n?.options?.supportedLngs &&\n                Array.isArray(i18n.options.supportedLngs) &&\n                i18n.options.supportedLngs.includes(lang)\n              ) {\n                i18n.loadLanguages(lang).catch(console.warn);\n              }\n            });\n          },\n          { timeout: LANGUAGE_PRELOAD_TIMEOUT }\n        ); // Timeout for requestIdleCallback\n      } else {\n        // Fallback with longer delay to allow app to become interactive first\n        setTimeout(() => {\n          commonLangs.forEach((lang) => {\n            if (\n              i18n?.options?.supportedLngs &&\n              Array.isArray(i18n.options.supportedLngs) &&\n              i18n.options.supportedLngs.includes(lang)\n            ) {\n              i18n.loadLanguages(lang).catch(console.warn);\n            }\n          });\n        }, LANGUAGE_PRELOAD_TIMEOUT); // Load other languages after timeout\n      }\n    };\n\n    // Delay language preloading to prioritize app startup\n    scheduleLanguagePreloading();\n  })\n  .catch(console.error);\n\nexport default i18n;\n","import { getAllAvailableGroups } from '@/stores/customGroups';\nimport { CustomGroupPull } from '@/types/customGroups';\n\n/**\n * Convert Dexie custom groups to the format expected by the old importActions function\n */\nexport const convertDexieGroupsToActions = (groups: CustomGroupPull[]): Record<string, any> => {\n  const actions: Record<string, any> = {};\n\n  for (const group of groups) {\n    // Convert the group to the expected format\n    const actionObj: any = {\n      label: group.label || group.name,\n      type: group.type || 'action',\n      actions: {\n        None: [], // Always include None as it's expected\n      },\n    };\n\n    // Convert intensities to actions format\n    if (group.intensities && Array.isArray(group.intensities)) {\n      for (const intensity of group.intensities) {\n        // For now, create empty arrays for each intensity\n        // The actual actions would come from custom tiles\n        actionObj.actions[intensity.label] = [];\n      }\n    }\n\n    actions[group.name] = actionObj;\n  }\n\n  return actions;\n};\n\n/**\n * Replacement for importActions from importLocales.ts\n * Gets actions from Dexie instead of JSON files\n */\nexport const importActions = async (\n  locale = 'en',\n  gameMode = 'online'\n): Promise<Record<string, any>> => {\n  try {\n    const groups = await getAllAvailableGroups(locale, gameMode);\n    return convertDexieGroupsToActions(groups);\n  } catch (error) {\n    console.error('Error importing actions from Dexie:', error);\n    return {};\n  }\n};\n","import { getAllAvailableGroups } from '@/stores/customGroups';\nimport { importActions } from '@/services/dexieActionImport';\n\nexport interface DataCompletenessReport {\n  isComplete: boolean;\n  missingGroups: string[];\n  corruptedGroups: string[];\n  totalExpectedGroups: number;\n  totalDexieGroups: number;\n  details: {\n    [groupName: string]: {\n      exists: boolean;\n      hasIntensities: boolean;\n      hasLabel: boolean;\n      expectedIntensities: number;\n      actualIntensities: number;\n    };\n  };\n}\n\n/**\n * Check if Dexie contains complete and valid data for a given locale and game mode\n * by comparing against the expected JSON structure\n */\nexport const checkDataCompleteness = async (\n  locale = 'en',\n  gameMode = 'online'\n): Promise<DataCompletenessReport> => {\n  const report: DataCompletenessReport = {\n    isComplete: false,\n    missingGroups: [],\n    corruptedGroups: [],\n    totalExpectedGroups: 0,\n    totalDexieGroups: 0,\n    details: {},\n  };\n\n  try {\n    // Get expected groups from JSON files\n    let expectedGroups: any = {};\n    try {\n      expectedGroups = await importActions(locale, gameMode);\n    } catch (error) {\n      console.warn(`Could not load expected actions for ${locale}/${gameMode}:`, error);\n      // If we can't load expected data, we can't validate completeness\n      return report;\n    }\n\n    const expectedGroupNames = Object.keys(expectedGroups);\n    report.totalExpectedGroups = expectedGroupNames.length;\n\n    // Get actual groups from Dexie\n    let dexieGroups: any[] = [];\n    try {\n      dexieGroups = await getAllAvailableGroups(locale, gameMode);\n    } catch (error) {\n      console.warn(`Could not load Dexie groups for ${locale}/${gameMode}:`, error);\n      return report;\n    }\n\n    report.totalDexieGroups = dexieGroups.length;\n\n    // Create a map of Dexie groups by name for quick lookup\n    const dexieGroupsMap = new Map(dexieGroups.map((group) => [group.name, group]));\n\n    // Check each expected group\n    for (const groupName of expectedGroupNames) {\n      const expectedGroup = expectedGroups[groupName];\n      const dexieGroup = dexieGroupsMap.get(groupName);\n\n      const groupDetail = {\n        exists: !!dexieGroup,\n        hasIntensities: false,\n        hasLabel: false,\n        expectedIntensities: 0,\n        actualIntensities: 0,\n      };\n\n      if (expectedGroup?.actions) {\n        // Count expected intensities (excluding 'None')\n        const expectedIntensityKeys = Object.keys(expectedGroup.actions).filter(\n          (key) => key !== 'None'\n        );\n        groupDetail.expectedIntensities = expectedIntensityKeys.length;\n      }\n\n      if (dexieGroup) {\n        groupDetail.hasLabel = !!dexieGroup.label;\n        groupDetail.hasIntensities =\n          Array.isArray(dexieGroup.intensities) && dexieGroup.intensities.length > 0;\n        groupDetail.actualIntensities = dexieGroup.intensities?.length || 0;\n\n        // Check if group is corrupted (missing essential data or incorrect intensity count)\n        const isCorrupted =\n          !groupDetail.hasLabel ||\n          !groupDetail.hasIntensities ||\n          (groupDetail.expectedIntensities > 0 &&\n            groupDetail.actualIntensities !== groupDetail.expectedIntensities);\n\n        if (isCorrupted) {\n          report.corruptedGroups.push(groupName);\n        }\n      } else {\n        report.missingGroups.push(groupName);\n      }\n\n      report.details[groupName] = groupDetail;\n    }\n\n    // Check if data is complete (no missing or corrupted groups)\n    report.isComplete =\n      report.missingGroups.length === 0 &&\n      report.corruptedGroups.length === 0 &&\n      report.totalDexieGroups >= report.totalExpectedGroups;\n\n    return report;\n  } catch (error) {\n    console.error('Error in checkDataCompleteness:', error);\n    return report;\n  }\n};\n\n/**\n * Quick check if Dexie data is complete without detailed analysis\n * This is optimized for performance and can be used for frequent checks\n */\nexport const isDexieDataComplete = async (locale = 'en', gameMode = 'online'): Promise<boolean> => {\n  try {\n    // Quick check: compare group counts first\n    const [expectedGroups, dexieGroups] = await Promise.all([\n      importActions(locale, gameMode).catch(() => ({})),\n      getAllAvailableGroups(locale, gameMode).catch(() => []),\n    ]);\n\n    const expectedCount = Object.keys(expectedGroups).length;\n    const dexieCount = dexieGroups.length;\n\n    // If counts don't match, definitely incomplete\n    if (dexieCount < expectedCount) {\n      return false;\n    }\n\n    // If counts match, do a quick validation of a few key groups\n    const expectedGroupNames = Object.keys(expectedGroups);\n    const dexieGroupNames = new Set(dexieGroups.map((g) => g.name));\n\n    // Check if all expected groups exist in Dexie\n    for (const groupName of expectedGroupNames) {\n      if (!dexieGroupNames.has(groupName)) {\n        return false;\n      }\n    }\n\n    // Basic validation passed\n    return true;\n  } catch (error) {\n    console.error('Error in isDexieDataComplete:', error);\n    return false;\n  }\n};\n\n/**\n * Get a summary of data completeness for debugging and monitoring\n */\nexport const getDataCompletenessSummary = async (\n  locale = 'en',\n  gameMode = 'online'\n): Promise<string> => {\n  try {\n    const report = await checkDataCompleteness(locale, gameMode);\n\n    let summary = `Data Completeness for ${locale}/${gameMode}:\\n`;\n    summary += `Overall: ${report.isComplete ? 'COMPLETE' : 'INCOMPLETE'}\\n`;\n    summary += `Expected groups: ${report.totalExpectedGroups}\\n`;\n    summary += `Dexie groups: ${report.totalDexieGroups}\\n`;\n\n    if (report.missingGroups.length > 0) {\n      summary += `Missing groups: ${report.missingGroups.join(', ')}\\n`;\n    }\n\n    if (report.corruptedGroups.length > 0) {\n      summary += `Corrupted groups: ${report.corruptedGroups.join(', ')}\\n`;\n    }\n\n    return summary;\n  } catch (error) {\n    return `Error generating completeness summary: ${error}`;\n  }\n};\n","import { isDexieDataComplete } from '@/services/dataCompletenessChecker';\nimport i18n from '@/i18n';\n\nexport interface MigrationHealthReport {\n  isHealthy: boolean;\n  requiresRecovery: boolean;\n  lastValidation: Date;\n  failureCount: number;\n  details: {\n    migrationStatus: 'completed' | 'failed' | 'incomplete';\n    dataComplete: boolean;\n    locale: string;\n    gameMode: string;\n    errorMessage?: string;\n  };\n}\n\ninterface MigrationHealthState {\n  [localeGameMode: string]: {\n    failureCount: number;\n    lastValidation: string; // ISO string for JSON serialization\n    consecutiveFailures: number;\n  };\n}\n\nconst HEALTH_CHECK_KEY = 'blitzed-out-migration-health';\nconst MAX_RETRY_ATTEMPTS = 3;\nconst MIN_VALIDATION_INTERVAL = 5 * 60 * 1000; // 5 minutes\n\n/**\n * Get stored health state from localStorage\n */\nconst getHealthState = (): MigrationHealthState => {\n  try {\n    const stored = localStorage.getItem(HEALTH_CHECK_KEY);\n    return stored ? JSON.parse(stored) : {};\n  } catch (error) {\n    console.warn('Failed to load migration health state:', error);\n    return {};\n  }\n};\n\n/**\n * Update health state in localStorage\n */\nconst updateHealthState = (\n  locale: string,\n  gameMode: string,\n  update: Partial<MigrationHealthState[string]>\n): void => {\n  try {\n    const key = `${locale}-${gameMode}`;\n    const state = getHealthState();\n\n    state[key] = {\n      ...{\n        failureCount: 0,\n        lastValidation: new Date().toISOString(),\n        consecutiveFailures: 0,\n      },\n      ...state[key],\n      ...update,\n    };\n\n    localStorage.setItem(HEALTH_CHECK_KEY, JSON.stringify(state));\n  } catch (error) {\n    console.warn('Failed to update migration health state:', error);\n  }\n};\n\n/**\n * Check if migration is healthy for the given locale and game mode\n * This performs a comprehensive check of migration status and data integrity\n */\nexport const checkMigrationHealth = async (\n  locale?: string,\n  gameMode: string = 'online'\n): Promise<MigrationHealthReport> => {\n  const targetLocale = locale || i18n.resolvedLanguage || i18n.language || 'en';\n  const key = `${targetLocale}-${gameMode}`;\n  const healthState = getHealthState();\n  const storedState = healthState[key] || {\n    failureCount: 0,\n    lastValidation: new Date(0).toISOString(),\n    consecutiveFailures: 0,\n  };\n\n  // Ensure lastValidation is a Date object for calculations\n  const currentState = {\n    ...storedState,\n    lastValidation: new Date(storedState.lastValidation),\n  };\n\n  const report: MigrationHealthReport = {\n    isHealthy: false,\n    requiresRecovery: false,\n    lastValidation: currentState.lastValidation,\n    failureCount: currentState.failureCount,\n    details: {\n      migrationStatus: 'incomplete',\n      dataComplete: false,\n      locale: targetLocale,\n      gameMode,\n    },\n  };\n\n  try {\n    // Skip validation if we just validated recently (unless we have failures)\n    const timeSinceLastValidation = Date.now() - currentState.lastValidation.getTime();\n    if (\n      timeSinceLastValidation < MIN_VALIDATION_INTERVAL &&\n      currentState.consecutiveFailures === 0\n    ) {\n      // Return cached result if we validated recently and had no failures\n      report.isHealthy = true;\n      report.details.migrationStatus = 'completed';\n      report.details.dataComplete = true;\n      return report;\n    }\n\n    // Check if data is complete in Dexie\n    const dataComplete = await isDexieDataComplete(targetLocale, gameMode);\n    report.details.dataComplete = dataComplete;\n\n    if (dataComplete) {\n      // Data is complete, migration is healthy\n      report.isHealthy = true;\n      report.details.migrationStatus = 'completed';\n\n      // Reset failure counters on success\n      updateHealthState(targetLocale, gameMode, {\n        consecutiveFailures: 0,\n        lastValidation: new Date().toISOString(),\n      });\n    } else {\n      // Data is incomplete, check migration status\n      const migrationStatus = checkMigrationStatusFromStorage();\n      report.details.migrationStatus = migrationStatus;\n\n      // Increment failure count\n      const newFailureCount = currentState.failureCount + 1;\n      const newConsecutiveFailures = currentState.consecutiveFailures + 1;\n\n      updateHealthState(targetLocale, gameMode, {\n        failureCount: newFailureCount,\n        consecutiveFailures: newConsecutiveFailures,\n        lastValidation: new Date().toISOString(),\n      });\n\n      report.failureCount = newFailureCount;\n      report.requiresRecovery = newConsecutiveFailures >= MAX_RETRY_ATTEMPTS;\n\n      if (report.requiresRecovery) {\n        report.details.errorMessage = `Migration failed ${newConsecutiveFailures} consecutive times. Data incomplete for ${targetLocale}/${gameMode}.`;\n      }\n    }\n\n    return report;\n  } catch (error) {\n    console.error('Migration health check failed:', error);\n\n    // Increment failure count\n    const newFailureCount = currentState.failureCount + 1;\n    const newConsecutiveFailures = currentState.consecutiveFailures + 1;\n\n    updateHealthState(targetLocale, gameMode, {\n      failureCount: newFailureCount,\n      consecutiveFailures: newConsecutiveFailures,\n      lastValidation: new Date().toISOString(),\n    });\n\n    report.failureCount = newFailureCount;\n    report.requiresRecovery = newConsecutiveFailures >= MAX_RETRY_ATTEMPTS;\n    report.details.migrationStatus = 'failed';\n    report.details.errorMessage = `Health check failed: ${error instanceof Error ? error.message : String(error)}`;\n\n    return report;\n  }\n};\n\n/**\n * Check migration status from localStorage\n */\nconst checkMigrationStatusFromStorage = (): 'completed' | 'failed' | 'incomplete' => {\n  try {\n    // Check main migration status\n    const mainStatus = localStorage.getItem('blitzed-out-action-groups-migration');\n    if (mainStatus) {\n      const parsed = JSON.parse(mainStatus);\n      if (parsed.completed && parsed.version === '2.1.1') {\n        return 'completed';\n      }\n    }\n\n    // Check background migration status\n    const bgStatus = localStorage.getItem('blitzed-out-background-migration');\n    if (bgStatus) {\n      const parsed = JSON.parse(bgStatus);\n      if (parsed.completedLanguages && parsed.completedLanguages.length > 0) {\n        return 'completed';\n      }\n    }\n\n    return 'incomplete';\n  } catch (error) {\n    console.warn('Failed to check migration status from storage:', error);\n    return 'incomplete';\n  }\n};\n\n/**\n * Attempt to recover from a failed migration\n * This clears migration locks and status, forcing a fresh migration attempt\n */\nexport const recoverFromFailedMigration = async (\n  locale?: string,\n  gameMode: string = 'online'\n): Promise<boolean> => {\n  const targetLocale = locale || i18n.resolvedLanguage || i18n.language || 'en';\n\n  try {\n    // Clear migration locks and status to force fresh migration\n    const keysToRemove = [\n      'blitzed-out-migration-in-progress',\n      'blitzed-out-current-language-migration',\n      'blitzed-out-background-migration-in-progress',\n    ];\n\n    let hasErrors = false;\n    keysToRemove.forEach((key) => {\n      try {\n        localStorage.removeItem(key);\n      } catch (error) {\n        console.warn(`Failed to remove ${key}:`, error);\n        hasErrors = true;\n      }\n    });\n\n    // Reset health state for this locale/gameMode\n    try {\n      updateHealthState(targetLocale, gameMode, {\n        failureCount: 0,\n        consecutiveFailures: 0,\n        lastValidation: new Date(0).toISOString(), // Force revalidation\n      });\n    } catch (error) {\n      console.warn('Failed to update health state:', error);\n      hasErrors = true;\n    }\n\n    if (hasErrors) {\n      return false;\n    }\n\n    return true;\n  } catch (error) {\n    console.error('Migration recovery failed:', error);\n    return false;\n  }\n};\n\n/**\n * Force a complete migration reset (nuclear option)\n * This removes all migration status and forces a complete re-migration\n */\nexport const forceCompleteMigrationReset = (): boolean => {\n  try {\n    const keysToRemove = [\n      'blitzed-out-action-groups-migration',\n      'blitzed-out-background-migration',\n      'blitzed-out-migration-in-progress',\n      'blitzed-out-current-language-migration',\n      'blitzed-out-background-migration-in-progress',\n      HEALTH_CHECK_KEY,\n    ];\n\n    keysToRemove.forEach((key) => {\n      try {\n        localStorage.removeItem(key);\n      } catch (error) {\n        console.warn(`Failed to remove ${key}:`, error);\n      }\n    });\n\n    return true;\n  } catch (error) {\n    console.error('Complete migration reset failed:', error);\n    return false;\n  }\n};\n\n/**\n * Get a summary of migration health across all locales and game modes\n */\nexport const getMigrationHealthSummary = async (): Promise<string> => {\n  try {\n    const locales = ['en', 'es', 'fr', 'zh', 'hi'];\n    const gameModes = ['online', 'local'];\n\n    let summary = 'Migration Health Summary:\\n';\n    let totalChecked = 0;\n    let totalHealthy = 0;\n    let totalRequireRecovery = 0;\n\n    for (const locale of locales) {\n      for (const gameMode of gameModes) {\n        try {\n          const report = await checkMigrationHealth(locale, gameMode);\n          totalChecked++;\n\n          if (report.isHealthy) {\n            totalHealthy++;\n          }\n\n          if (report.requiresRecovery) {\n            totalRequireRecovery++;\n            summary += ` ${locale}/${gameMode}: REQUIRES RECOVERY (${report.failureCount} failures)\\n`;\n          } else if (!report.isHealthy) {\n            summary += `  ${locale}/${gameMode}: UNHEALTHY (${report.failureCount} failures)\\n`;\n          }\n        } catch (error) {\n          totalChecked++;\n          summary += ` ${locale}/${gameMode}: CHECK FAILED - ${error}\\n`;\n        }\n      }\n    }\n\n    summary += `\\nOverall: ${totalHealthy}/${totalChecked} healthy`;\n    if (totalRequireRecovery > 0) {\n      summary += `, ${totalRequireRecovery} require recovery`;\n    }\n\n    return summary;\n  } catch (error) {\n    return `Error generating migration health summary: ${error}`;\n  }\n};\n","import React, { createContext, useContext, useEffect, useState, useCallback, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  checkMigrationHealth,\n  recoverFromFailedMigration,\n} from '@/services/migrationHealthChecker';\n\n/**\n * Context value interface for migration state management.\n * Provides centralized migration control and status tracking.\n */\ninterface MigrationContextValue {\n  /** Whether all supported languages have been migrated */\n  isMigrationCompleted: boolean;\n  /** Whether any migration operation is currently in progress */\n  isMigrationInProgress: boolean;\n  /** Whether the current language has been successfully migrated */\n  currentLanguageMigrated: boolean;\n  /** Any error that occurred during migration (non-blocking) */\n  error: string | null;\n  /** Whether the migration system is healthy and data is complete */\n  isHealthy: boolean;\n  /** Whether automatic recovery has been attempted */\n  recoveryAttempted: boolean;\n  /** Trigger migration for the current language */\n  triggerMigration: () => Promise<void>;\n  /** Ensure a specific language is migrated */\n  ensureLanguageMigrated: (locale?: string) => Promise<boolean>;\n  /** Force recovery from failed migration */\n  forceRecovery: () => Promise<void>;\n}\n\nconst MigrationContext = createContext<MigrationContextValue | undefined>(undefined);\n\n/**\n * Hook to access migration context.\n * Must be used within a MigrationProvider.\n *\n * @throws {Error} When used outside of MigrationProvider\n * @returns Migration context value with state and control functions\n */\n// eslint-disable-next-line react-refresh/only-export-components\nexport function useMigration() {\n  const context = useContext(MigrationContext);\n  if (context === undefined) {\n    throw new Error('useMigration must be used within a MigrationProvider');\n  }\n  return context;\n}\n\ninterface MigrationProviderProps {\n  children: React.ReactNode;\n}\n\n/**\n * Migration context provider that manages language file migration state.\n * Handles automatic migration on language changes with intelligent debouncing.\n *\n * ## Migration Lifecycle:\n * 1. **Initialization**: Checks migration status for current language\n * 2. **Language Change Detection**: Listens for i18next language changes\n * 3. **Debounced Migration**: Prevents duplicate migrations during rapid language switches\n * 4. **Status Updates**: Broadcasts migration state to all consuming components\n * 5. **Error Handling**: Graceful fallbacks when migration fails\n *\n * ## Key Features:\n * - **Lazy Loading**: Migration service loaded only when needed\n * - **Debouncing**: 300ms debounce prevents unnecessary migration attempts\n * - **Automatic Triggers**: Migrates new languages automatically\n * - **Status Tracking**: Comprehensive state management for all components\n * - **Error Resilience**: App continues functioning even if migration fails\n *\n * ## Usage:\n * Wrap your app with MigrationProvider at the root level, above all other providers\n * that might need access to migrated data.\n *\n * @example\n * ```tsx\n * function App() {\n *   return (\n *     <MigrationProvider>\n *       <AuthProvider>\n *         <Router>\n *           <AppRoutes />\n *         </Router>\n *       </AuthProvider>\n *     </MigrationProvider>\n *   );\n * }\n * ```\n */\nexport function MigrationProvider({ children }: MigrationProviderProps) {\n  const { i18n } = useTranslation();\n  const [isMigrationInProgress, setIsMigrationInProgress] = useState(false);\n  const [currentLanguageMigrated, setCurrentLanguageMigrated] = useState(false);\n  const [isMigrationCompleted, setIsMigrationCompleted] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isHealthy, setIsHealthy] = useState(false);\n  const [recoveryAttempted, setRecoveryAttempted] = useState(false);\n  const [languageChangeTimeout, setLanguageChangeTimeout] = useState<NodeJS.Timeout | null>(null);\n  const migrationAttemptedRef = useRef<Set<string>>(new Set());\n\n  // Lazy load migration service to avoid blocking main bundle\n  const loadMigrationService = useCallback(async () => {\n    const migrationService = await import('@/services/migrationService');\n    return migrationService;\n  }, []);\n\n  // Check migration status and health on mount\n  useEffect(() => {\n    const checkMigrationStatus = async () => {\n      try {\n        const migrationService = await loadMigrationService();\n        const currentLocale = i18n.language || 'en';\n\n        // First check if migration status is corrupted\n        const integrityOk = await migrationService.verifyMigrationIntegrity(\n          currentLocale,\n          'online'\n        );\n\n        if (!integrityOk) {\n          migrationService.fixMigrationStatusCorruption();\n          // After reset, re-check status\n          setCurrentLanguageMigrated(false);\n          setIsMigrationCompleted(false);\n          return;\n        }\n\n        const isCurrentMigrated =\n          migrationService.isCurrentLanguageMigrationCompleted(currentLocale);\n        const isAllMigrated = migrationService.isMigrationCompleted();\n\n        setCurrentLanguageMigrated(isCurrentMigrated);\n        setIsMigrationCompleted(isAllMigrated);\n\n        // Perform health check if migration appears complete but we want to verify data integrity\n        if (isCurrentMigrated) {\n          const healthReport = await checkMigrationHealth(currentLocale, 'online');\n          setIsHealthy(healthReport.isHealthy);\n\n          // If migration claims to be complete but health check fails, attempt recovery\n          if (!healthReport.isHealthy && healthReport.requiresRecovery && !recoveryAttempted) {\n            setRecoveryAttempted(true);\n            const recovered = await recoverFromFailedMigration(currentLocale, 'online');\n\n            if (recovered) {\n              // Trigger a fresh migration attempt after recovery\n              setCurrentLanguageMigrated(false);\n              setError(null);\n            } else {\n              setError('Migration recovery failed. Some features may not work correctly.');\n            }\n          }\n        }\n      } catch (error) {\n        console.warn('Failed to check migration status:', error);\n        setError('Failed to check migration status');\n        setIsHealthy(false);\n      }\n    };\n\n    // Only check status after i18n is initialized\n    if (i18n.language && i18n.language !== 'undefined') {\n      checkMigrationStatus();\n    }\n  }, [i18n.language, loadMigrationService, recoveryAttempted]);\n\n  const forceRecovery = useCallback(async () => {\n    const currentLocale = i18n.language || 'en';\n\n    try {\n      setIsMigrationInProgress(true);\n      setError(null);\n\n      const recovered = await recoverFromFailedMigration(currentLocale, 'online');\n\n      if (recovered) {\n        setRecoveryAttempted(true);\n        setCurrentLanguageMigrated(false);\n        setIsHealthy(false);\n\n        // Trigger fresh migration after recovery\n        const migrationService = await loadMigrationService();\n        const success = await migrationService.runMigrationIfNeeded();\n\n        if (success) {\n          await migrationService.cleanupDuplicatesIfNeeded();\n          setCurrentLanguageMigrated(true);\n          setIsMigrationCompleted(migrationService.isMigrationCompleted());\n\n          // Re-check health after successful migration\n          const healthReport = await checkMigrationHealth(currentLocale, 'online');\n          setIsHealthy(healthReport.isHealthy);\n        }\n      } else {\n        setError('Force recovery failed. Please try refreshing the page.');\n      }\n    } catch (error) {\n      console.error('Force recovery failed:', error);\n      setError('Force recovery failed. Please try refreshing the page.');\n    } finally {\n      setIsMigrationInProgress(false);\n    }\n  }, [i18n.language, loadMigrationService]);\n\n  const triggerMigration = useCallback(async () => {\n    if (isMigrationInProgress) return;\n\n    setIsMigrationInProgress(true);\n    setError(null);\n\n    try {\n      const migrationService = await loadMigrationService();\n      const success = await migrationService.runMigrationIfNeeded();\n\n      if (success) {\n        // Clean up any duplicates\n        await migrationService.cleanupDuplicatesIfNeeded();\n\n        setCurrentLanguageMigrated(true);\n        setIsMigrationCompleted(migrationService.isMigrationCompleted());\n\n        // Perform health check after successful migration\n        const currentLocale = i18n.language || 'en';\n        const healthReport = await checkMigrationHealth(currentLocale, 'online');\n        setIsHealthy(healthReport.isHealthy);\n\n        // If health check fails immediately after migration, something is wrong\n        if (!healthReport.isHealthy) {\n          setError(\n            'Migration completed but data validation failed. Some features may not work correctly.'\n          );\n        }\n      } else {\n        setError('Migration failed but app will continue with existing data');\n        setIsHealthy(false);\n      }\n    } catch (error) {\n      console.error('Migration failed:', error);\n      setError('Migration failed but app will continue with existing data');\n      setIsHealthy(false);\n    } finally {\n      setIsMigrationInProgress(false);\n    }\n  }, [isMigrationInProgress, loadMigrationService, i18n.language]);\n\n  // Debounced language change handler\n  const handleLanguageChange = useCallback(\n    (newLanguage: string) => {\n      // Clear any existing timeout\n      if (languageChangeTimeout) {\n        clearTimeout(languageChangeTimeout);\n      }\n\n      // Debounce language changes by 300ms to handle rapid switches\n      const timeout = setTimeout(async () => {\n        try {\n          const migrationService = await loadMigrationService();\n\n          // Check if this language is already migrated\n          if (migrationService.isCurrentLanguageMigrationCompleted(newLanguage)) {\n            setCurrentLanguageMigrated(true);\n            return;\n          }\n\n          // Trigger migration for the new language\n          setIsMigrationInProgress(true);\n          setError(null);\n\n          const success = await migrationService.ensureLanguageMigrated(newLanguage);\n\n          if (success) {\n            setCurrentLanguageMigrated(true);\n            // Update overall migration status\n            setIsMigrationCompleted(migrationService.isMigrationCompleted());\n          } else {\n            setError('Migration failed but app will continue with existing data');\n          }\n        } catch (err) {\n          console.error('Error during language migration:', err);\n          setError('Migration failed but app will continue with existing data');\n        } finally {\n          setIsMigrationInProgress(false);\n        }\n      }, 300);\n\n      setLanguageChangeTimeout(timeout);\n    },\n    [languageChangeTimeout, loadMigrationService]\n  );\n\n  const ensureLanguageMigrated = useCallback(\n    async (locale?: string): Promise<boolean> => {\n      const targetLocale = locale || i18n.language || 'en';\n\n      try {\n        const migrationService = await loadMigrationService();\n\n        // Check if already migrated\n        if (migrationService.isCurrentLanguageMigrationCompleted(targetLocale)) {\n          setCurrentLanguageMigrated(true);\n          return true;\n        }\n\n        // Trigger migration if needed\n        setIsMigrationInProgress(true);\n        const success = await migrationService.ensureLanguageMigrated(targetLocale);\n\n        if (success) {\n          setCurrentLanguageMigrated(true);\n        }\n\n        return success;\n      } catch (error) {\n        console.error(`Failed to ensure ${targetLocale} migration:`, error);\n        return false;\n      } finally {\n        setIsMigrationInProgress(false);\n      }\n    },\n    [i18n.language, loadMigrationService]\n  );\n\n  // Listen for i18next language changes\n  useEffect(() => {\n    if (!i18n.language || i18n.language === 'undefined') return;\n\n    // Set up language change listener\n    const languageChangedHandler = (lng: string) => {\n      handleLanguageChange(lng);\n    };\n\n    // Subscribe to language change events\n    i18n.on('languageChanged', languageChangedHandler);\n\n    // Initial migration check for current language\n    const checkInitialLanguage = async () => {\n      try {\n        const migrationService = await loadMigrationService();\n        const currentLocale = i18n.language || 'en';\n\n        const isCompleted = migrationService.isCurrentLanguageMigrationCompleted(currentLocale);\n        setCurrentLanguageMigrated(isCompleted);\n\n        // SAFETY: Only trigger migration if not already in progress, not completed, and not attempted\n        const migrationKey = `${currentLocale}-initial`;\n        if (\n          !isCompleted &&\n          !isMigrationInProgress &&\n          !migrationAttemptedRef.current.has(migrationKey)\n        ) {\n          // Mark as attempted to prevent React Strict Mode double-invoke\n          migrationAttemptedRef.current.add(migrationKey);\n\n          // Set in progress IMMEDIATELY to prevent infinite loop\n          setIsMigrationInProgress(true);\n\n          // Use setTimeout to break out of the current execution cycle\n          setTimeout(async () => {\n            try {\n              const migrationService = await loadMigrationService();\n              const success = await migrationService.ensureLanguageMigrated(currentLocale);\n\n              if (success) {\n                setCurrentLanguageMigrated(true);\n                setIsMigrationCompleted(migrationService.isMigrationCompleted());\n              } else {\n                setError('Migration failed but app will continue with existing data');\n                // Remove from attempted set if failed so it can be retried\n                migrationAttemptedRef.current.delete(migrationKey);\n              }\n            } catch (err) {\n              console.error('Error during migration execution:', err);\n              setError('Migration failed but app will continue with existing data');\n              // Remove from attempted set if failed so it can be retried\n              migrationAttemptedRef.current.delete(migrationKey);\n            } finally {\n              setIsMigrationInProgress(false);\n            }\n          }, 0);\n        }\n      } catch (err) {\n        console.error('Error during initial migration check:', err);\n        setIsMigrationInProgress(false);\n      }\n    };\n\n    checkInitialLanguage();\n\n    // Cleanup subscription on unmount\n    return () => {\n      i18n.off('languageChanged', languageChangedHandler);\n      if (languageChangeTimeout) {\n        clearTimeout(languageChangeTimeout);\n      }\n    };\n  }, [\n    i18n,\n    handleLanguageChange,\n    isMigrationInProgress,\n    languageChangeTimeout,\n    loadMigrationService,\n  ]);\n\n  const value: MigrationContextValue = {\n    isMigrationCompleted,\n    isMigrationInProgress,\n    currentLanguageMigrated,\n    error,\n    isHealthy,\n    recoveryAttempted,\n    triggerMigration,\n    ensureLanguageMigrated,\n    forceRecovery,\n  };\n\n  return <MigrationContext.Provider value={value}>{children}</MigrationContext.Provider>;\n}\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",c=\"month\",f=\"quarter\",h=\"year\",d=\"date\",l=\"Invalid Date\",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),ordinal:function(t){var e=[\"th\",\"st\",\"nd\",\"rd\"],n=t%100;return\"[\"+t+(e[(n-20)%10]||e[n]||e[0])+\"]\"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),s=n-i<0,u=e.clone().add(r+(s?-1:1),c);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:f}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},g=\"en\",D={};D[g]=M;var p=\"$isDayjsObject\",S=function(t){return t instanceof _||!(!t||!t[p])},w=function t(e,n,r){var i;if(!e)return g;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},O=function(t,e){if(S(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},b=v;b.l=w,b.i=S,b.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[p]=!0}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return b},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=O(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return O(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<O(t)},m.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!b.u(e)||e,f=b.p(t),l=function(t,e){var i=b.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return b.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v=\"set\"+(this.$u?\"UTC\":\"\");switch(f){case h:return r?l(1,0):l(31,11);case c:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+\"Hours\",0);case u:return $(v+\"Minutes\",1);case s:return $(v+\"Seconds\",2);case i:return $(v+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=b.p(t),f=\"set\"+(this.$u?\"UTC\":\"\"),l=(n={},n[a]=f+\"Date\",n[d]=f+\"Date\",n[c]=f+\"Month\",n[h]=f+\"FullYear\",n[u]=f+\"Hours\",n[s]=f+\"Minutes\",n[i]=f+\"Seconds\",n[r]=f+\"Milliseconds\",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===c||o===h){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[b.p(t)]()},m.add=function(r,f){var d,l=this;r=Number(r);var $=b.p(f),y=function(t){var e=O(l);return b.w(e.date(e.date()+Math.round(t*r)),l)};if($===c)return this.set(c,this.$M+r);if($===h)return this.set(h,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return b.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=b.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,c=n.months,f=n.meridiem,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},d=function(t){return b.s(s%12||12,t,\"0\")},$=f||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r};return r.replace(y,(function(t,r){return r||function(t){switch(t){case\"YY\":return String(e.$y).slice(-2);case\"YYYY\":return b.s(e.$y,4,\"0\");case\"M\":return a+1;case\"MM\":return b.s(a+1,2,\"0\");case\"MMM\":return h(n.monthsShort,a,c,3);case\"MMMM\":return h(c,a);case\"D\":return e.$D;case\"DD\":return b.s(e.$D,2,\"0\");case\"d\":return String(e.$W);case\"dd\":return h(n.weekdaysMin,e.$W,o,2);case\"ddd\":return h(n.weekdaysShort,e.$W,o,3);case\"dddd\":return o[e.$W];case\"H\":return String(s);case\"HH\":return b.s(s,2,\"0\");case\"h\":return d(1);case\"hh\":return d(2);case\"a\":return $(s,u,!0);case\"A\":return $(s,u,!1);case\"m\":return String(u);case\"mm\":return b.s(u,2,\"0\");case\"s\":return String(e.$s);case\"ss\":return b.s(e.$s,2,\"0\");case\"SSS\":return b.s(e.$ms,3,\"0\");case\"Z\":return i}return null}(t)||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=this,M=b.p(d),m=O(r),v=(m.utcOffset()-this.utcOffset())*e,g=this-m,D=function(){return b.m(y,m)};switch(M){case h:$=D()/12;break;case c:$=D();break;case f:$=D()/3;break;case o:$=(g-v)/6048e5;break;case a:$=(g-v)/864e5;break;case u:$=g/n;break;case s:$=g/e;break;case i:$=g/t;break;default:$=g}return l?$:b.a($)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return b.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),k=_.prototype;return O.prototype=k,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",c],[\"$y\",h],[\"$D\",d]].forEach((function(t){k[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),O.extend=function(t,e){return t.$i||(t(e,_,O),t.$i=!0),O},O.locale=w,O.isDayjs=S,O.unix=function(t){return O(1e3*t)},O.en=D[g],O.Ls=D,O.p={},O}));","import { create } from 'zustand';\nimport { ScheduleItem } from '@/context/schedule';\nimport dayjs from 'dayjs';\n\n// Performance tracking and caching\ninterface ScheduleCache {\n  upcomingSchedule: { data: ScheduleItem[]; timestamp: number; limit: number };\n  roomSchedule: Record<string, { data: ScheduleItem[]; timestamp: number }>;\n}\n\ninterface PerformanceMetrics {\n  lastUpdateTime: number;\n  updateCount: number;\n  cacheHitRate: number;\n}\n\ninterface ScheduleStore {\n  // State\n  schedule: ScheduleItem[];\n  loading: boolean;\n  error: string | null;\n  _cache: ScheduleCache;\n  _performanceMetrics: PerformanceMetrics;\n  _pendingUpdates: ScheduleItem[];\n  _batchTimeout: NodeJS.Timeout | null;\n\n  // Actions\n  loadSchedule: (schedule: ScheduleItem[]) => void;\n  addScheduleItem: (item: ScheduleItem) => void;\n  removeScheduleItem: (id: string) => void;\n  clearSchedule: () => void;\n  setLoading: (loading: boolean) => void;\n  setError: (error: string | null) => void;\n\n  // Performance optimized actions\n  batchAddScheduleItems: (items: ScheduleItem[]) => void;\n  flushPendingScheduleUpdates: () => void;\n  invalidateCache: () => void;\n\n  // Selectors with caching\n  getUpcomingSchedule: (limit?: number) => ScheduleItem[];\n  getScheduleByRoom: (room: string) => ScheduleItem[];\n  getPerformanceMetrics: () => PerformanceMetrics;\n}\n\n// Cache timeout for schedule data (5 minutes)\nconst CACHE_TIMEOUT = 5 * 60 * 1000;\nconst SCHEDULE_BATCH_DELAY = 100; // 100ms debounce for schedule updates\n\nexport const useScheduleStore = create<ScheduleStore>((set, get) => ({\n  // State\n  schedule: [],\n  loading: false,\n  error: null,\n  _cache: {\n    upcomingSchedule: { data: [], timestamp: 0, limit: 0 },\n    roomSchedule: {},\n  },\n  _performanceMetrics: {\n    lastUpdateTime: Date.now(),\n    updateCount: 0,\n    cacheHitRate: 0,\n  },\n  _pendingUpdates: [],\n  _batchTimeout: null,\n\n  // Actions\n  loadSchedule: (schedule) => {\n    const now = Date.now();\n    set((state) => {\n      const newUpdateCount = state._performanceMetrics.updateCount + 1;\n\n      return {\n        schedule,\n        loading: false,\n        error: null,\n        _performanceMetrics: {\n          lastUpdateTime: now,\n          updateCount: newUpdateCount,\n          cacheHitRate: state._performanceMetrics.cacheHitRate,\n        },\n      };\n    });\n\n    // Invalidate cache when new data is loaded\n    get().invalidateCache();\n  },\n\n  addScheduleItem: (item) => {\n    const state = get();\n\n    // Add item to pending updates\n    set((prevState) => ({\n      _pendingUpdates: [...prevState._pendingUpdates, item],\n    }));\n\n    // Clear existing timeout and set new one\n    if (state._batchTimeout) {\n      clearTimeout(state._batchTimeout);\n    }\n\n    const newTimeout = setTimeout(() => {\n      get().flushPendingScheduleUpdates();\n    }, SCHEDULE_BATCH_DELAY);\n\n    set(() => ({ _batchTimeout: newTimeout }));\n  },\n\n  batchAddScheduleItems: (items) =>\n    set((state) => {\n      const newSchedule = [...state.schedule, ...items];\n      const now = Date.now();\n      const newUpdateCount = state._performanceMetrics.updateCount + 1;\n\n      return {\n        schedule: newSchedule,\n        _performanceMetrics: {\n          lastUpdateTime: now,\n          updateCount: newUpdateCount,\n          cacheHitRate: state._performanceMetrics.cacheHitRate,\n        },\n      };\n    }),\n\n  flushPendingScheduleUpdates: () => {\n    const state = get();\n    if (state._pendingUpdates.length === 0) return;\n\n    // Clear the timeout as we're flushing now\n    if (state._batchTimeout) {\n      clearTimeout(state._batchTimeout);\n    }\n\n    state.batchAddScheduleItems(state._pendingUpdates);\n    set(() => ({\n      _pendingUpdates: [],\n      _batchTimeout: null,\n    }));\n    state.invalidateCache();\n  },\n\n  removeScheduleItem: (id) => {\n    set((state) => ({\n      schedule: state.schedule.filter((item) => item.id !== id),\n    }));\n    get().invalidateCache();\n  },\n\n  clearSchedule: () => {\n    const state = get();\n\n    // Clear any pending timeout\n    if (state._batchTimeout) {\n      clearTimeout(state._batchTimeout);\n    }\n\n    set(() => ({\n      schedule: [],\n      loading: false,\n      error: null,\n      _pendingUpdates: [],\n      _batchTimeout: null,\n    }));\n    get().invalidateCache();\n  },\n\n  invalidateCache: () =>\n    set(() => ({\n      _cache: {\n        upcomingSchedule: { data: [], timestamp: 0, limit: 0 },\n        roomSchedule: {},\n      },\n    })),\n\n  setLoading: (loading) => set(() => ({ loading })),\n\n  setError: (error) => set(() => ({ error, loading: false })),\n\n  // Selectors with caching\n  getUpcomingSchedule: (limit = 10) => {\n    const state = get();\n    const now = Date.now();\n\n    // Check cache validity\n    const cache = state._cache.upcomingSchedule;\n    const isCacheValid =\n      cache.timestamp > 0 && now - cache.timestamp < CACHE_TIMEOUT && cache.limit >= limit;\n\n    if (isCacheValid) {\n      // Update cache hit rate\n      const totalRequests = state._performanceMetrics.updateCount + 1;\n      const currentHits = state._performanceMetrics.cacheHitRate * (totalRequests - 1);\n      const newHitRate = (currentHits + 1) / totalRequests;\n\n      set((prevState) => ({\n        _performanceMetrics: {\n          ...prevState._performanceMetrics,\n          cacheHitRate: newHitRate,\n        },\n      }));\n\n      return cache.data.slice(0, limit);\n    }\n\n    // Calculate and cache result\n    const currentTime = dayjs();\n    const upcoming = state.schedule\n      .filter((item) => item.dateTime.isAfter(currentTime))\n      .sort((a, b) => a.dateTime.valueOf() - b.dateTime.valueOf())\n      .slice(0, Math.max(limit, 20)); // Cache extra items for future requests\n\n    // Update cache\n    set((prevState) => ({\n      _cache: {\n        ...prevState._cache,\n        upcomingSchedule: {\n          data: upcoming,\n          timestamp: now,\n          limit: Math.max(limit, 20),\n        },\n      },\n    }));\n\n    return upcoming.slice(0, limit);\n  },\n\n  getScheduleByRoom: (room) => {\n    const state = get();\n    const now = Date.now();\n\n    // Check cache validity\n    const cache = state._cache.roomSchedule[room];\n    const isCacheValid = cache && cache.timestamp > 0 && now - cache.timestamp < CACHE_TIMEOUT;\n\n    if (isCacheValid) {\n      // Update cache hit rate\n      const totalRequests = state._performanceMetrics.updateCount + 1;\n      const currentHits = state._performanceMetrics.cacheHitRate * (totalRequests - 1);\n      const newHitRate = (currentHits + 1) / totalRequests;\n\n      set((prevState) => ({\n        _performanceMetrics: {\n          ...prevState._performanceMetrics,\n          cacheHitRate: newHitRate,\n        },\n      }));\n\n      return cache.data;\n    }\n\n    // Calculate and cache result\n    const roomSchedule = state.schedule.filter((item) => item.room === room);\n\n    // Update cache\n    set((prevState) => ({\n      _cache: {\n        ...prevState._cache,\n        roomSchedule: {\n          ...prevState._cache.roomSchedule,\n          [room]: {\n            data: roomSchedule,\n            timestamp: now,\n          },\n        },\n      },\n    }));\n\n    return roomSchedule;\n  },\n\n  getPerformanceMetrics: () => {\n    const state = get();\n    return state._performanceMetrics;\n  },\n}));\n\n// Compatibility selectors for optimized subscriptions\nexport const useScheduleItems = () => useScheduleStore((state) => state.schedule);\nexport const useScheduleLoading = () => useScheduleStore((state) => state.loading);\nexport const useScheduleError = () => useScheduleStore((state) => state.error);\nexport const useUpcomingSchedule = (limit?: number) =>\n  useScheduleStore((state) => state.getUpcomingSchedule(limit));\n\n// Performance-optimized hooks\nexport const useSchedulePerformance = () =>\n  useScheduleStore((state) => state.getPerformanceMetrics());\n\n// Memoized selectors for better performance\nexport const useScheduleCount = () => useScheduleStore((state) => state.schedule.length);\nexport const useHasSchedule = () => useScheduleStore((state) => state.schedule.length > 0);\nexport const useScheduleByRoom = (room: string) =>\n  useScheduleStore((state) => state.getScheduleByRoom(room));\n\n// Cached selectors that prevent recalculation\nexport const useCachedUpcomingSchedule = (limit = 10) =>\n  useScheduleStore((state) => {\n    const cached = state._cache.upcomingSchedule;\n    const now = Date.now();\n    const isCacheValid =\n      cached.timestamp > 0 && now - cached.timestamp < 5 * 60 * 1000 && cached.limit >= limit;\n\n    return isCacheValid ? cached.data.slice(0, limit) : state.getUpcomingSchedule(limit);\n  });\n\n// Specific schedule item selectors\nexport const useScheduleItem = (id: string) =>\n  useScheduleStore((state) => state.schedule.find((item) => item.id === id));\n","import React, { useMemo, useEffect, useCallback, ReactNode, useRef } from 'react';\nimport { getSchedule, addSchedule } from '@/services/firebase';\nimport { DocumentReference, DocumentData } from 'firebase/firestore';\nimport dayjs from 'dayjs';\nimport { useScheduleStore } from '@/stores/scheduleStore';\n\nexport interface ScheduleItem {\n  id?: string;\n  dateTime: dayjs.Dayjs;\n  url: string;\n  room: string;\n  [key: string]: any;\n}\n\nexport interface ScheduleContextType {\n  schedule: ScheduleItem[];\n  addToSchedule: (\n    dateTime: Date,\n    url: string,\n    room?: string\n  ) => Promise<undefined | DocumentReference<DocumentData>>;\n}\n\n// eslint-disable-next-line react-refresh/only-export-components\nexport const ScheduleContext = React.createContext<ScheduleContextType | undefined>(undefined);\n\ninterface ScheduleProviderProps {\n  children: ReactNode;\n  [key: string]: any;\n}\n\nfunction ScheduleProvider(props: ScheduleProviderProps): JSX.Element {\n  const { schedule, loadSchedule, flushPendingScheduleUpdates } = useScheduleStore();\n  const unsubscribeRef = useRef<(() => void) | null>(null);\n\n  // Optimized schedule update handler\n  const handleScheduleUpdate = useCallback(\n    (newSchedule: Array<Record<string, unknown>>) => {\n      loadSchedule(newSchedule as unknown as ScheduleItem[]);\n    },\n    [loadSchedule]\n  );\n\n  // Memoized addToSchedule function to prevent unnecessary re-renders\n  const memoizedAddToSchedule = useCallback(\n    async (\n      dateTime: Date,\n      url: string,\n      room?: string\n    ): Promise<undefined | DocumentReference<DocumentData>> => {\n      try {\n        const result = await addSchedule(dateTime, url, room);\n        // Flush any pending updates after adding\n        flushPendingScheduleUpdates();\n        return result || undefined;\n      } catch (error) {\n        console.error('Error adding to schedule:', error);\n        throw error;\n      }\n    },\n    [flushPendingScheduleUpdates]\n  );\n\n  // Cleanup function for Firebase listener\n  const cleanup = useCallback(() => {\n    if (unsubscribeRef.current) {\n      unsubscribeRef.current();\n      unsubscribeRef.current = null;\n    }\n    // Flush any pending updates before cleanup\n    flushPendingScheduleUpdates();\n  }, [flushPendingScheduleUpdates]);\n\n  useEffect(() => {\n    // Clean up previous listener\n    cleanup();\n\n    // Set up new listener\n    unsubscribeRef.current = getSchedule(handleScheduleUpdate);\n\n    // Cleanup on unmount\n    return cleanup;\n  }, [handleScheduleUpdate, cleanup]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return cleanup;\n  }, [cleanup]);\n\n  // Memoized context value with stable references\n  const value: ScheduleContextType = useMemo(\n    () => ({\n      schedule,\n      addToSchedule: memoizedAddToSchedule,\n    }),\n    [schedule, memoizedAddToSchedule]\n  );\n\n  return <ScheduleContext.Provider value={value} {...props} />;\n}\n\nexport { ScheduleProvider };\n","import {\n  createTheme,\n  responsiveFontSizes,\n  Theme,\n  ThemeOptions,\n  ComponentsOverrides,\n} from '@mui/material';\n\n// Color constants for better maintainability\nconst COLOR_CONSTANTS = {\n  // Primary colors\n  LIGHT_CYAN: '8, 145, 178', // Light mode cyan\n  DARK_CYAN: '72, 219, 251', // Dark mode cyan\n  BRIGHT_CYAN: '34, 211, 238', // Bright cyan for focus states\n\n  // Border and text colors\n  LIGHT_BORDER: '75, 85, 99', // Light mode border\n  DARK_BORDER: '148, 163, 184', // Dark mode border\n} as const;\n\n// Base theme configuration shared between light and dark themes\nconst baseTheme = {\n  typography: {\n    h1: {\n      fontWeight: 700,\n      letterSpacing: '-0.025em',\n    },\n    h2: {\n      fontWeight: 700,\n      letterSpacing: '-0.025em',\n    },\n    h3: {\n      fontWeight: 600,\n      letterSpacing: '-0.025em',\n    },\n    h4: {\n      fontWeight: 600,\n    },\n    h5: {\n      fontWeight: 600,\n    },\n    h6: {\n      fontWeight: 600,\n    },\n    button: {\n      fontWeight: 500,\n      textTransform: 'none' as const,\n    },\n  },\n  shape: {\n    borderRadius: 8,\n  },\n} satisfies ThemeOptions;\n\n// Define common component overrides function\nconst createComponents = (_mode: 'light' | 'dark'): ThemeOptions['components'] => ({\n  MuiBox: {\n    variants: [\n      {\n        props: { variant: 'systemMessage' },\n        style: ({ theme, ownerState }: { theme: Theme; ownerState: any }) => {\n          const { transparent = false, fullWidth = false } = ownerState;\n\n          return {\n            background: transparent\n              ? theme.palette.systemMessage.transparent\n              : theme.palette.systemMessage.main,\n            border: 'none',\n            borderRadius: 16,\n            margin: '8px auto',\n            alignSelf: 'center',\n            padding: '8px 12px',\n            width: 'fit-content',\n            backdropFilter: transparent ? 'blur(4px)' : 'none',\n            WebkitBackdropFilter: transparent ? 'blur(4px)' : 'none',\n            transition: theme.transitions.create(['background-color', 'backdrop-filter'], {\n              duration: theme.transitions.duration.short,\n            }),\n            ...(fullWidth && {\n              maxWidth: '95%',\n              width: 'auto',\n            }),\n            [theme.breakpoints.down('sm')]: {\n              maxWidth: fullWidth ? '98%' : '95%',\n            },\n          };\n        },\n      },\n    ],\n  },\n  MuiButton: {\n    styleOverrides: {\n      root: {\n        borderRadius: 8,\n        padding: '8px 16px',\n        transition: 'all 0.3s ease',\n        textTransform: 'none',\n        fontWeight: 500,\n        '&:hover': {\n          transform: 'translateY(-1px)',\n        },\n      },\n      contained: ({ theme }: { theme: Theme }) => {\n        return {\n          background: theme.palette.primary.main,\n          boxShadow: 'none',\n          '&:hover': {\n            background: theme.palette.primary.dark,\n            boxShadow: 'none',\n            transform: 'translateY(-2px)',\n          },\n        };\n      },\n      outlined: ({ theme }: { theme: Theme }) => {\n        const isLight = theme.palette.mode === 'light';\n        return {\n          borderColor: `rgba(${isLight ? COLOR_CONSTANTS.LIGHT_CYAN : COLOR_CONSTANTS.DARK_CYAN}, 0.5)`, // Use darker cyan for light mode\n          color: theme.palette.primary.main,\n          '&:hover': {\n            borderColor: `rgba(${isLight ? COLOR_CONSTANTS.LIGHT_CYAN : COLOR_CONSTANTS.DARK_CYAN}, 0.8)`,\n            background: `rgba(${isLight ? COLOR_CONSTANTS.LIGHT_CYAN : COLOR_CONSTANTS.DARK_CYAN}, 0.1)`,\n            boxShadow: `0 0 20px rgba(${isLight ? COLOR_CONSTANTS.LIGHT_CYAN : COLOR_CONSTANTS.DARK_CYAN}, 0.3)`,\n          },\n        };\n      },\n    },\n  },\n  MuiCard: {\n    styleOverrides: {\n      root: () => {\n        return {\n          borderRadius: 12,\n          background: 'var(--container-background)',\n          backdropFilter: 'blur(15px)',\n          WebkitBackdropFilter: 'blur(15px)',\n          border: '1px solid var(--container-border)',\n          boxShadow: 'var(--shadow-lg)',\n          transition: 'all 0.3s ease',\n          '&:hover': {\n            transform: 'translateY(-2px)',\n            boxShadow: 'var(--shadow-xl)',\n          },\n        };\n      },\n    },\n  },\n  MuiPaper: {\n    styleOverrides: {\n      root: {\n        backgroundImage: 'none',\n      },\n      elevation1: ({ theme }) => {\n        const isLight = theme.palette.mode === 'light';\n        return {\n          boxShadow: isLight\n            ? '0 1px 3px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1)'\n            : '0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24)',\n        };\n      },\n      elevation2: ({ theme }) => {\n        const isLight = theme.palette.mode === 'light';\n        return {\n          boxShadow: isLight\n            ? '0 3px 6px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.06)'\n            : '0 3px 6px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.12)',\n        };\n      },\n      elevation4: ({ theme }) => {\n        const isLight = theme.palette.mode === 'light';\n        return {\n          boxShadow: isLight\n            ? '0 10px 20px rgba(0, 0, 0, 0.08), 0 3px 6px rgba(0, 0, 0, 0.05)'\n            : '0 10px 20px rgba(0, 0, 0, 0.15), 0 3px 6px rgba(0, 0, 0, 0.1)',\n        };\n      },\n    },\n  },\n  MuiTextField: {\n    styleOverrides: {\n      root: ({ theme }) => {\n        const isLight = theme.palette.mode === 'light';\n        return {\n          '& .MuiOutlinedInput-root': {\n            transition: 'border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out',\n            borderRadius: '8px',\n            '& .MuiOutlinedInput-notchedOutline': {\n              borderColor: isLight\n                ? `rgba(${COLOR_CONSTANTS.LIGHT_BORDER}, 0.4)`\n                : `rgba(${COLOR_CONSTANTS.DARK_BORDER}, 0.23)`, // Darker border for light mode\n            },\n            '&:hover .MuiOutlinedInput-notchedOutline': {\n              borderColor: isLight\n                ? `rgba(${COLOR_CONSTANTS.LIGHT_BORDER}, 0.6)`\n                : theme.palette.primary.main,\n            },\n            '&.Mui-focused .MuiOutlinedInput-notchedOutline': {\n              borderColor: theme.palette.primary.main,\n              boxShadow: `0 0 0 2px rgba(${isLight ? COLOR_CONSTANTS.LIGHT_CYAN : COLOR_CONSTANTS.BRIGHT_CYAN}, 0.2)`,\n            },\n            '& input::placeholder': {\n              color: isLight\n                ? `rgba(${COLOR_CONSTANTS.LIGHT_BORDER}, 0.7)`\n                : `rgba(${COLOR_CONSTANTS.DARK_BORDER}, 0.5)`, // Darker placeholder for light mode\n              opacity: 1,\n            },\n            '& textarea::placeholder': {\n              color: isLight\n                ? `rgba(${COLOR_CONSTANTS.LIGHT_BORDER}, 0.7)`\n                : `rgba(${COLOR_CONSTANTS.DARK_BORDER}, 0.5)`, // Darker placeholder for light mode\n              opacity: 1,\n            },\n          },\n          '& .MuiInputLabel-root': {\n            color: isLight\n              ? `rgba(${COLOR_CONSTANTS.LIGHT_BORDER}, 0.8)`\n              : `rgba(${COLOR_CONSTANTS.DARK_BORDER}, 0.7)`, // Darker label for light mode\n            '&.Mui-focused': {\n              color: theme.palette.primary.main,\n            },\n          },\n        };\n      },\n    },\n  },\n  MuiSelect: {\n    styleOverrides: {\n      root: ({ theme }) => {\n        const isLight = theme.palette.mode === 'light';\n        return {\n          borderRadius: '8px',\n          transition: 'border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out',\n          '& .MuiOutlinedInput-notchedOutline': {\n            borderColor: isLight\n              ? `rgba(${COLOR_CONSTANTS.LIGHT_BORDER}, 0.4)`\n              : `rgba(${COLOR_CONSTANTS.DARK_BORDER}, 0.23)`, // Darker border for light mode\n          },\n          '&:hover .MuiOutlinedInput-notchedOutline': {\n            borderColor: isLight\n              ? `rgba(${COLOR_CONSTANTS.LIGHT_BORDER}, 0.6)`\n              : theme.palette.primary.main,\n          },\n          '&.Mui-focused .MuiOutlinedInput-notchedOutline': {\n            borderColor: theme.palette.primary.main,\n            boxShadow: `0 0 0 2px rgba(${isLight ? COLOR_CONSTANTS.LIGHT_CYAN : COLOR_CONSTANTS.BRIGHT_CYAN}, 0.2)`,\n          },\n        };\n      },\n    },\n    defaultProps: {\n      MenuProps: {\n        disableScrollLock: true,\n        BackdropProps: {\n          invisible: true,\n        },\n        PaperProps: {\n          style: {\n            backdropFilter: 'none',\n            WebkitBackdropFilter: 'none',\n          },\n        },\n      },\n    },\n  },\n  MuiSwitch: {\n    styleOverrides: {\n      switchBase: ({ theme }) => ({\n        '&.Mui-checked': {\n          color: theme.palette.primary.main,\n          '& + .MuiSwitch-track': {\n            backgroundColor: theme.palette.primary.main,\n          },\n        },\n      }),\n    },\n  },\n  MuiSlider: {\n    styleOverrides: {\n      root: ({ theme }) => ({\n        color: theme.palette.primary.main,\n      }),\n    },\n  },\n  MuiCssBaseline: {\n    styleOverrides: {\n      body: ({ theme }: { theme: Theme }) => {\n        const isLight = theme.palette.mode === 'light';\n        return {\n          scrollbarWidth: 'thin',\n          scrollbarColor: isLight ? '#d1d5db transparent' : '#4b5563 transparent',\n          '&::-webkit-scrollbar': {\n            width: '8px',\n            height: '8px',\n          },\n          '&::-webkit-scrollbar-track': {\n            background: 'transparent',\n          },\n          '&::-webkit-scrollbar-thumb': {\n            background: isLight ? '#d1d5db' : '#4b5563',\n            borderRadius: '4px',\n          },\n          '&::-webkit-scrollbar-thumb:hover': {\n            background: isLight ? '#9ca3af' : '#6b7280',\n          },\n        };\n      },\n      // Add accessibility enhancements\n      '*': {\n        // High contrast mode support\n        '@media (forced-colors: active)': {\n          '&:focus': {\n            outline: '2px solid ButtonText !important',\n          },\n        },\n        // Reduced motion support\n        '@media (prefers-reduced-motion: reduce)': {\n          '&, &::before, &::after': {\n            animationDuration: '0.01ms !important',\n            animationIterationCount: '1 !important',\n            transitionDuration: '0.01ms !important',\n            scrollBehavior: 'auto !important',\n          },\n        },\n      },\n      // Enhanced focus visibility for keyboard navigation\n      '.keyboard-navigation *:focus': {\n        outline: '2px solid #22d3ee',\n        outlineOffset: '2px',\n      },\n    },\n  },\n  MuiAppBar: {\n    styleOverrides: {\n      root: () => {\n        return {\n          backgroundColor: 'var(--nav-background)',\n          borderBottom: '1px solid var(--nav-border)',\n          boxShadow: 'var(--nav-shadow)',\n        };\n      },\n    },\n  },\n  MuiContainer: {\n    styleOverrides: {\n      root: () => {\n        return {\n          '&.gradient-background': {\n            minHeight: '100vh',\n            background: 'var(--page-gradient)',\n            padding: '2rem 0',\n          },\n        };\n      },\n    },\n  },\n  MuiModal: {\n    styleOverrides: {\n      root: {\n        '&:not(.MuiPopover-root)': {\n          backdropFilter: 'blur(8px)',\n          WebkitBackdropFilter: 'blur(8px)',\n        },\n      },\n    },\n  },\n  MuiPopover: {\n    styleOverrides: {\n      root: {\n        '& .MuiModal-backdrop': {\n          backgroundColor: 'transparent',\n          backdropFilter: 'none',\n          WebkitBackdropFilter: 'none',\n        },\n      },\n    },\n  },\n  MuiDialog: {\n    styleOverrides: {\n      paper: () => {\n        return {\n          background: 'var(--color-surface)',\n          backdropFilter: 'blur(20px)',\n          WebkitBackdropFilter: 'blur(20px)',\n          border: '1px solid var(--nav-border)',\n          borderRadius: 'var(--border-radius-lg)',\n          boxShadow: 'var(--shadow-lg)',\n        };\n      },\n    },\n  },\n});\n\n// Extend the MUI theme type to include custom colors\ndeclare module '@mui/material/styles' {\n  interface Palette {\n    systemMessage: {\n      main: string;\n      transparent: string;\n    };\n  }\n\n  interface PaletteOptions {\n    systemMessage?: {\n      main: string;\n      transparent: string;\n    };\n  }\n}\n\n// Extend MUI Box to support custom variants\ndeclare module '@mui/material/Box' {\n  interface BoxPropsVariantOverrides {\n    systemMessage: true;\n  }\n}\n\n// Extend MUI theme components to include custom overrides\ndeclare module '@mui/material/styles' {\n  interface ComponentNameToClassKey {\n    MuiBox: 'root';\n  }\n\n  interface Components<Theme = unknown> {\n    MuiBox?: {\n      variants?: Array<{\n        props: Record<string, any>;\n        style:\n          | Record<string, any>\n          | ((props: { theme: Theme; ownerState: any }) => Record<string, any>);\n      }>;\n    } & ComponentsOverrides<Theme>['MuiBox'];\n  }\n}\n\n// Light theme configuration\nconst lightThemeOptions: ThemeOptions = {\n  ...baseTheme,\n  palette: {\n    mode: 'light',\n    primary: {\n      main: '#0891b2', // Cyan 600 - darker for better contrast on light background\n      dark: '#0e7490', // Cyan 700\n      light: '#22d3ee', // Cyan 400\n      contrastText: '#ffffff', // White text for better contrast\n    },\n    secondary: {\n      main: '#06b6d4', // Cyan 500 - slightly darker for better light mode contrast\n      dark: '#0e7490', // Cyan 700\n      light: '#a5f3fc', // Cyan 200\n      contrastText: '#ffffff', // White text for better contrast\n    },\n    background: {\n      default: '#f8fafc', // Slate 50\n      paper: '#ffffff', // Pure white\n    },\n    text: {\n      primary: '#0f172a', // Slate 900\n      secondary: '#475569', // Slate 600\n    },\n    divider: 'rgba(148, 163, 184, 0.2)', // Slate 400 with opacity for light mode\n    error: {\n      main: '#dc2626', // Red 600 - good contrast on light background\n    },\n    warning: {\n      main: '#d97706', // Amber 600 - good contrast on light background\n    },\n    systemMessage: {\n      main: 'rgba(148, 163, 184, 0.15)', // Slate 400 with low opacity for light mode\n      transparent: 'rgba(148, 163, 184, 0.25)', // Slate 400 with higher opacity for transparent mode\n    },\n    info: {\n      main: '#2563eb', // Blue 600 - good contrast on light background\n    },\n    success: {\n      main: '#059669', // Emerald 600 - good contrast on light background\n    },\n  },\n};\n\n// Dark theme configuration (existing theme adapted)\nconst darkThemeOptions: ThemeOptions = {\n  ...baseTheme,\n  palette: {\n    mode: 'dark',\n    primary: {\n      main: '#22d3ee', // Cyan 400\n      dark: '#0891b2', // Cyan 600\n      light: '#67e8f9', // Cyan 300\n    },\n    secondary: {\n      main: '#48dbfb', // Brand teal\n      dark: '#0e7490', // Cyan 700\n      light: '#a5f3fc', // Cyan 200\n    },\n    background: {\n      default: '#0f172a', // Slate 900\n      paper: '#1e293b', // Slate 800\n    },\n    text: {\n      primary: '#f8fafc', // Slate 50\n      secondary: '#cbd5e1', // Slate 300\n    },\n    divider: 'rgba(148, 163, 184, 0.12)', // Slate 400 with opacity\n    error: {\n      main: '#b91c1c', // Darker red\n    },\n    warning: {\n      main: '#b45309', // Darker amber\n    },\n    systemMessage: {\n      main: 'rgba(148, 163, 184, 0.1)', // Slate 400 with low opacity\n      transparent: 'rgba(148, 163, 184, 0.2)', // Slate 400 with higher opacity for transparent mode\n    },\n    info: {\n      main: '#1d4ed8', // Darker blue\n    },\n    success: {\n      main: '#047857', // Darker emerald\n    },\n  },\n};\n\n// Create themes with components\nconst createThemeWithComponents = (themeOptions: ThemeOptions): Theme => {\n  const baseTheme = createTheme(themeOptions);\n  return createTheme({\n    ...baseTheme,\n    components: createComponents(themeOptions.palette!.mode as 'light' | 'dark'),\n  });\n};\n\n// Export both themes\nexport const lightTheme = responsiveFontSizes(createThemeWithComponents(lightThemeOptions));\nexport const darkTheme = responsiveFontSizes(createThemeWithComponents(darkThemeOptions));\n\n// Export default dark theme for backward compatibility\nexport default darkTheme;\n\n// Helper function to get theme by mode\nexport const getThemeByMode = (mode: 'light' | 'dark'): Theme => {\n  return mode === 'light' ? lightTheme : darkTheme;\n};\n","import React, { createContext, useContext, useEffect, useMemo } from 'react';\nimport { Theme, useMediaQuery } from '@mui/material';\nimport { getThemeByMode } from '@/theme';\nimport { ThemeMode } from '@/types/Settings';\nimport { useSettingsStore } from '@/stores/settingsStore';\n\ninterface ThemeContextValue {\n  /** Current active theme object */\n  theme: Theme;\n  /** Current theme mode preference (light, dark, or system) */\n  themeMode: ThemeMode;\n  /** Actual resolved theme mode (light or dark, never system) */\n  resolvedThemeMode: 'light' | 'dark';\n  /** Whether the user prefers dark mode according to system settings */\n  prefersDarkMode: boolean;\n  /** Function to change theme mode */\n  setThemeMode: (mode: ThemeMode) => void;\n  /** Function to toggle between light and dark (ignores system preference) */\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextValue | undefined>(undefined);\n\ninterface ThemeProviderProps {\n  children: React.ReactNode;\n  /** Optional default theme mode (defaults to 'system') */\n  defaultMode?: ThemeMode;\n}\n\nexport function ThemeProvider({ children, defaultMode = 'system' }: ThemeProviderProps) {\n  const { settings, updateSettings } = useSettingsStore();\n\n  // Detect system preference for dark mode\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)', {\n    noSsr: true, // Prevent hydration mismatch\n  });\n\n  // Get theme mode from settings or use default\n  const themeMode: ThemeMode = settings.themeMode || defaultMode;\n\n  // Resolve the actual theme mode (convert 'system' to 'light' or 'dark')\n  const resolvedThemeMode: 'light' | 'dark' = useMemo(() => {\n    if (themeMode === 'system') {\n      return prefersDarkMode ? 'dark' : 'light';\n    }\n    return themeMode;\n  }, [themeMode, prefersDarkMode]);\n\n  // Get the actual theme object\n  const theme = useMemo(() => {\n    return getThemeByMode(resolvedThemeMode);\n  }, [resolvedThemeMode]);\n\n  // Function to update theme mode\n  const setThemeMode = (mode: ThemeMode) => {\n    updateSettings({ themeMode: mode });\n  };\n\n  // Function to toggle between light and dark (ignores system)\n  const toggleTheme = () => {\n    const newMode = resolvedThemeMode === 'light' ? 'dark' : 'light';\n    setThemeMode(newMode);\n  };\n\n  // No longer needed - useMediaQuery with noSsr handles initialization properly\n\n  // Listen for system theme changes and update if in system mode\n  useEffect(() => {\n    if (themeMode === 'system') {\n      // Theme will automatically update due to resolvedThemeMode dependency\n      // System theme preference changed: prefersDarkMode ? 'dark' : 'light'\n    }\n  }, [prefersDarkMode, themeMode]);\n\n  // Provide smooth transition classes to body\n  useEffect(() => {\n    const body = document.body;\n\n    // Add transition class for smooth theme switching\n    body.style.transition = 'background-color 0.3s ease, color 0.3s ease';\n\n    // Add theme mode class for any custom CSS that might need it\n    body.classList.remove('theme-light', 'theme-dark');\n    body.classList.add(`theme-${resolvedThemeMode}`);\n\n    return () => {\n      body.style.transition = '';\n      body.classList.remove('theme-light', 'theme-dark');\n    };\n  }, [resolvedThemeMode]);\n\n  const contextValue: ThemeContextValue = {\n    theme,\n    themeMode,\n    resolvedThemeMode,\n    prefersDarkMode,\n    setThemeMode,\n    toggleTheme,\n  };\n\n  return <ThemeContext.Provider value={contextValue}>{children}</ThemeContext.Provider>;\n}\n\n/**\n * Hook to access theme context\n * @throws Error if used outside of ThemeProvider\n */\n// eslint-disable-next-line react-refresh/only-export-components\nexport function useTheme(): ThemeContextValue {\n  const context = useContext(ThemeContext);\n\n  if (context === undefined) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n\n  return context;\n}\n\n/**\n * Hook to get just the theme mode and setter (lighter alternative)\n */\n// eslint-disable-next-line react-refresh/only-export-components\nexport function useThemeMode(): [ThemeMode, (mode: ThemeMode) => void] {\n  const { themeMode, setThemeMode } = useTheme();\n  return [themeMode, setThemeMode];\n}\n\n/**\n * Hook to get the resolved theme mode (always 'light' or 'dark')\n */\n// eslint-disable-next-line react-refresh/only-export-components\nexport function useResolvedThemeMode(): 'light' | 'dark' {\n  const { resolvedThemeMode } = useTheme();\n  return resolvedThemeMode;\n}\n\n/**\n * Hook for theme toggle functionality\n */\n// eslint-disable-next-line react-refresh/only-export-components\nexport function useThemeToggle(): () => void {\n  const { toggleTheme } = useTheme();\n  return toggleTheme;\n}\n","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_weekOfYear=t()}(this,(function(){\"use strict\";var e=\"week\",t=\"year\";return function(i,n,r){var f=n.prototype;f.week=function(i){if(void 0===i&&(i=null),null!==i)return this.add(7*(i-this.week()),\"day\");var n=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var f=r(this).startOf(t).add(1,t).date(n),s=r(this).endOf(e);if(f.isBefore(s))return 1}var a=r(this).startOf(t).date(n).startOf(e).subtract(1,\"millisecond\"),o=this.diff(a,e,!0);return o<0?r(this).startOf(\"week\").week():Math.ceil(o)},f.weeks=function(e){return void 0===e&&(e=null),this.week(e)}}}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_customParseFormat=t()}(this,(function(){\"use strict\";var e={LTS:\"h:mm:ss A\",LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"},t=/(\\[[^[]*\\])|([-_:/.,()\\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\\d/,r=/\\d\\d/,i=/\\d\\d?/,o=/\\d*[^-_:/,()\\s\\d]+/,s={},a=function(e){return(e=+e)+(e>68?1900:2e3)};var f=function(e){return function(t){this[e]=+t}},h=[/[+-]\\d\\d:?(\\d\\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if(\"Z\"===e)return 0;var t=e.match(/([+-]|\\d\\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:\"+\"===t[0]?-n:n}(e)}],u=function(e){var t=s[e];return t&&(t.indexOf?t:t.s.concat(t.f))},d=function(e,t){var n,r=s.meridiem;if(r){for(var i=1;i<=24;i+=1)if(e.indexOf(r(i,0,t))>-1){n=i>12;break}}else n=e===(t?\"pm\":\"PM\");return n},c={A:[o,function(e){this.afternoon=d(e,!1)}],a:[o,function(e){this.afternoon=d(e,!0)}],Q:[n,function(e){this.month=3*(e-1)+1}],S:[n,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\\d{3}/,function(e){this.milliseconds=+e}],s:[i,f(\"seconds\")],ss:[i,f(\"seconds\")],m:[i,f(\"minutes\")],mm:[i,f(\"minutes\")],H:[i,f(\"hours\")],h:[i,f(\"hours\")],HH:[i,f(\"hours\")],hh:[i,f(\"hours\")],D:[i,f(\"day\")],DD:[r,f(\"day\")],Do:[o,function(e){var t=s.ordinal,n=e.match(/\\d+/);if(this.day=n[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\\[|\\]/g,\"\")===e&&(this.day=r)}],w:[i,f(\"week\")],ww:[r,f(\"week\")],M:[i,f(\"month\")],MM:[r,f(\"month\")],MMM:[o,function(e){var t=u(\"months\"),n=(u(\"monthsShort\")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[o,function(e){var t=u(\"months\").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\\d+/,f(\"year\")],YY:[r,function(e){this.year=a(e)}],YYYY:[/\\d{4}/,f(\"year\")],Z:h,ZZ:h};function l(n){var r,i;r=n,i=s&&s.formats;for(var o=(n=r.replace(/(\\[[^\\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var o=r&&r.toUpperCase();return n||i[r]||e[r]||i[o].replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))).match(t),a=o.length,f=0;f<a;f+=1){var h=o[f],u=c[h],d=u&&u[0],l=u&&u[1];o[f]=l?{regex:d,parser:l}:h.replace(/^\\[|\\]$/g,\"\")}return function(e){for(var t={},n=0,r=0;n<a;n+=1){var i=o[n];if(\"string\"==typeof i)r+=i.length;else{var s=i.regex,f=i.parser,h=e.slice(r),u=s.exec(h)[0];f.call(t,u),e=e.replace(u,\"\")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(a=e.parseTwoDigitYear);var r=t.prototype,i=r.parse;r.parse=function(e){var t=e.date,r=e.utc,o=e.args;this.$u=r;var a=o[1];if(\"string\"==typeof a){var f=!0===o[2],h=!0===o[3],u=f||h,d=o[2];h&&(d=o[2]),s=this.$locale(),!f&&d&&(s=n.Ls[d]),this.$d=function(e,t,n,r){try{if([\"x\",\"X\"].indexOf(t)>-1)return new Date((\"X\"===t?1e3:1)*e);var i=l(t)(e),o=i.year,s=i.month,a=i.day,f=i.hours,h=i.minutes,u=i.seconds,d=i.milliseconds,c=i.zone,m=i.week,M=new Date,Y=a||(o||s?1:M.getDate()),p=o||M.getFullYear(),v=0;o&&!s||(v=s>0?s-1:M.getMonth());var D,w=f||0,g=h||0,y=u||0,L=d||0;return c?new Date(Date.UTC(p,v,Y,w,g,y,L+60*c.offset*1e3)):n?new Date(Date.UTC(p,v,Y,w,g,y,L)):(D=new Date(p,v,Y,w,g,y,L),m&&(D=r(D).week(m).toDate()),D)}catch(e){return new Date(\"\")}}(t,a,r,n),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),u&&t!=this.format(a)&&(this.$d=new Date(\"\")),s={}}else if(a instanceof Array)for(var c=a.length,m=1;m<=c;m+=1){o[1]=a[m-1];var M=n.apply(this,o);if(M.isValid()){this.$d=M.$d,this.$L=M.$L,this.init();break}m===c&&(this.$d=new Date(\"\"))}else i.call(this,e)}}}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_localizedFormat=t()}(this,(function(){\"use strict\";var e={LTS:\"h:mm:ss A\",LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"};return function(t,o,n){var r=o.prototype,i=r.format;n.en.formats=e,r.format=function(t){void 0===t&&(t=\"YYYY-MM-DDTHH:mm:ssZ\");var o=this.$locale().formats,n=function(t,o){return t.replace(/(\\[[^\\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var i=r&&r.toUpperCase();return n||o[r]||e[r]||o[i].replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,o){return t||o.slice(1)}))}))}(t,void 0===o?{}:o);return i.call(this,n)}}}));","!function(e,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_isBetween=i()}(this,(function(){\"use strict\";return function(e,i,t){i.prototype.isBetween=function(e,i,s,f){var n=t(e),o=t(i),r=\"(\"===(f=f||\"()\")[0],u=\")\"===f[1];return(r?this.isAfter(n,s):!this.isBefore(n,s))&&(u?this.isBefore(o,s):!this.isAfter(o,s))||(r?this.isBefore(n,s):!this.isAfter(n,s))&&(u?this.isAfter(o,s):!this.isBefore(o,s))}}}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_advancedFormat=t()}(this,(function(){\"use strict\";return function(e,t){var r=t.prototype,n=r.format;r.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return n.bind(this)(e);var s=this.$utils(),a=(e||\"YYYY-MM-DDTHH:mm:ssZ\").replace(/\\[([^\\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(e){switch(e){case\"Q\":return Math.ceil((t.$M+1)/3);case\"Do\":return r.ordinal(t.$D);case\"gggg\":return t.weekYear();case\"GGGG\":return t.isoWeekYear();case\"wo\":return r.ordinal(t.week(),\"W\");case\"w\":case\"ww\":return s.s(t.week(),\"w\"===e?1:2,\"0\");case\"W\":case\"WW\":return s.s(t.isoWeek(),\"W\"===e?1:2,\"0\");case\"k\":case\"kk\":return s.s(String(0===t.$H?24:t.$H),\"k\"===e?1:2,\"0\");case\"X\":return Math.floor(t.$d.getTime()/1e3);case\"x\":return t.$d.getTime();case\"z\":return\"[\"+t.offsetName()+\"]\";case\"zzz\":return\"[\"+t.offsetName(\"long\")+\"]\";default:return e}}));return n.bind(this)(a)}}}));","import _extends from \"@babel/runtime/helpers/esm/extends\";\n/* eslint-disable class-methods-use-this */\n/* v8 ignore start */\nimport dayjs from 'dayjs';\n// dayjs has no exports field defined\n// See https://github.com/iamkun/dayjs/issues/2562\n/* eslint-disable import/extensions */\nimport weekOfYearPlugin from 'dayjs/plugin/weekOfYear.js';\nimport customParseFormatPlugin from 'dayjs/plugin/customParseFormat.js';\nimport localizedFormatPlugin from 'dayjs/plugin/localizedFormat.js';\nimport isBetweenPlugin from 'dayjs/plugin/isBetween.js';\nimport advancedFormatPlugin from 'dayjs/plugin/advancedFormat.js';\n/* v8 ignore stop */\n/* eslint-enable import/extensions */\nimport { warnOnce } from '@mui/x-internals/warning';\ndayjs.extend(localizedFormatPlugin);\ndayjs.extend(weekOfYearPlugin);\ndayjs.extend(isBetweenPlugin);\ndayjs.extend(advancedFormatPlugin);\nconst formatTokenMap = {\n  // Year\n  YY: 'year',\n  YYYY: {\n    sectionType: 'year',\n    contentType: 'digit',\n    maxLength: 4\n  },\n  // Month\n  M: {\n    sectionType: 'month',\n    contentType: 'digit',\n    maxLength: 2\n  },\n  MM: 'month',\n  MMM: {\n    sectionType: 'month',\n    contentType: 'letter'\n  },\n  MMMM: {\n    sectionType: 'month',\n    contentType: 'letter'\n  },\n  // Day of the month\n  D: {\n    sectionType: 'day',\n    contentType: 'digit',\n    maxLength: 2\n  },\n  DD: 'day',\n  Do: {\n    sectionType: 'day',\n    contentType: 'digit-with-letter'\n  },\n  // Day of the week\n  d: {\n    sectionType: 'weekDay',\n    contentType: 'digit',\n    maxLength: 2\n  },\n  dd: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  ddd: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  dddd: {\n    sectionType: 'weekDay',\n    contentType: 'letter'\n  },\n  // Meridiem\n  A: 'meridiem',\n  a: 'meridiem',\n  // Hours\n  H: {\n    sectionType: 'hours',\n    contentType: 'digit',\n    maxLength: 2\n  },\n  HH: 'hours',\n  h: {\n    sectionType: 'hours',\n    contentType: 'digit',\n    maxLength: 2\n  },\n  hh: 'hours',\n  // Minutes\n  m: {\n    sectionType: 'minutes',\n    contentType: 'digit',\n    maxLength: 2\n  },\n  mm: 'minutes',\n  // Seconds\n  s: {\n    sectionType: 'seconds',\n    contentType: 'digit',\n    maxLength: 2\n  },\n  ss: 'seconds'\n};\nconst defaultFormats = {\n  year: 'YYYY',\n  month: 'MMMM',\n  monthShort: 'MMM',\n  dayOfMonth: 'D',\n  dayOfMonthFull: 'Do',\n  weekday: 'dddd',\n  weekdayShort: 'dd',\n  hours24h: 'HH',\n  hours12h: 'hh',\n  meridiem: 'A',\n  minutes: 'mm',\n  seconds: 'ss',\n  fullDate: 'll',\n  keyboardDate: 'L',\n  shortDate: 'MMM D',\n  normalDate: 'D MMMM',\n  normalDateWithWeekday: 'ddd, MMM D',\n  fullTime12h: 'hh:mm A',\n  fullTime24h: 'HH:mm',\n  keyboardDateTime12h: 'L hh:mm A',\n  keyboardDateTime24h: 'L HH:mm'\n};\nconst MISSING_UTC_PLUGIN = ['Missing UTC plugin', 'To be able to use UTC or timezones, you have to enable the `utc` plugin', 'Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-utc'].join('\\n');\nconst MISSING_TIMEZONE_PLUGIN = ['Missing timezone plugin', 'To be able to use timezones, you have to enable both the `utc` and the `timezone` plugin', 'Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-timezone'].join('\\n');\n/**\n * Based on `@date-io/dayjs`\n *\n * MIT License\n *\n * Copyright (c) 2017 Dmitriy Kovalenko\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nexport class AdapterDayjs {\n  constructor({\n    locale: _locale,\n    formats\n  } = {}) {\n    this.isMUIAdapter = true;\n    this.isTimezoneCompatible = true;\n    this.lib = 'dayjs';\n    this.locale = void 0;\n    this.formats = void 0;\n    this.escapedCharacters = {\n      start: '[',\n      end: ']'\n    };\n    this.formatTokenMap = formatTokenMap;\n    this.setLocaleToValue = value => {\n      const expectedLocale = this.getCurrentLocaleCode();\n      if (expectedLocale === value.locale()) {\n        return value;\n      }\n      return value.locale(expectedLocale);\n    };\n    this.hasUTCPlugin = () => typeof dayjs.utc !== 'undefined';\n    this.hasTimezonePlugin = () => typeof dayjs.tz !== 'undefined';\n    this.isSame = (value, comparing, comparisonTemplate) => {\n      const comparingInValueTimezone = this.setTimezone(comparing, this.getTimezone(value));\n      return value.format(comparisonTemplate) === comparingInValueTimezone.format(comparisonTemplate);\n    };\n    /**\n     * Replaces \"default\" by undefined and \"system\" by the system timezone before passing it to `dayjs`.\n     */\n    this.cleanTimezone = timezone => {\n      switch (timezone) {\n        case 'default':\n          {\n            return undefined;\n          }\n        case 'system':\n          {\n            return dayjs.tz.guess();\n          }\n        default:\n          {\n            return timezone;\n          }\n      }\n    };\n    this.createSystemDate = value => {\n      let date;\n      if (this.hasUTCPlugin() && this.hasTimezonePlugin()) {\n        const timezone = dayjs.tz.guess();\n        if (timezone === 'UTC') {\n          date = dayjs(value);\n        } /* v8 ignore next 3 */else {\n          // We can't change the system timezone in the tests\n          date = dayjs.tz(value, timezone);\n        }\n      } else {\n        date = dayjs(value);\n      }\n      return this.setLocaleToValue(date);\n    };\n    this.createUTCDate = value => {\n      /* v8 ignore next 3 */\n      if (!this.hasUTCPlugin()) {\n        throw new Error(MISSING_UTC_PLUGIN);\n      }\n      return this.setLocaleToValue(dayjs.utc(value));\n    };\n    this.createTZDate = (value, timezone) => {\n      /* v8 ignore next 3 */\n      if (!this.hasUTCPlugin()) {\n        throw new Error(MISSING_UTC_PLUGIN);\n      }\n\n      /* v8 ignore next 3 */\n      if (!this.hasTimezonePlugin()) {\n        throw new Error(MISSING_TIMEZONE_PLUGIN);\n      }\n      const keepLocalTime = value !== undefined && !value.endsWith('Z');\n      return this.setLocaleToValue(dayjs(value).tz(this.cleanTimezone(timezone), keepLocalTime));\n    };\n    this.getLocaleFormats = () => {\n      const locales = dayjs.Ls;\n      const locale = this.locale || 'en';\n      let localeObject = locales[locale];\n      if (localeObject === undefined) {\n        /* v8 ignore start */\n        if (process.env.NODE_ENV !== 'production') {\n          warnOnce(['MUI X: Your locale has not been found.', 'Either the locale key is not a supported one. Locales supported by dayjs are available here: https://github.com/iamkun/dayjs/tree/dev/src/locale.', \"Or you forget to import the locale from 'dayjs/locale/{localeUsed}'\", 'fallback on English locale.']);\n        }\n        /* v8 ignore stop */\n        localeObject = locales.en;\n      }\n      return localeObject.formats;\n    };\n    /**\n     * If the new day does not have the same offset as the old one (when switching to summer day time for example),\n     * Then dayjs will not automatically adjust the offset (moment does).\n     * We have to parse again the value to make sure the `fixOffset` method is applied.\n     * See https://github.com/iamkun/dayjs/blob/b3624de619d6e734cd0ffdbbd3502185041c1b60/src/plugin/timezone/index.js#L72\n     */\n    this.adjustOffset = value => {\n      if (!this.hasTimezonePlugin()) {\n        return value;\n      }\n      const timezone = this.getTimezone(value);\n      if (timezone !== 'UTC') {\n        const fixedValue = value.tz(this.cleanTimezone(timezone), true);\n        // TODO: Simplify the case when we raise the `dayjs` peer dep to 1.11.12 (https://github.com/iamkun/dayjs/releases/tag/v1.11.12)\n        /* v8 ignore next 3 */\n        // @ts-ignore\n        if (fixedValue.$offset === (value.$offset ?? 0)) {\n          return value;\n        }\n        // Change only what is needed to avoid creating a new object with unwanted data\n        // Especially important when used in an environment where utc or timezone dates are used only in some places\n        // Reference: https://github.com/mui/mui-x/issues/13290\n        // @ts-ignore\n        value.$offset = fixedValue.$offset;\n      }\n      return value;\n    };\n    this.date = (value, timezone = 'default') => {\n      if (value === null) {\n        return null;\n      }\n      if (timezone === 'UTC') {\n        return this.createUTCDate(value);\n      }\n      if (timezone === 'system' || timezone === 'default' && !this.hasTimezonePlugin()) {\n        return this.createSystemDate(value);\n      }\n      return this.createTZDate(value, timezone);\n    };\n    this.getInvalidDate = () => dayjs(new Date('Invalid date'));\n    this.getTimezone = value => {\n      if (this.hasTimezonePlugin()) {\n        // @ts-ignore\n        const zone = value.$x?.$timezone;\n        if (zone) {\n          return zone;\n        }\n      }\n      if (this.hasUTCPlugin() && value.isUTC()) {\n        return 'UTC';\n      }\n      return 'system';\n    };\n    this.setTimezone = (value, timezone) => {\n      if (this.getTimezone(value) === timezone) {\n        return value;\n      }\n      if (timezone === 'UTC') {\n        /* v8 ignore next 3 */\n        if (!this.hasUTCPlugin()) {\n          throw new Error(MISSING_UTC_PLUGIN);\n        }\n        return value.utc();\n      }\n\n      // We know that we have the UTC plugin.\n      // Otherwise, the value timezone would always equal \"system\".\n      // And it would be caught by the first \"if\" of this method.\n      if (timezone === 'system') {\n        return value.local();\n      }\n      if (!this.hasTimezonePlugin()) {\n        if (timezone === 'default') {\n          return value;\n        }\n\n        /* v8 ignore next */\n        throw new Error(MISSING_TIMEZONE_PLUGIN);\n      }\n      return this.setLocaleToValue(dayjs.tz(value, this.cleanTimezone(timezone)));\n    };\n    this.toJsDate = value => {\n      return value.toDate();\n    };\n    this.parse = (value, format) => {\n      if (value === '') {\n        return null;\n      }\n      return dayjs(value, format, this.locale, true);\n    };\n    this.getCurrentLocaleCode = () => {\n      return this.locale || 'en';\n    };\n    this.is12HourCycleInCurrentLocale = () => {\n      /* v8 ignore next */\n      return /A|a/.test(this.getLocaleFormats().LT || '');\n    };\n    this.expandFormat = format => {\n      const localeFormats = this.getLocaleFormats();\n\n      // @see https://github.com/iamkun/dayjs/blob/dev/src/plugin/localizedFormat/index.js\n      const t = formatBis => formatBis.replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g, (_, a, b) => a || b.slice(1));\n      return format.replace(/(\\[[^\\]]+])|(LTS?|l{1,4}|L{1,4})/g, (_, a, b) => {\n        const B = b && b.toUpperCase();\n        return a || localeFormats[b] || t(localeFormats[B]);\n      });\n    };\n    this.isValid = value => {\n      if (value == null) {\n        return false;\n      }\n      return value.isValid();\n    };\n    this.format = (value, formatKey) => {\n      return this.formatByString(value, this.formats[formatKey]);\n    };\n    this.formatByString = (value, formatString) => {\n      return this.setLocaleToValue(value).format(formatString);\n    };\n    this.formatNumber = numberToFormat => {\n      return numberToFormat;\n    };\n    this.isEqual = (value, comparing) => {\n      if (value === null && comparing === null) {\n        return true;\n      }\n      if (value === null || comparing === null) {\n        return false;\n      }\n      return value.toDate().getTime() === comparing.toDate().getTime();\n    };\n    this.isSameYear = (value, comparing) => {\n      return this.isSame(value, comparing, 'YYYY');\n    };\n    this.isSameMonth = (value, comparing) => {\n      return this.isSame(value, comparing, 'YYYY-MM');\n    };\n    this.isSameDay = (value, comparing) => {\n      return this.isSame(value, comparing, 'YYYY-MM-DD');\n    };\n    this.isSameHour = (value, comparing) => {\n      return value.isSame(comparing, 'hour');\n    };\n    this.isAfter = (value, comparing) => {\n      return value > comparing;\n    };\n    this.isAfterYear = (value, comparing) => {\n      if (!this.hasUTCPlugin()) {\n        return value.isAfter(comparing, 'year');\n      }\n      return !this.isSameYear(value, comparing) && value.utc() > comparing.utc();\n    };\n    this.isAfterDay = (value, comparing) => {\n      if (!this.hasUTCPlugin()) {\n        return value.isAfter(comparing, 'day');\n      }\n      return !this.isSameDay(value, comparing) && value.utc() > comparing.utc();\n    };\n    this.isBefore = (value, comparing) => {\n      return value < comparing;\n    };\n    this.isBeforeYear = (value, comparing) => {\n      if (!this.hasUTCPlugin()) {\n        return value.isBefore(comparing, 'year');\n      }\n      return !this.isSameYear(value, comparing) && value.utc() < comparing.utc();\n    };\n    this.isBeforeDay = (value, comparing) => {\n      if (!this.hasUTCPlugin()) {\n        return value.isBefore(comparing, 'day');\n      }\n      return !this.isSameDay(value, comparing) && value.utc() < comparing.utc();\n    };\n    this.isWithinRange = (value, [start, end]) => {\n      return value >= start && value <= end;\n    };\n    this.startOfYear = value => {\n      return this.adjustOffset(value.startOf('year'));\n    };\n    this.startOfMonth = value => {\n      return this.adjustOffset(value.startOf('month'));\n    };\n    this.startOfWeek = value => {\n      return this.adjustOffset(this.setLocaleToValue(value).startOf('week'));\n    };\n    this.startOfDay = value => {\n      return this.adjustOffset(value.startOf('day'));\n    };\n    this.endOfYear = value => {\n      return this.adjustOffset(value.endOf('year'));\n    };\n    this.endOfMonth = value => {\n      return this.adjustOffset(value.endOf('month'));\n    };\n    this.endOfWeek = value => {\n      return this.adjustOffset(this.setLocaleToValue(value).endOf('week'));\n    };\n    this.endOfDay = value => {\n      return this.adjustOffset(value.endOf('day'));\n    };\n    this.addYears = (value, amount) => {\n      return this.adjustOffset(value.add(amount, 'year'));\n    };\n    this.addMonths = (value, amount) => {\n      return this.adjustOffset(value.add(amount, 'month'));\n    };\n    this.addWeeks = (value, amount) => {\n      return this.adjustOffset(value.add(amount, 'week'));\n    };\n    this.addDays = (value, amount) => {\n      return this.adjustOffset(value.add(amount, 'day'));\n    };\n    this.addHours = (value, amount) => {\n      return this.adjustOffset(value.add(amount, 'hour'));\n    };\n    this.addMinutes = (value, amount) => {\n      return this.adjustOffset(value.add(amount, 'minute'));\n    };\n    this.addSeconds = (value, amount) => {\n      return this.adjustOffset(value.add(amount, 'second'));\n    };\n    this.getYear = value => {\n      return value.year();\n    };\n    this.getMonth = value => {\n      return value.month();\n    };\n    this.getDate = value => {\n      return value.date();\n    };\n    this.getHours = value => {\n      return value.hour();\n    };\n    this.getMinutes = value => {\n      return value.minute();\n    };\n    this.getSeconds = value => {\n      return value.second();\n    };\n    this.getMilliseconds = value => {\n      return value.millisecond();\n    };\n    this.setYear = (value, year) => {\n      return this.adjustOffset(value.set('year', year));\n    };\n    this.setMonth = (value, month) => {\n      return this.adjustOffset(value.set('month', month));\n    };\n    this.setDate = (value, date) => {\n      return this.adjustOffset(value.set('date', date));\n    };\n    this.setHours = (value, hours) => {\n      return this.adjustOffset(value.set('hour', hours));\n    };\n    this.setMinutes = (value, minutes) => {\n      return this.adjustOffset(value.set('minute', minutes));\n    };\n    this.setSeconds = (value, seconds) => {\n      return this.adjustOffset(value.set('second', seconds));\n    };\n    this.setMilliseconds = (value, milliseconds) => {\n      return this.adjustOffset(value.set('millisecond', milliseconds));\n    };\n    this.getDaysInMonth = value => {\n      return value.daysInMonth();\n    };\n    this.getWeekArray = value => {\n      const start = this.startOfWeek(this.startOfMonth(value));\n      const end = this.endOfWeek(this.endOfMonth(value));\n      let count = 0;\n      let current = start;\n      const nestedWeeks = [];\n      while (current < end) {\n        const weekNumber = Math.floor(count / 7);\n        nestedWeeks[weekNumber] = nestedWeeks[weekNumber] || [];\n        nestedWeeks[weekNumber].push(current);\n        current = this.addDays(current, 1);\n        count += 1;\n      }\n      return nestedWeeks;\n    };\n    this.getWeekNumber = value => {\n      return value.week();\n    };\n    this.getYearRange = ([start, end]) => {\n      const startDate = this.startOfYear(start);\n      const endDate = this.endOfYear(end);\n      const years = [];\n      let current = startDate;\n      while (this.isBefore(current, endDate)) {\n        years.push(current);\n        current = this.addYears(current, 1);\n      }\n      return years;\n    };\n    this.locale = _locale;\n    this.formats = _extends({}, defaultFormats, formats);\n\n    // Moved plugins to the constructor to allow for users to use options on the library\n    // for reference: https://github.com/mui/mui-x/pull/11151\n    dayjs.extend(customParseFormatPlugin);\n  }\n  getDayOfWeek(value) {\n    return value.day() + 1;\n  }\n}","import { CssBaseline, ThemeProvider as MuiThemeProvider } from '@mui/material';\nimport { LocalizationProvider } from '@mui/x-date-pickers';\nimport { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs';\nimport { useTheme } from '../../context/theme';\n\ninterface MuiProvidersProps {\n  children: React.ReactNode;\n}\n\nexport default function MuiProviders({ children }: MuiProvidersProps) {\n  const { theme } = useTheme();\n\n  return (\n    <MuiThemeProvider theme={theme}>\n      <CssBaseline />\n      <LocalizationProvider dateAdapter={AdapterDayjs}>{children}</LocalizationProvider>\n    </MuiThemeProvider>\n  );\n}\n","import { ProvidersProps } from '../../types/app';\nimport { MigrationProvider } from '../../context/migration';\nimport { ScheduleProvider } from '../../context/schedule';\nimport { ThemeProvider } from '../../context/theme';\nimport MuiProviders from '../MuiProviders';\n\n/**\n * Consolidated providers component to reduce Suspense boundary nesting\n * This helps fix iOS Safari module loading issues by reducing import waterfalls\n */\nexport default function AllProviders({ children }: ProvidersProps) {\n  return (\n    <ThemeProvider>\n      <MigrationProvider>\n        <ScheduleProvider>\n          <MuiProviders>{children}</MuiProviders>\n        </ScheduleProvider>\n      </MigrationProvider>\n    </ThemeProvider>\n  );\n}\n"],"file":"js/chunk-C0b6J2Rd.js"}