import{j as e,am as f,ak as T,ap as B,aq as K,aR as R,T as x,ar as h,U as M,r as g,A as oe,Q as I,ao as w,b1 as re,aE as ae,z as le,y as ce,as as de,M as ue,b2 as pe,aH as xe,b3 as me,au as H,at as q,aL as L,aN as F,aM as G,a1 as Q,E as he,K as ge,b4 as be,b5 as je,b6 as ye,ad as fe,al as Se,W as ve,ay as Ce,Y as ke}from"./chunk-DJZJtpVs.js";import{u as Ae,C as we}from"./chunk-Ba2fFVLH.js";import{y as Ie,z as Re,H as Pe,B as Me,F as U,T as Te}from"./chunk-DEqUmdJg.js";import{c as ze,d as V,a as Be,b as Ke}from"./chunk-B4Kaqf3R.js";import{i as P,d as z}from"./chunk-4ruemlWu.js";import{d as We}from"./chunk-7OQk-BoX.js";import{z as Oe,A as Ee,I as Ne}from"./chunk-B4ipE-Yx.js";import{I as $,Y as Le,G as Fe}from"./chunk-C-8ywvFr.js";import{u as Ge}from"./chunk-r6ZCRSK6.js";import"../assets/index-DQfYkwCD.js";import"./schedule.tsx-Bmr4l28J.js";import"./chunk-ChctAPco.js";import"./chunk-CGbfZ7mk.js";import"./theme.tsx-CnMYmLOa.js";import"./chunk-B4PEA_xj.js";import"./chunk-yLOK5aTh.js";import"./chunk-C1_4RlJR.js";import"./chunk-CBZ6HIaT.js";import"./chunk-Cuv_9q2v.js";import"./chunk-DtF_b7C9.js";import"./chunk-9fkTg0gS.js";import"./chunk-Brk1q6wR.js";function E({children:n,justifyContent:t="space-evenly"}){return e.jsx(f,{sx:{mt:3,display:"flex",flexDirection:"row",justifyContent:t,alignItems:"center"},children:n})}function Y({isPublic:n,onClick:t,isSelected:r}){const{t:a}=T();return e.jsx(B,{sx:{cursor:"pointer",border:r?"3px solid":"1px solid",borderColor:r?"primary.main":"grey.300",backgroundColor:r?"primary.50":"background.paper",transform:r?"scale(1.02)":"scale(1)",transition:"all 0.2s ease-in-out","&:hover":{borderColor:"primary.main",boxShadow:r?4:2,transform:"scale(1.02)"}},onClick:t,children:e.jsx(K,{sx:{p:3},children:e.jsxs(R,{direction:"row",spacing:3,alignItems:"center",children:[e.jsx(f,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,borderRadius:"50%",backgroundColor:r?"primary.main":"primary.50",color:r?"primary.contrastText":"primary.main",transition:"all 0.2s ease-in-out"},children:n?e.jsx(Ie,{sx:{fontSize:28},"aria-label":"Public"}):e.jsx(Re,{sx:{fontSize:28},"aria-label":"Private"})}),e.jsxs(R,{spacing:.5,flex:1,children:[e.jsxs(R,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(x,{variant:"h6",component:"h3",sx:{fontWeight:600},children:e.jsx(h,{i18nKey:n?"public":"private"})}),r&&e.jsx(M,{label:a("selected"),size:"small",color:"primary",sx:{fontSize:"0.75rem",fontWeight:500,height:20}})]}),e.jsx(x,{variant:"body1",color:"text.secondary",sx:{fontSize:"0.95rem"},children:e.jsx(h,{i18nKey:n?"publicRoomBenefit":"privateRoomBenefit"})})]})]})})})}function Ue({formData:n,setFormData:t,nextStep:r}){const a=ze(),{t:o}=T(),[s,l]=g.useState(!P(n.room)),[c,u]=g.useState(n.room?.toUpperCase()||""),d=async S=>{try{const A=Oe(),b=Ee(A,`rooms/${S}/uids`);return(await Ne(b)).exists()}catch(A){return console.warn("Error checking room existence:",A),!1}},i=g.useCallback(async()=>{const S=We("123456789ABCDEFGHJKLMNPQRSTUVWXYZ",5);let A,b=0;const y=10;do if(A=S(),b++,b>=y){console.warn("Max attempts reached for room ID generation, using generated ID");break}while(await d(A));return A},[]),m=g.useCallback(()=>{t({...n,room:"PUBLIC",gameMode:"online"}),l(!1)},[n,t]),j=g.useCallback(async()=>{if(P(n.room)){const S=await i();t({...n,room:S}),u(S.toUpperCase())}l(!0)},[n,t,i]),C=g.useCallback(S=>{t({...n,room:S,boardUpdated:!0})},[n,t]),v=g.useCallback(S=>{const A=S.target.value.toUpperCase();u(A)},[]),p=g.useCallback(()=>{C(c)},[C,c]),k=g.useCallback(S=>{S.key==="Enter"&&C(c)},[C,c]);function N(){a(n.room),r(P(n.room)?2:1)}const W=P(n.room);return e.jsxs(f,{sx:{m:1},children:[e.jsx(x,{variant:"h5",gutterBottom:!0,textAlign:"center",children:e.jsx(h,{i18nKey:"chooseRoomType"})}),e.jsx(x,{variant:"body1",color:"text.secondary",textAlign:"center",sx:{mb:3},children:e.jsx(h,{i18nKey:"roomTypeDescription"})}),e.jsxs(R,{spacing:2,sx:{mb:3},children:[e.jsx(Y,{isPublic:!0,onClick:m,isSelected:W}),e.jsx(Y,{isPublic:!1,onClick:j,isSelected:!W})]}),s&&e.jsxs(f,{sx:{p:3,borderRadius:2,backgroundColor:"primary.50",mb:2},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:o("privateRoomCode")}),e.jsx(oe,{fullWidth:!0,id:"privateRoom",value:c,onBlur:p,onKeyDown:k,onChange:v,inputProps:{style:{textTransform:"uppercase",fontFamily:"monospace",fontSize:"1.25rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.2em"}},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"background.paper","& fieldset":{borderColor:"divider",borderWidth:2},"&:hover fieldset":{borderColor:"primary.main"},"&.Mui-focused fieldset":{borderColor:"primary.main",borderWidth:2}}}}),e.jsx(x,{variant:"body2",color:"text.secondary",sx:{mt:1.5,textAlign:"center"},children:o("privateRoomCodeHelp")})]}),e.jsx(E,{children:e.jsx(I,{variant:"contained",onClick:N,size:"large",children:e.jsx(h,{i18nKey:W?"nextSkip":"next"})})})]})}function Ve({formData:n,setFormData:t,nextStep:r,prevStep:a}){const[o,s]=g.useState(!z(n?.gameMode)),{t:l}=T();g.useEffect(()=>{s(!z(n?.gameMode))},[n?.gameMode]);const c=[{id:"local",title:"yesInteracting",description:l("physicalInteractionDesc"),isSelected:!z(n?.gameMode)},{id:"online",title:"noInteracting",description:l("soloOnlinePlayDesc"),isSelected:z(n?.gameMode)}],u=[{value:"dom",label:"Dominant",description:l("dominantRoleDesc")},{value:"vers",label:"Switch",description:l("switchRoleDesc")},{value:"sub",label:"Submissive",description:l("submissiveRoleDesc")}],d=[{id:"clothed",title:"noNaked",description:l("foreplayClothedDesc"),isSelected:!n.isNaked},{id:"naked",title:"yesNaked",description:l("intimateNudityDesc"),isSelected:n.isNaked}];return e.jsxs(f,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[e.jsx(x,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(h,{i18nKey:"playingWithPeople"})}),e.jsx(w,{container:!0,spacing:2,sx:{mb:3},children:c.map(i=>e.jsx(w,{size:{xs:12,sm:6},children:e.jsx(B,{sx:{cursor:"pointer",border:i.isSelected?"3px solid":"1px solid",borderColor:i.isSelected?"primary.main":"divider",backgroundColor:i.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>t({...n,gameMode:i.id==="local"?"local":"online",roomRealtime:i.id!=="local"}),children:e.jsx(K,{sx:{p:3},children:e.jsxs(R,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(x,{variant:"h6",sx:{fontWeight:600},children:l(i.title)}),e.jsx(x,{variant:"body2",color:"text.secondary",children:i.description}),i.isSelected&&e.jsx(M,{label:l("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},i.id))}),e.jsx(re,{in:o,timeout:500,children:e.jsxs(f,{sx:{mb:3},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:e.jsx(h,{i18nKey:"yourRole"})}),e.jsx(w,{container:!0,spacing:2,sx:{mb:3},children:u.map(i=>e.jsx(w,{size:{xs:12,sm:4},children:e.jsx(B,{sx:{cursor:"pointer",border:n.role===i.value?"2px solid":"1px solid",borderColor:n.role===i.value?"primary.main":"divider",backgroundColor:n.role===i.value?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>t({...n,role:i.value}),children:e.jsx(K,{sx:{p:2.5},children:e.jsxs(R,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(x,{variant:"subtitle1",sx:{fontWeight:600},children:l(i.value)}),e.jsx(x,{variant:"body2",color:"text.secondary",children:i.description}),n.role===i.value&&e.jsx(M,{label:l("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},i.value))}),e.jsx(x,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:e.jsx(h,{i18nKey:"areYouNaked"})}),e.jsx(w,{container:!0,spacing:2,children:d.map(i=>e.jsx(w,{size:{xs:12,sm:6},children:e.jsx(B,{sx:{cursor:"pointer",border:i.isSelected?"2px solid":"1px solid",borderColor:i.isSelected?"primary.main":"divider",backgroundColor:i.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>t({...n,isNaked:i.id==="naked"}),children:e.jsx(K,{sx:{p:3},children:e.jsxs(R,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(x,{variant:"h6",sx:{fontWeight:600},children:l(i.title)}),e.jsx(x,{variant:"body2",color:"text.secondary",children:i.description}),i.isSelected&&e.jsx(M,{label:l("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},i.id))})]})}),e.jsx(f,{sx:{flexGrow:1}}),e.jsxs(E,{children:[e.jsx(I,{onClick:a,children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(I,{variant:"contained",onClick:r,children:e.jsx(h,{i18nKey:"next"})})]})]})}const Ye=(n,t)=>{const{gameMode:r,isNaked:a}=n,o=z(r);return o&&["foreplay","sex"].includes(t.type)||!o&&a&&["solo","foreplay"].includes(t.type)||!o&&!a&&["solo","sex"].includes(t.type)},He=n=>{const t={...n},r=n.selectedActions||{},a={};return Object.entries(r).forEach(([o,s])=>{Ye(n,s)||(a[o]=s)}),t.selectedActions=a,t},_=(n,t,r)=>{const a=n.selectedActions||{};return Object.entries(a).map(([o,s])=>{const l=t.find(c=>c.value===o);return s.type!==r||!l?null:o}).filter(o=>!!o)},qe=(n,t,r)=>{const a={...n},o={...a.selectedActions};return Object.keys(o).forEach(s=>{o[s].type===t&&!r.includes(s)&&delete o[s]}),a.selectedActions=o,a},X=(n,t,r)=>{r(a=>{const o=qe(a,t,n),s={...o.selectedActions};return n.forEach(l=>{if(s[l])return;let c={type:t,level:1};t==="consumption"&&(c={...c,variation:o.isAppend?"appendMost":"standalone"}),s[l]=c}),{...o,selectedActions:s}})},J=(n,t,r,a,o,s=null)=>{const l=n?.target?.value;if(l===0)return o(c=>c.filter(u=>u!==t)),a(c=>{const u={...c.selectedActions||{}};return delete u[t],{...c,selectedActions:u}});a(c=>{const u={...c.selectedActions||{}};return u[t]={...u[t]||{},type:r,level:typeof l=="number"?l:isNaN(Number(l))?0:Number(l),...!!s&&{variation:s}},{...c,selectedActions:u}})},Qe=n=>!!(n&&Object.keys(n).some(t=>{const r=n[t];return(r?.level??0)>0&&r?.variation!=="appendMost"}));function Z(){return e.jsxs(x,{variant:"h6",sx:{mt:2},children:[e.jsx(h,{i18nKey:"setIntensityLevel"}),e.jsx(ae,{title:e.jsx(x,{variant:"body1",children:e.jsx(h,{i18nKey:"intensityTooltip"})}),arrow:!0,sx:{ml:1},children:e.jsx(Pe,{sx:{ml:.5,fontSize:15}})})]})}function D({onChange:n,values:t,options:r,label:a}){const o=g.useCallback(l=>r?.find(c=>c.value===l)?.label,[r]),s=g.useCallback(l=>e.jsx(f,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:l?.map(c=>e.jsx(M,{label:o(c)},c))}),[o]);return e.jsxs(le,{fullWidth:!0,children:[e.jsx(ce,{id:`${a}-label`,children:a}),e.jsx(de,{labelId:`${a}-label`,id:`${a}`,multiple:!0,value:t,onChange:n,fullWidth:!0,input:e.jsx(me,{label:e.jsx(h,{i18nKey:"actionsLabel"})}),renderValue:s,children:r?.map(({label:l,value:c})=>e.jsxs(ue,{value:c,children:[e.jsx(pe,{checked:t.includes(c)}),e.jsx(xe,{primary:l})]},c))})]})}const $e=4,_e=n=>z(n?.gameMode)?"solo":n.isNaked?"sex":"foreplay";function Xe({formData:n,setFormData:t,options:r,actionsList:a}){const o=_e(n),s=r(o),c=_(n,s,o)||[],u=d=>{const{value:i}=d.target,m=typeof i=="string"?i.split(","):i;m.length<=$e&&X(m,o,t)};return e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"h6",sx:{my:2},children:e.jsx(h,{i18nKey:"pickActions"})}),e.jsx(D,{onChange:u,values:c,options:s,label:H("actionsLabel")}),c.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{}),c.map(d=>e.jsx($,{actionsFolder:a,settings:n,option:d,initValue:1,onChange:i=>J(i,d,o,t,()=>{})},d))]})]})}const Je=2;function Ze({formData:n,setFormData:t,options:r,actionsList:a}){const o="consumption",s=r(o),c=_(n,s,o)||[],u=i=>{const{value:m}=i.target,j=typeof m=="string"?m.split(","):m;j.length<=Je&&X(j,o,t)},d=(i,m)=>{const j=i.target.checked?"appendMost":"standalone",C=i.target.checked,v={...n.selectedActions};m.forEach(k=>{v[k]&&(v[k]={...v[k],variation:j})});const p={...n,isAppend:C,selectedActions:v};t(p)};return e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"h6",sx:{my:2},children:e.jsx(h,{i18nKey:"pickConsumptions"})}),e.jsx(D,{onChange:u,values:c,options:s,label:H("consumables")}),!!c.length&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{}),c.map(i=>e.jsx($,{actionsFolder:a,settings:n,option:i,initValue:1,onChange:m=>J(m,i,o,t,()=>{},n.isAppend?"appendMost":"standalone")},i)),e.jsx(x,{variant:"h6",sx:{mt:2},children:e.jsx(h,{i18nKey:"standaloneOrCombine"})}),e.jsx(Le,{trueCondition:n.isAppend,onChange:i=>d(i,c),yesLabel:"combineWithActions"})]})]})}function De({gameMode:n,onPresetSelect:t,selectedPreset:r,actionsList:a,showTitle:o=!0}){const{t:s}=T(),l={solo:[{id:"popperbating",name:s("presetPopperbating"),description:s("presetPopperbatingDesc"),actions:["bating"],consumptions:["poppers"],intensities:{bating:2,poppers:1}},{id:"smoking-tits",name:s("presetSmokingTits"),description:s("presetSmokingTitsDesc"),actions:["titTorture"],consumptions:["vaping"],intensities:{titTorture:2,vaping:1}},{id:"exploration-solo",name:s("presetExplorationSolo"),description:s("presetExplorationSoloDesc"),actions:["throatTraining","buttPlay","titTorture","ballBusting"],consumptions:[],intensities:{throatTraining:1,buttPlay:1,titTorture:1,ballBusting:1}},{id:"ball-busting",name:s("presetBallBusting"),description:s("presetBallBustingDesc"),actions:["ballBusting","bating"],consumptions:["poppers"],intensities:{ballBusting:2,bating:2}}],foreplay:[{id:"romantic-start",name:s("presetRomanticStart"),description:s("presetRomanticStartDesc"),actions:["kissing","stripping"],consumptions:["alcohol"],intensities:{kissing:2,stripping:1,alcohol:1}},{id:"degrading",name:s("presetDegrading"),description:s("presetDegradingDesc"),actions:["humiliation","footPlay","breathPlay"],consumptions:["poppers"],intensities:{humiliation:2,footPlay:2,breathPlay:2,poppers:2}},{id:"sensual-touch",name:s("presetSensualTouch"),description:s("presetSensualTouchDesc"),actions:["kissing","footPlay","tickling"],consumptions:[],intensities:{kissing:2,footPlay:1,tickling:1}},{id:"electric-play",name:s("presetElectricPlay"),description:s("presetElectricPlayDesc"),actions:["electric","bondage"],consumptions:["vaping"],intensities:{electric:1,bondage:2,vaping:1}}],sex:[{id:"gentle-sex",name:s("presetGentleSex"),description:s("presetGentleSexDesc"),actions:["throatTraining","bating","buttPlay"],consumptions:["alcohol"],intensities:{throatTraining:1,bating:1,buttPlay:1,alcohol:1}},{id:"fisting",name:s("presetFisting"),description:s("presetFistingDesc"),actions:["buttPlay"],consumptions:["poppers"],intensities:{buttPlay:4,poppers:4}},{id:"bdsm",name:s("presetBdsm"),description:s("presetBdsmDesc"),actions:["pissPlay","throatTraining","spanking","titTorture"],consumptions:[],intensities:{pissPlay:2,throatTraining:2,spanking:2,titTorture:2}},{id:"breath-control",name:s("presetBreathControl"),description:s("presetBreathControlDesc"),actions:["bating"],consumptions:["gasMask"],intensities:{bating:2,gasMask:2}}]},c=l[n]||l.solo,u=d=>{t(d)};return e.jsxs(f,{children:[o&&e.jsx(x,{variant:"h6",gutterBottom:!0,children:s("quickStart")}),e.jsx(w,{container:!0,spacing:2,children:c.map(d=>e.jsx(w,{size:{xs:12,sm:6,lg:3},children:e.jsx(B,{sx:{cursor:"pointer",border:r===d.id?2:1,borderColor:r===d.id?"primary.main":"divider",backgroundColor:r===d.id?"primary.dark":"background.paper",transition:"all 0.2s ease-in-out",height:"100%",boxShadow:1,"&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:3,backgroundColor:r===d.id?"primary.dark":"action.hover"}},onClick:()=>u(d),children:e.jsxs(K,{sx:{p:2.5},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:d.name}),e.jsxs(f,{children:[d.actions.map((i,m)=>e.jsx(M,{label:a[i]?.label||i,size:"small",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:"primary.main",color:"primary.main","&:hover":{backgroundColor:"primary.50"}}},`action-${m}`)),d.consumptions.map((i,m)=>e.jsx(M,{label:a[i]?.label||i,size:"small",color:"secondary",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:"secondary.main",color:"secondary.main","&:hover":{backgroundColor:"secondary.50"}}},`consumption-${m}`))]})]})})},d.id))})]})}function en({formData:n,setFormData:t,nextStep:r,prevStep:a,actionsList:o,isActionsLoading:s=!1}){const{t:l}=T(),[c,u]=g.useState(""),[d,i]=g.useState(!1),[m,j]=g.useState(!0);function C(b){return Object.keys(o).filter(y=>o[y]?.type===b)}g.useEffect(()=>{const b=He(n);t(b)},[]),g.useEffect(()=>{n.selectedActions&&Object.keys(n.selectedActions).length>0&&(i(!0),j(!1))},[]);const v=b=>C(b).map(y=>({value:y,label:o[y]?.label}));let p;n.gameMode==="online"?p="solo":n.gameMode==="local"&&!n.isNaked?p="foreplay":p="sex";const k=(b,y,ee,ne)=>{b.forEach(O=>{if(o[O]){const te=ee.intensities?.[O]||y,se=Object.keys(o[O].intensities||{}).filter(ie=>ie!=="None").length;ne[O]={type:o[O].type,level:Math.min(te,se)}}})},N=b=>{u(b.id);const y={};k(b.actions,2,b,y),k(b.consumptions,1,b,y),t({...n,selectedActions:y}),j(!1),i(!0)},W=(b,y)=>{j(y),y&&i(!1)},S=(b,y)=>{i(y),y&&j(!1)},A=!Qe(n.selectedActions);return s?e.jsxs(f,{children:[e.jsxs(f,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:300,gap:2},children:[e.jsx(q,{size:48}),e.jsx(x,{variant:"h6",color:"text.secondary",children:l("loadingAvailableActions")})]}),e.jsx(f,{sx:{mt:4},children:e.jsxs(E,{children:[e.jsx(I,{disabled:!0,children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(I,{variant:"contained",disabled:!0,size:"large",children:e.jsx(h,{i18nKey:"next"})})]})})]}):e.jsxs(f,{children:[e.jsxs(L,{expanded:m,onChange:W,sx:{backgroundColor:"background.default",borderTop:1,borderBottom:1,borderColor:"divider",borderLeft:"none",borderRight:"none",borderRadius:0,"&:before":{display:"none"},boxShadow:"none"},children:[e.jsx(F,{expandIcon:e.jsx(U,{}),"aria-controls":"quickstart-content",id:"quickstart-header",sx:{backgroundColor:"background.default"},children:e.jsxs(R,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Me,{}),e.jsx(x,{variant:"h6",children:l("quickStart")})]})}),e.jsx(G,{sx:{pb:1},children:e.jsx(De,{gameMode:p,onPresetSelect:N,selectedPreset:c,actionsList:o,showTitle:!1})})]}),e.jsxs(L,{expanded:d,onChange:S,sx:{backgroundColor:"background.default",borderTop:m?"none":1,borderBottom:1,borderColor:"divider",borderLeft:"none",borderRight:"none",borderRadius:0,marginTop:m?-1:0,"&:before":{display:"none"},boxShadow:"none"},children:[e.jsx(F,{expandIcon:e.jsx(U,{}),"aria-controls":"customization-content",id:"customization-header",sx:{backgroundColor:"background.default"},children:e.jsxs(R,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Te,{}),e.jsx(x,{variant:"h6",children:l("customizeActions")})]})}),e.jsxs(G,{children:[e.jsx(x,{variant:"body2",color:"text.secondary",sx:{mb:2},children:l("customizeActionsDesc")}),e.jsx(Xe,{formData:n,setFormData:t,options:v,actionsList:o}),e.jsx(Q,{sx:{my:3}}),e.jsx(Ze,{formData:n,setFormData:t,options:v,actionsList:o})]})]}),e.jsx(f,{sx:{mt:4},children:e.jsxs(E,{children:[e.jsx(I,{onClick:()=>a(P(n.room)?2:1),children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(I,{variant:"contained",disabled:A,onClick:r,size:"large",children:e.jsx(h,{i18nKey:"next"})})]})})]})}function nn({formData:n,setFormData:t,prevStep:r,actionsList:a,close:o}){const s=[100,100],l=[0,0],[c,u]=g.useState(V(n?.finishRange||[],l)),[d,i]=g.useState(!1),m=Be(),{t:j}=T();g.useEffect(()=>{let p={...n,boardUpdated:!0};(!c||!V(n.finishRange||[],s))&&(p.finishRange=s),t(p)},[]);async function C(){i(!0);try{await m(n,a)}catch(p){console.error("Error submitting settings:",p)}finally{i(!1)}typeof o=="function"&&o()}const v=[{id:"noOrgasm",title:"noOrgasm",description:j("noOrgasmDesc"),isSelected:!c},{id:"yesOrgasm",title:"yesOrgasm",description:j("yesOrgasmDesc"),isSelected:c}];return e.jsxs(f,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[e.jsx(x,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(h,{i18nKey:"WillYouOrgasm"})}),e.jsx(w,{container:!0,spacing:2,sx:{mb:4},children:v.map(p=>e.jsx(w,{size:{xs:12,sm:6},children:e.jsx(B,{sx:{cursor:"pointer",border:p.isSelected?"3px solid":"1px solid",borderColor:p.isSelected?"primary.main":"divider",backgroundColor:p.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%",transform:p.isSelected?"scale(1.02)":"scale(1)","&:hover":{borderColor:"primary.main",transform:"scale(1.02)",boxShadow:2}},onClick:()=>{const k=p.id==="yesOrgasm";t({...n,finishRange:k?l:s}),u(k)},children:e.jsx(K,{sx:{p:3},children:e.jsxs(R,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(x,{variant:"h6",sx:{fontWeight:600},children:j(p.title)}),e.jsx(x,{variant:"body2",color:"text.secondary",children:p.description}),p.isSelected&&e.jsx(M,{label:j("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},p.id))}),e.jsx(f,{sx:{flexGrow:1}}),e.jsxs(E,{children:[e.jsx(I,{onClick:r,disabled:d,children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(I,{variant:"contained",onClick:C,disabled:d,startIcon:d?e.jsx(q,{size:20}):null,size:"large",sx:{px:4},children:e.jsx(h,{i18nKey:"buildGame"})})]})]})}function tn({currentStep:n,isPublicRoom:t}){const{t:r}=T(),a=he(),o=ge(a.breakpoints.down("md")),s=t?[r("roomSelection","Room Selection"),r("actionsSelection","Actions Selection"),r("finishSetup","Finish Setup")]:[r("roomSelection","Room Selection"),r("gameModeSelection","Game Mode Selection"),r("actionsSelection","Actions Selection"),r("finishSetup","Finish Setup")],c=(u=>{if(t)switch(u){case 1:return 0;case 3:return 1;case 4:return 2;default:return 0}return u-1})(n);return e.jsx(be,{activeStep:c,alternativeLabel:!o,orientation:"horizontal",sx:{...o&&{"& .MuiStepLabel-label":{display:"none"}}},children:s.map((u,d)=>e.jsx(je,{children:e.jsx(ye,{children:o?"":u})},d))})}function sn({close:n}){const{id:t}=fe(),[r,a]=g.useState(1),o={room:t};P(t)&&(o.gameMode="online",o.roomRealtime=!0);const[s,l]=Ge({gameMode:"online",roomRealtime:!0,actions:[],consumption:[],role:"sub",boardUpdated:!1,room:t||"PUBLIC"},o),c=g.useRef(!0),{actionsList:u,isLoading:d}=Ke(s.gameMode);g.useEffect(()=>{if(c.current){if(c.current=!1,s.advancedSettings){j();return}if(typeof n=="function"){if(P(t)){a(3);return}if(s.gameMode==="online"){a(3);return}a(2)}}},[s,n,t]);const i=p=>{if(!Number.isInteger(p))return a(r+1);a(r+(p||1))},m=p=>{if(!Number.isInteger(p))return a(r-1);a(r-(p||1))},j=()=>a(0),C=()=>{P(t)||s.gameMode==="online"?a(3):a(1)},v=()=>{switch(r){case 1:return e.jsx(Ue,{formData:s,setFormData:l,nextStep:i});case 2:return e.jsx(Ve,{formData:s,setFormData:l,nextStep:i,prevStep:m});case 3:return e.jsx(en,{formData:s,setFormData:l,nextStep:i,prevStep:m,actionsList:u,isActionsLoading:d});case 4:return e.jsx(nn,{formData:s,setFormData:l,prevStep:m,actionsList:u,close:n});default:return null}};return r===0?e.jsx(Fe,{closeDialog:n,onOpenSetupWizard:C}):e.jsxs(f,{children:[e.jsx(f,{sx:{width:"100%",mt:2,mb:4},children:e.jsx(tn,{currentStep:r,isPublicRoom:P(t)})}),v(),e.jsx(Q,{sx:{mt:3}}),e.jsx(I,{onClick:j,children:e.jsx(h,{i18nKey:"advancedSetup"})})]})}function Rn({open:n,close:t}){const r=Ae(),[a]=Se();return a.get("importBoard")?null:e.jsxs(ve,{fullScreen:r,open:n,maxWidth:"md",children:[e.jsxs(Ce,{children:[e.jsx(h,{i18nKey:"gameSettingsHeading"}),typeof t=="function"&&e.jsx(we,{close:t})]}),e.jsx(ke,{children:e.jsx(sn,{close:typeof t=="function"?t:void 0})})]})}export{Rn as default};
