import{j as e,aa as y,am as R,av as B,aw as W,a_ as P,T as u,ax as h,U as I,r as m,z as J,Q as M,au as A,a$ as Q,aH as Z,y as D,x as ee,ay as te,M as ne,b0 as se,aO as ie,b1 as oe,az as G,aV as re,aW as ae,aX as ce,a1 as V,ab as le,D as de,J as pe,b2 as ue,b3 as xe,b4 as me,ad as he,as as ge,W as be,aD as je,Y as ye}from"./chunk-QuzIwS35.js";import{C as Se}from"./chunk-ORyNdZv_.js";import{u as fe}from"./chunk-CtJAfh3g.js";import{n as ve,o as Ce,p as ke,T as Ae,E as we}from"./chunk-_5j352I4.js";import{b as Pe,c as N,d as Ie,e as Me}from"./chunk-D2tVJ7i-.js";import{i as w,b as z}from"./chunk-CalwtN_X.js";import{d as Re}from"./chunk-D2XAL7ZP.js";import{a as Te,r as ze,J as Be}from"./chunk-B90GCnie.js";import{I as L,Y as We,G as Oe}from"./chunk-C_6Syue1.js";import{u as Ee}from"./chunk-L6bkSC5G.js";import"./chunk-CZM7hJiR.js";import"../assets/index-BqbSN2YQ.js";import"./chunk-CBj0jgHk.js";import"./chunk-B4PEA_xj.js";import"./chunk-Do76cB_1.js";import"./chunk-lwiWGiye.js";import"./chunk-CWRIfDP8.js";import"./chunk-B-XUGD5i.js";function E({children:t,justifyContent:s="space-evenly"}){return e.jsx(y,{sx:{mt:3,display:"flex",flexDirection:"row",justifyContent:s,alignItems:"center"},children:t})}function F({isPublic:t,onClick:s,isSelected:i}){const{t:r}=R();return e.jsx(B,{sx:{cursor:"pointer",border:i?"3px solid":"1px solid",borderColor:i?"primary.main":"grey.300",backgroundColor:i?"primary.50":"background.paper",transform:i?"scale(1.02)":"scale(1)",transition:"all 0.2s ease-in-out","&:hover":{borderColor:"primary.main",boxShadow:i?4:2,transform:"scale(1.02)"}},onClick:s,children:e.jsx(W,{sx:{p:3},children:e.jsxs(P,{direction:"row",spacing:3,alignItems:"center",children:[e.jsx(y,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,borderRadius:"50%",backgroundColor:i?"primary.main":"primary.50",color:i?"primary.contrastText":"primary.main",transition:"all 0.2s ease-in-out"},children:t?e.jsx(ve,{sx:{fontSize:28},"aria-label":"Public"}):e.jsx(Ce,{sx:{fontSize:28},"aria-label":"Private"})}),e.jsxs(P,{spacing:.5,flex:1,children:[e.jsxs(P,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(u,{variant:"h6",component:"h3",sx:{fontWeight:600},children:e.jsx(h,{i18nKey:t?"public":"private"})}),i&&e.jsx(I,{label:r("selected"),size:"small",color:"primary",sx:{fontSize:"0.75rem",fontWeight:500,height:20}})]}),e.jsx(u,{variant:"body1",color:"text.secondary",sx:{fontSize:"0.95rem"},children:e.jsx(h,{i18nKey:t?"publicRoomBenefit":"privateRoomBenefit"})})]})]})})})}function Ke({formData:t,setFormData:s,nextStep:i}){const r=Pe(),{t:n}=R(),[c,l]=m.useState(!w(t.room)),[a,d]=m.useState(t.room?.toUpperCase()||""),p=async C=>{try{const f=Te(),T=ze(f,`rooms/${C}/uids`);return(await Be(T)).exists()}catch(f){return console.warn("Error checking room existence:",f),!1}},o=m.useCallback(async()=>{const C=Re("123456789ABCDEFGHJKLMNPQRSTUVWXYZ",5);let f,T=0;const K=10;do if(f=C(),T++,T>=K){console.warn("Max attempts reached for room ID generation, using generated ID");break}while(await p(f));return f},[]),g=m.useCallback(()=>{s({...t,room:"PUBLIC",gameMode:"online"}),l(!1)},[t,s]),j=m.useCallback(async()=>{if(w(t.room)){const C=await o();s({...t,room:C}),d(C.toUpperCase())}l(!0)},[t,s,o]),k=m.useCallback(C=>{s({...t,room:C,boardUpdated:!0})},[t,s]),S=m.useCallback(C=>{const f=C.target.value.toUpperCase();d(f)},[]),b=m.useCallback(()=>{k(a)},[k,a]),x=m.useCallback(C=>{C.key==="Enter"&&k(a)},[k,a]);function v(){r(t.room),i(w(t.room)?2:1)}const O=w(t.room);return e.jsxs(y,{sx:{m:1},children:[e.jsx(u,{variant:"h5",gutterBottom:!0,textAlign:"center",children:e.jsx(h,{i18nKey:"chooseRoomType"})}),e.jsx(u,{variant:"body1",color:"text.secondary",textAlign:"center",sx:{mb:3},children:e.jsx(h,{i18nKey:"roomTypeDescription"})}),e.jsxs(P,{spacing:2,sx:{mb:3},children:[e.jsx(F,{isPublic:!0,onClick:g,isSelected:O}),e.jsx(F,{isPublic:!1,onClick:j,isSelected:!O})]}),c&&e.jsxs(y,{sx:{p:3,borderRadius:2,backgroundColor:"primary.50",mb:2},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:n("privateRoomCode")}),e.jsx(J,{fullWidth:!0,id:"privateRoom",value:a,onBlur:b,onKeyDown:x,onChange:S,inputProps:{style:{textTransform:"uppercase",fontFamily:"monospace",fontSize:"1.25rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.2em"}},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"background.paper","& fieldset":{borderColor:"divider",borderWidth:2},"&:hover fieldset":{borderColor:"primary.main"},"&.Mui-focused fieldset":{borderColor:"primary.main",borderWidth:2}}}}),e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mt:1.5,textAlign:"center"},children:n("privateRoomCodeHelp")})]}),e.jsx(E,{children:e.jsx(M,{variant:"contained",onClick:v,size:"large",children:e.jsx(h,{i18nKey:O?"nextSkip":"next"})})})]})}function Ne({formData:t,setFormData:s,nextStep:i,prevStep:r}){const[n,c]=m.useState(!z(t?.gameMode)),{t:l}=R();m.useEffect(()=>{c(!z(t?.gameMode))},[t?.gameMode]);const a=[{id:"local",title:"yesInteracting",description:l("physicalInteractionDesc"),isSelected:!z(t?.gameMode)},{id:"online",title:"noInteracting",description:l("soloOnlinePlayDesc"),isSelected:z(t?.gameMode)}],d=[{value:"dom",label:"Dominant",description:l("dominantRoleDesc")},{value:"vers",label:"Switch",description:l("switchRoleDesc")},{value:"sub",label:"Submissive",description:l("submissiveRoleDesc")}],p=[{id:"clothed",title:"noNaked",description:l("foreplayClothedDesc"),isSelected:!t.isNaked},{id:"naked",title:"yesNaked",description:l("intimateNudityDesc"),isSelected:t.isNaked}];return e.jsxs(y,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[e.jsx(u,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(h,{i18nKey:"playingWithPeople"})}),e.jsx(A,{container:!0,spacing:2,sx:{mb:3},children:a.map(o=>e.jsx(A,{size:{xs:12,sm:6},children:e.jsx(B,{sx:{cursor:"pointer",border:o.isSelected?"3px solid":"1px solid",borderColor:o.isSelected?"primary.main":"divider",backgroundColor:o.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>s({...t,gameMode:o.id==="local"?"local":"online",roomRealtime:o.id!=="local"}),children:e.jsx(W,{sx:{p:3},children:e.jsxs(P,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(u,{variant:"h6",sx:{fontWeight:600},children:l(o.title)}),e.jsx(u,{variant:"body2",color:"text.secondary",children:o.description}),o.isSelected&&e.jsx(I,{label:l("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},o.id))}),e.jsx(Q,{in:n,timeout:500,children:e.jsxs(y,{sx:{mb:3},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:e.jsx(h,{i18nKey:"yourRole"})}),e.jsx(A,{container:!0,spacing:2,sx:{mb:3},children:d.map(o=>e.jsx(A,{size:{xs:12,sm:4},children:e.jsx(B,{sx:{cursor:"pointer",border:t.role===o.value?"2px solid":"1px solid",borderColor:t.role===o.value?"primary.main":"divider",backgroundColor:t.role===o.value?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>s({...t,role:o.value}),children:e.jsx(W,{sx:{p:2.5},children:e.jsxs(P,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(u,{variant:"subtitle1",sx:{fontWeight:600},children:l(o.value)}),e.jsx(u,{variant:"body2",color:"text.secondary",children:o.description}),t.role===o.value&&e.jsx(I,{label:l("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},o.value))}),e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:e.jsx(h,{i18nKey:"areYouNaked"})}),e.jsx(A,{container:!0,spacing:2,children:p.map(o=>e.jsx(A,{size:{xs:12,sm:6},children:e.jsx(B,{sx:{cursor:"pointer",border:o.isSelected?"2px solid":"1px solid",borderColor:o.isSelected?"primary.main":"divider",backgroundColor:o.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>s({...t,isNaked:o.id==="naked"}),children:e.jsx(W,{sx:{p:3},children:e.jsxs(P,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(u,{variant:"h6",sx:{fontWeight:600},children:l(o.title)}),e.jsx(u,{variant:"body2",color:"text.secondary",children:o.description}),o.isSelected&&e.jsx(I,{label:l("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},o.id))})]})}),e.jsx(y,{sx:{flexGrow:1}}),e.jsxs(E,{children:[e.jsx(M,{onClick:r,children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(M,{variant:"contained",onClick:i,children:e.jsx(h,{i18nKey:"next"})})]})]})}function Fe({gameMode:t,onPresetSelect:s,selectedPreset:i,actionsList:r}){const{t:n}=R(),c={solo:[{id:"popperbating",name:n("presetPopperbating"),description:n("presetPopperbatingDesc"),actions:["bating"],consumptions:["poppers"],intensities:{bating:2,poppers:1}},{id:"smoking-tits",name:n("presetSmokingTits"),description:n("presetSmokingTitsDesc"),actions:["titTorture"],consumptions:["vaping"],intensities:{titTorture:2,vaping:1}},{id:"exploration-solo",name:n("presetExplorationSolo"),description:n("presetExplorationSoloDesc"),actions:["throatTraining","buttPlay","titTorture","ballBusting"],consumptions:[],intensities:{throatTraining:1,buttPlay:1,titTorture:1,ballBusting:1}},{id:"ball-busting",name:n("presetBallBusting"),description:n("presetBallBustingDesc"),actions:["ballBusting","bating"],consumptions:["poppers"],intensities:{ballBusting:2,bating:2}}],foreplay:[{id:"romantic-start",name:n("presetRomanticStart"),description:n("presetRomanticStartDesc"),actions:["kissing","stripping"],consumptions:["alcohol"],intensities:{kissing:2,stripping:1,alcohol:1}},{id:"degrading",name:n("presetDegrading"),description:n("presetDegradingDesc"),actions:["humiliation","footPlay","breathPlay"],consumptions:["poppers"],intensities:{humiliation:2,footPlay:2,breathPlay:2,poppers:2}},{id:"sensual-touch",name:n("presetSensualTouch"),description:n("presetSensualTouchDesc"),actions:["kissing","footPlay","tickling"],consumptions:[],intensities:{kissing:2,footPlay:1,tickling:1}},{id:"electric-play",name:n("presetElectricPlay"),description:n("presetElectricPlayDesc"),actions:["electric","bondage"],consumptions:["vaping"],intensities:{electric:1,bondage:2,vaping:1}}],sex:[{id:"gentle-sex",name:n("presetGentleSex"),description:n("presetGentleSexDesc"),actions:["throatTraining","bating","buttPlay"],consumptions:["alcohol"],intensities:{throatTraining:1,bating:1,buttPlay:1,alcohol:1}},{id:"fisting",name:n("presetFisting"),description:n("presetFistingDesc"),actions:["buttPlay"],consumptions:["poppers"],intensities:{buttPlay:4,poppers:4}},{id:"bdsm",name:n("presetBdsm"),description:n("presetBdsmDesc"),actions:["pissPlay","throatTraining","spanking","titTorture"],consumptions:[],intensities:{pissPlay:2,throatTraining:2,spanking:2,titTorture:2}},{id:"breath-control",name:n("presetBreathControl"),description:n("presetBreathControlDesc"),actions:["bating"],consumptions:["gasMask"],intensities:{bating:2,gasMask:2}}]},l=c[t]||c.solo,a=d=>{s(d)};return e.jsxs(y,{children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:n("quickStart")}),e.jsx(A,{container:!0,spacing:2,children:l.map(d=>e.jsx(A,{size:{xs:12,sm:6,lg:3},children:e.jsx(B,{sx:{cursor:"pointer",border:i===d.id?2:1,borderColor:i===d.id?"primary.main":"divider",backgroundColor:i===d.id?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>a(d),children:e.jsxs(W,{sx:{p:2.5},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:d.name}),e.jsxs(y,{children:[d.actions.map((p,o)=>e.jsx(I,{label:r[p]?.label||p,size:"small",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:"primary.main",color:"primary.main","&:hover":{backgroundColor:"primary.50"}}},`action-${o}`)),d.consumptions.map((p,o)=>e.jsx(I,{label:r[p]?.label||p,size:"small",color:"secondary",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:"secondary.main",color:"secondary.main","&:hover":{backgroundColor:"secondary.50"}}},`consumption-${o}`))]})]})})},d.id))})]})}function U(){return e.jsxs(u,{variant:"h6",sx:{mt:2},children:[e.jsx(h,{i18nKey:"setIntensityLevel"}),e.jsx(Z,{title:e.jsx(u,{variant:"body1",children:e.jsx(h,{i18nKey:"intensityTooltip"})}),arrow:!0,sx:{ml:1},children:e.jsx(ke,{sx:{ml:.5,fontSize:15}})})]})}const Ge=(t,s)=>{const{gameMode:i,isNaked:r}=t,n=z(i);return n&&["foreplay","sex"].includes(s.type)||!n&&r&&["solo","foreplay"].includes(s.type)||!n&&!r&&["solo","sex"].includes(s.type)},Ve=t=>{const s={...t},i=t.selectedActions||{},r={};return Object.entries(i).forEach(([n,c])=>{Ge(t,c)||(r[n]=c)}),s.selectedActions=r,s},Y=(t,s,i)=>{const r=t.selectedActions||{};return Object.entries(r).map(([n,c])=>{const l=s.find(a=>a.value===n);return c.type!==i||!l?null:n}).filter(n=>!!n)},Le=(t,s,i)=>{const r={...t},n={...r.selectedActions};return Object.keys(n).forEach(c=>{n[c].type===s&&!i.includes(c)&&delete n[c]}),r.selectedActions=n,r},H=(t,s,i)=>{i(r=>{const n=Le(r,s,t),c={...n.selectedActions};return t.forEach(l=>{if(c[l])return;let a={type:s,level:1};s==="consumption"&&(a={...a,variation:n.isAppend?"appendMost":"standalone"}),c[l]=a}),{...n,selectedActions:c}})},$=(t,s,i,r,n,c=null)=>{const l=t?.target?.value;if(l===0)return n(a=>a.filter(d=>d!==s)),r(a=>{const d={...a.selectedActions};return delete d[s],{...a,selectedActions:d}});r(a=>{const d={...a.selectedActions};return d[s]={...d[s]||{},type:i,level:l,...!!c&&{variation:c}},{...a,selectedActions:d}})},Ue=t=>!!(t&&Object.keys(t).some(s=>{const i=t[s];return(i?.level??0)>0&&i?.variation!=="appendMost"}));function q({onChange:t,values:s,options:i,label:r}){const n=m.useCallback(l=>i?.find(a=>a.value===l)?.label,[i]),c=m.useCallback(l=>e.jsx(y,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:l?.map(a=>e.jsx(I,{label:n(a)},a))}),[n]);return e.jsxs(D,{fullWidth:!0,children:[e.jsx(ee,{id:`${r}-label`,children:r}),e.jsx(te,{labelId:`${r}-label`,id:`${r}`,multiple:!0,value:s,onChange:t,fullWidth:!0,input:e.jsx(oe,{label:e.jsx(h,{i18nKey:"actionsLabel"})}),renderValue:c,children:i?.map(({label:l,value:a})=>e.jsxs(ne,{value:a,children:[e.jsx(se,{checked:s.includes(a)}),e.jsx(ie,{primary:l})]},a))})]})}const Ye=2;function He({formData:t,setFormData:s,options:i,actionsList:r}){const n="consumption",c=i(n),a=Y(t,c,n)||[],d=o=>{const{value:g}=o.target,j=typeof g=="string"?g.split(","):g;j.length<=Ye&&H(j,n,s)},p=(o,g)=>{const j=o.target.checked?"appendMost":"standalone",k=o.target.checked,S={...t.selectedActions};g.forEach(x=>{S[x]&&(S[x]={...S[x],variation:j})});const b={...t,isAppend:k,selectedActions:S};s(b)};return e.jsxs(e.Fragment,{children:[e.jsx(u,{variant:"h6",sx:{my:2},children:e.jsx(h,{i18nKey:"pickConsumptions"})}),e.jsx(q,{onChange:d,values:a,options:c,label:G("consumables")}),!!a.length&&e.jsxs(e.Fragment,{children:[e.jsx(U,{}),a.map(o=>e.jsx(L,{actionsFolder:r,settings:t,option:o,initValue:1,onChange:g=>$(g,o,n,s,()=>{},t.isAppend?"appendMost":"standalone")},o)),e.jsx(u,{variant:"h6",sx:{mt:2},children:e.jsx(h,{i18nKey:"standaloneOrCombine"})}),e.jsx(We,{trueCondition:t.isAppend,onChange:o=>p(o,a),yesLabel:"combineWithActions"})]})]})}const $e=4,qe=t=>z(t?.gameMode)?"solo":t.isNaked?"sex":"foreplay";function Xe({formData:t,setFormData:s,options:i,actionsList:r}){const n=qe(t),c=i(n),a=Y(t,c,n)||[],d=p=>{const{value:o}=p.target,g=typeof o=="string"?o.split(","):o;g.length<=$e&&H(g,n,s)};return e.jsxs(e.Fragment,{children:[e.jsx(u,{variant:"h6",sx:{my:2},children:e.jsx(h,{i18nKey:"pickActions"})}),e.jsx(q,{onChange:d,values:a,options:c,label:G("actionsLabel")}),a.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(U,{}),a.map(p=>e.jsx(L,{actionsFolder:r,settings:t,option:p,initValue:1,onChange:o=>$(o,p,n,s,()=>{})},p))]})]})}function _e({formData:t,setFormData:s,nextStep:i,prevStep:r,actionsList:n}){const{t:c}=R(),[l,a]=m.useState(""),[d,p]=m.useState(!1);function o(x){return Object.keys(n).filter(v=>n[v]?.type===x)}m.useEffect(()=>{const x=Ve(t);s(x)},[]),m.useEffect(()=>{t.selectedActions&&Object.keys(t.selectedActions).length>0&&p(!0)},[]);const g=x=>o(x).map(v=>({value:v,label:n[v]?.label}));let j;t.gameMode==="online"?j="solo":t.gameMode==="local"&&!t.isNaked?j="foreplay":j="sex";const k=(x,v,O,C)=>{x.forEach(f=>{if(n[f]){const T=O.intensities?.[f]||v,X=Object.keys(n[f].intensities||{}).filter(_=>_!=="None").length;C[f]={type:n[f].type,level:Math.min(T,X)}}})},S=x=>{a(x.id);const v={};k(x.actions,2,x,v),k(x.consumptions,1,x,v),s({...t,selectedActions:v})},b=!Ue(t.selectedActions);return e.jsxs(y,{children:[e.jsx(Fe,{gameMode:j,onPresetSelect:S,selectedPreset:l,actionsList:n}),e.jsx(y,{sx:{mt:4},children:e.jsxs(re,{expanded:d,onChange:(x,v)=>p(v),children:[e.jsx(ae,{expandIcon:e.jsx(we,{}),"aria-controls":"customization-content",id:"customization-header",children:e.jsxs(P,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Ae,{}),e.jsx(u,{variant:"h6",children:c("customizeActions")})]})}),e.jsxs(ce,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:c("customizeActionsDesc")}),e.jsx(Xe,{formData:t,setFormData:s,options:g,actionsList:n}),e.jsx(V,{sx:{my:3}}),e.jsx(He,{formData:t,setFormData:s,options:g,actionsList:n})]})]})}),e.jsx(y,{sx:{mt:4},children:e.jsxs(E,{children:[e.jsx(M,{onClick:()=>r(w(t.room)?2:1),children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(M,{variant:"contained",disabled:b,onClick:i,size:"large",children:e.jsx(h,{i18nKey:"next"})})]})})]})}function Je({formData:t,setFormData:s,prevStep:i,actionsList:r,close:n}){const c=[100,100],l=[0,0],[a,d]=m.useState(N(t?.finishRange||[],l)),[p,o]=m.useState(!1),g=Ie(),{t:j}=R();m.useEffect(()=>{let b={...t,boardUpdated:!0};(!a||!N(t.finishRange||[],c))&&(b.finishRange=c),s(b)},[]);async function k(){o(!0);try{await g(t,r)}catch(b){console.error("Error submitting settings:",b)}finally{o(!1)}typeof n=="function"&&n()}const S=[{id:"noOrgasm",title:"noOrgasm",description:j("noOrgasmDesc"),isSelected:!a},{id:"yesOrgasm",title:"yesOrgasm",description:j("yesOrgasmDesc"),isSelected:a}];return e.jsxs(y,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[e.jsx(u,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(h,{i18nKey:"WillYouOrgasm"})}),e.jsx(A,{container:!0,spacing:2,sx:{mb:4},children:S.map(b=>e.jsx(A,{size:{xs:12,sm:6},children:e.jsx(B,{sx:{cursor:"pointer",border:b.isSelected?"3px solid":"1px solid",borderColor:b.isSelected?"primary.main":"divider",backgroundColor:b.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%",transform:b.isSelected?"scale(1.02)":"scale(1)","&:hover":{borderColor:"primary.main",transform:"scale(1.02)",boxShadow:2}},onClick:()=>{const x=b.id==="yesOrgasm";s({...t,finishRange:x?l:c}),d(x)},children:e.jsx(W,{sx:{p:3},children:e.jsxs(P,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(u,{variant:"h6",sx:{fontWeight:600},children:j(b.title)}),e.jsx(u,{variant:"body2",color:"text.secondary",children:b.description}),b.isSelected&&e.jsx(I,{label:j("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},b.id))}),e.jsx(y,{sx:{flexGrow:1}}),e.jsxs(E,{children:[e.jsx(M,{onClick:i,disabled:p,children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(M,{variant:"contained",onClick:k,disabled:p,startIcon:p?e.jsx(le,{size:20,color:"inherit"}):null,size:"large",sx:{px:4},children:e.jsx(h,{i18nKey:"buildGame"})})]})]})}function Qe({currentStep:t,isPublicRoom:s}){const{t:i}=R(),r=de(),n=pe(r.breakpoints.down("md")),c=s?[i("roomSelection","Room Selection"),i("actionsSelection","Actions Selection"),i("finishSetup","Finish Setup")]:[i("roomSelection","Room Selection"),i("gameModeSelection","Game Mode Selection"),i("actionsSelection","Actions Selection"),i("finishSetup","Finish Setup")],a=(d=>{if(s)switch(d){case 1:return 0;case 3:return 1;case 4:return 2;default:return 0}return d-1})(t);return e.jsx(ue,{activeStep:a,alternativeLabel:!n,orientation:"horizontal",sx:{...n&&{"& .MuiStepLabel-label":{display:"none"}}},children:c.map((d,p)=>e.jsx(xe,{children:e.jsx(me,{children:n?"":d})},p))})}function Ze({close:t}){const{id:s}=he(),[i,r]=m.useState(1),n={room:s};w(s)&&(n.gameMode="online",n.roomRealtime=!0);const[c,l]=Ee({gameMode:"online",roomRealtime:!0,actions:[],consumption:[],role:"sub",boardUpdated:!1,room:s||"PUBLIC"},n),a=m.useRef(!0),{actionsList:d}=Me(c.gameMode);m.useEffect(()=>{if(a.current){if(a.current=!1,c.advancedSettings){g();return}if(typeof t=="function"){if(w(s)){r(3);return}if(c.gameMode==="online"){r(3);return}r(2)}}},[c,t,s]);const p=S=>{if(!Number.isInteger(S))return r(i+1);r(i+(S||1))},o=S=>{if(!Number.isInteger(S))return r(i-1);r(i-(S||1))},g=()=>r(0),j=()=>{w(s)||c.gameMode==="online"?r(3):r(1)},k=()=>{switch(i){case 1:return e.jsx(Ke,{formData:c,setFormData:l,nextStep:p});case 2:return e.jsx(Ne,{formData:c,setFormData:l,nextStep:p,prevStep:o});case 3:return e.jsx(_e,{formData:c,setFormData:l,nextStep:p,prevStep:o,actionsList:d});case 4:return e.jsx(Je,{formData:c,setFormData:l,prevStep:o,actionsList:d,close:t});default:return null}};return i===0?e.jsx(Oe,{closeDialog:t,onOpenSetupWizard:j}):e.jsxs(y,{children:[e.jsx(y,{sx:{width:"100%",mt:2,mb:4},children:e.jsx(Qe,{currentStep:i,isPublicRoom:w(s)})}),k(),e.jsx(V,{sx:{mt:3}}),e.jsx(M,{onClick:g,children:e.jsx(h,{i18nKey:"advancedSetup"})})]})}function bt({open:t,close:s}){const i=fe(),[r]=ge();return r.get("importBoard")?null:e.jsxs(be,{fullScreen:i,open:t,maxWidth:"md",children:[e.jsxs(je,{children:[e.jsx(h,{i18nKey:"gameSettingsHeading"}),typeof s=="function"&&e.jsx(Se,{close:s})]}),e.jsx(ye,{children:e.jsx(Ze,{close:typeof s=="function"?s:void 0})})]})}export{bt as default};
