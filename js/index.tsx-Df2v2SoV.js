import{am as T,r as s,ad as G,as as W,j as a,M as R,at as V,au as i,av as d,aw as g,ax as n,aa as x,z as q,Q as h,a1 as U,T as Q,y as H,x as J,ay as X,ab as Y}from"./chunk-CMb_ATvh.js";import{u as Z}from"./chunk-BHLbabll.js";import{u as _}from"./chunk-DQWlF9SU.js";import{u as $,l as aa}from"./chunk-BXgrBqvR.js";import{u as ea}from"./chunk-CZW-mZa7.js";import{e as sa}from"../assets/index-k__UAMMJ.js";import{N as na}from"./chunk-Cy1c332X.js";import ta from"./index.tsx-DTiQIpBE.js";import{A as ia}from"./chunk-7SNzVtQH.js";import{a as ra,b as p}from"./chunk-jdmcjs0s.js";import"./chunk-BVhHzeSz.js";import"./chunk-btATtFkb.js";import"./chunk-B90GCnie.js";import"./chunk-C7PvMB7v.js";import"./chunk-Bp-jfObm.js";import"./chunk-BBrONRl2.js";function Na(){const{i18n:r,t:N}=T(),{login:j,user:v}=Z(),[w,o]=s.useState(!1),[S,y]=s.useState("login"),[f,b]=s.useState(!1),D=()=>{y("login"),o(!0)},I=()=>{y("register"),o(!0)},K=G(),[A]=W(),z=!!A.get("importBoard"),u=K.id??"PUBLIC",P=ea(),c=_("sm"),[l,k]=s.useState(v?.displayName||""),[L,C]=$(),m=s.useCallback(async e=>{e.preventDefault(),await C({...L,displayName:l,room:u}),await j(l)},[l,j,u,L,C]),M=s.useCallback(async e=>{e.key==="Enter"&&await m(e)},[m]),O=r.resolvedLanguage||"en",B=s.useCallback(async e=>{const t=e.target.value;b(!0);try{await sa(t),await r.changeLanguage(t)}catch(F){console.error("Error changing language:",F),await r.changeLanguage(t)}finally{b(!1)}},[r]),E=s.useMemo(()=>Object.entries(aa).map(([e,t])=>a.jsx(R,{value:e,children:t.label},e)),[]);return a.jsxs(a.Fragment,{children:[a.jsx(na,{room:u,playerList:P}),a.jsxs(V,{maxWidth:"sm",sx:{mt:8},children:[a.jsx(i,{container:!0,flexDirection:"column",children:a.jsx(d,{className:"unauthenticated-card",children:a.jsxs(g,{children:[a.jsx("h2",{className:"setup",children:a.jsx(n,{i18nKey:"setup"})}),a.jsxs(x,{component:"form",method:"post",onSubmit:m,className:"settings-box",children:[a.jsx(q,{fullWidth:!0,id:"displayName",label:N("displayName"),value:l,onChange:e=>k(e.target.value),required:!0,autoFocus:!0,onKeyDown:e=>M(e),margin:"normal"}),a.jsx(h,{variant:"contained",type:"submit",sx:{mr:1},fullWidth:!0,children:z?a.jsx(n,{i18nKey:"import"}):a.jsx(n,{i18nKey:"anonymousLogin"})}),a.jsx(U,{sx:{my:2},children:a.jsx(Q,{variant:"body2",color:"text.secondary",children:a.jsx(n,{i18nKey:"or",children:"OR"})})}),a.jsxs(x,{sx:{display:"flex",justifyContent:"space-evenly"},children:[a.jsx(h,{variant:"outlined",startIcon:a.jsx(ra,{}),onClick:D,sx:{mr:1},children:a.jsx(n,{i18nKey:"signIn"})}),a.jsx(h,{variant:"outlined",onClick:I,children:a.jsx(n,{i18nKey:"createAccount"})})]})]})]})})}),a.jsx(i,{container:!0,sx:{mt:1},children:a.jsx(i,{className:"language",children:a.jsx(d,{className:"unauthenticated-card",children:a.jsx(g,{className:"translation-card-content",children:a.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:2},children:[!c&&a.jsx(p,{}),a.jsxs(H,{size:"small",sx:{minWidth:160,flexGrow:1},children:[a.jsxs(J,{id:"unauth-language-label",sx:{display:"flex",alignItems:"center",fontSize:"0.875rem"},children:[c&&a.jsx(p,{sx:{mr:.5,fontSize:"1rem"}}),a.jsx(n,{i18nKey:"language"})]}),a.jsx(X,{labelId:"unauth-language-label",id:"unauth-language-select",value:O,disabled:f,label:a.jsxs(a.Fragment,{children:[c&&a.jsx(p,{sx:{fontSize:"1rem"}}),a.jsx(n,{i18nKey:"language"})]}),onChange:B,size:"small",inputProps:{endAdornment:f&&a.jsx(Y,{size:16})},children:E})]})]})})})})}),a.jsx(i,{container:!0,sx:{mt:1},children:a.jsx(i,{className:"language",children:a.jsx(d,{className:"unauthenticated-card",children:a.jsx(g,{children:a.jsx(ta,{})})})})})]}),a.jsx(ia,{open:w,close:()=>o(!1),initialView:S})]})}export{Na as default};
