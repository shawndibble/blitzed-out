import{a4 as Ss,a5 as $i,a6 as Ni,a7 as xt,r as Fe}from"./chunk-BgixYSR_.js";function ji(c){var n,i,s="";if(typeof c=="string"||typeof c=="number")s+=c;else if(typeof c=="object")if(Array.isArray(c)){var u=c.length;for(n=0;n<u;n++)c[n]&&(i=ji(c[n]))&&(s&&(s+=" "),s+=i)}else for(i in c)c[i]&&(s&&(s+=" "),s+=i);return s}function Wo(){for(var c,n,i=0,s="",u=arguments.length;i<u;i++)(c=arguments[i])&&(n=ji(c))&&(s&&(s+=" "),s+=n);return s}var On={exports:{}},Os=On.exports,ri;function Yo(){return ri||(ri=1,function(c,n){(function(i,s){c.exports=s()})(Os,function(){var i=1e3,s=6e4,u=36e5,f="millisecond",d="second",p="minute",g="hour",x="day",N="week",C="month",Z="quarter",I="year",M="date",le="Invalid Date",ge=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,fe=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,he={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(K){var V=["th","st","nd","rd"],T=K%100;return"["+K+(V[(T-20)%10]||V[T]||V[0])+"]"}},re=function(K,V,T){var G=String(K);return!G||G.length>=V?K:""+Array(V+1-G.length).join(T)+K},ue={s:re,z:function(K){var V=-K.utcOffset(),T=Math.abs(V),G=Math.floor(T/60),z=T%60;return(V<=0?"+":"-")+re(G,2,"0")+":"+re(z,2,"0")},m:function K(V,T){if(V.date()<T.date())return-K(T,V);var G=12*(T.year()-V.year())+(T.month()-V.month()),z=V.clone().add(G,C),Y=T-z<0,ie=V.clone().add(G+(Y?-1:1),C);return+(-(G+(T-z)/(Y?z-ie:ie-z))||0)},a:function(K){return K<0?Math.ceil(K)||0:Math.floor(K)},p:function(K){return{M:C,y:I,w:N,d:x,D:M,h:g,m:p,s:d,ms:f,Q:Z}[K]||String(K||"").toLowerCase().replace(/s$/,"")},u:function(K){return K===void 0}},de="en",F={};F[de]=he;var A="$isDayjsObject",te=function(K){return K instanceof ae||!(!K||!K[A])},B=function K(V,T,G){var z;if(!V)return de;if(typeof V=="string"){var Y=V.toLowerCase();F[Y]&&(z=Y),T&&(F[Y]=T,z=Y);var ie=V.split("-");if(!z&&ie.length>1)return K(ie[0])}else{var ce=V.name;F[ce]=V,z=ce}return!G&&z&&(de=z),z||!G&&de},q=function(K,V){if(te(K))return K.clone();var T=typeof V=="object"?V:{};return T.date=K,T.args=arguments,new ae(T)},j=ue;j.l=B,j.i=te,j.w=function(K,V){return q(K,{locale:V.$L,utc:V.$u,x:V.$x,$offset:V.$offset})};var ae=function(){function K(T){this.$L=B(T.locale,null,!0),this.parse(T),this.$x=this.$x||T.x||{},this[A]=!0}var V=K.prototype;return V.parse=function(T){this.$d=function(G){var z=G.date,Y=G.utc;if(z===null)return new Date(NaN);if(j.u(z))return new Date;if(z instanceof Date)return new Date(z);if(typeof z=="string"&&!/Z$/i.test(z)){var ie=z.match(ge);if(ie){var ce=ie[2]-1||0,xe=(ie[7]||"0").substring(0,3);return Y?new Date(Date.UTC(ie[1],ce,ie[3]||1,ie[4]||0,ie[5]||0,ie[6]||0,xe)):new Date(ie[1],ce,ie[3]||1,ie[4]||0,ie[5]||0,ie[6]||0,xe)}}return new Date(z)}(T),this.init()},V.init=function(){var T=this.$d;this.$y=T.getFullYear(),this.$M=T.getMonth(),this.$D=T.getDate(),this.$W=T.getDay(),this.$H=T.getHours(),this.$m=T.getMinutes(),this.$s=T.getSeconds(),this.$ms=T.getMilliseconds()},V.$utils=function(){return j},V.isValid=function(){return this.$d.toString()!==le},V.isSame=function(T,G){var z=q(T);return this.startOf(G)<=z&&z<=this.endOf(G)},V.isAfter=function(T,G){return q(T)<this.startOf(G)},V.isBefore=function(T,G){return this.endOf(G)<q(T)},V.$g=function(T,G,z){return j.u(T)?this[G]:this.set(z,T)},V.unix=function(){return Math.floor(this.valueOf()/1e3)},V.valueOf=function(){return this.$d.getTime()},V.startOf=function(T,G){var z=this,Y=!!j.u(G)||G,ie=j.p(T),ce=function(se,je){var Be=j.w(z.$u?Date.UTC(z.$y,je,se):new Date(z.$y,je,se),z);return Y?Be:Be.endOf(x)},xe=function(se,je){return j.w(z.toDate()[se].apply(z.toDate("s"),(Y?[0,0,0,0]:[23,59,59,999]).slice(je)),z)},we=this.$W,ke=this.$M,Ce=this.$D,Me="set"+(this.$u?"UTC":"");switch(ie){case I:return Y?ce(1,0):ce(31,11);case C:return Y?ce(1,ke):ce(0,ke+1);case N:var ze=this.$locale().weekStart||0,ut=(we<ze?we+7:we)-ze;return ce(Y?Ce-ut:Ce+(6-ut),ke);case x:case M:return xe(Me+"Hours",0);case g:return xe(Me+"Minutes",1);case p:return xe(Me+"Seconds",2);case d:return xe(Me+"Milliseconds",3);default:return this.clone()}},V.endOf=function(T){return this.startOf(T,!1)},V.$set=function(T,G){var z,Y=j.p(T),ie="set"+(this.$u?"UTC":""),ce=(z={},z[x]=ie+"Date",z[M]=ie+"Date",z[C]=ie+"Month",z[I]=ie+"FullYear",z[g]=ie+"Hours",z[p]=ie+"Minutes",z[d]=ie+"Seconds",z[f]=ie+"Milliseconds",z)[Y],xe=Y===x?this.$D+(G-this.$W):G;if(Y===C||Y===I){var we=this.clone().set(M,1);we.$d[ce](xe),we.init(),this.$d=we.set(M,Math.min(this.$D,we.daysInMonth())).$d}else ce&&this.$d[ce](xe);return this.init(),this},V.set=function(T,G){return this.clone().$set(T,G)},V.get=function(T){return this[j.p(T)]()},V.add=function(T,G){var z,Y=this;T=Number(T);var ie=j.p(G),ce=function(ke){var Ce=q(Y);return j.w(Ce.date(Ce.date()+Math.round(ke*T)),Y)};if(ie===C)return this.set(C,this.$M+T);if(ie===I)return this.set(I,this.$y+T);if(ie===x)return ce(1);if(ie===N)return ce(7);var xe=(z={},z[p]=s,z[g]=u,z[d]=i,z)[ie]||1,we=this.$d.getTime()+T*xe;return j.w(we,this)},V.subtract=function(T,G){return this.add(-1*T,G)},V.format=function(T){var G=this,z=this.$locale();if(!this.isValid())return z.invalidDate||le;var Y=T||"YYYY-MM-DDTHH:mm:ssZ",ie=j.z(this),ce=this.$H,xe=this.$m,we=this.$M,ke=z.weekdays,Ce=z.months,Me=z.meridiem,ze=function(je,Be,Se,We){return je&&(je[Be]||je(G,Y))||Se[Be].slice(0,We)},ut=function(je){return j.s(ce%12||12,je,"0")},se=Me||function(je,Be,Se){var We=je<12?"AM":"PM";return Se?We.toLowerCase():We};return Y.replace(fe,function(je,Be){return Be||function(Se){switch(Se){case"YY":return String(G.$y).slice(-2);case"YYYY":return j.s(G.$y,4,"0");case"M":return we+1;case"MM":return j.s(we+1,2,"0");case"MMM":return ze(z.monthsShort,we,Ce,3);case"MMMM":return ze(Ce,we);case"D":return G.$D;case"DD":return j.s(G.$D,2,"0");case"d":return String(G.$W);case"dd":return ze(z.weekdaysMin,G.$W,ke,2);case"ddd":return ze(z.weekdaysShort,G.$W,ke,3);case"dddd":return ke[G.$W];case"H":return String(ce);case"HH":return j.s(ce,2,"0");case"h":return ut(1);case"hh":return ut(2);case"a":return se(ce,xe,!0);case"A":return se(ce,xe,!1);case"m":return String(xe);case"mm":return j.s(xe,2,"0");case"s":return String(G.$s);case"ss":return j.s(G.$s,2,"0");case"SSS":return j.s(G.$ms,3,"0");case"Z":return ie}return null}(je)||ie.replace(":","")})},V.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},V.diff=function(T,G,z){var Y,ie=this,ce=j.p(G),xe=q(T),we=(xe.utcOffset()-this.utcOffset())*s,ke=this-xe,Ce=function(){return j.m(ie,xe)};switch(ce){case I:Y=Ce()/12;break;case C:Y=Ce();break;case Z:Y=Ce()/3;break;case N:Y=(ke-we)/6048e5;break;case x:Y=(ke-we)/864e5;break;case g:Y=ke/u;break;case p:Y=ke/s;break;case d:Y=ke/i;break;default:Y=ke}return z?Y:j.a(Y)},V.daysInMonth=function(){return this.endOf(C).$D},V.$locale=function(){return F[this.$L]},V.locale=function(T,G){if(!T)return this.$L;var z=this.clone(),Y=B(T,G,!0);return Y&&(z.$L=Y),z},V.clone=function(){return j.w(this.$d,this)},V.toDate=function(){return new Date(this.valueOf())},V.toJSON=function(){return this.isValid()?this.toISOString():null},V.toISOString=function(){return this.$d.toISOString()},V.toString=function(){return this.$d.toUTCString()},K}(),L=ae.prototype;return q.prototype=L,[["$ms",f],["$s",d],["$m",p],["$H",g],["$W",x],["$M",C],["$y",I],["$D",M]].forEach(function(K){L[K[1]]=function(V){return this.$g(V,K[0],K[1])}}),q.extend=function(K,V){return K.$i||(K(V,ae,q),K.$i=!0),q},q.locale=B,q.isDayjs=te,q.unix=function(K){return q(1e3*K)},q.en=F[de],q.Ls=F,q.p={},q})}(On)),On.exports}var dr={exports:{}};const ks={},Es=Object.freeze(Object.defineProperty({__proto__:null,default:ks},Symbol.toStringTag,{value:"Module"})),ii=Ss(Es);/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.11.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2025
 * @license MIT
 */var si;function Jo(){return si||(si=1,function(c){(function(){var n="input is invalid type",i=typeof window=="object",s=i?window:{};s.JS_SHA256_NO_WINDOW&&(i=!1);var u=!i&&typeof self=="object",f=!s.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node&&process.type!="renderer";f?s=$i:u&&(s=self);var d=!s.JS_SHA256_NO_COMMON_JS&&!0&&c.exports,p=!s.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",g="0123456789abcdef".split(""),x=[-2147483648,8388608,32768,128],N=[24,16,8,0],C=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Z=["hex","array","digest","arrayBuffer"],I=[];(s.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(F){return Object.prototype.toString.call(F)==="[object Array]"}),p&&(s.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(F){return typeof F=="object"&&F.buffer&&F.buffer.constructor===ArrayBuffer});var M=function(F,A){return function(te){return new re(A,!0).update(te)[F]()}},le=function(F){var A=M("hex",F);f&&(A=ge(A,F)),A.create=function(){return new re(F)},A.update=function(q){return A.create().update(q)};for(var te=0;te<Z.length;++te){var B=Z[te];A[B]=M(B,F)}return A},ge=function(F,A){var te=ii,B=ii.Buffer,q=A?"sha224":"sha256",j;B.from&&!s.JS_SHA256_NO_BUFFER_FROM?j=B.from:j=function(L){return new B(L)};var ae=function(L){if(typeof L=="string")return te.createHash(q).update(L,"utf8").digest("hex");if(L==null)throw new Error(n);return L.constructor===ArrayBuffer&&(L=new Uint8Array(L)),Array.isArray(L)||ArrayBuffer.isView(L)||L.constructor===B?te.createHash(q).update(j(L)).digest("hex"):F(L)};return ae},fe=function(F,A){return function(te,B){return new ue(te,A,!0).update(B)[F]()}},he=function(F){var A=fe("hex",F);A.create=function(q){return new ue(q,F)},A.update=function(q,j){return A.create(q).update(j)};for(var te=0;te<Z.length;++te){var B=Z[te];A[B]=fe(B,F)}return A};function re(F,A){A?(I[0]=I[16]=I[1]=I[2]=I[3]=I[4]=I[5]=I[6]=I[7]=I[8]=I[9]=I[10]=I[11]=I[12]=I[13]=I[14]=I[15]=0,this.blocks=I):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=F}re.prototype.update=function(F){if(!this.finalized){var A,te=typeof F;if(te!=="string"){if(te==="object"){if(F===null)throw new Error(n);if(p&&F.constructor===ArrayBuffer)F=new Uint8Array(F);else if(!Array.isArray(F)&&(!p||!ArrayBuffer.isView(F)))throw new Error(n)}else throw new Error(n);A=!0}for(var B,q=0,j,ae=F.length,L=this.blocks;q<ae;){if(this.hashed&&(this.hashed=!1,L[0]=this.block,this.block=L[16]=L[1]=L[2]=L[3]=L[4]=L[5]=L[6]=L[7]=L[8]=L[9]=L[10]=L[11]=L[12]=L[13]=L[14]=L[15]=0),A)for(j=this.start;q<ae&&j<64;++q)L[j>>>2]|=F[q]<<N[j++&3];else for(j=this.start;q<ae&&j<64;++q)B=F.charCodeAt(q),B<128?L[j>>>2]|=B<<N[j++&3]:B<2048?(L[j>>>2]|=(192|B>>>6)<<N[j++&3],L[j>>>2]|=(128|B&63)<<N[j++&3]):B<55296||B>=57344?(L[j>>>2]|=(224|B>>>12)<<N[j++&3],L[j>>>2]|=(128|B>>>6&63)<<N[j++&3],L[j>>>2]|=(128|B&63)<<N[j++&3]):(B=65536+((B&1023)<<10|F.charCodeAt(++q)&1023),L[j>>>2]|=(240|B>>>18)<<N[j++&3],L[j>>>2]|=(128|B>>>12&63)<<N[j++&3],L[j>>>2]|=(128|B>>>6&63)<<N[j++&3],L[j>>>2]|=(128|B&63)<<N[j++&3]);this.lastByteIndex=j,this.bytes+=j-this.start,j>=64?(this.block=L[16],this.start=j-64,this.hash(),this.hashed=!0):this.start=j}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},re.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var F=this.blocks,A=this.lastByteIndex;F[16]=this.block,F[A>>>2]|=x[A&3],this.block=F[16],A>=56&&(this.hashed||this.hash(),F[0]=this.block,F[16]=F[1]=F[2]=F[3]=F[4]=F[5]=F[6]=F[7]=F[8]=F[9]=F[10]=F[11]=F[12]=F[13]=F[14]=F[15]=0),F[14]=this.hBytes<<3|this.bytes>>>29,F[15]=this.bytes<<3,this.hash()}},re.prototype.hash=function(){var F=this.h0,A=this.h1,te=this.h2,B=this.h3,q=this.h4,j=this.h5,ae=this.h6,L=this.h7,K=this.blocks,V,T,G,z,Y,ie,ce,xe,we,ke,Ce;for(V=16;V<64;++V)Y=K[V-15],T=(Y>>>7|Y<<25)^(Y>>>18|Y<<14)^Y>>>3,Y=K[V-2],G=(Y>>>17|Y<<15)^(Y>>>19|Y<<13)^Y>>>10,K[V]=K[V-16]+T+K[V-7]+G<<0;for(Ce=A&te,V=0;V<64;V+=4)this.first?(this.is224?(xe=300032,Y=K[0]-1413257819,L=Y-150054599<<0,B=Y+24177077<<0):(xe=704751109,Y=K[0]-210244248,L=Y-1521486534<<0,B=Y+143694565<<0),this.first=!1):(T=(F>>>2|F<<30)^(F>>>13|F<<19)^(F>>>22|F<<10),G=(q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7),xe=F&A,z=xe^F&te^Ce,ce=q&j^~q&ae,Y=L+G+ce+C[V]+K[V],ie=T+z,L=B+Y<<0,B=Y+ie<<0),T=(B>>>2|B<<30)^(B>>>13|B<<19)^(B>>>22|B<<10),G=(L>>>6|L<<26)^(L>>>11|L<<21)^(L>>>25|L<<7),we=B&F,z=we^B&A^xe,ce=L&q^~L&j,Y=ae+G+ce+C[V+1]+K[V+1],ie=T+z,ae=te+Y<<0,te=Y+ie<<0,T=(te>>>2|te<<30)^(te>>>13|te<<19)^(te>>>22|te<<10),G=(ae>>>6|ae<<26)^(ae>>>11|ae<<21)^(ae>>>25|ae<<7),ke=te&B,z=ke^te&F^we,ce=ae&L^~ae&q,Y=j+G+ce+C[V+2]+K[V+2],ie=T+z,j=A+Y<<0,A=Y+ie<<0,T=(A>>>2|A<<30)^(A>>>13|A<<19)^(A>>>22|A<<10),G=(j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7),Ce=A&te,z=Ce^A&B^ke,ce=j&ae^~j&L,Y=q+G+ce+C[V+3]+K[V+3],ie=T+z,q=F+Y<<0,F=Y+ie<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+F<<0,this.h1=this.h1+A<<0,this.h2=this.h2+te<<0,this.h3=this.h3+B<<0,this.h4=this.h4+q<<0,this.h5=this.h5+j<<0,this.h6=this.h6+ae<<0,this.h7=this.h7+L<<0},re.prototype.hex=function(){this.finalize();var F=this.h0,A=this.h1,te=this.h2,B=this.h3,q=this.h4,j=this.h5,ae=this.h6,L=this.h7,K=g[F>>>28&15]+g[F>>>24&15]+g[F>>>20&15]+g[F>>>16&15]+g[F>>>12&15]+g[F>>>8&15]+g[F>>>4&15]+g[F&15]+g[A>>>28&15]+g[A>>>24&15]+g[A>>>20&15]+g[A>>>16&15]+g[A>>>12&15]+g[A>>>8&15]+g[A>>>4&15]+g[A&15]+g[te>>>28&15]+g[te>>>24&15]+g[te>>>20&15]+g[te>>>16&15]+g[te>>>12&15]+g[te>>>8&15]+g[te>>>4&15]+g[te&15]+g[B>>>28&15]+g[B>>>24&15]+g[B>>>20&15]+g[B>>>16&15]+g[B>>>12&15]+g[B>>>8&15]+g[B>>>4&15]+g[B&15]+g[q>>>28&15]+g[q>>>24&15]+g[q>>>20&15]+g[q>>>16&15]+g[q>>>12&15]+g[q>>>8&15]+g[q>>>4&15]+g[q&15]+g[j>>>28&15]+g[j>>>24&15]+g[j>>>20&15]+g[j>>>16&15]+g[j>>>12&15]+g[j>>>8&15]+g[j>>>4&15]+g[j&15]+g[ae>>>28&15]+g[ae>>>24&15]+g[ae>>>20&15]+g[ae>>>16&15]+g[ae>>>12&15]+g[ae>>>8&15]+g[ae>>>4&15]+g[ae&15];return this.is224||(K+=g[L>>>28&15]+g[L>>>24&15]+g[L>>>20&15]+g[L>>>16&15]+g[L>>>12&15]+g[L>>>8&15]+g[L>>>4&15]+g[L&15]),K},re.prototype.toString=re.prototype.hex,re.prototype.digest=function(){this.finalize();var F=this.h0,A=this.h1,te=this.h2,B=this.h3,q=this.h4,j=this.h5,ae=this.h6,L=this.h7,K=[F>>>24&255,F>>>16&255,F>>>8&255,F&255,A>>>24&255,A>>>16&255,A>>>8&255,A&255,te>>>24&255,te>>>16&255,te>>>8&255,te&255,B>>>24&255,B>>>16&255,B>>>8&255,B&255,q>>>24&255,q>>>16&255,q>>>8&255,q&255,j>>>24&255,j>>>16&255,j>>>8&255,j&255,ae>>>24&255,ae>>>16&255,ae>>>8&255,ae&255];return this.is224||K.push(L>>>24&255,L>>>16&255,L>>>8&255,L&255),K},re.prototype.array=re.prototype.digest,re.prototype.arrayBuffer=function(){this.finalize();var F=new ArrayBuffer(this.is224?28:32),A=new DataView(F);return A.setUint32(0,this.h0),A.setUint32(4,this.h1),A.setUint32(8,this.h2),A.setUint32(12,this.h3),A.setUint32(16,this.h4),A.setUint32(20,this.h5),A.setUint32(24,this.h6),this.is224||A.setUint32(28,this.h7),F};function ue(F,A,te){var B,q=typeof F;if(q==="string"){var j=[],ae=F.length,L=0,K;for(B=0;B<ae;++B)K=F.charCodeAt(B),K<128?j[L++]=K:K<2048?(j[L++]=192|K>>>6,j[L++]=128|K&63):K<55296||K>=57344?(j[L++]=224|K>>>12,j[L++]=128|K>>>6&63,j[L++]=128|K&63):(K=65536+((K&1023)<<10|F.charCodeAt(++B)&1023),j[L++]=240|K>>>18,j[L++]=128|K>>>12&63,j[L++]=128|K>>>6&63,j[L++]=128|K&63);F=j}else if(q==="object"){if(F===null)throw new Error(n);if(p&&F.constructor===ArrayBuffer)F=new Uint8Array(F);else if(!Array.isArray(F)&&(!p||!ArrayBuffer.isView(F)))throw new Error(n)}else throw new Error(n);F.length>64&&(F=new re(A,!0).update(F).array());var V=[],T=[];for(B=0;B<64;++B){var G=F[B]||0;V[B]=92^G,T[B]=54^G}re.call(this,A,te),this.update(T),this.oKeyPad=V,this.inner=!0,this.sharedMemory=te}ue.prototype=new re,ue.prototype.finalize=function(){if(re.prototype.finalize.call(this),this.inner){this.inner=!1;var F=this.array();re.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(F),re.prototype.finalize.call(this)}};var de=le();de.sha256=de,de.sha224=le(!0),de.sha256.hmac=he(),de.sha224.hmac=he(!0),d?c.exports=de:(s.sha256=de.sha256,s.sha224=de.sha224)})()}(dr)),dr.exports}const pe=c=>typeof c=="string",Ht=()=>{let c,n;const i=new Promise((s,u)=>{c=s,n=u});return i.resolve=c,i.reject=n,i},oi=c=>c==null?"":""+c,Fs=(c,n,i)=>{c.forEach(s=>{n[s]&&(i[s]=n[s])})},Ps=/###/g,ai=c=>c&&c.indexOf("###")>-1?c.replace(Ps,"."):c,ui=c=>!c||pe(c),zt=(c,n,i)=>{const s=pe(n)?n.split("."):n;let u=0;for(;u<s.length-1;){if(ui(c))return{};const f=ai(s[u]);!c[f]&&i&&(c[f]=new i),Object.prototype.hasOwnProperty.call(c,f)?c=c[f]:c={},++u}return ui(c)?{}:{obj:c,k:ai(s[u])}},ci=(c,n,i)=>{const{obj:s,k:u}=zt(c,n,Object);if(s!==void 0||n.length===1){s[u]=i;return}let f=n[n.length-1],d=n.slice(0,n.length-1),p=zt(c,d,Object);for(;p.obj===void 0&&d.length;)f=`${d[d.length-1]}.${f}`,d=d.slice(0,d.length-1),p=zt(c,d,Object),p?.obj&&typeof p.obj[`${p.k}.${f}`]<"u"&&(p.obj=void 0);p.obj[`${p.k}.${f}`]=i},Cs=(c,n,i,s)=>{const{obj:u,k:f}=zt(c,n,Object);u[f]=u[f]||[],u[f].push(i)},Fn=(c,n)=>{const{obj:i,k:s}=zt(c,n);if(i&&Object.prototype.hasOwnProperty.call(i,s))return i[s]},As=(c,n,i)=>{const s=Fn(c,i);return s!==void 0?s:Fn(n,i)},Di=(c,n,i)=>{for(const s in n)s!=="__proto__"&&s!=="constructor"&&(s in c?pe(c[s])||c[s]instanceof String||pe(n[s])||n[s]instanceof String?i&&(c[s]=n[s]):Di(c[s],n[s],i):c[s]=n[s]);return c},Pt=c=>c.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Rs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const $s=c=>pe(c)?c.replace(/[&<>"'\/]/g,n=>Rs[n]):c;class Ns{constructor(n){this.capacity=n,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(n){const i=this.regExpMap.get(n);if(i!==void 0)return i;const s=new RegExp(n);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(n,s),this.regExpQueue.push(n),s}}const js=[" ",",","?","!",";"],Ds=new Ns(20),Ts=(c,n,i)=>{n=n||"",i=i||"";const s=js.filter(d=>n.indexOf(d)<0&&i.indexOf(d)<0);if(s.length===0)return!0;const u=Ds.getRegExp(`(${s.map(d=>d==="?"?"\\?":d).join("|")})`);let f=!u.test(c);if(!f){const d=c.indexOf(i);d>0&&!u.test(c.substring(0,d))&&(f=!0)}return f},vr=(c,n,i=".")=>{if(!c)return;if(c[n])return Object.prototype.hasOwnProperty.call(c,n)?c[n]:void 0;const s=n.split(i);let u=c;for(let f=0;f<s.length;){if(!u||typeof u!="object")return;let d,p="";for(let g=f;g<s.length;++g)if(g!==f&&(p+=i),p+=s[g],d=u[p],d!==void 0){if(["string","number","boolean"].indexOf(typeof d)>-1&&g<s.length-1)continue;f+=g-f+1;break}u=d}return u},Wt=c=>c?.replace("_","-"),Ls={type:"logger",log(c){this.output("log",c)},warn(c){this.output("warn",c)},error(c){this.output("error",c)},output(c,n){console?.[c]?.apply?.(console,n)}};class Pn{constructor(n,i={}){this.init(n,i)}init(n,i={}){this.prefix=i.prefix||"i18next:",this.logger=n||Ls,this.options=i,this.debug=i.debug}log(...n){return this.forward(n,"log","",!0)}warn(...n){return this.forward(n,"warn","",!0)}error(...n){return this.forward(n,"error","")}deprecate(...n){return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(n,i,s,u){return u&&!this.debug?null:(pe(n[0])&&(n[0]=`${s}${this.prefix} ${n[0]}`),this.logger[i](n))}create(n){return new Pn(this.logger,{prefix:`${this.prefix}:${n}:`,...this.options})}clone(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new Pn(this.logger,n)}}var Ge=new Pn;class An{constructor(){this.observers={}}on(n,i){return n.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const u=this.observers[s].get(i)||0;this.observers[s].set(i,u+1)}),this}off(n,i){if(this.observers[n]){if(!i){delete this.observers[n];return}this.observers[n].delete(i)}}emit(n,...i){this.observers[n]&&Array.from(this.observers[n].entries()).forEach(([u,f])=>{for(let d=0;d<f;d++)u(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([u,f])=>{for(let d=0;d<f;d++)u.apply(u,[n,...i])})}}class li extends An{constructor(n,i={ns:["translation"],defaultNS:"translation"}){super(),this.data=n||{},this.options=i,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(n){this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}removeNamespaces(n){const i=this.options.ns.indexOf(n);i>-1&&this.options.ns.splice(i,1)}getResource(n,i,s,u={}){const f=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator,d=u.ignoreJSONStructure!==void 0?u.ignoreJSONStructure:this.options.ignoreJSONStructure;let p;n.indexOf(".")>-1?p=n.split("."):(p=[n,i],s&&(Array.isArray(s)?p.push(...s):pe(s)&&f?p.push(...s.split(f)):p.push(s)));const g=Fn(this.data,p);return!g&&!i&&!s&&n.indexOf(".")>-1&&(n=p[0],i=p[1],s=p.slice(2).join(".")),g||!d||!pe(s)?g:vr(this.data?.[n]?.[i],s,f)}addResource(n,i,s,u,f={silent:!1}){const d=f.keySeparator!==void 0?f.keySeparator:this.options.keySeparator;let p=[n,i];s&&(p=p.concat(d?s.split(d):s)),n.indexOf(".")>-1&&(p=n.split("."),u=i,i=p[1]),this.addNamespaces(i),ci(this.data,p,u),f.silent||this.emit("added",n,i,s,u)}addResources(n,i,s,u={silent:!1}){for(const f in s)(pe(s[f])||Array.isArray(s[f]))&&this.addResource(n,i,f,s[f],{silent:!0});u.silent||this.emit("added",n,i,s)}addResourceBundle(n,i,s,u,f,d={silent:!1,skipCopy:!1}){let p=[n,i];n.indexOf(".")>-1&&(p=n.split("."),u=s,s=i,i=p[1]),this.addNamespaces(i);let g=Fn(this.data,p)||{};d.skipCopy||(s=JSON.parse(JSON.stringify(s))),u?Di(g,s,f):g={...g,...s},ci(this.data,p,g),d.silent||this.emit("added",n,i,s)}removeResourceBundle(n,i){this.hasResourceBundle(n,i)&&delete this.data[n][i],this.removeNamespaces(i),this.emit("removed",n,i)}hasResourceBundle(n,i){return this.getResource(n,i)!==void 0}getResourceBundle(n,i){return i||(i=this.options.defaultNS),this.getResource(n,i)}getDataByLanguage(n){return this.data[n]}hasLanguageSomeTranslations(n){const i=this.getDataByLanguage(n);return!!(i&&Object.keys(i)||[]).find(u=>i[u]&&Object.keys(i[u]).length>0)}toJSON(){return this.data}}var Ti={processors:{},addPostProcessor(c){this.processors[c.name]=c},handle(c,n,i,s,u){return c.forEach(f=>{n=this.processors[f]?.process(n,i,s,u)??n}),n}};const fi={},hi=c=>!pe(c)&&typeof c!="boolean"&&typeof c!="number";class Cn extends An{constructor(n,i={}){super(),Fs(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,this),this.options=i,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ge.create("translator")}changeLanguage(n){n&&(this.language=n)}exists(n,i={interpolation:{}}){const s={...i};return n==null?!1:this.resolve(n,s)?.res!==void 0}extractFromKey(n,i){let s=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const u=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let f=i.ns||this.options.defaultNS||[];const d=s&&n.indexOf(s)>-1,p=!this.options.userDefinedKeySeparator&&!i.keySeparator&&!this.options.userDefinedNsSeparator&&!i.nsSeparator&&!Ts(n,s,u);if(d&&!p){const g=n.match(this.interpolator.nestingRegexp);if(g&&g.length>0)return{key:n,namespaces:pe(f)?[f]:f};const x=n.split(s);(s!==u||s===u&&this.options.ns.indexOf(x[0])>-1)&&(f=x.shift()),n=x.join(u)}return{key:n,namespaces:pe(f)?[f]:f}}translate(n,i,s){let u=typeof i=="object"?{...i}:i;if(typeof u!="object"&&this.options.overloadTranslationOptionHandler&&(u=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(u={...u}),u||(u={}),n==null)return"";Array.isArray(n)||(n=[String(n)]);const f=u.returnDetails!==void 0?u.returnDetails:this.options.returnDetails,d=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator,{key:p,namespaces:g}=this.extractFromKey(n[n.length-1],u),x=g[g.length-1];let N=u.nsSeparator!==void 0?u.nsSeparator:this.options.nsSeparator;N===void 0&&(N=":");const C=u.lng||this.language,Z=u.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(C?.toLowerCase()==="cimode")return Z?f?{res:`${x}${N}${p}`,usedKey:p,exactUsedKey:p,usedLng:C,usedNS:x,usedParams:this.getUsedParamsDetails(u)}:`${x}${N}${p}`:f?{res:p,usedKey:p,exactUsedKey:p,usedLng:C,usedNS:x,usedParams:this.getUsedParamsDetails(u)}:p;const I=this.resolve(n,u);let M=I?.res;const le=I?.usedKey||p,ge=I?.exactUsedKey||p,fe=["[object Number]","[object Function]","[object RegExp]"],he=u.joinArrays!==void 0?u.joinArrays:this.options.joinArrays,re=!this.i18nFormat||this.i18nFormat.handleAsObject,ue=u.count!==void 0&&!pe(u.count),de=Cn.hasDefaultValue(u),F=ue?this.pluralResolver.getSuffix(C,u.count,u):"",A=u.ordinal&&ue?this.pluralResolver.getSuffix(C,u.count,{ordinal:!1}):"",te=ue&&!u.ordinal&&u.count===0,B=te&&u[`defaultValue${this.options.pluralSeparator}zero`]||u[`defaultValue${F}`]||u[`defaultValue${A}`]||u.defaultValue;let q=M;re&&!M&&de&&(q=B);const j=hi(q),ae=Object.prototype.toString.apply(q);if(re&&q&&j&&fe.indexOf(ae)<0&&!(pe(he)&&Array.isArray(q))){if(!u.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const L=this.options.returnedObjectHandler?this.options.returnedObjectHandler(le,q,{...u,ns:g}):`key '${p} (${this.language})' returned an object instead of string.`;return f?(I.res=L,I.usedParams=this.getUsedParamsDetails(u),I):L}if(d){const L=Array.isArray(q),K=L?[]:{},V=L?ge:le;for(const T in q)if(Object.prototype.hasOwnProperty.call(q,T)){const G=`${V}${d}${T}`;de&&!M?K[T]=this.translate(G,{...u,defaultValue:hi(B)?B[T]:void 0,joinArrays:!1,ns:g}):K[T]=this.translate(G,{...u,joinArrays:!1,ns:g}),K[T]===G&&(K[T]=q[T])}M=K}}else if(re&&pe(he)&&Array.isArray(M))M=M.join(he),M&&(M=this.extendTranslation(M,n,u,s));else{let L=!1,K=!1;!this.isValidLookup(M)&&de&&(L=!0,M=B),this.isValidLookup(M)||(K=!0,M=p);const T=(u.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&K?void 0:M,G=de&&B!==M&&this.options.updateMissing;if(K||L||G){if(this.logger.log(G?"updateKey":"missingKey",C,x,p,G?B:M),d){const ce=this.resolve(p,{...u,keySeparator:!1});ce&&ce.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let z=[];const Y=this.languageUtils.getFallbackCodes(this.options.fallbackLng,u.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Y&&Y[0])for(let ce=0;ce<Y.length;ce++)z.push(Y[ce]);else this.options.saveMissingTo==="all"?z=this.languageUtils.toResolveHierarchy(u.lng||this.language):z.push(u.lng||this.language);const ie=(ce,xe,we)=>{const ke=de&&we!==M?we:T;this.options.missingKeyHandler?this.options.missingKeyHandler(ce,x,xe,ke,G,u):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(ce,x,xe,ke,G,u),this.emit("missingKey",ce,x,xe,M)};this.options.saveMissing&&(this.options.saveMissingPlurals&&ue?z.forEach(ce=>{const xe=this.pluralResolver.getSuffixes(ce,u);te&&u[`defaultValue${this.options.pluralSeparator}zero`]&&xe.indexOf(`${this.options.pluralSeparator}zero`)<0&&xe.push(`${this.options.pluralSeparator}zero`),xe.forEach(we=>{ie([ce],p+we,u[`defaultValue${we}`]||B)})}):ie(z,p,B))}M=this.extendTranslation(M,n,u,I,s),K&&M===p&&this.options.appendNamespaceToMissingKey&&(M=`${x}${N}${p}`),(K||L)&&this.options.parseMissingKeyHandler&&(M=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${x}${N}${p}`:p,L?M:void 0,u))}return f?(I.res=M,I.usedParams=this.getUsedParamsDetails(u),I):M}extendTranslation(n,i,s,u,f){if(this.i18nFormat?.parse)n=this.i18nFormat.parse(n,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||u.usedLng,u.usedNS,u.usedKey,{resolved:u});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const g=pe(n)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let x;if(g){const C=n.match(this.interpolator.nestingRegexp);x=C&&C.length}let N=s.replace&&!pe(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(N={...this.options.interpolation.defaultVariables,...N}),n=this.interpolator.interpolate(n,N,s.lng||this.language||u.usedLng,s),g){const C=n.match(this.interpolator.nestingRegexp),Z=C&&C.length;x<Z&&(s.nest=!1)}!s.lng&&u&&u.res&&(s.lng=this.language||u.usedLng),s.nest!==!1&&(n=this.interpolator.nest(n,(...C)=>f?.[0]===C[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${C[0]} in key: ${i[0]}`),null):this.translate(...C,i),s)),s.interpolation&&this.interpolator.reset()}const d=s.postProcess||this.options.postProcess,p=pe(d)?[d]:d;return n!=null&&p?.length&&s.applyPostProcessor!==!1&&(n=Ti.handle(p,n,i,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...u,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),n}resolve(n,i={}){let s,u,f,d,p;return pe(n)&&(n=[n]),n.forEach(g=>{if(this.isValidLookup(s))return;const x=this.extractFromKey(g,i),N=x.key;u=N;let C=x.namespaces;this.options.fallbackNS&&(C=C.concat(this.options.fallbackNS));const Z=i.count!==void 0&&!pe(i.count),I=Z&&!i.ordinal&&i.count===0,M=i.context!==void 0&&(pe(i.context)||typeof i.context=="number")&&i.context!=="",le=i.lngs?i.lngs:this.languageUtils.toResolveHierarchy(i.lng||this.language,i.fallbackLng);C.forEach(ge=>{this.isValidLookup(s)||(p=ge,!fi[`${le[0]}-${ge}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(p)&&(fi[`${le[0]}-${ge}`]=!0,this.logger.warn(`key "${u}" for languages "${le.join(", ")}" won't get resolved as namespace "${p}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),le.forEach(fe=>{if(this.isValidLookup(s))return;d=fe;const he=[N];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(he,N,fe,ge,i);else{let ue;Z&&(ue=this.pluralResolver.getSuffix(fe,i.count,i));const de=`${this.options.pluralSeparator}zero`,F=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(Z&&(he.push(N+ue),i.ordinal&&ue.indexOf(F)===0&&he.push(N+ue.replace(F,this.options.pluralSeparator)),I&&he.push(N+de)),M){const A=`${N}${this.options.contextSeparator}${i.context}`;he.push(A),Z&&(he.push(A+ue),i.ordinal&&ue.indexOf(F)===0&&he.push(A+ue.replace(F,this.options.pluralSeparator)),I&&he.push(A+de))}}let re;for(;re=he.pop();)this.isValidLookup(s)||(f=re,s=this.getResource(fe,ge,re,i))}))})}),{res:s,usedKey:u,exactUsedKey:f,usedLng:d,usedNS:p}}isValidLookup(n){return n!==void 0&&!(!this.options.returnNull&&n===null)&&!(!this.options.returnEmptyString&&n==="")}getResource(n,i,s,u={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(n,i,s,u):this.resourceStore.getResource(n,i,s,u)}getUsedParamsDetails(n={}){const i=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=n.replace&&!pe(n.replace);let u=s?n.replace:n;if(s&&typeof n.count<"u"&&(u.count=n.count),this.options.interpolation.defaultVariables&&(u={...this.options.interpolation.defaultVariables,...u}),!s){u={...u};for(const f of i)delete u[f]}return u}static hasDefaultValue(n){const i="defaultValue";for(const s in n)if(Object.prototype.hasOwnProperty.call(n,s)&&i===s.substring(0,i.length)&&n[s]!==void 0)return!0;return!1}}class di{constructor(n){this.options=n,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ge.create("languageUtils")}getScriptPartFromCode(n){if(n=Wt(n),!n||n.indexOf("-")<0)return null;const i=n.split("-");return i.length===2||(i.pop(),i[i.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(i.join("-"))}getLanguagePartFromCode(n){if(n=Wt(n),!n||n.indexOf("-")<0)return n;const i=n.split("-");return this.formatLanguageCode(i[0])}formatLanguageCode(n){if(pe(n)&&n.indexOf("-")>-1){let i;try{i=Intl.getCanonicalLocales(n)[0]}catch{}return i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i||(this.options.lowerCaseLng?n.toLowerCase():n)}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}isSupportedCode(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}getBestMatchFromCodes(n){if(!n)return null;let i;return n.forEach(s=>{if(i)return;const u=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(u))&&(i=u)}),!i&&this.options.supportedLngs&&n.forEach(s=>{if(i)return;const u=this.getScriptPartFromCode(s);if(this.isSupportedCode(u))return i=u;const f=this.getLanguagePartFromCode(s);if(this.isSupportedCode(f))return i=f;i=this.options.supportedLngs.find(d=>{if(d===f)return d;if(!(d.indexOf("-")<0&&f.indexOf("-")<0)&&(d.indexOf("-")>0&&f.indexOf("-")<0&&d.substring(0,d.indexOf("-"))===f||d.indexOf(f)===0&&f.length>1))return d})}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}getFallbackCodes(n,i){if(!n)return[];if(typeof n=="function"&&(n=n(i)),pe(n)&&(n=[n]),Array.isArray(n))return n;if(!i)return n.default||[];let s=n[i];return s||(s=n[this.getScriptPartFromCode(i)]),s||(s=n[this.formatLanguageCode(i)]),s||(s=n[this.getLanguagePartFromCode(i)]),s||(s=n.default),s||[]}toResolveHierarchy(n,i){const s=this.getFallbackCodes((i===!1?[]:i)||this.options.fallbackLng||[],n),u=[],f=d=>{d&&(this.isSupportedCode(d)?u.push(d):this.logger.warn(`rejecting language code not found in supportedLngs: ${d}`))};return pe(n)&&(n.indexOf("-")>-1||n.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&f(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&f(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&f(this.getLanguagePartFromCode(n))):pe(n)&&f(this.formatLanguageCode(n)),s.forEach(d=>{u.indexOf(d)<0&&f(this.formatLanguageCode(d))}),u}}const pi={zero:0,one:1,two:2,few:3,many:4,other:5},gi={select:c=>c===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Is{constructor(n,i={}){this.languageUtils=n,this.options=i,this.logger=Ge.create("pluralResolver"),this.pluralRulesCache={}}addRule(n,i){this.rules[n]=i}clearCache(){this.pluralRulesCache={}}getRule(n,i={}){const s=Wt(n==="dev"?"en":n),u=i.ordinal?"ordinal":"cardinal",f=JSON.stringify({cleanedCode:s,type:u});if(f in this.pluralRulesCache)return this.pluralRulesCache[f];let d;try{d=new Intl.PluralRules(s,{type:u})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),gi;if(!n.match(/-|_/))return gi;const g=this.languageUtils.getLanguagePartFromCode(n);d=this.getRule(g,i)}return this.pluralRulesCache[f]=d,d}needsPlural(n,i={}){let s=this.getRule(n,i);return s||(s=this.getRule("dev",i)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(n,i,s={}){return this.getSuffixes(n,s).map(u=>`${i}${u}`)}getSuffixes(n,i={}){let s=this.getRule(n,i);return s||(s=this.getRule("dev",i)),s?s.resolvedOptions().pluralCategories.sort((u,f)=>pi[u]-pi[f]).map(u=>`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${u}`):[]}getSuffix(n,i,s={}){const u=this.getRule(n,s);return u?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${u.select(i)}`:(this.logger.warn(`no plural rule found for: ${n}`),this.getSuffix("dev",i,s))}}const mi=(c,n,i,s=".",u=!0)=>{let f=As(c,n,i);return!f&&u&&pe(i)&&(f=vr(c,i,s),f===void 0&&(f=vr(n,i,s))),f},pr=c=>c.replace(/\$/g,"$$$$");class Ks{constructor(n={}){this.logger=Ge.create("interpolator"),this.options=n,this.format=n?.interpolation?.format||(i=>i),this.init(n)}init(n={}){n.interpolation||(n.interpolation={escapeValue:!0});const{escape:i,escapeValue:s,useRawValueToEscape:u,prefix:f,prefixEscaped:d,suffix:p,suffixEscaped:g,formatSeparator:x,unescapeSuffix:N,unescapePrefix:C,nestingPrefix:Z,nestingPrefixEscaped:I,nestingSuffix:M,nestingSuffixEscaped:le,nestingOptionsSeparator:ge,maxReplaces:fe,alwaysFormat:he}=n.interpolation;this.escape=i!==void 0?i:$s,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=u!==void 0?u:!1,this.prefix=f?Pt(f):d||"{{",this.suffix=p?Pt(p):g||"}}",this.formatSeparator=x||",",this.unescapePrefix=N?"":C||"-",this.unescapeSuffix=this.unescapePrefix?"":N||"",this.nestingPrefix=Z?Pt(Z):I||Pt("$t("),this.nestingSuffix=M?Pt(M):le||Pt(")"),this.nestingOptionsSeparator=ge||",",this.maxReplaces=fe||1e3,this.alwaysFormat=he!==void 0?he:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const n=(i,s)=>i?.source===s?(i.lastIndex=0,i):new RegExp(s,"g");this.regexp=n(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=n(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=n(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(n,i,s,u){let f,d,p;const g=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},x=I=>{if(I.indexOf(this.formatSeparator)<0){const fe=mi(i,g,I,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(fe,void 0,s,{...u,...i,interpolationkey:I}):fe}const M=I.split(this.formatSeparator),le=M.shift().trim(),ge=M.join(this.formatSeparator).trim();return this.format(mi(i,g,le,this.options.keySeparator,this.options.ignoreJSONStructure),ge,s,{...u,...i,interpolationkey:le})};this.resetRegExp();const N=u?.missingInterpolationHandler||this.options.missingInterpolationHandler,C=u?.interpolation?.skipOnVariables!==void 0?u.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:I=>pr(I)},{regex:this.regexp,safeValue:I=>this.escapeValue?pr(this.escape(I)):pr(I)}].forEach(I=>{for(p=0;f=I.regex.exec(n);){const M=f[1].trim();if(d=x(M),d===void 0)if(typeof N=="function"){const ge=N(n,f,u);d=pe(ge)?ge:""}else if(u&&Object.prototype.hasOwnProperty.call(u,M))d="";else if(C){d=f[0];continue}else this.logger.warn(`missed to pass in variable ${M} for interpolating ${n}`),d="";else!pe(d)&&!this.useRawValueToEscape&&(d=oi(d));const le=I.safeValue(d);if(n=n.replace(f[0],le),C?(I.regex.lastIndex+=d.length,I.regex.lastIndex-=f[0].length):I.regex.lastIndex=0,p++,p>=this.maxReplaces)break}}),n}nest(n,i,s={}){let u,f,d;const p=(g,x)=>{const N=this.nestingOptionsSeparator;if(g.indexOf(N)<0)return g;const C=g.split(new RegExp(`${N}[ ]*{`));let Z=`{${C[1]}`;g=C[0],Z=this.interpolate(Z,d);const I=Z.match(/'/g),M=Z.match(/"/g);((I?.length??0)%2===0&&!M||M.length%2!==0)&&(Z=Z.replace(/'/g,'"'));try{d=JSON.parse(Z),x&&(d={...x,...d})}catch(le){return this.logger.warn(`failed parsing options string in nesting for key ${g}`,le),`${g}${N}${Z}`}return d.defaultValue&&d.defaultValue.indexOf(this.prefix)>-1&&delete d.defaultValue,g};for(;u=this.nestingRegexp.exec(n);){let g=[];d={...s},d=d.replace&&!pe(d.replace)?d.replace:d,d.applyPostProcessor=!1,delete d.defaultValue;const x=/{.*}/.test(u[1])?u[1].lastIndexOf("}")+1:u[1].indexOf(this.formatSeparator);if(x!==-1&&(g=u[1].slice(x).split(this.formatSeparator).map(N=>N.trim()).filter(Boolean),u[1]=u[1].slice(0,x)),f=i(p.call(this,u[1].trim(),d),d),f&&u[0]===n&&!pe(f))return f;pe(f)||(f=oi(f)),f||(this.logger.warn(`missed to resolve ${u[1]} for nesting ${n}`),f=""),g.length&&(f=g.reduce((N,C)=>this.format(N,C,s.lng,{...s,interpolationkey:u[1].trim()}),f.trim())),n=n.replace(u[0],f),this.regexp.lastIndex=0}return n}}const Ms=c=>{let n=c.toLowerCase().trim();const i={};if(c.indexOf("(")>-1){const s=c.split("(");n=s[0].toLowerCase().trim();const u=s[1].substring(0,s[1].length-1);n==="currency"&&u.indexOf(":")<0?i.currency||(i.currency=u.trim()):n==="relativetime"&&u.indexOf(":")<0?i.range||(i.range=u.trim()):u.split(";").forEach(d=>{if(d){const[p,...g]=d.split(":"),x=g.join(":").trim().replace(/^'+|'+$/g,""),N=p.trim();i[N]||(i[N]=x),x==="false"&&(i[N]=!1),x==="true"&&(i[N]=!0),isNaN(x)||(i[N]=parseInt(x,10))}})}return{formatName:n,formatOptions:i}},yi=c=>{const n={};return(i,s,u)=>{let f=u;u&&u.interpolationkey&&u.formatParams&&u.formatParams[u.interpolationkey]&&u[u.interpolationkey]&&(f={...f,[u.interpolationkey]:void 0});const d=s+JSON.stringify(f);let p=n[d];return p||(p=c(Wt(s),u),n[d]=p),p(i)}},Bs=c=>(n,i,s)=>c(Wt(i),s)(n);class qs{constructor(n={}){this.logger=Ge.create("formatter"),this.options=n,this.init(n)}init(n,i={interpolation:{}}){this.formatSeparator=i.interpolation.formatSeparator||",";const s=i.cacheInBuiltFormats?yi:Bs;this.formats={number:s((u,f)=>{const d=new Intl.NumberFormat(u,{...f});return p=>d.format(p)}),currency:s((u,f)=>{const d=new Intl.NumberFormat(u,{...f,style:"currency"});return p=>d.format(p)}),datetime:s((u,f)=>{const d=new Intl.DateTimeFormat(u,{...f});return p=>d.format(p)}),relativetime:s((u,f)=>{const d=new Intl.RelativeTimeFormat(u,{...f});return p=>d.format(p,f.range||"day")}),list:s((u,f)=>{const d=new Intl.ListFormat(u,{...f});return p=>d.format(p)})}}add(n,i){this.formats[n.toLowerCase().trim()]=i}addCached(n,i){this.formats[n.toLowerCase().trim()]=yi(i)}format(n,i,s,u={}){const f=i.split(this.formatSeparator);if(f.length>1&&f[0].indexOf("(")>1&&f[0].indexOf(")")<0&&f.find(p=>p.indexOf(")")>-1)){const p=f.findIndex(g=>g.indexOf(")")>-1);f[0]=[f[0],...f.splice(1,p)].join(this.formatSeparator)}return f.reduce((p,g)=>{const{formatName:x,formatOptions:N}=Ms(g);if(this.formats[x]){let C=p;try{const Z=u?.formatParams?.[u.interpolationkey]||{},I=Z.locale||Z.lng||u.locale||u.lng||s;C=this.formats[x](p,I,{...N,...u,...Z})}catch(Z){this.logger.warn(Z)}return C}else this.logger.warn(`there was no format function for ${x}`);return p},n)}}const Vs=(c,n)=>{c.pending[n]!==void 0&&(delete c.pending[n],c.pendingCount--)};class Us extends An{constructor(n,i,s,u={}){super(),this.backend=n,this.store=i,this.services=s,this.languageUtils=s.languageUtils,this.options=u,this.logger=Ge.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=u.maxParallelReads||10,this.readingCalls=0,this.maxRetries=u.maxRetries>=0?u.maxRetries:5,this.retryTimeout=u.retryTimeout>=1?u.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,u.backend,u)}queueLoad(n,i,s,u){const f={},d={},p={},g={};return n.forEach(x=>{let N=!0;i.forEach(C=>{const Z=`${x}|${C}`;!s.reload&&this.store.hasResourceBundle(x,C)?this.state[Z]=2:this.state[Z]<0||(this.state[Z]===1?d[Z]===void 0&&(d[Z]=!0):(this.state[Z]=1,N=!1,d[Z]===void 0&&(d[Z]=!0),f[Z]===void 0&&(f[Z]=!0),g[C]===void 0&&(g[C]=!0)))}),N||(p[x]=!0)}),(Object.keys(f).length||Object.keys(d).length)&&this.queue.push({pending:d,pendingCount:Object.keys(d).length,loaded:{},errors:[],callback:u}),{toLoad:Object.keys(f),pending:Object.keys(d),toLoadLanguages:Object.keys(p),toLoadNamespaces:Object.keys(g)}}loaded(n,i,s){const u=n.split("|"),f=u[0],d=u[1];i&&this.emit("failedLoading",f,d,i),!i&&s&&this.store.addResourceBundle(f,d,s,void 0,void 0,{skipCopy:!0}),this.state[n]=i?-1:2,i&&s&&(this.state[n]=0);const p={};this.queue.forEach(g=>{Cs(g.loaded,[f],d),Vs(g,n),i&&g.errors.push(i),g.pendingCount===0&&!g.done&&(Object.keys(g.loaded).forEach(x=>{p[x]||(p[x]={});const N=g.loaded[x];N.length&&N.forEach(C=>{p[x][C]===void 0&&(p[x][C]=!0)})}),g.done=!0,g.errors.length?g.callback(g.errors):g.callback())}),this.emit("loaded",p),this.queue=this.queue.filter(g=>!g.done)}read(n,i,s,u=0,f=this.retryTimeout,d){if(!n.length)return d(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:n,ns:i,fcName:s,tried:u,wait:f,callback:d});return}this.readingCalls++;const p=(x,N)=>{if(this.readingCalls--,this.waitingReads.length>0){const C=this.waitingReads.shift();this.read(C.lng,C.ns,C.fcName,C.tried,C.wait,C.callback)}if(x&&N&&u<this.maxRetries){setTimeout(()=>{this.read.call(this,n,i,s,u+1,f*2,d)},f);return}d(x,N)},g=this.backend[s].bind(this.backend);if(g.length===2){try{const x=g(n,i);x&&typeof x.then=="function"?x.then(N=>p(null,N)).catch(p):p(null,x)}catch(x){p(x)}return}return g(n,i,p)}prepareLoading(n,i,s={},u){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),u&&u();pe(n)&&(n=this.languageUtils.toResolveHierarchy(n)),pe(i)&&(i=[i]);const f=this.queueLoad(n,i,s,u);if(!f.toLoad.length)return f.pending.length||u(),null;f.toLoad.forEach(d=>{this.loadOne(d)})}load(n,i,s){this.prepareLoading(n,i,{},s)}reload(n,i,s){this.prepareLoading(n,i,{reload:!0},s)}loadOne(n,i=""){const s=n.split("|"),u=s[0],f=s[1];this.read(u,f,"read",void 0,void 0,(d,p)=>{d&&this.logger.warn(`${i}loading namespace ${f} for language ${u} failed`,d),!d&&p&&this.logger.log(`${i}loaded namespace ${f} for language ${u}`,p),this.loaded(n,d,p)})}saveMissing(n,i,s,u,f,d={},p=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(i)){this.logger.warn(`did not save key "${s}" as the namespace "${i}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const g={...d,isUpdate:f},x=this.backend.create.bind(this.backend);if(x.length<6)try{let N;x.length===5?N=x(n,i,s,u,g):N=x(n,i,s,u),N&&typeof N.then=="function"?N.then(C=>p(null,C)).catch(p):p(null,N)}catch(N){p(N)}else x(n,i,s,u,p,g)}!n||!n[0]||this.store.addResource(n[0],i,s,u)}}}const vi=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:c=>{let n={};if(typeof c[1]=="object"&&(n=c[1]),pe(c[1])&&(n.defaultValue=c[1]),pe(c[2])&&(n.tDescription=c[2]),typeof c[2]=="object"||typeof c[3]=="object"){const i=c[3]||c[2];Object.keys(i).forEach(s=>{n[s]=i[s]})}return n},interpolation:{escapeValue:!0,format:c=>c,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),bi=c=>(pe(c.ns)&&(c.ns=[c.ns]),pe(c.fallbackLng)&&(c.fallbackLng=[c.fallbackLng]),pe(c.fallbackNS)&&(c.fallbackNS=[c.fallbackNS]),c.supportedLngs?.indexOf?.("cimode")<0&&(c.supportedLngs=c.supportedLngs.concat(["cimode"])),typeof c.initImmediate=="boolean"&&(c.initAsync=c.initImmediate),c),Sn=()=>{},Hs=c=>{Object.getOwnPropertyNames(Object.getPrototypeOf(c)).forEach(i=>{typeof c[i]=="function"&&(c[i]=c[i].bind(c))})};class Yt extends An{constructor(n={},i){if(super(),this.options=bi(n),this.services={},this.logger=Ge,this.modules={external:[]},Hs(this),i&&!this.isInitialized&&!n.isClone){if(!this.options.initAsync)return this.init(n,i),this;setTimeout(()=>{this.init(n,i)},0)}}init(n={},i){this.isInitializing=!0,typeof n=="function"&&(i=n,n={}),n.defaultNS==null&&n.ns&&(pe(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const s=vi();this.options={...s,...this.options,...bi(n)},this.options.interpolation={...s.interpolation,...this.options.interpolation},n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const u=x=>x?typeof x=="function"?new x:x:null;if(!this.options.isClone){this.modules.logger?Ge.init(u(this.modules.logger),this.options):Ge.init(null,this.options);let x;this.modules.formatter?x=this.modules.formatter:x=qs;const N=new di(this.options);this.store=new li(this.options.resources,this.options);const C=this.services;C.logger=Ge,C.resourceStore=this.store,C.languageUtils=N,C.pluralResolver=new Is(N,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),x&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(C.formatter=u(x),C.formatter.init&&C.formatter.init(C,this.options),this.options.interpolation.format=C.formatter.format.bind(C.formatter)),C.interpolator=new Ks(this.options),C.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},C.backendConnector=new Us(u(this.modules.backend),C.resourceStore,C,this.options),C.backendConnector.on("*",(I,...M)=>{this.emit(I,...M)}),this.modules.languageDetector&&(C.languageDetector=u(this.modules.languageDetector),C.languageDetector.init&&C.languageDetector.init(C,this.options.detection,this.options)),this.modules.i18nFormat&&(C.i18nFormat=u(this.modules.i18nFormat),C.i18nFormat.init&&C.i18nFormat.init(this)),this.translator=new Cn(this.services,this.options),this.translator.on("*",(I,...M)=>{this.emit(I,...M)}),this.modules.external.forEach(I=>{I.init&&I.init(this)})}if(this.format=this.options.interpolation.format,i||(i=Sn),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const x=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);x.length>0&&x[0]!=="dev"&&(this.options.lng=x[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(x=>{this[x]=(...N)=>this.store[x](...N)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(x=>{this[x]=(...N)=>(this.store[x](...N),this)});const p=Ht(),g=()=>{const x=(N,C)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),p.resolve(C),i(N,C)};if(this.languages&&!this.isInitialized)return x(null,this.t.bind(this));this.changeLanguage(this.options.lng,x)};return this.options.resources||!this.options.initAsync?g():setTimeout(g,0),p}loadResources(n,i=Sn){let s=i;const u=pe(n)?n:this.language;if(typeof n=="function"&&(s=n),!this.options.resources||this.options.partialBundledLanguages){if(u?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const f=[],d=p=>{if(!p||p==="cimode")return;this.services.languageUtils.toResolveHierarchy(p).forEach(x=>{x!=="cimode"&&f.indexOf(x)<0&&f.push(x)})};u?d(u):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(g=>d(g)),this.options.preload?.forEach?.(p=>d(p)),this.services.backendConnector.load(f,this.options.ns,p=>{!p&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(p)})}else s(null)}reloadResources(n,i,s){const u=Ht();return typeof n=="function"&&(s=n,n=void 0),typeof i=="function"&&(s=i,i=void 0),n||(n=this.languages),i||(i=this.options.ns),s||(s=Sn),this.services.backendConnector.reload(n,i,f=>{u.resolve(),s(f)}),u}use(n){if(!n)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!n.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return n.type==="backend"&&(this.modules.backend=n),(n.type==="logger"||n.log&&n.warn&&n.error)&&(this.modules.logger=n),n.type==="languageDetector"&&(this.modules.languageDetector=n),n.type==="i18nFormat"&&(this.modules.i18nFormat=n),n.type==="postProcessor"&&Ti.addPostProcessor(n),n.type==="formatter"&&(this.modules.formatter=n),n.type==="3rdParty"&&this.modules.external.push(n),this}setResolvedLanguage(n){if(!(!n||!this.languages)&&!(["cimode","dev"].indexOf(n)>-1)){for(let i=0;i<this.languages.length;i++){const s=this.languages[i];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(n)<0&&this.store.hasLanguageSomeTranslations(n)&&(this.resolvedLanguage=n,this.languages.unshift(n))}}changeLanguage(n,i){this.isLanguageChangingTo=n;const s=Ht();this.emit("languageChanging",n);const u=p=>{this.language=p,this.languages=this.services.languageUtils.toResolveHierarchy(p),this.resolvedLanguage=void 0,this.setResolvedLanguage(p)},f=(p,g)=>{g?this.isLanguageChangingTo===n&&(u(g),this.translator.changeLanguage(g),this.isLanguageChangingTo=void 0,this.emit("languageChanged",g),this.logger.log("languageChanged",g)):this.isLanguageChangingTo=void 0,s.resolve((...x)=>this.t(...x)),i&&i(p,(...x)=>this.t(...x))},d=p=>{!n&&!p&&this.services.languageDetector&&(p=[]);const g=pe(p)?p:p&&p[0],x=this.store.hasLanguageSomeTranslations(g)?g:this.services.languageUtils.getBestMatchFromCodes(pe(p)?[p]:p);x&&(this.language||u(x),this.translator.language||this.translator.changeLanguage(x),this.services.languageDetector?.cacheUserLanguage?.(x)),this.loadResources(x,N=>{f(N,x)})};return!n&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!n&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(d):this.services.languageDetector.detect(d):d(n),s}getFixedT(n,i,s){const u=(f,d,...p)=>{let g;typeof d!="object"?g=this.options.overloadTranslationOptionHandler([f,d].concat(p)):g={...d},g.lng=g.lng||u.lng,g.lngs=g.lngs||u.lngs,g.ns=g.ns||u.ns,g.keyPrefix!==""&&(g.keyPrefix=g.keyPrefix||s||u.keyPrefix);const x=this.options.keySeparator||".";let N;return g.keyPrefix&&Array.isArray(f)?N=f.map(C=>`${g.keyPrefix}${x}${C}`):N=g.keyPrefix?`${g.keyPrefix}${x}${f}`:f,this.t(N,g)};return pe(n)?u.lng=n:u.lngs=n,u.ns=i,u.keyPrefix=s,u}t(...n){return this.translator?.translate(...n)}exists(...n){return this.translator?.exists(...n)}setDefaultNamespace(n){this.options.defaultNS=n}hasLoadedNamespace(n,i={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=i.lng||this.resolvedLanguage||this.languages[0],u=this.options?this.options.fallbackLng:!1,f=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const d=(p,g)=>{const x=this.services.backendConnector.state[`${p}|${g}`];return x===-1||x===0||x===2};if(i.precheck){const p=i.precheck(this,d);if(p!==void 0)return p}return!!(this.hasResourceBundle(s,n)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||d(s,n)&&(!u||d(f,n)))}loadNamespaces(n,i){const s=Ht();return this.options.ns?(pe(n)&&(n=[n]),n.forEach(u=>{this.options.ns.indexOf(u)<0&&this.options.ns.push(u)}),this.loadResources(u=>{s.resolve(),i&&i(u)}),s):(i&&i(),Promise.resolve())}loadLanguages(n,i){const s=Ht();pe(n)&&(n=[n]);const u=this.options.preload||[],f=n.filter(d=>u.indexOf(d)<0&&this.services.languageUtils.isSupportedCode(d));return f.length?(this.options.preload=u.concat(f),this.loadResources(d=>{s.resolve(),i&&i(d)}),s):(i&&i(),Promise.resolve())}dir(n){if(n||(n=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!n)return"rtl";try{const u=new Intl.Locale(n);if(u&&u.getTextInfo){const f=u.getTextInfo();if(f&&f.direction)return f.direction}}catch{}const i=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new di(vi());return n.toLowerCase().indexOf("-latn")>1?"ltr":i.indexOf(s.getLanguagePartFromCode(n))>-1||n.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(n={},i){return new Yt(n,i)}cloneInstance(n={},i=Sn){const s=n.forkResourceStore;s&&delete n.forkResourceStore;const u={...this.options,...n,isClone:!0},f=new Yt(u);if((n.debug!==void 0||n.prefix!==void 0)&&(f.logger=f.logger.clone(n)),["store","services","language"].forEach(p=>{f[p]=this[p]}),f.services={...this.services},f.services.utils={hasLoadedNamespace:f.hasLoadedNamespace.bind(f)},s){const p=Object.keys(this.store.data).reduce((g,x)=>(g[x]={...this.store.data[x]},g[x]=Object.keys(g[x]).reduce((N,C)=>(N[C]={...g[x][C]},N),g[x]),g),{});f.store=new li(p,u),f.services.resourceStore=f.store}return f.translator=new Cn(f.services,u),f.translator.on("*",(p,...g)=>{f.emit(p,...g)}),f.init(u,i),f.translator.options=u,f.translator.backendConnector.services.utils={hasLoadedNamespace:f.hasLoadedNamespace.bind(f)},f}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ke=Yt.createInstance();Ke.createInstance=Yt.createInstance;Ke.createInstance;Ke.dir;Ke.init;Ke.loadResources;Ke.reloadResources;Ke.use;Ke.changeLanguage;Ke.getFixedT;const Qo=Ke.t;Ke.exists;Ke.setDefaultNamespace;Ke.hasLoadedNamespace;Ke.loadNamespaces;Ke.loadLanguages;var kn={exports:{}},zs=kn.exports,xi;function Ws(){return xi||(xi=1,function(c,n){(function(i,s){c.exports=s()})(zs,function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(r[a]=o[a])})(e,t)},s=function(){return(s=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function u(e,t,r){for(var o,a=0,l=t.length;a<l;a++)!o&&a in t||((o=o||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))}var f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:$i,d=Object.keys,p=Array.isArray;function g(e,t){return typeof t!="object"||d(t).forEach(function(r){e[r]=t[r]}),e}typeof Promise>"u"||f.Promise||(f.Promise=Promise);var x=Object.getPrototypeOf,N={}.hasOwnProperty;function C(e,t){return N.call(e,t)}function Z(e,t){typeof t=="function"&&(t=t(x(e))),(typeof Reflect>"u"?d:Reflect.ownKeys)(t).forEach(function(r){M(e,r,t[r])})}var I=Object.defineProperty;function M(e,t,r,o){I(e,t,g(r&&C(r,"get")&&typeof r.get=="function"?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},o))}function le(e){return{from:function(t){return e.prototype=Object.create(t.prototype),M(e.prototype,"constructor",e),{extend:Z.bind(null,e.prototype)}}}}var ge=Object.getOwnPropertyDescriptor,fe=[].slice;function he(e,t,r){return fe.call(e,t,r)}function re(e,t){return t(e)}function ue(e){if(!e)throw new Error("Assertion Failed")}function de(e){f.setImmediate?setImmediate(e):setTimeout(e,0)}function F(e,t){if(typeof t=="string"&&C(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var r=[],o=0,a=t.length;o<a;++o){var l=F(e,t[o]);r.push(l)}return r}var h=t.indexOf(".");if(h!==-1){var m=e[t.substr(0,h)];return m==null?void 0:F(m,t.substr(h+1))}}function A(e,t,r){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){ue(typeof r!="string"&&"length"in r);for(var o=0,a=t.length;o<a;++o)A(e,t[o],r[o])}else{var l,h,m=t.indexOf(".");m!==-1?(l=t.substr(0,m),(h=t.substr(m+1))===""?r===void 0?p(e)&&!isNaN(parseInt(l))?e.splice(l,1):delete e[l]:e[l]=r:A(m=!(m=e[l])||!C(e,l)?e[l]={}:m,h,r)):r===void 0?p(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function te(e){var t,r={};for(t in e)C(e,t)&&(r[t]=e[t]);return r}var B=[].concat;function q(e){return B.apply([],e)}var lt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(q([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return f[e]}),j=new Set(lt.map(function(e){return f[e]})),ae=null;function L(e){return ae=new WeakMap,e=function t(r){if(!r||typeof r!="object")return r;var o=ae.get(r);if(o)return o;if(p(r)){o=[],ae.set(r,o);for(var a=0,l=r.length;a<l;++a)o.push(t(r[a]))}else if(j.has(r.constructor))o=r;else{var h,m=x(r);for(h in o=m===Object.prototype?{}:Object.create(m),ae.set(r,o),r)C(r,h)&&(o[h]=t(r[h]))}return o}(e),ae=null,e}var K={}.toString;function V(e){return K.call(e).slice(8,-1)}var T=typeof Symbol<"u"?Symbol.iterator:"@@iterator",G=typeof T=="symbol"?function(e){var t;return e!=null&&(t=e[T])&&t.apply(e)}:function(){return null};function z(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Y={};function ie(e){var t,r,o,a;if(arguments.length===1){if(p(e))return e.slice();if(this===Y&&typeof e=="string")return[e];if(a=G(e)){for(r=[];!(o=a.next()).done;)r.push(o.value);return r}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(r=new Array(t);t--;)r[t]=e[t];return r}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}var ce=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Nt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ue=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Nt),xe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function we(e,t){this.name=e,this.message=t}function ke(e,t){return e+". Errors: "+Object.keys(t).map(function(r){return t[r].toString()}).filter(function(r,o,a){return a.indexOf(r)===o}).join(`
`)}function Ce(e,t,r,o){this.failures=t,this.failedKeys=o,this.successCount=r,this.message=ke(e,t)}function Me(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(r){return t[r]}),this.failuresByPos=t,this.message=ke(e,this.failures)}le(we).from(Error).extend({toString:function(){return this.name+": "+this.message}}),le(Ce).from(we),le(Me).from(we);var ze=Ue.reduce(function(e,t){return e[t]=t+"Error",e},{}),ut=we,se=Ue.reduce(function(e,t){var r=t+"Error";function o(a,l){this.name=r,a?typeof a=="string"?(this.message="".concat(a).concat(l?`
 `+l:""),this.inner=l||null):typeof a=="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a):(this.message=xe[t]||r,this.inner=null)}return le(o).from(ut),e[t]=o,e},{});se.Syntax=SyntaxError,se.Type=TypeError,se.Range=RangeError;var je=Nt.reduce(function(e,t){return e[t+"Error"]=se[t],e},{}),Be=Ue.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=se[t]),e},{});function Se(){}function We(e){return e}function Wi(e,t){return e==null||e===We?t:function(r){return t(e(r))}}function ct(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Yi(e,t){return e===Se?t:function(){var r=e.apply(this,arguments);r!==void 0&&(arguments[0]=r);var o=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var l=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?ct(o,this.onsuccess):o),a&&(this.onerror=this.onerror?ct(a,this.onerror):a),l!==void 0?l:r}}function Ji(e,t){return e===Se?t:function(){e.apply(this,arguments);var r=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?ct(r,this.onsuccess):r),o&&(this.onerror=this.onerror?ct(o,this.onerror):o)}}function Qi(e,t){return e===Se?t:function(r){var o=e.apply(this,arguments);g(r,o);var a=this.onsuccess,l=this.onerror;return this.onsuccess=null,this.onerror=null,r=t.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?ct(a,this.onsuccess):a),l&&(this.onerror=this.onerror?ct(l,this.onerror):l),o===void 0?r===void 0?void 0:r:g(o,r)}}function Gi(e,t){return e===Se?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Rn(e,t){return e===Se?t:function(){var r=e.apply(this,arguments);if(r&&typeof r.then=="function"){for(var o=this,a=arguments.length,l=new Array(a);a--;)l[a]=arguments[a];return r.then(function(){return t.apply(o,l)})}return t.apply(this,arguments)}}Be.ModifyError=Ce,Be.DexieError=we,Be.BulkError=Me;var Ye=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Or(e){Ye=e}var $t={},kr=100,lt=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,x(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,x(t),e]}(),Nt=lt[0],Ue=lt[1],lt=lt[2],Ue=Ue&&Ue.then,ft=Nt&&Nt.constructor,$n=!!lt,jt=function(e,t){Dt.push([e,t]),Qt&&(queueMicrotask(Zi),Qt=!1)},Nn=!0,Qt=!0,ht=[],Gt=[],jn=We,et={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Se,pgp:!1,env:{},finalize:Se},oe=et,Dt=[],dt=0,Xt=[];function ee(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=oe;if(typeof e!="function"){if(e!==$t)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Tn(this,this._value))}this._state=null,this._value=null,++t.ref,function r(o,a){try{a(function(l){if(o._state===null){if(l===o)throw new TypeError("A promise cannot be resolved with itself.");var h=o._lib&&wt();l&&typeof l.then=="function"?r(o,function(m,v){l instanceof ee?l._then(m,v):l.then(m,v)}):(o._state=!0,o._value=l,Fr(o)),h&&_t()}},Tn.bind(null,o))}catch(l){Tn(o,l)}}(this,e)}var Dn={get:function(){var e=oe,t=nn;function r(o,a){var l=this,h=!e.global&&(e!==oe||t!==nn),m=h&&!nt(),v=new ee(function(w,O){Ln(l,new Er(Cr(o,e,h,m),Cr(a,e,h,m),w,O,e))});return this._consoleTask&&(v._consoleTask=this._consoleTask),v}return r.prototype=$t,r},set:function(e){M(this,"then",e&&e.prototype===$t?Dn:{get:function(){return e},set:Dn.set})}};function Er(e,t,r,o,a){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=r,this.reject=o,this.psd=a}function Tn(e,t){var r,o;Gt.push(t),e._state===null&&(r=e._lib&&wt(),t=jn(t),e._state=!1,e._value=t,o=e,ht.some(function(a){return a._value===o._value})||ht.push(o),Fr(e),r&&_t())}function Fr(e){var t=e._listeners;e._listeners=[];for(var r=0,o=t.length;r<o;++r)Ln(e,t[r]);var a=e._PSD;--a.ref||a.finalize(),dt===0&&(++dt,jt(function(){--dt==0&&In()},[]))}function Ln(e,t){if(e._state!==null){var r=e._state?t.onFulfilled:t.onRejected;if(r===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++dt,jt(Xi,[r,e,t])}else e._listeners.push(t)}function Xi(e,t,r){try{var o,a=t._value;!t._state&&Gt.length&&(Gt=[]),o=Ye&&t._consoleTask?t._consoleTask.run(function(){return e(a)}):e(a),t._state||Gt.indexOf(a)!==-1||function(l){for(var h=ht.length;h;)if(ht[--h]._value===l._value)return ht.splice(h,1)}(t),r.resolve(o)}catch(l){r.reject(l)}finally{--dt==0&&In(),--r.psd.ref||r.psd.finalize()}}function Zi(){pt(et,function(){wt()&&_t()})}function wt(){var e=Nn;return Qt=Nn=!1,e}function _t(){var e,t,r;do for(;0<Dt.length;)for(e=Dt,Dt=[],r=e.length,t=0;t<r;++t){var o=e[t];o[0].apply(null,o[1])}while(0<Dt.length);Qt=Nn=!0}function In(){var e=ht;ht=[],e.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var t=Xt.slice(0),r=t.length;r;)t[--r]()}function Zt(e){return new ee($t,!1,e)}function Pe(e,t){var r=oe;return function(){var o=wt(),a=oe;try{return rt(r,!0),e.apply(this,arguments)}catch(l){t&&t(l)}finally{rt(a,!1),o&&_t()}}}Z(ee.prototype,{then:Dn,_then:function(e,t){Ln(this,new Er(null,null,e,t,oe))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,r=arguments[1];return typeof t=="function"?this.then(null,function(o){return(o instanceof t?r:Zt)(o)}):this.then(null,function(o){return(o&&o.name===t?r:Zt)(o)})},finally:function(e){return this.then(function(t){return ee.resolve(e()).then(function(){return t})},function(t){return ee.resolve(e()).then(function(){return Zt(t)})})},timeout:function(e,t){var r=this;return e<1/0?new ee(function(o,a){var l=setTimeout(function(){return a(new se.Timeout(t))},e);r.then(o,a).finally(clearTimeout.bind(null,l))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&M(ee.prototype,Symbol.toStringTag,"Dexie.Promise"),et.env=Pr(),Z(ee,{all:function(){var e=ie.apply(null,arguments).map(rn);return new ee(function(t,r){e.length===0&&t([]);var o=e.length;e.forEach(function(a,l){return ee.resolve(a).then(function(h){e[l]=h,--o||t(e)},r)})})},resolve:function(e){return e instanceof ee?e:e&&typeof e.then=="function"?new ee(function(t,r){e.then(t,r)}):new ee($t,!0,e)},reject:Zt,race:function(){var e=ie.apply(null,arguments).map(rn);return new ee(function(t,r){e.map(function(o){return ee.resolve(o).then(t,r)})})},PSD:{get:function(){return oe},set:function(e){return oe=e}},totalEchoes:{get:function(){return nn}},newPSD:tt,usePSD:pt,scheduler:{get:function(){return jt},set:function(e){jt=e}},rejectionMapper:{get:function(){return jn},set:function(e){jn=e}},follow:function(e,t){return new ee(function(r,o){return tt(function(a,l){var h=oe;h.unhandleds=[],h.onunhandled=l,h.finalize=ct(function(){var m,v=this;m=function(){v.unhandleds.length===0?a():l(v.unhandleds[0])},Xt.push(function w(){m(),Xt.splice(Xt.indexOf(w),1)}),++dt,jt(function(){--dt==0&&In()},[])},h.finalize),e()},t,r,o)})}}),ft&&(ft.allSettled&&M(ee,"allSettled",function(){var e=ie.apply(null,arguments).map(rn);return new ee(function(t){e.length===0&&t([]);var r=e.length,o=new Array(r);e.forEach(function(a,l){return ee.resolve(a).then(function(h){return o[l]={status:"fulfilled",value:h}},function(h){return o[l]={status:"rejected",reason:h}}).then(function(){return--r||t(o)})})})}),ft.any&&typeof AggregateError<"u"&&M(ee,"any",function(){var e=ie.apply(null,arguments).map(rn);return new ee(function(t,r){e.length===0&&r(new AggregateError([]));var o=e.length,a=new Array(o);e.forEach(function(l,h){return ee.resolve(l).then(function(m){return t(m)},function(m){a[h]=m,--o||r(new AggregateError(a))})})})}),ft.withResolvers&&(ee.withResolvers=ft.withResolvers));var $e={awaits:0,echoes:0,id:0},es=0,en=[],tn=0,nn=0,ts=0;function tt(e,t,r,o){var a=oe,l=Object.create(a);return l.parent=a,l.ref=0,l.global=!1,l.id=++ts,et.env,l.env=$n?{Promise:ee,PromiseProp:{value:ee,configurable:!0,writable:!0},all:ee.all,race:ee.race,allSettled:ee.allSettled,any:ee.any,resolve:ee.resolve,reject:ee.reject}:{},t&&g(l,t),++a.ref,l.finalize=function(){--this.parent.ref||this.parent.finalize()},o=pt(l,e,r,o),l.ref===0&&l.finalize(),o}function St(){return $e.id||($e.id=++es),++$e.awaits,$e.echoes+=kr,$e.id}function nt(){return!!$e.awaits&&(--$e.awaits==0&&($e.id=0),$e.echoes=$e.awaits*kr,!0)}function rn(e){return $e.echoes&&e&&e.constructor===ft?(St(),e.then(function(t){return nt(),t},function(t){return nt(),Ae(t)})):e}function ns(){var e=en[en.length-1];en.pop(),rt(e,!1)}function rt(e,t){var r,o=oe;(t?!$e.echoes||tn++&&e===oe:!tn||--tn&&e===oe)||queueMicrotask(t?function(a){++nn,$e.echoes&&--$e.echoes!=0||($e.echoes=$e.awaits=$e.id=0),en.push(oe),rt(a,!0)}.bind(null,e):ns),e!==oe&&(oe=e,o===et&&(et.env=Pr()),$n&&(r=et.env.Promise,t=e.env,(o.global||e.global)&&(Object.defineProperty(f,"Promise",t.PromiseProp),r.all=t.all,r.race=t.race,r.resolve=t.resolve,r.reject=t.reject,t.allSettled&&(r.allSettled=t.allSettled),t.any&&(r.any=t.any))))}function Pr(){var e=f.Promise;return $n?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function pt(e,t,r,o,a){var l=oe;try{return rt(e,!0),t(r,o,a)}finally{rt(l,!1)}}function Cr(e,t,r,o){return typeof e!="function"?e:function(){var a=oe;r&&St(),rt(t,!0);try{return e.apply(this,arguments)}finally{rt(a,!1),o&&queueMicrotask(nt)}}}function Kn(e){Promise===ft&&$e.echoes===0?tn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Ue).indexOf("[native code]")===-1&&(St=nt=Se);var Ae=ee.reject,gt="￿",Xe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ar="String expected.",Ot=[],sn="__dbnames",Mn="readonly",Bn="readwrite";function mt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Rr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function on(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=L(t))[e],t}}function $r(){throw se.Type()}function _e(e,t){try{var r=Nr(e),o=Nr(t);if(r!==o)return r==="Array"?1:o==="Array"?-1:r==="binary"?1:o==="binary"?-1:r==="string"?1:o==="string"?-1:r==="Date"?1:o!=="Date"?NaN:-1;switch(r){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(a,l){for(var h=a.length,m=l.length,v=h<m?h:m,w=0;w<v;++w)if(a[w]!==l[w])return a[w]<l[w]?-1:1;return h===m?0:h<m?-1:1}(jr(e),jr(t));case"Array":return function(a,l){for(var h=a.length,m=l.length,v=h<m?h:m,w=0;w<v;++w){var O=_e(a[w],l[w]);if(O!==0)return O}return h===m?0:h<m?-1:1}(e,t)}}catch{}return NaN}function Nr(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=V(e),e==="ArrayBuffer"?"binary":e)}function jr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Dr=(Ee.prototype._trans=function(e,t,r){var o=this._tx||oe.trans,a=this.name,l=Ye&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function h(w,O,y){if(!y.schema[a])throw new se.NotFound("Table "+a+" not part of transaction");return t(y.idbtrans,y)}var m=wt();try{var v=o&&o.db._novip===this.db._novip?o===oe.trans?o._promise(e,h,r):tt(function(){return o._promise(e,h,r)},{trans:o,transless:oe.transless||oe}):function w(O,y,E,b){if(O.idbdb&&(O._state.openComplete||oe.letThrough||O._vip)){var S=O._createTransaction(y,E,O._dbSchema);try{S.create(),O._state.PR1398_maxLoop=3}catch(k){return k.name===ze.InvalidState&&O.isOpen()&&0<--O._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),O.close({disableAutoOpen:!1}),O.open().then(function(){return w(O,y,E,b)})):Ae(k)}return S._promise(y,function(k,_){return tt(function(){return oe.trans=S,b(k,_,S)})}).then(function(k){if(y==="readwrite")try{S.idbtrans.commit()}catch{}return y==="readonly"?k:S._completion.then(function(){return k})})}if(O._state.openComplete)return Ae(new se.DatabaseClosed(O._state.dbOpenError));if(!O._state.isBeingOpened){if(!O._state.autoOpen)return Ae(new se.DatabaseClosed);O.open().catch(Se)}return O._state.dbReadyPromise.then(function(){return w(O,y,E,b)})}(this.db,e,[this.name],h);return l&&(v._consoleTask=l,v=v.catch(function(w){return console.trace(w),Ae(w)})),v}finally{m&&_t()}},Ee.prototype.get=function(e,t){var r=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?Ae(new se.Type("Invalid argument to Table.get()")):this._trans("readonly",function(o){return r.core.get({trans:o,key:e}).then(function(a){return r.hook.reading.fire(a)})}).then(t)},Ee.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(p(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=d(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(m){if(m.compound&&t.every(function(w){return 0<=m.keyPath.indexOf(w)})){for(var v=0;v<t.length;++v)if(t.indexOf(m.keyPath[v])===-1)return!1;return!0}return!1}).sort(function(m,v){return m.keyPath.length-v.keyPath.length})[0];if(r&&this.db._maxKey!==gt){var l=r.keyPath.slice(0,t.length);return this.where(l).equals(l.map(function(v){return e[v]}))}!r&&Ye&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var o=this.schema.idxByName;function a(m,v){return _e(m,v)===0}var h=t.reduce(function(y,v){var w=y[0],O=y[1],y=o[v],E=e[v];return[w||y,w||!y?mt(O,y&&y.multi?function(b){return b=F(b,v),p(b)&&b.some(function(S){return a(E,S)})}:function(b){return a(E,F(b,v))}):O]},[null,null]),l=h[0],h=h[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(h):r?this.filter(h):this.where(t).equals("")},Ee.prototype.filter=function(e){return this.toCollection().and(e)},Ee.prototype.count=function(e){return this.toCollection().count(e)},Ee.prototype.offset=function(e){return this.toCollection().offset(e)},Ee.prototype.limit=function(e){return this.toCollection().limit(e)},Ee.prototype.each=function(e){return this.toCollection().each(e)},Ee.prototype.toArray=function(e){return this.toCollection().toArray(e)},Ee.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ee.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,p(e)?"[".concat(e.join("+"),"]"):e))},Ee.prototype.reverse=function(){return this.toCollection().reverse()},Ee.prototype.mapToClass=function(e){var t,r=this.db,o=this.name;function a(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof $r&&(function(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function O(){this.constructor=v}i(v,w),v.prototype=w===null?Object.create(w):(O.prototype=w.prototype,new O)}(a,t=e),Object.defineProperty(a.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),a.prototype.table=function(){return o},e=a);for(var l=new Set,h=e.prototype;h;h=x(h))Object.getOwnPropertyNames(h).forEach(function(v){return l.add(v)});function m(v){if(!v)return v;var w,O=Object.create(e.prototype);for(w in v)if(!l.has(w))try{O[w]=v[w]}catch{}return O}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=m,this.hook("reading",m),e},Ee.prototype.defineClass=function(){return this.mapToClass(function(e){g(this,e)})},Ee.prototype.add=function(e,t){var r=this,o=this.schema.primKey,a=o.auto,l=o.keyPath,h=e;return l&&a&&(h=on(l)(e)),this._trans("readwrite",function(m){return r.core.mutate({trans:m,type:"add",keys:t!=null?[t]:null,values:[h]})}).then(function(m){return m.numFailures?ee.reject(m.failures[0]):m.lastResult}).then(function(m){if(l)try{A(e,l,m)}catch{}return m})},Ee.prototype.update=function(e,t){return typeof e!="object"||p(e)?this.where(":id").equals(e).modify(t):(e=F(e,this.schema.primKey.keyPath),e===void 0?Ae(new se.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},Ee.prototype.put=function(e,t){var r=this,o=this.schema.primKey,a=o.auto,l=o.keyPath,h=e;return l&&a&&(h=on(l)(e)),this._trans("readwrite",function(m){return r.core.mutate({trans:m,type:"put",values:[h],keys:t!=null?[t]:null})}).then(function(m){return m.numFailures?ee.reject(m.failures[0]):m.lastResult}).then(function(m){if(l)try{A(e,l,m)}catch{}return m})},Ee.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]})}).then(function(r){return r.numFailures?ee.reject(r.failures[0]):void 0})},Ee.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Rr})}).then(function(t){return t.numFailures?ee.reject(t.failures[0]):void 0})},Ee.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(r){return t.core.getMany({keys:e,trans:r}).then(function(o){return o.map(function(a){return t.hook.reading.fire(a)})})})},Ee.prototype.bulkAdd=function(e,t,r){var o=this,a=Array.isArray(t)?t:void 0,l=(r=r||(a?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(h){var w=o.schema.primKey,m=w.auto,w=w.keyPath;if(w&&a)throw new se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new se.InvalidArgument("Arguments objects and keys must have the same length");var v=e.length,w=w&&m?e.map(on(w)):e;return o.core.mutate({trans:h,type:"add",keys:a,values:w,wantResults:l}).then(function(S){var y=S.numFailures,E=S.results,b=S.lastResult,S=S.failures;if(y===0)return l?E:b;throw new Me("".concat(o.name,".bulkAdd(): ").concat(y," of ").concat(v," operations failed"),S)})})},Ee.prototype.bulkPut=function(e,t,r){var o=this,a=Array.isArray(t)?t:void 0,l=(r=r||(a?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(h){var w=o.schema.primKey,m=w.auto,w=w.keyPath;if(w&&a)throw new se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new se.InvalidArgument("Arguments objects and keys must have the same length");var v=e.length,w=w&&m?e.map(on(w)):e;return o.core.mutate({trans:h,type:"put",keys:a,values:w,wantResults:l}).then(function(S){var y=S.numFailures,E=S.results,b=S.lastResult,S=S.failures;if(y===0)return l?E:b;throw new Me("".concat(o.name,".bulkPut(): ").concat(y," of ").concat(v," operations failed"),S)})})},Ee.prototype.bulkUpdate=function(e){var t=this,r=this.core,o=e.map(function(h){return h.key}),a=e.map(function(h){return h.changes}),l=[];return this._trans("readwrite",function(h){return r.getMany({trans:h,keys:o,cache:"clone"}).then(function(m){var v=[],w=[];e.forEach(function(y,E){var b=y.key,S=y.changes,k=m[E];if(k){for(var _=0,P=Object.keys(S);_<P.length;_++){var R=P[_],$=S[R];if(R===t.schema.primKey.keyPath){if(_e($,b)!==0)throw new se.Constraint("Cannot update primary key in bulkUpdate()")}else A(k,R,$)}l.push(E),v.push(b),w.push(k)}});var O=v.length;return r.mutate({trans:h,type:"put",keys:v,values:w,updates:{keys:o,changeSpecs:a}}).then(function(y){var E=y.numFailures,b=y.failures;if(E===0)return O;for(var S=0,k=Object.keys(b);S<k.length;S++){var _,P=k[S],R=l[Number(P)];R!=null&&(_=b[P],delete b[P],b[R]=_)}throw new Me("".concat(t.name,".bulkUpdate(): ").concat(E," of ").concat(O," operations failed"),b)})})})},Ee.prototype.bulkDelete=function(e){var t=this,r=e.length;return this._trans("readwrite",function(o){return t.core.mutate({trans:o,type:"delete",keys:e})}).then(function(h){var a=h.numFailures,l=h.lastResult,h=h.failures;if(a===0)return l;throw new Me("".concat(t.name,".bulkDelete(): ").concat(a," of ").concat(r," operations failed"),h)})},Ee);function Ee(){}function Tt(e){function t(h,m){if(m){for(var v=arguments.length,w=new Array(v-1);--v;)w[v-1]=arguments[v];return r[h].subscribe.apply(null,w),e}if(typeof h=="string")return r[h]}var r={};t.addEventType=l;for(var o=1,a=arguments.length;o<a;++o)l(arguments[o]);return t;function l(h,m,v){if(typeof h!="object"){var w;m=m||Gi;var O={subscribers:[],fire:v=v||Se,subscribe:function(y){O.subscribers.indexOf(y)===-1&&(O.subscribers.push(y),O.fire=m(O.fire,y))},unsubscribe:function(y){O.subscribers=O.subscribers.filter(function(E){return E!==y}),O.fire=O.subscribers.reduce(m,v)}};return r[h]=t[h]=O}d(w=h).forEach(function(y){var E=w[y];if(p(E))l(y,w[y][0],w[y][1]);else{if(E!=="asap")throw new se.InvalidArgument("Invalid event config");var b=l(y,We,function(){for(var S=arguments.length,k=new Array(S);S--;)k[S]=arguments[S];b.subscribers.forEach(function(_){de(function(){_.apply(null,k)})})})}})}}function Lt(e,t){return le(t).from({prototype:e}),t}function kt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function qn(e,t){e.filter=mt(e.filter,t)}function Vn(e,t,r){var o=e.replayFilter;e.replayFilter=o?function(){return mt(o(),t())}:t,e.justLimit=r&&!o}function an(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new se.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function Tr(e,t,r){var o=an(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:o,range:e.range}})}function un(e,t,r,o){var a=e.replayFilter?mt(e.filter,e.replayFilter()):e.filter;if(e.or){var l={},h=function(m,v,w){var O,y;a&&!a(v,w,function(E){return v.stop(E)},function(E){return v.fail(E)})||((y=""+(O=v.primaryKey))=="[object ArrayBuffer]"&&(y=""+new Uint8Array(O)),C(l,y)||(l[y]=!0,t(m,v,w)))};return Promise.all([e.or._iterate(h,r),Lr(Tr(e,o,r),e.algorithm,h,!e.keysOnly&&e.valueMapper)])}return Lr(Tr(e,o,r),mt(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function Lr(e,t,r,o){var a=Pe(o?function(l,h,m){return r(o(l),h,m)}:r);return e.then(function(l){if(l)return l.start(function(){var h=function(){return l.continue()};t&&!t(l,function(m){return h=m},function(m){l.stop(m),h=Se},function(m){l.fail(m),h=Se})||a(l.value,l,function(m){return h=m}),h()})})}var It=(Ir.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var r=t.add;if(p(r))return u(u([],p(e)?e:[],!0),r).sort();if(typeof r=="number")return(Number(e)||0)+r;if(typeof r=="bigint")try{return BigInt(e)+r}catch{return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(t.remove!==void 0){var o=t.remove;if(p(o))return p(e)?e.filter(function(a){return!o.includes(a)}).sort():[];if(typeof o=="number")return Number(e)-o;if(typeof o=="bigint")try{return BigInt(e)-o}catch{return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}return r=(r=t.replacePrefix)===null||r===void 0?void 0:r[0],r&&typeof e=="string"&&e.startsWith(r)?t.replacePrefix[1]+e.substring(r.length):e},Ir);function Ir(e){this["@@propmod"]=e}var rs=(Oe.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,Ae.bind(null,r.error)):r.table._trans("readonly",e).then(t)},Oe.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Ae.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Oe.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=mt(t.algorithm,e)},Oe.prototype._iterate=function(e,t){return un(this._ctx,e,t,this._ctx.table.core)},Oe.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&g(r,e),t._ctx=r,t},Oe.prototype.raw=function(){return this._ctx.valueMapper=null,this},Oe.prototype.each=function(e){var t=this._ctx;return this._read(function(r){return un(t,e,r,t.table.core)})},Oe.prototype.count=function(e){var t=this;return this._read(function(r){var o=t._ctx,a=o.table.core;if(kt(o,!0))return a.count({trans:r,query:{index:an(o,a.schema),range:o.range}}).then(function(h){return Math.min(h,o.limit)});var l=0;return un(o,function(){return++l,!1},r,a).then(function(){return l})}).then(e)},Oe.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),o=r[0],a=r.length-1;function l(v,w){return w?l(v[r[w]],w-1):v[o]}var h=this._ctx.dir==="next"?1:-1;function m(v,w){return _e(l(v,a),l(w,a))*h}return this.toArray(function(v){return v.sort(m)}).then(t)},Oe.prototype.toArray=function(e){var t=this;return this._read(function(r){var o=t._ctx;if(o.dir==="next"&&kt(o,!0)&&0<o.limit){var a=o.valueMapper,l=an(o,o.table.core.schema);return o.table.core.query({trans:r,limit:o.limit,values:!0,query:{index:l,range:o.range}}).then(function(m){return m=m.result,a?m.map(a):m})}var h=[];return un(o,function(m){return h.push(m)},r,o.table.core).then(function(){return h})},e)},Oe.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,kt(t)?Vn(t,function(){var r=e;return function(o,a){return r===0||(r===1?--r:a(function(){o.advance(r),r=0}),!1)}}):Vn(t,function(){var r=e;return function(){return--r<0}})),this},Oe.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Vn(this._ctx,function(){var t=e;return function(r,o,a){return--t<=0&&o(a),0<=t}},!0),this},Oe.prototype.until=function(e,t){return qn(this._ctx,function(r,o,a){return!e(r.value)||(o(a),t)}),this},Oe.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},Oe.prototype.last=function(e){return this.reverse().first(e)},Oe.prototype.filter=function(e){var t;return qn(this._ctx,function(r){return e(r.value)}),(t=this._ctx).isMatch=mt(t.isMatch,e),this},Oe.prototype.and=function(e){return this.filter(e)},Oe.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Oe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Oe.prototype.desc=function(){return this.reverse()},Oe.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(r,o){e(o.key,o)})},Oe.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Oe.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(r,o){e(o.primaryKey,o)})},Oe.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(o,a){r.push(a.key)}).then(function(){return r}).then(e)},Oe.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&kt(t,!0)&&0<t.limit)return this._read(function(o){var a=an(t,t.table.core.schema);return t.table.core.query({trans:o,values:!1,limit:t.limit,query:{index:a,range:t.range}})}).then(function(o){return o.result}).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(o,a){r.push(a.primaryKey)}).then(function(){return r}).then(e)},Oe.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Oe.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},Oe.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Oe.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return qn(this._ctx,function(a){var o=a.primaryKey.toString(),a=C(t,o);return t[o]=!0,!a}),this},Oe.prototype.modify=function(e){var t=this,r=this._ctx;return this._write(function(o){var a,l,h;h=typeof e=="function"?e:(a=d(e),l=a.length,function(_){for(var P=!1,R=0;R<l;++R){var $=a[R],D=e[$],U=F(_,$);D instanceof It?(A(_,$,D.execute(U)),P=!0):U!==D&&(A(_,$,D),P=!0)}return P});var m=r.table.core,y=m.schema.primaryKey,v=y.outbound,w=y.extractKey,O=200,y=t.db._options.modifyChunkSize;y&&(O=typeof y=="object"?y[m.name]||y["*"]||200:y);function E(_,$){var R=$.failures,$=$.numFailures;S+=_-$;for(var D=0,U=d(R);D<U.length;D++){var Q=U[D];b.push(R[Q])}}var b=[],S=0,k=[];return t.clone().primaryKeys().then(function(_){function P($){var D=Math.min(O,_.length-$);return m.getMany({trans:o,keys:_.slice($,$+D),cache:"immutable"}).then(function(U){for(var Q=[],H=[],W=v?[]:null,X=[],J=0;J<D;++J){var ne=U[J],ye={value:L(ne),primKey:_[$+J]};h.call(ye,ye.value,ye)!==!1&&(ye.value==null?X.push(_[$+J]):v||_e(w(ne),w(ye.value))===0?(H.push(ye.value),v&&W.push(_[$+J])):(X.push(_[$+J]),Q.push(ye.value)))}return Promise.resolve(0<Q.length&&m.mutate({trans:o,type:"add",values:Q}).then(function(ve){for(var be in ve.failures)X.splice(parseInt(be),1);E(Q.length,ve)})).then(function(){return(0<H.length||R&&typeof e=="object")&&m.mutate({trans:o,type:"put",keys:W,values:H,criteria:R,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<$}).then(function(ve){return E(H.length,ve)})}).then(function(){return(0<X.length||R&&e===Un)&&m.mutate({trans:o,type:"delete",keys:X,criteria:R,isAdditionalChunk:0<$}).then(function(ve){return E(X.length,ve)})}).then(function(){return _.length>$+D&&P($+O)})})}var R=kt(r)&&r.limit===1/0&&(typeof e!="function"||e===Un)&&{index:r.index,range:r.range};return P(0).then(function(){if(0<b.length)throw new Ce("Error modifying one or more objects",b,S,k);return _.length})})})},Oe.prototype.delete=function(){var e=this._ctx,t=e.range;return kt(e)&&(e.isPrimKey||t.type===3)?this._write(function(r){var o=e.table.core.schema.primaryKey,a=t;return e.table.core.count({trans:r,query:{index:o,range:a}}).then(function(l){return e.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(h){var m=h.failures;if(h.lastResult,h.results,h=h.numFailures,h)throw new Ce("Could not delete some values",Object.keys(m).map(function(v){return m[v]}),l-h);return l-h})})}):this.modify(Un)},Oe);function Oe(){}var Un=function(e,t){return t.value=null};function is(e,t){return e<t?-1:e===t?0:1}function ss(e,t){return t<e?-1:e===t?0:1}function qe(e,t,r){return e=e instanceof Mr?new e.Collection(e):e,e._ctx.error=new(r||TypeError)(t),e}function Et(e){return new e.Collection(e,function(){return Kr("")}).limit(0)}function cn(e,t,r,o){var a,l,h,m,v,w,O,y=r.length;if(!r.every(function(S){return typeof S=="string"}))return qe(e,Ar);function E(S){a=S==="next"?function(_){return _.toUpperCase()}:function(_){return _.toLowerCase()},l=S==="next"?function(_){return _.toLowerCase()}:function(_){return _.toUpperCase()},h=S==="next"?is:ss;var k=r.map(function(_){return{lower:l(_),upper:a(_)}}).sort(function(_,P){return h(_.lower,P.lower)});m=k.map(function(_){return _.upper}),v=k.map(function(_){return _.lower}),O=(w=S)==="next"?"":o}E("next"),e=new e.Collection(e,function(){return it(m[0],v[y-1]+o)}),e._ondirectionchange=function(S){E(S)};var b=0;return e._addAlgorithm(function(S,k,_){var P=S.key;if(typeof P!="string")return!1;var R=l(P);if(t(R,v,b))return!0;for(var $=null,D=b;D<y;++D){var U=function(Q,H,W,X,J,ne){for(var ye=Math.min(Q.length,X.length),ve=-1,be=0;be<ye;++be){var Ve=H[be];if(Ve!==X[be])return J(Q[be],W[be])<0?Q.substr(0,be)+W[be]+W.substr(be+1):J(Q[be],X[be])<0?Q.substr(0,be)+X[be]+W.substr(be+1):0<=ve?Q.substr(0,ve)+H[ve]+W.substr(ve+1):null;J(Q[be],Ve)<0&&(ve=be)}return ye<X.length&&ne==="next"?Q+W.substr(Q.length):ye<Q.length&&ne==="prev"?Q.substr(0,W.length):ve<0?null:Q.substr(0,ve)+X[ve]+W.substr(ve+1)}(P,R,m[D],v[D],h,w);U===null&&$===null?b=D+1:($===null||0<h($,U))&&($=U)}return k($!==null?function(){S.continue($+O)}:_),!1}),e}function it(e,t,r,o){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:o}}function Kr(e){return{type:1,lower:e,upper:e}}var Mr=(Object.defineProperty(Ne.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ne.prototype.between=function(e,t,r,o){r=r!==!1,o=o===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(r||o)&&(!r||!o)?Et(this):new this.Collection(this,function(){return it(e,t,!r,!o)})}catch{return qe(this,Xe)}},Ne.prototype.equals=function(e){return e==null?qe(this,Xe):new this.Collection(this,function(){return Kr(e)})},Ne.prototype.above=function(e){return e==null?qe(this,Xe):new this.Collection(this,function(){return it(e,void 0,!0)})},Ne.prototype.aboveOrEqual=function(e){return e==null?qe(this,Xe):new this.Collection(this,function(){return it(e,void 0,!1)})},Ne.prototype.below=function(e){return e==null?qe(this,Xe):new this.Collection(this,function(){return it(void 0,e,!1,!0)})},Ne.prototype.belowOrEqual=function(e){return e==null?qe(this,Xe):new this.Collection(this,function(){return it(void 0,e)})},Ne.prototype.startsWith=function(e){return typeof e!="string"?qe(this,Ar):this.between(e,e+gt,!0,!0)},Ne.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):cn(this,function(t,r){return t.indexOf(r[0])===0},[e],gt)},Ne.prototype.equalsIgnoreCase=function(e){return cn(this,function(t,r){return t===r[0]},[e],"")},Ne.prototype.anyOfIgnoreCase=function(){var e=ie.apply(Y,arguments);return e.length===0?Et(this):cn(this,function(t,r){return r.indexOf(t)!==-1},e,"")},Ne.prototype.startsWithAnyOfIgnoreCase=function(){var e=ie.apply(Y,arguments);return e.length===0?Et(this):cn(this,function(t,r){return r.some(function(o){return t.indexOf(o)===0})},e,gt)},Ne.prototype.anyOf=function(){var e=this,t=ie.apply(Y,arguments),r=this._cmp;try{t.sort(r)}catch{return qe(this,Xe)}if(t.length===0)return Et(this);var o=new this.Collection(this,function(){return it(t[0],t[t.length-1])});o._ondirectionchange=function(l){r=l==="next"?e._ascending:e._descending,t.sort(r)};var a=0;return o._addAlgorithm(function(l,h,m){for(var v=l.key;0<r(v,t[a]);)if(++a===t.length)return h(m),!1;return r(v,t[a])===0||(h(function(){l.continue(t[a])}),!1)}),o},Ne.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ne.prototype.noneOf=function(){var e=ie.apply(Y,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return qe(this,Xe)}var t=e.reduce(function(r,o){return r?r.concat([[r[r.length-1][1],o]]):[[-1/0,o]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Ne.prototype.inAnyRange=function(P,t){var r=this,o=this._cmp,a=this._ascending,l=this._descending,h=this._min,m=this._max;if(P.length===0)return Et(this);if(!P.every(function(R){return R[0]!==void 0&&R[1]!==void 0&&a(R[0],R[1])<=0}))return qe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",se.InvalidArgument);var v=!t||t.includeLowers!==!1,w=t&&t.includeUppers===!0,O,y=a;function E(R,$){return y(R[0],$[0])}try{(O=P.reduce(function(R,$){for(var D=0,U=R.length;D<U;++D){var Q=R[D];if(o($[0],Q[1])<0&&0<o($[1],Q[0])){Q[0]=h(Q[0],$[0]),Q[1]=m(Q[1],$[1]);break}}return D===U&&R.push($),R},[])).sort(E)}catch{return qe(this,Xe)}var b=0,S=w?function(R){return 0<a(R,O[b][1])}:function(R){return 0<=a(R,O[b][1])},k=v?function(R){return 0<l(R,O[b][0])}:function(R){return 0<=l(R,O[b][0])},_=S,P=new this.Collection(this,function(){return it(O[0][0],O[O.length-1][1],!v,!w)});return P._ondirectionchange=function(R){y=R==="next"?(_=S,a):(_=k,l),O.sort(E)},P._addAlgorithm(function(R,$,D){for(var U,Q=R.key;_(Q);)if(++b===O.length)return $(D),!1;return!S(U=Q)&&!k(U)||(r._cmp(Q,O[b][1])===0||r._cmp(Q,O[b][0])===0||$(function(){y===a?R.continue(O[b][0]):R.continue(O[b][1])}),!1)}),P},Ne.prototype.startsWithAnyOf=function(){var e=ie.apply(Y,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?Et(this):this.inAnyRange(e.map(function(t){return[t,t+gt]})):qe(this,"startsWithAnyOf() only works with strings")},Ne);function Ne(){}function Je(e){return Pe(function(t){return Kt(t),e(t.target.error),!1})}function Kt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Mt="storagemutated",Hn="x-storagemutated-1",st=Tt(null,Mt),os=(Qe.prototype._lock=function(){return ue(!oe.global),++this._reculock,this._reculock!==1||oe.global||(oe.lockOwnerFor=this),this},Qe.prototype._unlock=function(){if(ue(!oe.global),--this._reculock==0)for(oe.global||(oe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{pt(e[1],e[0])}catch{}}return this},Qe.prototype._locked=function(){return this._reculock&&oe.lockOwnerFor!==this},Qe.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb,o=this.db._state.dbOpenError;if(ue(!this.idbtrans),!e&&!r)switch(o&&o.name){case"DatabaseClosedError":throw new se.DatabaseClosed(o);case"MissingAPIError":throw new se.MissingAPI(o.message,o);default:throw new se.OpenFailed(o)}if(!this.active)throw new se.TransactionInactive;return ue(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||r).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Pe(function(a){Kt(a),t._reject(e.error)}),e.onabort=Pe(function(a){Kt(a),t.active&&t._reject(new se.Abort(e.error)),t.active=!1,t.on("abort").fire(a)}),e.oncomplete=Pe(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&st.storagemutated.fire(e.mutatedParts)}),this},Qe.prototype._promise=function(e,t,r){var o=this;if(e==="readwrite"&&this.mode!=="readwrite")return Ae(new se.ReadOnly("Transaction is readonly"));if(!this.active)return Ae(new se.TransactionInactive);if(this._locked())return new ee(function(l,h){o._blockedFuncs.push([function(){o._promise(e,t,r).then(l,h)},oe])});if(r)return tt(function(){var l=new ee(function(h,m){o._lock();var v=t(h,m,o);v&&v.then&&v.then(h,m)});return l.finally(function(){return o._unlock()}),l._lib=!0,l});var a=new ee(function(l,h){var m=t(l,h,o);m&&m.then&&m.then(l,h)});return a._lib=!0,a},Qe.prototype._root=function(){return this.parent?this.parent._root():this},Qe.prototype.waitFor=function(e){var t,r=this._root(),o=ee.resolve(e);r._waitingFor?r._waitingFor=r._waitingFor.then(function(){return o}):(r._waitingFor=o,r._waitingQueue=[],t=r.idbtrans.objectStore(r.storeNames[0]),function l(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(t.get(-1/0).onsuccess=l)}());var a=r._waitingFor;return new ee(function(l,h){o.then(function(m){return r._waitingQueue.push(Pe(l.bind(null,m)))},function(m){return r._waitingQueue.push(Pe(h.bind(null,m)))}).finally(function(){r._waitingFor===a&&(r._waitingFor=null)})})},Qe.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new se.Abort))},Qe.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(C(t,e))return t[e];var r=this.schema[e];if(!r)throw new se.NotFound("Table "+e+" not part of transaction");return r=new this.db.Table(e,r,this),r.core=this.db.core.table(e),t[e]=r},Qe);function Qe(){}function zn(e,t,r,o,a,l,h){return{name:e,keyPath:t,unique:r,multi:o,auto:a,compound:l,src:(r&&!h?"&":"")+(o?"*":"")+(a?"++":"")+Br(t)}}function Br(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Wn(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:(o=function(a){return[a.name,a]},r.reduce(function(a,l,h){return h=o(l,h),h&&(a[h[0]]=h[1]),a},{}))};var o}var Bt=function(e){try{return e.only([[]]),Bt=function(){return[[]]},[[]]}catch{return Bt=function(){return gt},gt}};function Yn(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(r){return r[t]}:function(r){return F(r,t)}:function(r){return F(r,e)};var t}function qr(e){return[].slice.call(e)}var as=0;function qt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function us(e,t,v){function o(_){if(_.type===3)return null;if(_.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var b=_.lower,S=_.upper,k=_.lowerOpen,_=_.upperOpen;return b===void 0?S===void 0?null:t.upperBound(S,!!_):S===void 0?t.lowerBound(b,!!k):t.bound(b,S,!!k,!!_)}function a(E){var b,S=E.name;return{name:S,schema:E,mutate:function(k){var _=k.trans,P=k.type,R=k.keys,$=k.values,D=k.range;return new Promise(function(U,Q){U=Pe(U);var H=_.objectStore(S),W=H.keyPath==null,X=P==="put"||P==="add";if(!X&&P!=="delete"&&P!=="deleteRange")throw new Error("Invalid operation type: "+P);var J,ne=(R||$||{length:1}).length;if(R&&$&&R.length!==$.length)throw new Error("Given keys array must have same length as given values array.");if(ne===0)return U({numFailures:0,failures:{},results:[],lastResult:void 0});function ye(Ie){++Ve,Kt(Ie)}var ve=[],be=[],Ve=0;if(P==="deleteRange"){if(D.type===4)return U({numFailures:Ve,failures:be,results:[],lastResult:void 0});D.type===3?ve.push(J=H.clear()):ve.push(J=H.delete(o(D)))}else{var W=X?W?[$,R]:[$,null]:[R,null],me=W[0],Te=W[1];if(X)for(var Le=0;Le<ne;++Le)ve.push(J=Te&&Te[Le]!==void 0?H[P](me[Le],Te[Le]):H[P](me[Le])),J.onerror=ye;else for(Le=0;Le<ne;++Le)ve.push(J=H[P](me[Le])),J.onerror=ye}function _n(Ie){Ie=Ie.target.result,ve.forEach(function(bt,hr){return bt.error!=null&&(be[hr]=bt.error)}),U({numFailures:Ve,failures:be,results:P==="delete"?R:ve.map(function(bt){return bt.result}),lastResult:Ie})}J.onerror=function(Ie){ye(Ie),_n(Ie)},J.onsuccess=_n})},getMany:function(k){var _=k.trans,P=k.keys;return new Promise(function(R,$){R=Pe(R);for(var D,U=_.objectStore(S),Q=P.length,H=new Array(Q),W=0,X=0,J=function(ve){ve=ve.target,H[ve._pos]=ve.result,++X===W&&R(H)},ne=Je($),ye=0;ye<Q;++ye)P[ye]!=null&&((D=U.get(P[ye]))._pos=ye,D.onsuccess=J,D.onerror=ne,++W);W===0&&R(H)})},get:function(k){var _=k.trans,P=k.key;return new Promise(function(R,$){R=Pe(R);var D=_.objectStore(S).get(P);D.onsuccess=function(U){return R(U.target.result)},D.onerror=Je($)})},query:(b=w,function(k){return new Promise(function(_,P){_=Pe(_);var R,$,D,W=k.trans,U=k.values,Q=k.limit,J=k.query,H=Q===1/0?void 0:Q,X=J.index,J=J.range,W=W.objectStore(S),X=X.isPrimaryKey?W:W.index(X.name),J=o(J);if(Q===0)return _({result:[]});b?((H=U?X.getAll(J,H):X.getAllKeys(J,H)).onsuccess=function(ne){return _({result:ne.target.result})},H.onerror=Je(P)):(R=0,$=!U&&"openKeyCursor"in X?X.openKeyCursor(J):X.openCursor(J),D=[],$.onsuccess=function(ne){var ye=$.result;return ye?(D.push(U?ye.value:ye.primaryKey),++R===Q?_({result:D}):void ye.continue()):_({result:D})},$.onerror=Je(P))})}),openCursor:function(k){var _=k.trans,P=k.values,R=k.query,$=k.reverse,D=k.unique;return new Promise(function(U,Q){U=Pe(U);var X=R.index,H=R.range,W=_.objectStore(S),W=X.isPrimaryKey?W:W.index(X.name),X=$?D?"prevunique":"prev":D?"nextunique":"next",J=!P&&"openKeyCursor"in W?W.openKeyCursor(o(H),X):W.openCursor(o(H),X);J.onerror=Je(Q),J.onsuccess=Pe(function(ne){var ye,ve,be,Ve,me=J.result;me?(me.___id=++as,me.done=!1,ye=me.continue.bind(me),ve=(ve=me.continuePrimaryKey)&&ve.bind(me),be=me.advance.bind(me),Ve=function(){throw new Error("Cursor not stopped")},me.trans=_,me.stop=me.continue=me.continuePrimaryKey=me.advance=function(){throw new Error("Cursor not started")},me.fail=Pe(Q),me.next=function(){var Te=this,Le=1;return this.start(function(){return Le--?Te.continue():Te.stop()}).then(function(){return Te})},me.start=function(Te){function Le(){if(J.result)try{Te()}catch(Ie){me.fail(Ie)}else me.done=!0,me.start=function(){throw new Error("Cursor behind last entry")},me.stop()}var _n=new Promise(function(Ie,bt){Ie=Pe(Ie),J.onerror=Je(bt),me.fail=bt,me.stop=function(hr){me.stop=me.continue=me.continuePrimaryKey=me.advance=Ve,Ie(hr)}});return J.onsuccess=Pe(function(Ie){J.onsuccess=Le,Le()}),me.continue=ye,me.continuePrimaryKey=ve,me.advance=be,Le(),_n},U(me)):U(null)},Q)})},count:function(k){var _=k.query,P=k.trans,R=_.index,$=_.range;return new Promise(function(D,U){var Q=P.objectStore(S),H=R.isPrimaryKey?Q:Q.index(R.name),Q=o($),H=Q?H.count(Q):H.count();H.onsuccess=Pe(function(W){return D(W.target.result)}),H.onerror=Je(U)})}}}var l,h,m,O=(h=v,m=qr((l=e).objectStoreNames),{schema:{name:l.name,tables:m.map(function(E){return h.objectStore(E)}).map(function(E){var b=E.keyPath,_=E.autoIncrement,S=p(b),k={},_={name:E.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b==null,compound:S,keyPath:b,autoIncrement:_,unique:!0,extractKey:Yn(b)},indexes:qr(E.indexNames).map(function(P){return E.index(P)}).map(function(D){var R=D.name,$=D.unique,U=D.multiEntry,D=D.keyPath,U={name:R,compound:p(D),keyPath:D,unique:$,multiEntry:U,extractKey:Yn(D)};return k[qt(D)]=U}),getIndexByKeyPath:function(P){return k[qt(P)]}};return k[":id"]=_.primaryKey,b!=null&&(k[qt(b)]=_.primaryKey),_})},hasGetAll:0<m.length&&"getAll"in h.objectStore(m[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),v=O.schema,w=O.hasGetAll,O=v.tables.map(a),y={};return O.forEach(function(E){return y[E.name]=E}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(E){if(!y[E])throw new Error("Table '".concat(E,"' not found"));return y[E]},MIN_KEY:-1/0,MAX_KEY:Bt(t),schema:v}}function cs(e,t,r,o){var a=r.IDBKeyRange;return r.indexedDB,{dbcore:(o=us(t,a,o),e.dbcore.reduce(function(l,h){return h=h.create,s(s({},l),h(l))},o))}}function ln(e,o){var r=o.db,o=cs(e._middlewares,r,e._deps,o);e.core=o.dbcore,e.tables.forEach(function(a){var l=a.name;e.core.schema.tables.some(function(h){return h.name===l})&&(a.core=e.core.table(l),e[l]instanceof e.Table&&(e[l].core=a.core))})}function fn(e,t,r,o){r.forEach(function(a){var l=o[a];t.forEach(function(h){var m=function v(w,O){return ge(w,O)||(w=x(w))&&v(w,O)}(h,a);(!m||"value"in m&&m.value===void 0)&&(h===e.Transaction.prototype||h instanceof e.Transaction?M(h,a,{get:function(){return this.table(a)},set:function(v){I(this,a,{value:v,writable:!0,configurable:!0,enumerable:!0})}}):h[a]=new e.Table(a,l))})})}function Jn(e,t){t.forEach(function(r){for(var o in r)r[o]instanceof e.Table&&delete r[o]})}function ls(e,t){return e._cfg.version-t._cfg.version}function fs(e,t,r,o){var a=e._dbSchema;r.objectStoreNames.contains("$meta")&&!a.$meta&&(a.$meta=Wn("$meta",Ur("")[0],[]),e._storeNames.push("$meta"));var l=e._createTransaction("readwrite",e._storeNames,a);l.create(r),l._completion.catch(o);var h=l._reject.bind(l),m=oe.transless||oe;tt(function(){return oe.trans=l,oe.transless=m,t!==0?(ln(e,r),w=t,((v=l).storeNames.includes("$meta")?v.table("$meta").get("version").then(function(O){return O??w}):ee.resolve(w)).then(function(O){return E=O,b=l,S=r,k=[],O=(y=e)._versions,_=y._dbSchema=dn(0,y.idbdb,S),(O=O.filter(function(P){return P._cfg.version>=E})).length!==0?(O.forEach(function(P){k.push(function(){var R=_,$=P._cfg.dbschema;pn(y,R,S),pn(y,$,S),_=y._dbSchema=$;var D=Qn(R,$);D.add.forEach(function(X){Gn(S,X[0],X[1].primKey,X[1].indexes)}),D.change.forEach(function(X){if(X.recreate)throw new se.Upgrade("Not yet support for changing primary key");var J=S.objectStore(X.name);X.add.forEach(function(ne){return hn(J,ne)}),X.change.forEach(function(ne){J.deleteIndex(ne.name),hn(J,ne)}),X.del.forEach(function(ne){return J.deleteIndex(ne)})});var U=P._cfg.contentUpgrade;if(U&&P._cfg.version>E){ln(y,S),b._memoizedTables={};var Q=te($);D.del.forEach(function(X){Q[X]=R[X]}),Jn(y,[y.Transaction.prototype]),fn(y,[y.Transaction.prototype],d(Q),Q),b.schema=Q;var H,W=ce(U);return W&&St(),D=ee.follow(function(){var X;(H=U(b))&&W&&(X=nt.bind(null,null),H.then(X,X))}),H&&typeof H.then=="function"?ee.resolve(H):D.then(function(){return H})}}),k.push(function(R){var $,D,U=P._cfg.dbschema;$=U,D=R,[].slice.call(D.db.objectStoreNames).forEach(function(Q){return $[Q]==null&&D.db.deleteObjectStore(Q)}),Jn(y,[y.Transaction.prototype]),fn(y,[y.Transaction.prototype],y._storeNames,y._dbSchema),b.schema=y._dbSchema}),k.push(function(R){y.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(y.idbdb.version/10)===P._cfg.version?(y.idbdb.deleteObjectStore("$meta"),delete y._dbSchema.$meta,y._storeNames=y._storeNames.filter(function($){return $!=="$meta"})):R.objectStore("$meta").put(P._cfg.version,"version"))})}),function P(){return k.length?ee.resolve(k.shift()(b.idbtrans)).then(P):ee.resolve()}().then(function(){Vr(_,S)})):ee.resolve();var y,E,b,S,k,_}).catch(h)):(d(a).forEach(function(O){Gn(r,O,a[O].primKey,a[O].indexes)}),ln(e,r),void ee.follow(function(){return e.on.populate.fire(l)}).catch(h));var v,w})}function hs(e,t){Vr(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var r=dn(0,e.idbdb,t);pn(e,e._dbSchema,t);for(var o=0,a=Qn(r,e._dbSchema).change;o<a.length;o++){var l=function(h){if(h.change.length||h.recreate)return console.warn("Unable to patch indexes of table ".concat(h.name," because it has changes on the type of index or primary key.")),{value:void 0};var m=t.objectStore(h.name);h.add.forEach(function(v){Ye&&console.debug("Dexie upgrade patch: Creating missing index ".concat(h.name,".").concat(v.src)),hn(m,v)})}(a[o]);if(typeof l=="object")return l.value}}function Qn(e,t){var r,o={del:[],add:[],change:[]};for(r in e)t[r]||o.del.push(r);for(r in t){var a=e[r],l=t[r];if(a){var h={name:r,def:l,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(l.primKey.keyPath||"")||a.primKey.auto!==l.primKey.auto)h.recreate=!0,o.change.push(h);else{var m=a.idxByName,v=l.idxByName,w=void 0;for(w in m)v[w]||h.del.push(w);for(w in v){var O=m[w],y=v[w];O?O.src!==y.src&&h.change.push(y):h.add.push(y)}(0<h.del.length||0<h.add.length||0<h.change.length)&&o.change.push(h)}}else o.add.push([r,l])}return o}function Gn(e,t,r,o){var a=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return o.forEach(function(l){return hn(a,l)}),a}function Vr(e,t){d(e).forEach(function(r){t.db.objectStoreNames.contains(r)||(Ye&&console.debug("Dexie: Creating missing table",r),Gn(t,r,e[r].primKey,e[r].indexes))})}function hn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function dn(e,t,r){var o={};return he(t.objectStoreNames,0).forEach(function(a){for(var l=r.objectStore(a),h=zn(Br(w=l.keyPath),w||"",!0,!1,!!l.autoIncrement,w&&typeof w!="string",!0),m=[],v=0;v<l.indexNames.length;++v){var O=l.index(l.indexNames[v]),w=O.keyPath,O=zn(O.name,w,!!O.unique,!!O.multiEntry,!1,w&&typeof w!="string",!1);m.push(O)}o[a]=Wn(a,h,m)}),o}function pn(e,t,r){for(var o=r.db.objectStoreNames,a=0;a<o.length;++a){var l=o[a],h=r.objectStore(l);e._hasGetAll="getAll"in h;for(var m=0;m<h.indexNames.length;++m){var v=h.indexNames[m],w=h.index(v).keyPath,O=typeof w=="string"?w:"["+he(w).join("+")+"]";!t[l]||(w=t[l].idxByName[O])&&(w.name=v,delete t[l].idxByName[O],t[l].idxByName[v]=w)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Ur(e){return e.split(",").map(function(t,r){var o=(t=t.trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(o)?o.match(/^\[(.*)\]$/)[1].split("+"):o;return zn(o,a||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),p(a),r===0)})}var ds=(gn.prototype._parseStoresSpec=function(e,t){d(e).forEach(function(r){if(e[r]!==null){var o=Ur(e[r]),a=o.shift();if(a.unique=!0,a.multi)throw new se.Schema("Primary key cannot be multi-valued");o.forEach(function(l){if(l.auto)throw new se.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new se.Schema("Index must have a name and cannot be an empty string")}),t[r]=Wn(r,a,o)}})},gn.prototype.stores=function(r){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,r):r;var r=t._versions,o={},a={};return r.forEach(function(l){g(o,l._cfg.storesSource),a=l._cfg.dbschema={},l._parseStoresSpec(o,a)}),t._dbSchema=a,Jn(t,[t._allTables,t,t.Transaction.prototype]),fn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],d(a),a),t._storeNames=d(a),this},gn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Rn(this._cfg.contentUpgrade||Se,e),this},gn);function gn(){}function Xn(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new Ze(sn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function Zn(e){return e&&typeof e.databases=="function"}function er(e){return tt(function(){return oe.letThrough=!0,e()})}function tr(e){return!("from"in e)}var De=function(e,t){if(!this){var r=new De;return e&&"d"in e&&g(r,e),r}g(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Vt(e,t,r){var o=_e(t,r);if(!isNaN(o)){if(0<o)throw RangeError();if(tr(e))return g(e,{from:t,to:r,d:1});var a=e.l,o=e.r;if(_e(r,e.from)<0)return a?Vt(a,t,r):e.l={from:t,to:r,d:1,l:null,r:null},zr(e);if(0<_e(t,e.to))return o?Vt(o,t,r):e.r={from:t,to:r,d:1,l:null,r:null},zr(e);_e(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),0<_e(r,e.to)&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1),r=!e.r,a&&!e.l&&Ut(e,a),o&&r&&Ut(e,o)}}function Ut(e,t){tr(t)||function r(o,v){var l=v.from,h=v.to,m=v.l,v=v.r;Vt(o,l,h),m&&r(o,m),v&&r(o,v)}(e,t)}function Hr(e,t){var r=mn(t),o=r.next();if(o.done)return!1;for(var a=o.value,l=mn(e),h=l.next(a.from),m=h.value;!o.done&&!h.done;){if(_e(m.from,a.to)<=0&&0<=_e(m.to,a.from))return!0;_e(a.from,m.from)<0?a=(o=r.next(m.from)).value:m=(h=l.next(a.from)).value}return!1}function mn(e){var t=tr(e)?null:{s:0,n:e};return{next:function(r){for(var o=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,o)for(;t.n.l&&_e(r,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!o||_e(r,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function zr(e){var t,r,o=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((r=e.l)===null||r===void 0?void 0:r.d)||0),a=1<o?"r":o<-1?"l":"";a&&(t=a=="r"?"l":"r",r=s({},e),o=e[a],e.from=o.from,e.to=o.to,e[a]=o[a],r[a]=o[t],(e[t]=r).d=Wr(r)),e.d=Wr(e)}function Wr(r){var t=r.r,r=r.l;return(t?r?Math.max(t.d,r.d):t.d:r?r.d:0)+1}function yn(e,t){return d(t).forEach(function(r){e[r]?Ut(e[r],t[r]):e[r]=function o(a){var l,h,m={};for(l in a)C(a,l)&&(h=a[l],m[l]=!h||typeof h!="object"||j.has(h.constructor)?h:o(h));return m}(t[r])}),e}function nr(e,t){return e.all||t.all||Object.keys(e).some(function(r){return t[r]&&Hr(t[r],e[r])})}Z(De.prototype,((Ue={add:function(e){return Ut(this,e),this},addKey:function(e){return Vt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(r){return Vt(t,r,r)}),this},hasKey:function(e){var t=mn(this).next(e).value;return t&&_e(t.from,e)<=0&&0<=_e(t.to,e)}})[T]=function(){return mn(this)},Ue));var yt={},rr={},ir=!1;function vn(e){yn(rr,e),ir||(ir=!0,setTimeout(function(){ir=!1,sr(rr,!(rr={}))},0))}function sr(e,t){t===void 0&&(t=!1);var r=new Set;if(e.all)for(var o=0,a=Object.values(yt);o<a.length;o++)Yr(h=a[o],e,r,t);else for(var l in e){var h,m=/^idb\:\/\/(.*)\/(.*)\//.exec(l);m&&(l=m[1],m=m[2],(h=yt["idb://".concat(l,"/").concat(m)])&&Yr(h,e,r,t))}r.forEach(function(v){return v()})}function Yr(e,t,r,o){for(var a=[],l=0,h=Object.entries(e.queries.query);l<h.length;l++){for(var m=h[l],v=m[0],w=[],O=0,y=m[1];O<y.length;O++){var E=y[O];nr(t,E.obsSet)?E.subscribers.forEach(function(_){return r.add(_)}):o&&w.push(E)}o&&a.push([v,w])}if(o)for(var b=0,S=a;b<S.length;b++){var k=S[b],v=k[0],w=k[1];e.queries.query[v]=w}}function ps(e){var t=e._state,r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Ae(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var o=t.openCanceller,a=Math.round(10*e.verno),l=!1;function h(){if(t.openCanceller!==o)throw new se.DatabaseClosed("db.open() was cancelled")}function m(){return new ee(function(E,b){if(h(),!r)throw new se.MissingAPI;var S=e.name,k=t.autoSchema||!a?r.open(S):r.open(S,a);if(!k)throw new se.MissingAPI;k.onerror=Je(b),k.onblocked=Pe(e._fireOnBlocked),k.onupgradeneeded=Pe(function(_){var P;O=k.transaction,t.autoSchema&&!e._options.allowEmptyDB?(k.onerror=Kt,O.abort(),k.result.close(),(P=r.deleteDatabase(S)).onsuccess=P.onerror=Pe(function(){b(new se.NoSuchDatabase("Database ".concat(S," doesnt exist")))})):(O.onerror=Je(b),_=_.oldVersion>Math.pow(2,62)?0:_.oldVersion,y=_<1,e.idbdb=k.result,l&&hs(e,O),fs(e,_/10,O,b))},b),k.onsuccess=Pe(function(){O=null;var _,P,R,$,D,U=e.idbdb=k.result,Q=he(U.objectStoreNames);if(0<Q.length)try{var H=U.transaction(($=Q).length===1?$[0]:$,"readonly");if(t.autoSchema)P=U,R=H,(_=e).verno=P.version/10,R=_._dbSchema=dn(0,P,R),_._storeNames=he(P.objectStoreNames,0),fn(_,[_._allTables],d(R),R);else if(pn(e,e._dbSchema,H),((D=Qn(dn(0,(D=e).idbdb,H),D._dbSchema)).add.length||D.change.some(function(W){return W.add.length||W.change.length}))&&!l)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),U.close(),a=U.version+1,l=!0,E(m());ln(e,H)}catch{}Ot.push(e),U.onversionchange=Pe(function(W){t.vcFired=!0,e.on("versionchange").fire(W)}),U.onclose=Pe(function(W){e.on("close").fire(W)}),y&&(D=e._deps,H=S,U=D.indexedDB,D=D.IDBKeyRange,Zn(U)||H===sn||Xn(U,D).put({name:H}).catch(Se)),E()},b)}).catch(function(E){switch(E?.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),m();break;case"VersionError":if(0<a)return a=0,m()}return ee.reject(E)})}var v,w=t.dbReadyResolve,O=null,y=!1;return ee.race([o,(typeof navigator>"u"?ee.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(E){function b(){return indexedDB.databases().finally(E)}v=setInterval(b,100),b()}).finally(function(){return clearInterval(v)}):Promise.resolve()).then(m)]).then(function(){return h(),t.onReadyBeingFired=[],ee.resolve(er(function(){return e.on.ready.fire(e.vip)})).then(function E(){if(0<t.onReadyBeingFired.length){var b=t.onReadyBeingFired.reduce(Rn,Se);return t.onReadyBeingFired=[],ee.resolve(er(function(){return b(e.vip)})).then(E)}})}).finally(function(){t.openCanceller===o&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(E){t.dbOpenError=E;try{O&&O.abort()}catch{}return o===t.openCanceller&&e._close(),Ae(E)}).finally(function(){t.openComplete=!0,w()}).then(function(){var E;return y&&(E={},e.tables.forEach(function(b){b.schema.indexes.forEach(function(S){S.name&&(E["idb://".concat(e.name,"/").concat(b.name,"/").concat(S.name)]=new De(-1/0,[[[]]]))}),E["idb://".concat(e.name,"/").concat(b.name,"/")]=E["idb://".concat(e.name,"/").concat(b.name,"/:dels")]=new De(-1/0,[[[]]])}),st(Mt).fire(E),sr(E,!0)),e})}function or(e){function t(l){return e.next(l)}var r=a(t),o=a(function(l){return e.throw(l)});function a(l){return function(v){var m=l(v),v=m.value;return m.done?v:v&&typeof v.then=="function"?v.then(r,o):p(v)?Promise.all(v).then(r,o):r(v)}}return a(t)()}function bn(e,t,r){for(var o=p(e)?e.slice():[e],a=0;a<r;++a)o.push(t);return o}var gs={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(t){var r=e.table(t),o=r.schema,a={},l=[];function h(y,E,b){var S=qt(y),k=a[S]=a[S]||[],_=y==null?0:typeof y=="string"?1:y.length,P=0<E,P=s(s({},b),{name:P?"".concat(S,"(virtual-from:").concat(b.name,")"):b.name,lowLevelIndex:b,isVirtual:P,keyTail:E,keyLength:_,extractKey:Yn(y),unique:!P&&b.unique});return k.push(P),P.isPrimaryKey||l.push(P),1<_&&h(_===2?y[0]:y.slice(0,_-1),E+1,b),k.sort(function(R,$){return R.keyTail-$.keyTail}),P}t=h(o.primaryKey.keyPath,0,o.primaryKey),a[":id"]=[t];for(var m=0,v=o.indexes;m<v.length;m++){var w=v[m];h(w.keyPath,0,w)}function O(y){var E,b=y.query.index;return b.isVirtual?s(s({},y),{query:{index:b.lowLevelIndex,range:(E=y.query.range,b=b.keyTail,{type:E.type===1?2:E.type,lower:bn(E.lower,E.lowerOpen?e.MAX_KEY:e.MIN_KEY,b),lowerOpen:!0,upper:bn(E.upper,E.upperOpen?e.MIN_KEY:e.MAX_KEY,b),upperOpen:!0})}}):y}return s(s({},r),{schema:s(s({},o),{primaryKey:t,indexes:l,getIndexByKeyPath:function(y){return(y=a[qt(y)])&&y[0]}}),count:function(y){return r.count(O(y))},query:function(y){return r.query(O(y))},openCursor:function(y){var E=y.query.index,b=E.keyTail,S=E.isVirtual,k=E.keyLength;return S?r.openCursor(O(y)).then(function(P){return P&&_(P)}):r.openCursor(y);function _(P){return Object.create(P,{continue:{value:function(R){R!=null?P.continue(bn(R,y.reverse?e.MAX_KEY:e.MIN_KEY,b)):y.unique?P.continue(P.key.slice(0,k).concat(y.reverse?e.MIN_KEY:e.MAX_KEY,b)):P.continue()}},continuePrimaryKey:{value:function(R,$){P.continuePrimaryKey(bn(R,e.MAX_KEY,b),$)}},primaryKey:{get:function(){return P.primaryKey}},key:{get:function(){var R=P.key;return k===1?R[0]:R.slice(0,k)}},value:{get:function(){return P.value}}})}}})}})}};function ar(e,t,r,o){return r=r||{},o=o||"",d(e).forEach(function(a){var l,h,m;C(t,a)?(l=e[a],h=t[a],typeof l=="object"&&typeof h=="object"&&l&&h?(m=V(l))!==V(h)?r[o+a]=t[a]:m==="Object"?ar(l,h,r,o+a+"."):l!==h&&(r[o+a]=t[a]):l!==h&&(r[o+a]=t[a])):r[o+a]=void 0}),d(t).forEach(function(a){C(e,a)||(r[o+a]=t[a])}),r}function ur(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ms={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(t){var r=e.table(t),o=r.schema.primaryKey;return s(s({},r),{mutate:function(a){var l=oe.trans,h=l.table(t).hook,m=h.deleting,v=h.creating,w=h.updating;switch(a.type){case"add":if(v.fire===Se)break;return l._promise("readwrite",function(){return O(a)},!0);case"put":if(v.fire===Se&&w.fire===Se)break;return l._promise("readwrite",function(){return O(a)},!0);case"delete":if(m.fire===Se)break;return l._promise("readwrite",function(){return O(a)},!0);case"deleteRange":if(m.fire===Se)break;return l._promise("readwrite",function(){return function y(E,b,S){return r.query({trans:E,values:!1,query:{index:o,range:b},limit:S}).then(function(k){var _=k.result;return O({type:"delete",keys:_,trans:E}).then(function(P){return 0<P.numFailures?Promise.reject(P.failures[0]):_.length<S?{failures:[],numFailures:0,lastResult:void 0}:y(E,s(s({},b),{lower:_[_.length-1],lowerOpen:!0}),S)})})}(a.trans,a.range,1e4)},!0)}return r.mutate(a);function O(y){var E,b,S,k=oe.trans,_=y.keys||ur(o,y);if(!_)throw new Error("Keys missing");return(y=y.type==="add"||y.type==="put"?s(s({},y),{keys:_}):s({},y)).type!=="delete"&&(y.values=u([],y.values)),y.keys&&(y.keys=u([],y.keys)),E=r,S=_,((b=y).type==="add"?Promise.resolve([]):E.getMany({trans:b.trans,keys:S,cache:"immutable"})).then(function(P){var R=_.map(function($,D){var U,Q,H,W=P[D],X={onerror:null,onsuccess:null};return y.type==="delete"?m.fire.call(X,$,W,k):y.type==="add"||W===void 0?(U=v.fire.call(X,$,y.values[D],k),$==null&&U!=null&&(y.keys[D]=$=U,o.outbound||A(y.values[D],o.keyPath,$))):(U=ar(W,y.values[D]),(Q=w.fire.call(X,U,$,W,k))&&(H=y.values[D],Object.keys(Q).forEach(function(J){C(H,J)?H[J]=Q[J]:A(H,J,Q[J])}))),X});return r.mutate(y).then(function($){for(var D=$.failures,U=$.results,Q=$.numFailures,$=$.lastResult,H=0;H<_.length;++H){var W=(U||_)[H],X=R[H];W==null?X.onerror&&X.onerror(D[H]):X.onsuccess&&X.onsuccess(y.type==="put"&&P[H]?y.values[H]:W)}return{failures:D,results:U,numFailures:Q,lastResult:$}}).catch(function($){return R.forEach(function(D){return D.onerror&&D.onerror($)}),Promise.reject($)})})}}})}})}};function Jr(e,t,r){try{if(!t||t.keys.length<e.length)return null;for(var o=[],a=0,l=0;a<t.keys.length&&l<e.length;++a)_e(t.keys[a],e[l])===0&&(o.push(r?L(t.values[a]):t.values[a]),++l);return o.length===e.length?o:null}catch{return null}}var ys={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var r=e.table(t);return s(s({},r),{getMany:function(o){if(!o.cache)return r.getMany(o);var a=Jr(o.keys,o.trans._cache,o.cache==="clone");return a?ee.resolve(a):r.getMany(o).then(function(l){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?L(l):l},l})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),r.mutate(o)}})}}}};function Qr(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Gr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var vs={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,r=new De(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(o,a,l){if(oe.subscr&&a!=="readonly")throw new se.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(oe.querier));return e.transaction(o,a,l)},table:function(o){var a=e.table(o),l=a.schema,h=l.primaryKey,y=l.indexes,m=h.extractKey,v=h.outbound,w=h.autoIncrement&&y.filter(function(b){return b.compound&&b.keyPath.includes(h.keyPath)}),O=s(s({},a),{mutate:function(b){function S(J){return J="idb://".concat(t,"/").concat(o,"/").concat(J),$[J]||($[J]=new De)}var k,_,P,R=b.trans,$=b.mutatedParts||(b.mutatedParts={}),D=S(""),U=S(":dels"),Q=b.type,X=b.type==="deleteRange"?[b.range]:b.type==="delete"?[b.keys]:b.values.length<50?[ur(h,b).filter(function(J){return J}),b.values]:[],H=X[0],W=X[1],X=b.trans._cache;return p(H)?(D.addKeys(H),(X=Q==="delete"||H.length===W.length?Jr(H,X):null)||U.addKeys(H),(X||W)&&(k=S,_=X,P=W,l.indexes.forEach(function(J){var ne=k(J.name||"");function ye(be){return be!=null?J.extractKey(be):null}function ve(be){return J.multiEntry&&p(be)?be.forEach(function(Ve){return ne.addKey(Ve)}):ne.addKey(be)}(_||P).forEach(function(be,Te){var me=_&&ye(_[Te]),Te=P&&ye(P[Te]);_e(me,Te)!==0&&(me!=null&&ve(me),Te!=null&&ve(Te))})}))):H?(W={from:(W=H.lower)!==null&&W!==void 0?W:e.MIN_KEY,to:(W=H.upper)!==null&&W!==void 0?W:e.MAX_KEY},U.add(W),D.add(W)):(D.add(r),U.add(r),l.indexes.forEach(function(J){return S(J.name).add(r)})),a.mutate(b).then(function(J){return!H||b.type!=="add"&&b.type!=="put"||(D.addKeys(J.results),w&&w.forEach(function(ne){for(var ye=b.values.map(function(me){return ne.extractKey(me)}),ve=ne.keyPath.findIndex(function(me){return me===h.keyPath}),be=0,Ve=J.results.length;be<Ve;++be)ye[be][ve]=J.results[be];S(ne.name).addKeys(ye)})),R.mutatedParts=yn(R.mutatedParts||{},$),J})}}),y=function(S){var k=S.query,S=k.index,k=k.range;return[S,new De((S=k.lower)!==null&&S!==void 0?S:e.MIN_KEY,(k=k.upper)!==null&&k!==void 0?k:e.MAX_KEY)]},E={get:function(b){return[h,new De(b.key)]},getMany:function(b){return[h,new De().addKeys(b.keys)]},count:y,query:y,openCursor:y};return d(E).forEach(function(b){O[b]=function(S){var k=oe.subscr,_=!!k,P=Qr(oe,a)&&Gr(b,S)?S.obsSet={}:k;if(_){var R=function(W){return W="idb://".concat(t,"/").concat(o,"/").concat(W),P[W]||(P[W]=new De)},$=R(""),D=R(":dels"),k=E[b](S),_=k[0],k=k[1];if((b==="query"&&_.isPrimaryKey&&!S.values?D:R(_.name||"")).add(k),!_.isPrimaryKey){if(b!=="count"){var U=b==="query"&&v&&S.values&&a.query(s(s({},S),{values:!1}));return a[b].apply(this,arguments).then(function(W){if(b==="query"){if(v&&S.values)return U.then(function(ye){return ye=ye.result,$.addKeys(ye),W});var X=S.values?W.result.map(m):W.result;(S.values?$:D).addKeys(X)}else if(b==="openCursor"){var J=W,ne=S.values;return J&&Object.create(J,{key:{get:function(){return D.addKey(J.primaryKey),J.key}},primaryKey:{get:function(){var ye=J.primaryKey;return D.addKey(ye),ye}},value:{get:function(){return ne&&$.addKey(J.primaryKey),J.value}}})}return W})}D.add(r)}}return a[b].apply(this,arguments)}}),O}})}};function Xr(e,t,r){if(r.numFailures===0)return t;if(t.type==="deleteRange")return null;var o=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return r.numFailures===o?null:(t=s({},t),p(t.keys)&&(t.keys=t.keys.filter(function(a,l){return!(l in r.failures)})),"values"in t&&p(t.values)&&(t.values=t.values.filter(function(a,l){return!(l in r.failures)})),t)}function cr(e,t){return r=e,((o=t).lower===void 0||(o.lowerOpen?0<_e(r,o.lower):0<=_e(r,o.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?_e(e,t.upper)<0:_e(e,t.upper)<=0));var r,o}function Zr(e,t,E,o,a,l){if(!E||E.length===0)return e;var h=t.query.index,m=h.multiEntry,v=t.query.range,w=o.schema.primaryKey.extractKey,O=h.extractKey,y=(h.lowLevelIndex||h).extractKey,E=E.reduce(function(b,S){var k=b,_=[];if(S.type==="add"||S.type==="put")for(var P=new De,R=S.values.length-1;0<=R;--R){var $,D=S.values[R],U=w(D);P.hasKey(U)||($=O(D),(m&&p($)?$.some(function(J){return cr(J,v)}):cr($,v))&&(P.addKey(U),_.push(D)))}switch(S.type){case"add":var Q=new De().addKeys(t.values?b.map(function(ne){return w(ne)}):b),k=b.concat(t.values?_.filter(function(ne){return ne=w(ne),!Q.hasKey(ne)&&(Q.addKey(ne),!0)}):_.map(function(ne){return w(ne)}).filter(function(ne){return!Q.hasKey(ne)&&(Q.addKey(ne),!0)}));break;case"put":var H=new De().addKeys(S.values.map(function(ne){return w(ne)}));k=b.filter(function(ne){return!H.hasKey(t.values?w(ne):ne)}).concat(t.values?_:_.map(function(ne){return w(ne)}));break;case"delete":var W=new De().addKeys(S.keys);k=b.filter(function(ne){return!W.hasKey(t.values?w(ne):ne)});break;case"deleteRange":var X=S.range;k=b.filter(function(ne){return!cr(w(ne),X)})}return k},e);return E===e?e:(E.sort(function(b,S){return _e(y(b),y(S))||_e(w(b),w(S))}),t.limit&&t.limit<1/0&&(E.length>t.limit?E.length=t.limit:e.length===t.limit&&E.length<t.limit&&(a.dirty=!0)),l?Object.freeze(E):E)}function ei(e,t){return _e(e.lower,t.lower)===0&&_e(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function bs(e,t){return function(r,o,a,l){if(r===void 0)return o!==void 0?-1:0;if(o===void 0)return 1;if((o=_e(r,o))===0){if(a&&l)return 0;if(a)return 1;if(l)return-1}return o}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(r,o,a,l){if(r===void 0)return o!==void 0?1:0;if(o===void 0)return-1;if((o=_e(r,o))===0){if(a&&l)return 0;if(a)return-1;if(l)return 1}return o}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function xs(e,t,r,o){e.subscribers.add(r),o.addEventListener("abort",function(){var a,l;e.subscribers.delete(r),e.subscribers.size===0&&(a=e,l=t,setTimeout(function(){a.subscribers.size===0&&z(l,a)},3e3))})}var ws={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return s(s({},e),{transaction:function(r,o,a){var l,h,m=e.transaction(r,o,a);return o==="readwrite"&&(h=(l=new AbortController).signal,a=function(v){return function(){if(l.abort(),o==="readwrite"){for(var w=new Set,O=0,y=r;O<y.length;O++){var E=y[O],b=yt["idb://".concat(t,"/").concat(E)];if(b){var S=e.table(E),k=b.optimisticOps.filter(function(ne){return ne.trans===m});if(m._explicit&&v&&m.mutatedParts)for(var _=0,P=Object.values(b.queries.query);_<P.length;_++)for(var R=0,$=(Q=P[_]).slice();R<$.length;R++)nr((H=$[R]).obsSet,m.mutatedParts)&&(z(Q,H),H.subscribers.forEach(function(ne){return w.add(ne)}));else if(0<k.length){b.optimisticOps=b.optimisticOps.filter(function(ne){return ne.trans!==m});for(var D=0,U=Object.values(b.queries.query);D<U.length;D++)for(var Q,H,W,X=0,J=(Q=U[D]).slice();X<J.length;X++)(H=J[X]).res!=null&&m.mutatedParts&&(v&&!H.dirty?(W=Object.isFrozen(H.res),W=Zr(H.res,H.req,k,S,H,W),H.dirty?(z(Q,H),H.subscribers.forEach(function(ne){return w.add(ne)})):W!==H.res&&(H.res=W,H.promise=ee.resolve({result:W}))):(H.dirty&&z(Q,H),H.subscribers.forEach(function(ne){return w.add(ne)})))}}}w.forEach(function(ne){return ne()})}}},m.addEventListener("abort",a(!1),{signal:h}),m.addEventListener("error",a(!1),{signal:h}),m.addEventListener("complete",a(!0),{signal:h})),m},table:function(r){var o=e.table(r),a=o.schema.primaryKey;return s(s({},o),{mutate:function(l){var h=oe.trans;if(a.outbound||h.db._options.cache==="disabled"||h.explicit||h.idbtrans.mode!=="readwrite")return o.mutate(l);var m=yt["idb://".concat(t,"/").concat(r)];return m?(h=o.mutate(l),l.type!=="add"&&l.type!=="put"||!(50<=l.values.length||ur(a,l).some(function(v){return v==null}))?(m.optimisticOps.push(l),l.mutatedParts&&vn(l.mutatedParts),h.then(function(v){0<v.numFailures&&(z(m.optimisticOps,l),(v=Xr(0,l,v))&&m.optimisticOps.push(v),l.mutatedParts&&vn(l.mutatedParts))}),h.catch(function(){z(m.optimisticOps,l),l.mutatedParts&&vn(l.mutatedParts)})):h.then(function(v){var w=Xr(0,s(s({},l),{values:l.values.map(function(O,y){var E;return v.failures[y]?O:(O=(E=a.keyPath)!==null&&E!==void 0&&E.includes(".")?L(O):s({},O),A(O,a.keyPath,v.results[y]),O)})}),v);m.optimisticOps.push(w),queueMicrotask(function(){return l.mutatedParts&&vn(l.mutatedParts)})}),h):o.mutate(l)},query:function(l){if(!Qr(oe,o)||!Gr("query",l))return o.query(l);var h=((w=oe.trans)===null||w===void 0?void 0:w.db._options.cache)==="immutable",y=oe,m=y.requery,v=y.signal,w=function(S,k,_,P){var R=yt["idb://".concat(S,"/").concat(k)];if(!R)return[];if(!(k=R.queries[_]))return[null,!1,R,null];var $=k[(P.query?P.query.index.name:null)||""];if(!$)return[null,!1,R,null];switch(_){case"query":var D=$.find(function(U){return U.req.limit===P.limit&&U.req.values===P.values&&ei(U.req.query.range,P.query.range)});return D?[D,!0,R,$]:[$.find(function(U){return("limit"in U.req?U.req.limit:1/0)>=P.limit&&(!P.values||U.req.values)&&bs(U.req.query.range,P.query.range)}),!1,R,$];case"count":return D=$.find(function(U){return ei(U.req.query.range,P.query.range)}),[D,!!D,R,$]}}(t,r,"query",l),O=w[0],y=w[1],E=w[2],b=w[3];return O&&y?O.obsSet=l.obsSet:(y=o.query(l).then(function(S){var k=S.result;if(O&&(O.res=k),h){for(var _=0,P=k.length;_<P;++_)Object.freeze(k[_]);Object.freeze(k)}else S.result=L(k);return S}).catch(function(S){return b&&O&&z(b,O),Promise.reject(S)}),O={obsSet:l.obsSet,promise:y,subscribers:new Set,type:"query",req:l,dirty:!1},b?b.push(O):(b=[O],(E=E||(yt["idb://".concat(t,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[l.query.index.name||""]=b)),xs(O,b,m,v),O.promise.then(function(S){return{result:Zr(S.result,l,E?.optimisticOps,o,O,h)}})}})}})}};function xn(e,t){return new Proxy(e,{get:function(r,o,a){return o==="db"?t:Reflect.get(r,o,a)}})}var Ze=(Re.prototype.version=function(e){if(isNaN(e)||e<.1)throw new se.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,r=t.filter(function(o){return o._cfg.version===e})[0];return r||(r=new this.Version(e),t.push(r),t.sort(ls),r.stores({}),this._state.autoSchema=!1,r)},Re.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||oe.letThrough||this._vip)?e():new ee(function(r,o){if(t._state.openComplete)return o(new se.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void o(new se.DatabaseClosed);t.open().catch(Se)}t._state.dbReadyPromise.then(r,o)}).then(e)},Re.prototype.use=function(e){var t=e.stack,r=e.create,o=e.level,a=e.name;return a&&this.unuse({stack:t,name:a}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:r,level:o??10,name:a}),e.sort(function(l,h){return l.level-h.level}),this},Re.prototype.unuse=function(e){var t=e.stack,r=e.name,o=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(a){return o?a.create!==o:!!r&&a.name!==r})),this},Re.prototype.open=function(){var e=this;return pt(et,function(){return ps(e)})},Re.prototype._close=function(){var e=this._state,t=Ot.indexOf(this);if(0<=t&&Ot.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ee(function(r){e.dbReadyResolve=r}),e.openCanceller=new ee(function(r,o){e.cancelOpen=o}))},Re.prototype.close=function(r){var t=(r===void 0?{disableAutoOpen:!0}:r).disableAutoOpen,r=this._state;t?(r.isBeingOpened&&r.cancelOpen(new se.DatabaseClosed),this._close(),r.autoOpen=!1,r.dbOpenError=new se.DatabaseClosed):(this._close(),r.autoOpen=this._options.autoOpen||r.isBeingOpened,r.openComplete=!1,r.dbOpenError=null)},Re.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var r=0<arguments.length&&typeof arguments[0]!="object",o=this._state;return new ee(function(a,l){function h(){t.close(e);var m=t._deps.indexedDB.deleteDatabase(t.name);m.onsuccess=Pe(function(){var v,w,O;v=t._deps,w=t.name,O=v.indexedDB,v=v.IDBKeyRange,Zn(O)||w===sn||Xn(O,v).delete(w).catch(Se),a()}),m.onerror=Je(l),m.onblocked=t._fireOnBlocked}if(r)throw new se.InvalidArgument("Invalid closeOptions argument to db.delete()");o.isBeingOpened?o.dbReadyPromise.then(h):h()})},Re.prototype.backendDB=function(){return this.idbdb},Re.prototype.isOpen=function(){return this.idbdb!==null},Re.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Re.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Re.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Re.prototype,"tables",{get:function(){var e=this;return d(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Re.prototype.transaction=function(){var e=function(t,r,o){var a=arguments.length;if(a<2)throw new se.InvalidArgument("Too few arguments");for(var l=new Array(a-1);--a;)l[a-1]=arguments[a];return o=l.pop(),[t,q(l),o]}.apply(this,arguments);return this._transaction.apply(this,e)},Re.prototype._transaction=function(e,t,r){var o=this,a=oe.trans;a&&a.db===this&&e.indexOf("!")===-1||(a=null);var l,h,m=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(h=t.map(function(w){if(w=w instanceof o.Table?w.name:w,typeof w!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return w}),e=="r"||e===Mn)l=Mn;else{if(e!="rw"&&e!=Bn)throw new se.InvalidArgument("Invalid transaction mode: "+e);l=Bn}if(a){if(a.mode===Mn&&l===Bn){if(!m)throw new se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&h.forEach(function(w){if(a&&a.storeNames.indexOf(w)===-1){if(!m)throw new se.SubTransaction("Table "+w+" not included in parent transaction.");a=null}}),m&&a&&!a.active&&(a=null)}}catch(w){return a?a._promise(null,function(O,y){y(w)}):Ae(w)}var v=function w(O,y,E,b,S){return ee.resolve().then(function(){var k=oe.transless||oe,_=O._createTransaction(y,E,O._dbSchema,b);if(_.explicit=!0,k={trans:_,transless:k},b)_.idbtrans=b.idbtrans;else try{_.create(),_.idbtrans._explicit=!0,O._state.PR1398_maxLoop=3}catch($){return $.name===ze.InvalidState&&O.isOpen()&&0<--O._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),O.close({disableAutoOpen:!1}),O.open().then(function(){return w(O,y,E,null,S)})):Ae($)}var P,R=ce(S);return R&&St(),k=ee.follow(function(){var $;(P=S.call(_,_))&&(R?($=nt.bind(null,null),P.then($,$)):typeof P.next=="function"&&typeof P.throw=="function"&&(P=or(P)))},k),(P&&typeof P.then=="function"?ee.resolve(P).then(function($){return _.active?$:Ae(new se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):k.then(function(){return P})).then(function($){return b&&_._resolve(),_._completion.then(function(){return $})}).catch(function($){return _._reject($),Ae($)})})}.bind(null,this,l,h,a,r);return a?a._promise(l,v,"lock"):oe.trans?pt(oe.transless,function(){return o._whenReady(v)}):this._whenReady(v)},Re.prototype.table=function(e){if(!C(this._allTables,e))throw new se.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Re);function Re(e,t){var r=this;this._middlewares={},this.verno=0;var o=Re.dependencies;this._options=t=s({addons:Re.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},o=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a,l,h,m,v,w={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};w.dbReadyPromise=new ee(function(y){w.dbReadyResolve=y}),w.openCanceller=new ee(function(y,E){w.cancelOpen=E}),this._state=w,this.name=e,this.on=Tt(this,"populate","blocked","versionchange","close",{ready:[Rn,Se]}),this.on.ready.subscribe=re(this.on.ready.subscribe,function(y){return function(E,b){Re.vip(function(){var S,k=r._state;k.openComplete?(k.dbOpenError||ee.resolve().then(E),b&&y(E)):k.onReadyBeingFired?(k.onReadyBeingFired.push(E),b&&y(E)):(y(E),S=r,b||y(function _(){S.on.ready.unsubscribe(E),S.on.ready.unsubscribe(_)}))})}}),this.Collection=(a=this,Lt(rs.prototype,function(P,_){this.db=a;var b=Rr,S=null;if(_)try{b=_()}catch(R){S=R}var k=P._ctx,_=k.table,P=_.hook.reading.fire;this._ctx={table:_,index:k.index,isPrimKey:!k.index||_.schema.primKey.keyPath&&k.index===_.schema.primKey.name,range:b,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:S,or:k.or,valueMapper:P!==We?P:null}})),this.Table=(l=this,Lt(Dr.prototype,function(y,E,b){this.db=l,this._tx=b,this.name=y,this.schema=E,this.hook=l._allTables[y]?l._allTables[y].hook:Tt(null,{creating:[Yi,Se],reading:[Wi,We],updating:[Qi,Se],deleting:[Ji,Se]})})),this.Transaction=(h=this,Lt(os.prototype,function(y,E,b,S,k){var _=this;this.db=h,this.mode=y,this.storeNames=E,this.schema=b,this.chromeTransactionDurability=S,this.idbtrans=null,this.on=Tt(this,"complete","error","abort"),this.parent=k||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ee(function(P,R){_._resolve=P,_._reject=R}),this._completion.then(function(){_.active=!1,_.on.complete.fire()},function(P){var R=_.active;return _.active=!1,_.on.error.fire(P),_.parent?_.parent._reject(P):R&&_.idbtrans&&_.idbtrans.abort(),Ae(P)})})),this.Version=(m=this,Lt(ds.prototype,function(y){this.db=m,this._cfg={version:y,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(v=this,Lt(Mr.prototype,function(y,E,b){if(this.db=v,this._ctx={table:y,index:E===":id"?null:E,or:b},this._cmp=this._ascending=_e,this._descending=function(S,k){return _e(k,S)},this._max=function(S,k){return 0<_e(S,k)?S:k},this._min=function(S,k){return _e(S,k)<0?S:k},this._IDBKeyRange=v._deps.IDBKeyRange,!this._IDBKeyRange)throw new se.MissingAPI})),this.on("versionchange",function(y){0<y.newVersion?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=Bt(t.IDBKeyRange),this._createTransaction=function(y,E,b,S){return new r.Transaction(y,E,b,r._options.chromeTransactionDurability,S)},this._fireOnBlocked=function(y){r.on("blocked").fire(y),Ot.filter(function(E){return E.name===r.name&&E!==r&&!E._state.vcFired}).map(function(E){return E.on("versionchange").fire(y)})},this.use(ys),this.use(ws),this.use(vs),this.use(gs),this.use(ms);var O=new Proxy(this,{get:function(y,E,b){if(E==="_vip")return!0;if(E==="table")return function(k){return xn(r.table(k),O)};var S=Reflect.get(y,E,b);return S instanceof Dr?xn(S,O):E==="tables"?S.map(function(k){return xn(k,O)}):E==="_createTransaction"?function(){return xn(S.apply(this,arguments),O)}:S}});this.vip=O,o.forEach(function(y){return y(r)})}var wn,Ue=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",_s=(lr.prototype.subscribe=function(e,t,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:r})},lr.prototype[Ue]=function(){return this},lr);function lr(e){this._subscribe=e}try{wn={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch{wn={indexedDB:null,IDBKeyRange:null}}function ti(e){var t,r=!1,o=new _s(function(a){var l=ce(e),h,m=!1,v={},w={},O={get closed(){return m},unsubscribe:function(){m||(m=!0,h&&h.abort(),y&&st.storagemutated.unsubscribe(b))}};a.start&&a.start(O);var y=!1,E=function(){return Kn(S)},b=function(k){yn(v,k),nr(w,v)&&E()},S=function(){var k,_,P;!m&&wn.indexedDB&&(v={},k={},h&&h.abort(),h=new AbortController,P=function(R){var $=wt();try{l&&St();var D=tt(e,R);return D=l?D.finally(nt):D}finally{$&&_t()}}(_={subscr:k,signal:h.signal,requery:E,querier:e,trans:null}),Promise.resolve(P).then(function(R){r=!0,t=R,m||_.signal.aborted||(v={},function($){for(var D in $)if(C($,D))return;return 1}(w=k)||y||(st(Mt,b),y=!0),Kn(function(){return!m&&a.next&&a.next(R)}))},function(R){r=!1,["DatabaseClosedError","AbortError"].includes(R?.name)||m||Kn(function(){m||a.error&&a.error(R)})}))};return setTimeout(E,0),O});return o.hasValue=function(){return r},o.getValue=function(){return t},o}var vt=Ze;function fr(e){var t=ot;try{ot=!0,st.storagemutated.fire(e),sr(e,!0)}finally{ot=t}}Z(vt,s(s({},Be),{delete:function(e){return new vt(e,{addons:[]}).delete()},exists:function(e){return new vt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=vt.dependencies,r=t.indexedDB,t=t.IDBKeyRange,(Zn(r)?Promise.resolve(r.databases()).then(function(o){return o.map(function(a){return a.name}).filter(function(a){return a!==sn})}):Xn(r,t).toCollection().primaryKeys()).then(e)}catch{return Ae(new se.MissingAPI)}var t,r},defineClass:function(){return function(e){g(this,e)}},ignoreTransaction:function(e){return oe.trans?pt(oe.transless,e):e()},vip:er,async:function(e){return function(){try{var t=or(e.apply(this,arguments));return t&&typeof t.then=="function"?t:ee.resolve(t)}catch(r){return Ae(r)}}},spawn:function(e,t,r){try{var o=or(e.apply(r,t||[]));return o&&typeof o.then=="function"?o:ee.resolve(o)}catch(a){return Ae(a)}},currentTransaction:{get:function(){return oe.trans||null}},waitFor:function(e,t){return t=ee.resolve(typeof e=="function"?vt.ignoreTransaction(e):e).timeout(t||6e4),oe.trans?oe.trans.waitFor(t):t},Promise:ee,debug:{get:function(){return Ye},set:function(e){Or(e)}},derive:le,extend:g,props:Z,override:re,Events:Tt,on:st,liveQuery:ti,extendObservabilitySet:yn,getByKeyPath:F,setByKeyPath:A,delByKeyPath:function(e,t){typeof t=="string"?A(e,t,void 0):"length"in t&&[].map.call(t,function(r){A(e,r,void 0)})},shallowClone:te,deepClone:L,getObjectDiff:ar,cmp:_e,asap:de,minKey:-1/0,addons:[],connections:Ot,errnames:ze,dependencies:wn,cache:yt,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,2*r)})})),vt.maxKey=Bt(vt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(st(Mt,function(e){ot||(e=new CustomEvent(Hn,{detail:e}),ot=!0,dispatchEvent(e),ot=!1)}),addEventListener(Hn,function(e){e=e.detail,ot||fr(e)}));var Ft,ot=!1,ni=function(){};return typeof BroadcastChannel<"u"&&((ni=function(){(Ft=new BroadcastChannel(Hn)).onmessage=function(e){return e.data&&fr(e.data)}})(),typeof Ft.unref=="function"&&Ft.unref(),st(Mt,function(e){ot||Ft.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Ze.disableBfCache&&e.persisted){Ye&&console.debug("Dexie: handling persisted pagehide"),Ft?.close();for(var t=0,r=Ot;t<r.length;t++)r[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Ze.disableBfCache&&e.persisted&&(Ye&&console.debug("Dexie: handling persisted pageshow"),ni(),fr({all:new De(-1/0,[[]])}))})),ee.rejectionMapper=function(e,t){return!e||e instanceof we||e instanceof TypeError||e instanceof SyntaxError||!e.name||!je[e.name]?e:(t=new je[e.name](t||e.message,e),"stack"in e&&M(t,"stack",{get:function(){return this.inner.stack}}),t)},Or(Ye),s(Ze,Object.freeze({__proto__:null,Dexie:Ze,liveQuery:ti,Entity:$r,cmp:_e,PropModification:It,replacePrefix:function(e,t){return new It({replacePrefix:[e,t]})},add:function(e){return new It({add:e})},remove:function(e){return new It({remove:e})},default:Ze,RangeSet:De,mergeRanges:Ut,rangesOverlap:Hr}),{default:Ze}),Ze})}(kn)),kn.exports}var Ys=Ws();const br=Ni(Ys),wi=Symbol.for("Dexie"),xr=globalThis[wi]||(globalThis[wi]=br);if(br.semVer!==xr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${br.semVer} and ${xr.semVer}`);const{liveQuery:Js,mergeRanges:Go,rangesOverlap:Xo,RangeSet:Zo,cmp:ea,Entity:ta,PropModification:na,replacePrefix:ra,add:ia,remove:sa}=xr,Qs="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Gs=c=>crypto.getRandomValues(new Uint8Array(c)),Xs=(c,n,i)=>{let s=(2<<Math.log2(c.length-1))-1,u=-~(1.6*s*n/c.length);return(f=n)=>{let d="";for(;;){let p=i(u),g=u|0;for(;g--;)if(d+=c[p[g]&s]||"",d.length>=f)return d}}},oa=(c,n=21)=>Xs(c,n|0,Gs),aa=(c=21)=>{let n="",i=crypto.getRandomValues(new Uint8Array(c|=0));for(;c--;)n+=Qs[i[c]&63];return n};const _i=c=>{let n;const i=new Set,s=(x,N)=>{const C=typeof x=="function"?x(n):x;if(!Object.is(C,n)){const Z=n;n=N??(typeof C!="object"||C===null)?C:Object.assign({},n,C),i.forEach(I=>I(n,Z))}},u=()=>n,p={setState:s,getState:u,getInitialState:()=>g,subscribe:x=>(i.add(x),()=>i.delete(x))},g=n=c(s,u,p);return p},Zs=c=>c?_i(c):_i,eo=c=>c;function to(c,n=eo){const i=xt.useSyncExternalStore(c.subscribe,()=>n(c.getState()),()=>n(c.getInitialState()));return xt.useDebugValue(i),i}const Si=c=>{const n=Zs(c),i=s=>to(n,s);return Object.assign(i,n),i},ua=c=>c?Si(c):Si;var gr,Oi;function no(){return Oi||(Oi=1,gr={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),gr}var ro=no();const io=Ni(ro);var so=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function ki(c){var n={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},i=c.match(/<\/?([^\s]+?)[/\s>]/);if(i&&(n.name=i[1],(io[i[1]]||c.charAt(c.length-2)==="/")&&(n.voidElement=!0),n.name.startsWith("!--"))){var s=c.indexOf("-->");return{type:"comment",comment:s!==-1?c.slice(4,s):""}}for(var u=new RegExp(so),f=null;(f=u.exec(c))!==null;)if(f[0].trim())if(f[1]){var d=f[1].trim(),p=[d,""];d.indexOf("=")>-1&&(p=d.split("=")),n.attrs[p[0]]=p[1],u.lastIndex--}else f[2]&&(n.attrs[f[2]]=f[3].trim().substring(1,f[3].length-1));return n}var oo=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,ao=/^\s*$/,uo=Object.create(null);function Li(c,n){switch(n.type){case"text":return c+n.content;case"tag":return c+="<"+n.name+(n.attrs?function(i){var s=[];for(var u in i)s.push(u+'="'+i[u]+'"');return s.length?" "+s.join(" "):""}(n.attrs):"")+(n.voidElement?"/>":">"),n.voidElement?c:c+n.children.reduce(Li,"")+"</"+n.name+">";case"comment":return c+"<!--"+n.comment+"-->"}}var co={parse:function(c,n){n||(n={}),n.components||(n.components=uo);var i,s=[],u=[],f=-1,d=!1;if(c.indexOf("<")!==0){var p=c.indexOf("<");s.push({type:"text",content:p===-1?c:c.substring(0,p)})}return c.replace(oo,function(g,x){if(d){if(g!=="</"+i.name+">")return;d=!1}var N,C=g.charAt(1)!=="/",Z=g.startsWith("<!--"),I=x+g.length,M=c.charAt(I);if(Z){var le=ki(g);return f<0?(s.push(le),s):((N=u[f]).children.push(le),s)}if(C&&(f++,(i=ki(g)).type==="tag"&&n.components[i.name]&&(i.type="component",d=!0),i.voidElement||d||!M||M==="<"||i.children.push({type:"text",content:c.slice(I,c.indexOf("<",I))}),f===0&&s.push(i),(N=u[f-1])&&N.children.push(i),u[f]=i),(!C||i.voidElement)&&(f>-1&&(i.voidElement||i.name===g.slice(2,-1))&&(f--,i=f===-1?s:u[f]),!d&&M!=="<"&&M)){N=f===-1?s:u[f].children;var ge=c.indexOf("<",I),fe=c.slice(I,ge===-1?void 0:ge);ao.test(fe)&&(fe=" "),(ge>-1&&f+N.length>=0||fe!==" ")&&N.push({type:"text",content:fe})}}),s},stringify:function(c){return c.reduce(function(n,i){return n+Li("",i)},"")}};const En=(c,n,i,s)=>{const u=[i,{code:n,...s||{}}];if(c?.services?.logger?.forward)return c.services.logger.forward(u,"warn","react-i18next::",!0);He(u[0])&&(u[0]=`react-i18next:: ${u[0]}`),c?.services?.logger?.warn?c.services.logger.warn(...u):console?.warn&&console.warn(...u)},Ei={},Jt=(c,n,i,s)=>{He(i)&&Ei[i]||(He(i)&&(Ei[i]=new Date),En(c,n,i,s))},Ii=(c,n)=>()=>{if(c.isInitialized)n();else{const i=()=>{setTimeout(()=>{c.off("initialized",i)},0),n()};c.on("initialized",i)}},wr=(c,n,i)=>{c.loadNamespaces(n,Ii(c,i))},Fi=(c,n,i,s)=>{if(He(i)&&(i=[i]),c.options.preload&&c.options.preload.indexOf(n)>-1)return wr(c,i,s);i.forEach(u=>{c.options.ns.indexOf(u)<0&&c.options.ns.push(u)}),c.loadLanguages(n,Ii(c,s))},lo=(c,n,i={})=>!n.languages||!n.languages.length?(Jt(n,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:n.languages}),!0):n.hasLoadedNamespace(c,{lng:i.lng,precheck:(s,u)=>{if(i.bindI18n&&i.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!u(s.isLanguageChangingTo,c))return!1}}),He=c=>typeof c=="string",at=c=>typeof c=="object"&&c!==null,fo=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ho={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},po=c=>ho[c],go=c=>c.replace(fo,po);let _r={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:go};const mo=(c={})=>{_r={..._r,...c}},Ki=()=>_r;let Mi;const yo=c=>{Mi=c},Sr=()=>Mi,mr=(c,n)=>{if(!c)return!1;const i=c.props?.children??c.children;return n?i.length>0:!!i},yr=c=>{if(!c)return[];const n=c.props?.children??c.children;return c.props?.i18nIsDynamicList?Rt(n):n},vo=c=>Array.isArray(c)&&c.every(Fe.isValidElement),Rt=c=>Array.isArray(c)?c:[c],bo=(c,n)=>{const i={...n};return i.props=Object.assign(c.props,n.props),i},Bi=(c,n,i,s)=>{if(!c)return"";let u="";const f=Rt(c),d=n?.transSupportBasicHtmlNodes?n.transKeepBasicHtmlNodesFor??[]:[];return f.forEach((p,g)=>{if(He(p)){u+=`${p}`;return}if(Fe.isValidElement(p)){const{props:x,type:N}=p,C=Object.keys(x).length,Z=d.indexOf(N)>-1,I=x.children;if(!I&&Z&&!C){u+=`<${N}/>`;return}if(!I&&(!Z||C)||x.i18nIsDynamicList){u+=`<${g}></${g}>`;return}if(Z&&C===1&&He(I)){u+=`<${N}>${I}</${N}>`;return}const M=Bi(I,n,i,s);u+=`<${g}>${M}</${g}>`;return}if(p===null){En(i,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:s});return}if(at(p)){const{format:x,...N}=p,C=Object.keys(N);if(C.length===1){const Z=x?`${C[0]}, ${x}`:C[0];u+=`{{${Z}}}`;return}En(i,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:s,child:p});return}En(i,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:s,child:p})}),u},xo=(c,n,i,s,u,f,d)=>{if(i==="")return[];const p=u.transKeepBasicHtmlNodesFor||[],g=i&&new RegExp(p.map(fe=>`<${fe}`).join("|")).test(i);if(!c&&!n&&!g&&!d)return[i];const x=n??{},N=fe=>{Rt(fe).forEach(re=>{He(re)||(mr(re)?N(yr(re)):at(re)&&!Fe.isValidElement(re)&&Object.assign(x,re))})};N(c);const C=co.parse(`<0>${i}</0>`),Z={...x,...f},I=(fe,he,re)=>{const ue=yr(fe),de=le(ue,he.children,re);return vo(ue)&&de.length===0||fe.props?.i18nIsDynamicList?ue:de},M=(fe,he,re,ue,de)=>{fe.dummy?(fe.children=he,re.push(Fe.cloneElement(fe,{key:ue},de?void 0:he))):re.push(...Fe.Children.map([fe],F=>{const A={...F.props};return delete A.i18nIsDynamicList,Fe.createElement(F.type,{...A,key:ue,ref:F.props.ref??F.ref},de?null:he)}))},le=(fe,he,re)=>{const ue=Rt(fe);return Rt(he).reduce((F,A,te)=>{const B=A.children?.[0]?.content&&s.services.interpolator.interpolate(A.children[0].content,Z,s.language);if(A.type==="tag"){let q=ue[parseInt(A.name,10)];!q&&n&&(q=n[A.name]),re.length===1&&!q&&(q=re[0][A.name]),q||(q={});const j=Object.keys(A.attrs).length!==0?bo({props:A.attrs},q):q,ae=Fe.isValidElement(j),L=ae&&mr(A,!0)&&!A.voidElement,K=g&&at(j)&&j.dummy&&!ae,V=at(n)&&Object.hasOwnProperty.call(n,A.name);if(He(j)){const T=s.services.interpolator.interpolate(j,Z,s.language);F.push(T)}else if(mr(j)||L){const T=I(j,A,re);M(j,T,F,te)}else if(K){const T=le(ue,A.children,re);M(j,T,F,te)}else if(Number.isNaN(parseFloat(A.name)))if(V){const T=I(j,A,re);M(j,T,F,te,A.voidElement)}else if(u.transSupportBasicHtmlNodes&&p.indexOf(A.name)>-1)if(A.voidElement)F.push(Fe.createElement(A.name,{key:`${A.name}-${te}`}));else{const T=le(ue,A.children,re);F.push(Fe.createElement(A.name,{key:`${A.name}-${te}`},T))}else if(A.voidElement)F.push(`<${A.name} />`);else{const T=le(ue,A.children,re);F.push(`<${A.name}>${T}</${A.name}>`)}else if(at(j)&&!ae){const T=A.children[0]?B:null;T&&F.push(T)}else M(j,B,F,te,A.children.length!==1||!B)}else if(A.type==="text"){const q=u.transWrapTextNodes,j=d?u.unescape(s.services.interpolator.interpolate(A.content,Z,s.language)):s.services.interpolator.interpolate(A.content,Z,s.language);q?F.push(Fe.createElement(q,{key:`${A.name}-${te}`},j)):F.push(j)}return F},[])},ge=le([{dummy:!0,children:c||[]}],C,Rt(c||[]));return yr(ge[0])},qi=(c,n,i)=>{const s=c.key||n,u=Fe.cloneElement(c,{key:s});if(!u.props||!u.props.children||i.indexOf(`${n}/>`)<0&&i.indexOf(`${n} />`)<0)return u;function f(){return Fe.createElement(Fe.Fragment,null,u)}return Fe.createElement(f,{key:s})},wo=(c,n)=>c.map((i,s)=>qi(i,s,n)),_o=(c,n)=>{const i={};return Object.keys(c).forEach(s=>{Object.assign(i,{[s]:qi(c[s],s,n)})}),i},So=(c,n,i,s)=>c?Array.isArray(c)?wo(c,n):at(c)?_o(c,n):(Jt(i,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:s}),null):null,Oo=c=>!at(c)||Array.isArray(c)?!1:Object.keys(c).reduce((n,i)=>n&&Number.isNaN(Number.parseFloat(i)),!0);function ko({children:c,count:n,parent:i,i18nKey:s,context:u,tOptions:f={},values:d,defaults:p,components:g,ns:x,i18n:N,t:C,shouldUnescape:Z,...I}){const M=N||Sr();if(!M)return Jt(M,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:s}),c;const le=C||M.t.bind(M)||(K=>K),ge={...Ki(),...M.options?.react};let fe=x||le.ns||M.options?.defaultNS;fe=He(fe)?[fe]:fe||["translation"];const he=Bi(c,ge,M,s),re=p||he||ge.transEmptyNodeValue||s,{hashTransKey:ue}=ge,de=s||(ue?ue(he||re):he||re);M.options?.interpolation?.defaultVariables&&(d=d&&Object.keys(d).length>0?{...d,...M.options.interpolation.defaultVariables}:{...M.options.interpolation.defaultVariables});const F=d||n!==void 0&&!M.options?.interpolation?.alwaysFormat||!c?f.interpolation:{interpolation:{...f.interpolation,prefix:"#$?",suffix:"?$#"}},A={...f,context:u||f.context,count:n,...d,...F,defaultValue:re,ns:fe},te=de?le(de,A):re,B=So(g,te,M,s);let q=B||c,j=null;Oo(B)&&(j=B,q=c);const ae=xo(q,j,te,M,ge,A,Z),L=i??ge.defaultTransParent;return L?Fe.createElement(L,I,ae):ae}const ca={type:"3rdParty",init(c){mo(c.options.react),yo(c)}},Vi=Fe.createContext();class Eo{constructor(){this.usedNamespaces={}}addUsedNamespaces(n){n.forEach(i=>{this.usedNamespaces[i]||(this.usedNamespaces[i]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function la({children:c,count:n,parent:i,i18nKey:s,context:u,tOptions:f={},values:d,defaults:p,components:g,ns:x,i18n:N,t:C,shouldUnescape:Z,...I}){const{i18n:M,defaultNS:le}=Fe.useContext(Vi)||{},ge=N||M||Sr(),fe=C||ge?.t.bind(ge);return ko({children:c,count:n,parent:i,i18nKey:s,context:u,tOptions:f,values:d,defaults:p,components:g,ns:x||fe?.ns||le||ge?.options?.defaultNS,i18n:ge,t:C,shouldUnescape:Z,...I})}const Fo=(c,n)=>{const i=Fe.useRef();return Fe.useEffect(()=>{i.current=c},[c,n]),i.current},Ui=(c,n,i,s)=>c.getFixedT(n,i,s),Po=(c,n,i,s)=>Fe.useCallback(Ui(c,n,i,s),[c,n,i,s]),fa=(c,n={})=>{const{i18n:i}=n,{i18n:s,defaultNS:u}=Fe.useContext(Vi)||{},f=i||s||Sr();if(f&&!f.reportNamespaces&&(f.reportNamespaces=new Eo),!f){Jt(f,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const ue=(F,A)=>He(A)?A:at(A)&&He(A.defaultValue)?A.defaultValue:Array.isArray(F)?F[F.length-1]:F,de=[ue,{},!1];return de.t=ue,de.i18n={},de.ready=!1,de}f.options.react?.wait&&Jt(f,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const d={...Ki(),...f.options.react,...n},{useSuspense:p,keyPrefix:g}=d;let x=u||f.options?.defaultNS;x=He(x)?[x]:x||["translation"],f.reportNamespaces.addUsedNamespaces?.(x);const N=(f.isInitialized||f.initializedStoreOnce)&&x.every(ue=>lo(ue,f,d)),C=Po(f,n.lng||null,d.nsMode==="fallback"?x:x[0],g),Z=()=>C,I=()=>Ui(f,n.lng||null,d.nsMode==="fallback"?x:x[0],g),[M,le]=Fe.useState(Z);let ge=x.join();n.lng&&(ge=`${n.lng}${ge}`);const fe=Fo(ge),he=Fe.useRef(!0);Fe.useEffect(()=>{const{bindI18n:ue,bindI18nStore:de}=d;he.current=!0,!N&&!p&&(n.lng?Fi(f,n.lng,x,()=>{he.current&&le(I)}):wr(f,x,()=>{he.current&&le(I)})),N&&fe&&fe!==ge&&he.current&&le(I);const F=()=>{he.current&&le(I)};return ue&&f?.on(ue,F),de&&f?.store.on(de,F),()=>{he.current=!1,f&&ue&&ue?.split(" ").forEach(A=>f.off(A,F)),de&&f&&de.split(" ").forEach(A=>f.store.off(A,F))}},[f,ge]),Fe.useEffect(()=>{he.current&&N&&le(Z)},[f,g,N]);const re=[M,f,N];if(re.t=M,re.i18n=f,re.ready=N,N||!N&&!p)return re;throw new Promise(ue=>{n.lng?Fi(f,n.lng,x,()=>ue()):wr(f,x,()=>ue())})};var ha=function(n){return{type:"backend",init:function(s,u,f){},read:function(s,u,f){if(typeof n=="function"){if(n.length<3){try{var d=n(s,u);d&&typeof d.then=="function"?d.then(function(p){return f(null,p&&p.default||p)}).catch(f):f(null,d)}catch(p){f(p)}return}n(s,u,f);return}f(null,n&&n[s]&&n[s][u])}}};const{slice:Co,forEach:Ao}=[];function Ro(c){return Ao.call(Co.call(arguments,1),n=>{if(n)for(const i in n)c[i]===void 0&&(c[i]=n[i])}),c}function $o(c){return typeof c!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(i=>i.test(c))}const Pi=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,No=function(c,n){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},u=encodeURIComponent(n);let f=`${c}=${u}`;if(s.maxAge>0){const d=s.maxAge-0;if(Number.isNaN(d))throw new Error("maxAge should be a Number");f+=`; Max-Age=${Math.floor(d)}`}if(s.domain){if(!Pi.test(s.domain))throw new TypeError("option domain is invalid");f+=`; Domain=${s.domain}`}if(s.path){if(!Pi.test(s.path))throw new TypeError("option path is invalid");f+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");f+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(f+="; HttpOnly"),s.secure&&(f+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:f+="; SameSite=Strict";break;case"lax":f+="; SameSite=Lax";break;case"strict":f+="; SameSite=Strict";break;case"none":f+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(f+="; Partitioned"),f},Ci={create(c,n,i,s){let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(u.expires=new Date,u.expires.setTime(u.expires.getTime()+i*60*1e3)),s&&(u.domain=s),document.cookie=No(c,n,u)},read(c){const n=`${c}=`,i=document.cookie.split(";");for(let s=0;s<i.length;s++){let u=i[s];for(;u.charAt(0)===" ";)u=u.substring(1,u.length);if(u.indexOf(n)===0)return u.substring(n.length,u.length)}return null},remove(c,n){this.create(c,"",-1,n)}};var jo={name:"cookie",lookup(c){let{lookupCookie:n}=c;if(n&&typeof document<"u")return Ci.read(n)||void 0},cacheUserLanguage(c,n){let{lookupCookie:i,cookieMinutes:s,cookieDomain:u,cookieOptions:f}=n;i&&typeof document<"u"&&Ci.create(i,c,s,u,f)}},Do={name:"querystring",lookup(c){let{lookupQuerystring:n}=c,i;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const f=s.substring(1).split("&");for(let d=0;d<f.length;d++){const p=f[d].indexOf("=");p>0&&f[d].substring(0,p)===n&&(i=f[d].substring(p+1))}}return i}},To={name:"hash",lookup(c){let{lookupHash:n,lookupFromHashIndex:i}=c,s;if(typeof window<"u"){const{hash:u}=window.location;if(u&&u.length>2){const f=u.substring(1);if(n){const d=f.split("&");for(let p=0;p<d.length;p++){const g=d[p].indexOf("=");g>0&&d[p].substring(0,g)===n&&(s=d[p].substring(g+1))}}if(s)return s;if(!s&&i>-1){const d=u.match(/\/([a-zA-Z-]*)/g);return Array.isArray(d)?d[typeof i=="number"?i:0]?.replace("/",""):void 0}}}return s}};let Ct=null;const Ai=()=>{if(Ct!==null)return Ct;try{if(Ct=typeof window<"u"&&window.localStorage!==null,!Ct)return!1;const c="i18next.translate.boo";window.localStorage.setItem(c,"foo"),window.localStorage.removeItem(c)}catch{Ct=!1}return Ct};var Lo={name:"localStorage",lookup(c){let{lookupLocalStorage:n}=c;if(n&&Ai())return window.localStorage.getItem(n)||void 0},cacheUserLanguage(c,n){let{lookupLocalStorage:i}=n;i&&Ai()&&window.localStorage.setItem(i,c)}};let At=null;const Ri=()=>{if(At!==null)return At;try{if(At=typeof window<"u"&&window.sessionStorage!==null,!At)return!1;const c="i18next.translate.boo";window.sessionStorage.setItem(c,"foo"),window.sessionStorage.removeItem(c)}catch{At=!1}return At};var Io={name:"sessionStorage",lookup(c){let{lookupSessionStorage:n}=c;if(n&&Ri())return window.sessionStorage.getItem(n)||void 0},cacheUserLanguage(c,n){let{lookupSessionStorage:i}=n;i&&Ri()&&window.sessionStorage.setItem(i,c)}},Ko={name:"navigator",lookup(c){const n=[];if(typeof navigator<"u"){const{languages:i,userLanguage:s,language:u}=navigator;if(i)for(let f=0;f<i.length;f++)n.push(i[f]);s&&n.push(s),u&&n.push(u)}return n.length>0?n:void 0}},Mo={name:"htmlTag",lookup(c){let{htmlTag:n}=c,i;const s=n||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(i=s.getAttribute("lang")),i}},Bo={name:"path",lookup(c){let{lookupFromPathIndex:n}=c;if(typeof window>"u")return;const i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(i)?i[typeof n=="number"?n:0]?.replace("/",""):void 0}},qo={name:"subdomain",lookup(c){let{lookupFromSubdomainIndex:n}=c;const i=typeof n=="number"?n+1:1,s=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(s)return s[i]}};let Hi=!1;try{document.cookie,Hi=!0}catch{}const zi=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Hi||zi.splice(1,1);const Vo=()=>({order:zi,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:c=>c});class Uo{constructor(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(n,i)}init(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=Ro(i,this.options||{},Vo()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=u=>u.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(jo),this.addDetector(Do),this.addDetector(Lo),this.addDetector(Io),this.addDetector(Ko),this.addDetector(Mo),this.addDetector(Bo),this.addDetector(qo),this.addDetector(To)}addDetector(n){return this.detectors[n.name]=n,this}detect(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,i=[];return n.forEach(s=>{if(this.detectors[s]){let u=this.detectors[s].lookup(this.options);u&&typeof u=="string"&&(u=[u]),u&&(i=i.concat(u))}}),i=i.filter(s=>s!=null&&!$o(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}cacheUserLanguage(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||i.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(n,this.options)}))}}Uo.type="languageDetector";function Ho(c,n,i){var s,u;typeof c=="function"?(s=n||[],u=i):(s=[],u=n);var f=xt.useRef({hasResult:!1,result:u,error:null}),d=xt.useReducer(function(x){return x+1},0);d[0];var p=d[1],g=xt.useMemo(function(){var x=typeof c=="function"?c():c;if(!x||typeof x.subscribe!="function")throw c===x?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!f.current.hasResult&&typeof window<"u"&&(typeof x.hasValue!="function"||x.hasValue()))if(typeof x.getValue=="function")f.current.result=x.getValue(),f.current.hasResult=!0;else{var N=x.subscribe(function(C){f.current.result=C,f.current.hasResult=!0});typeof N=="function"?N():N.unsubscribe()}return x},s);if(xt.useDebugValue(f.current.result),xt.useEffect(function(){var x=g.subscribe(function(N){var C=f.current;(C.error!==null||C.result!==N)&&(C.error=null,C.result=N,C.hasResult=!0,p())},function(N){var C=f.current;C.error!==N&&(C.error=N,p())});return typeof x=="function"?x:x.unsubscribe.bind(x)},s),f.current.error)throw f.current.error;return f.current.result}function da(c,n,i){return Ho(function(){return Js(c)},[],i)}export{Uo as B,xr as D,la as T,Jo as a,ua as b,Wo as c,ca as d,ha as e,da as f,oa as g,Ke as i,aa as n,Yo as r,Qo as t,fa as u};
