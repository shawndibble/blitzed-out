const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/chunk-E8HqAuJ1.js","js/chunk-CVSdvP5Z.js","js/chunk-CNqt7FHs.js","assets/index-CZH-e7F_.js","js/chunk-BVO8KFPS.js","js/chunk-_SwOSjSw.js","js/migrationService.ts-BJD6Wc1i.js"])))=>i.map(i=>d[i]);
var Mr=Object.defineProperty;var ft=Object.getOwnPropertySymbols;var Sr=Object.prototype.hasOwnProperty,Or=Object.prototype.propertyIsEnumerable;var pt=(n,e,t)=>e in n?Mr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,pe=(n,e)=>{for(var t in e||(e={}))Sr.call(e,t)&&pt(n,t,e[t]);if(ft)for(var t of ft(e))Or.call(e,t)&&pt(n,t,e[t]);return n};import{g as Tr,c as Dr,i as Se,a as Cr,B as Ar,r as $r,u as Er,b as Y,j as te,d as ye,R as Pr,e as tr,f as mt,h as Fr,_ as Lr,T as kr,C as Ir}from"./chunk-CVSdvP5Z.js";import{D as Rr,n as rr,a as nr}from"./chunk-CNqt7FHs.js";import{q as Oe,c as ae,g as Yr,w as Te,o as je,l as He,s as or,a as sr,b as Ue,T as jr,d as re,e as Hr,f as ir,h as Br,i as Gr,j as Ur,r as Nr,k as zr,u as Wr,m as Vr,n as qr,p as Jr,t as ot,v as Qr,x as Kr,G as Zr,y as Xr,z as en,E as tn,A as rn,B as ar}from"./chunk-BVO8KFPS.js";import{L as nn}from"./chunk-_SwOSjSw.js";(function(){var n=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{};n.SENTRY_RELEASE={id:"874067a760cfa9079dd7f585e4ceff298b0e879f"}})();try{(function(){var n=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{},e=new n.Error().stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="fc9820ab-1c8f-42d8-b3d5-6d13115b300c",n._sentryDebugIdIdentifier="sentry-dbid-fc9820ab-1c8f-42d8-b3d5-6d13115b300c")})()}catch(n){}const on="modulepreload",sn=function(n){return"/"+n},gt={},J=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){let s=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),a=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=s(t.map(u=>{if(u=sn(u),u in gt)return;gt[u]=!0;const f=u.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const T=document.createElement("link");if(T.rel=f?"stylesheet":on,f||(T.as="script"),T.crossOrigin="",T.href=u,a&&T.setAttribute("nonce",a),document.head.appendChild(T),f)return new Promise((A,k)=>{T.addEventListener("load",A),T.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(c){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=c,window.dispatchEvent(a),!a.defaultPrevented)throw c}return o.then(c=>{for(const a of c||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};class Me extends Error{constructor(e,t,r){super(e),this.code=t,this.cause=r,this.name="AppError"}}class ve extends Me{constructor(e,t,r){super(e,t,r),this.name="AuthError"}}function cr(n){return n instanceof Me}function st(n){return n instanceof Error}function an(n){return st(n)?n.message:typeof n=="string"?n:"An unknown error occurred"}function cn(n){if(cr(n)||st(n)&&"code"in n)return n.code}function be(n,e="An unexpected error occurred"){return cr(n)?n:st(n)?new Me(n.message||e,void 0,n):typeof n=="string"?new Me(n):new Me(e)}const yt={"auth/user-not-found":"No account found with this email address","auth/wrong-password":"Incorrect password","auth/email-already-in-use":"An account with this email already exists","auth/weak-password":"Password is too weak","auth/invalid-email":"Invalid email address","auth/too-many-requests":"Too many login attempts. Please try again later","auth/network-request-failed":"Network error. Please check your connection","permission-denied":"You do not have permission to perform this action",unavailable:"Service is temporarily unavailable. Please try again"};function xe(n){const e=cn(n);return e&&yt[e]?yt[e]:an(n)}var Xe={exports:{}};const un={},ln=Object.freeze({__proto__:null,default:un}),vt=Tr(ln);/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.11.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2025
 * @license MIT
 */var bt;function dn(){return bt||(bt=1,function(n){(function(){var e="input is invalid type",t=typeof window=="object",r=t?window:{};r.JS_SHA256_NO_WINDOW&&(t=!1);var o=!t&&typeof self=="object",i=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node&&process.type!="renderer";i?r=Dr:o&&(r=self);var c=!r.JS_SHA256_NO_COMMON_JS&&!0&&n.exports,a=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer!="undefined",s="0123456789abcdef".split(""),u=[-2147483648,8388608,32768,128],f=[24,16,8,0],m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],T=["hex","array","digest","arrayBuffer"],A=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"}),a&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(l){return typeof l=="object"&&l.buffer&&l.buffer.constructor===ArrayBuffer});var k=function(l,g){return function(_){return new O(g,!0).update(_)[l]()}},F=function(l){var g=k("hex",l);i&&(g=D(g,l)),g.create=function(){return new O(l)},g.update=function(x){return g.create().update(x)};for(var _=0;_<T.length;++_){var h=T[_];g[h]=k(h,l)}return g},D=function(l,g){var _=vt,h=vt.Buffer,x=g?"sha224":"sha256",d;h.from&&!r.JS_SHA256_NO_BUFFER_FROM?d=h.from:d=function(p){return new h(p)};var E=function(p){if(typeof p=="string")return _.createHash(x).update(p,"utf8").digest("hex");if(p==null)throw new Error(e);return p.constructor===ArrayBuffer&&(p=new Uint8Array(p)),Array.isArray(p)||ArrayBuffer.isView(p)||p.constructor===h?_.createHash(x).update(d(p)).digest("hex"):l(p)};return E},C=function(l,g){return function(_,h){return new j(_,g,!0).update(h)[l]()}},$=function(l){var g=C("hex",l);g.create=function(x){return new j(x,l)},g.update=function(x,d){return g.create(x).update(d)};for(var _=0;_<T.length;++_){var h=T[_];g[h]=C(h,l)}return g};function O(l,g){g?(A[0]=A[16]=A[1]=A[2]=A[3]=A[4]=A[5]=A[6]=A[7]=A[8]=A[9]=A[10]=A[11]=A[12]=A[13]=A[14]=A[15]=0,this.blocks=A):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=l}O.prototype.update=function(l){if(!this.finalized){var g,_=typeof l;if(_!=="string"){if(_==="object"){if(l===null)throw new Error(e);if(a&&l.constructor===ArrayBuffer)l=new Uint8Array(l);else if(!Array.isArray(l)&&(!a||!ArrayBuffer.isView(l)))throw new Error(e)}else throw new Error(e);g=!0}for(var h,x=0,d,E=l.length,p=this.blocks;x<E;){if(this.hashed&&(this.hashed=!1,p[0]=this.block,this.block=p[16]=p[1]=p[2]=p[3]=p[4]=p[5]=p[6]=p[7]=p[8]=p[9]=p[10]=p[11]=p[12]=p[13]=p[14]=p[15]=0),g)for(d=this.start;x<E&&d<64;++x)p[d>>>2]|=l[x]<<f[d++&3];else for(d=this.start;x<E&&d<64;++x)h=l.charCodeAt(x),h<128?p[d>>>2]|=h<<f[d++&3]:h<2048?(p[d>>>2]|=(192|h>>>6)<<f[d++&3],p[d>>>2]|=(128|h&63)<<f[d++&3]):h<55296||h>=57344?(p[d>>>2]|=(224|h>>>12)<<f[d++&3],p[d>>>2]|=(128|h>>>6&63)<<f[d++&3],p[d>>>2]|=(128|h&63)<<f[d++&3]):(h=65536+((h&1023)<<10|l.charCodeAt(++x)&1023),p[d>>>2]|=(240|h>>>18)<<f[d++&3],p[d>>>2]|=(128|h>>>12&63)<<f[d++&3],p[d>>>2]|=(128|h>>>6&63)<<f[d++&3],p[d>>>2]|=(128|h&63)<<f[d++&3]);this.lastByteIndex=d,this.bytes+=d-this.start,d>=64?(this.block=p[16],this.start=d-64,this.hash(),this.hashed=!0):this.start=d}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},O.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var l=this.blocks,g=this.lastByteIndex;l[16]=this.block,l[g>>>2]|=u[g&3],this.block=l[16],g>=56&&(this.hashed||this.hash(),l[0]=this.block,l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),l[14]=this.hBytes<<3|this.bytes>>>29,l[15]=this.bytes<<3,this.hash()}},O.prototype.hash=function(){var l=this.h0,g=this.h1,_=this.h2,h=this.h3,x=this.h4,d=this.h5,E=this.h6,p=this.h7,b=this.blocks,y,v,S,w,M,P,L,R,H,G,z;for(y=16;y<64;++y)M=b[y-15],v=(M>>>7|M<<25)^(M>>>18|M<<14)^M>>>3,M=b[y-2],S=(M>>>17|M<<15)^(M>>>19|M<<13)^M>>>10,b[y]=b[y-16]+v+b[y-7]+S<<0;for(z=g&_,y=0;y<64;y+=4)this.first?(this.is224?(R=300032,M=b[0]-1413257819,p=M-150054599<<0,h=M+24177077<<0):(R=704751109,M=b[0]-210244248,p=M-1521486534<<0,h=M+143694565<<0),this.first=!1):(v=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),S=(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7),R=l&g,w=R^l&_^z,L=x&d^~x&E,M=p+S+L+m[y]+b[y],P=v+w,p=h+M<<0,h=M+P<<0),v=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),S=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),H=h&l,w=H^h&g^R,L=p&x^~p&d,M=E+S+L+m[y+1]+b[y+1],P=v+w,E=_+M<<0,_=M+P<<0,v=(_>>>2|_<<30)^(_>>>13|_<<19)^(_>>>22|_<<10),S=(E>>>6|E<<26)^(E>>>11|E<<21)^(E>>>25|E<<7),G=_&h,w=G^_&l^H,L=E&p^~E&x,M=d+S+L+m[y+2]+b[y+2],P=v+w,d=g+M<<0,g=M+P<<0,v=(g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10),S=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),z=g&_,w=z^g&h^G,L=d&E^~d&p,M=x+S+L+m[y+3]+b[y+3],P=v+w,x=l+M<<0,l=M+P<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+l<<0,this.h1=this.h1+g<<0,this.h2=this.h2+_<<0,this.h3=this.h3+h<<0,this.h4=this.h4+x<<0,this.h5=this.h5+d<<0,this.h6=this.h6+E<<0,this.h7=this.h7+p<<0},O.prototype.hex=function(){this.finalize();var l=this.h0,g=this.h1,_=this.h2,h=this.h3,x=this.h4,d=this.h5,E=this.h6,p=this.h7,b=s[l>>>28&15]+s[l>>>24&15]+s[l>>>20&15]+s[l>>>16&15]+s[l>>>12&15]+s[l>>>8&15]+s[l>>>4&15]+s[l&15]+s[g>>>28&15]+s[g>>>24&15]+s[g>>>20&15]+s[g>>>16&15]+s[g>>>12&15]+s[g>>>8&15]+s[g>>>4&15]+s[g&15]+s[_>>>28&15]+s[_>>>24&15]+s[_>>>20&15]+s[_>>>16&15]+s[_>>>12&15]+s[_>>>8&15]+s[_>>>4&15]+s[_&15]+s[h>>>28&15]+s[h>>>24&15]+s[h>>>20&15]+s[h>>>16&15]+s[h>>>12&15]+s[h>>>8&15]+s[h>>>4&15]+s[h&15]+s[x>>>28&15]+s[x>>>24&15]+s[x>>>20&15]+s[x>>>16&15]+s[x>>>12&15]+s[x>>>8&15]+s[x>>>4&15]+s[x&15]+s[d>>>28&15]+s[d>>>24&15]+s[d>>>20&15]+s[d>>>16&15]+s[d>>>12&15]+s[d>>>8&15]+s[d>>>4&15]+s[d&15]+s[E>>>28&15]+s[E>>>24&15]+s[E>>>20&15]+s[E>>>16&15]+s[E>>>12&15]+s[E>>>8&15]+s[E>>>4&15]+s[E&15];return this.is224||(b+=s[p>>>28&15]+s[p>>>24&15]+s[p>>>20&15]+s[p>>>16&15]+s[p>>>12&15]+s[p>>>8&15]+s[p>>>4&15]+s[p&15]),b},O.prototype.toString=O.prototype.hex,O.prototype.digest=function(){this.finalize();var l=this.h0,g=this.h1,_=this.h2,h=this.h3,x=this.h4,d=this.h5,E=this.h6,p=this.h7,b=[l>>>24&255,l>>>16&255,l>>>8&255,l&255,g>>>24&255,g>>>16&255,g>>>8&255,g&255,_>>>24&255,_>>>16&255,_>>>8&255,_&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255,x>>>24&255,x>>>16&255,x>>>8&255,x&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,E>>>24&255,E>>>16&255,E>>>8&255,E&255];return this.is224||b.push(p>>>24&255,p>>>16&255,p>>>8&255,p&255),b},O.prototype.array=O.prototype.digest,O.prototype.arrayBuffer=function(){this.finalize();var l=new ArrayBuffer(this.is224?28:32),g=new DataView(l);return g.setUint32(0,this.h0),g.setUint32(4,this.h1),g.setUint32(8,this.h2),g.setUint32(12,this.h3),g.setUint32(16,this.h4),g.setUint32(20,this.h5),g.setUint32(24,this.h6),this.is224||g.setUint32(28,this.h7),l};function j(l,g,_){var h,x=typeof l;if(x==="string"){var d=[],E=l.length,p=0,b;for(h=0;h<E;++h)b=l.charCodeAt(h),b<128?d[p++]=b:b<2048?(d[p++]=192|b>>>6,d[p++]=128|b&63):b<55296||b>=57344?(d[p++]=224|b>>>12,d[p++]=128|b>>>6&63,d[p++]=128|b&63):(b=65536+((b&1023)<<10|l.charCodeAt(++h)&1023),d[p++]=240|b>>>18,d[p++]=128|b>>>12&63,d[p++]=128|b>>>6&63,d[p++]=128|b&63);l=d}else if(x==="object"){if(l===null)throw new Error(e);if(a&&l.constructor===ArrayBuffer)l=new Uint8Array(l);else if(!Array.isArray(l)&&(!a||!ArrayBuffer.isView(l)))throw new Error(e)}else throw new Error(e);l.length>64&&(l=new O(g,!0).update(l).array());var y=[],v=[];for(h=0;h<64;++h){var S=l[h]||0;y[h]=92^S,v[h]=54^S}O.call(this,g,_),this.update(v),this.oKeyPad=y,this.inner=!0,this.sharedMemory=_}j.prototype=new O,j.prototype.finalize=function(){if(O.prototype.finalize.call(this),this.inner){this.inner=!1;var l=this.array();O.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(l),O.prototype.finalize.call(this)}};var I=F();I.sha256=I,I.sha224=F(!0),I.sha256.hmac=$(),I.sha224.hmac=$(!0),c?n.exports=I:(r.sha256=I.sha256,r.sha224=I.sha224)})()}(Xe)),Xe.exports}var hn=dn(),fn=Object.defineProperty,pn=Object.defineProperties,mn=Object.getOwnPropertyDescriptors,Be=Object.getOwnPropertySymbols,ur=Object.prototype.hasOwnProperty,lr=Object.prototype.propertyIsEnumerable,xt=(n,e,t)=>e in n?fn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ge=(n,e)=>{for(var t in e||(e={}))ur.call(e,t)&&xt(n,t,e[t]);if(Be)for(var t of Be(e))lr.call(e,t)&&xt(n,t,e[t]);return n},gn=(n,e)=>pn(n,mn(e)),yn=(n,e)=>{var t={};for(var r in n)ur.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Be)for(var r of Be(n))e.indexOf(r)<0&&lr.call(n,r)&&(t[r]=n[r]);return t},U=(n,e,t)=>new Promise((r,o)=>{var i=s=>{try{a(t.next(s))}catch(u){o(u)}},c=s=>{try{a(t.throw(s))}catch(u){o(u)}},a=s=>s.done?r(s.value):Promise.resolve(s.value).then(i,c);a((t=t.apply(n,e)).next())});const dr={apiKey:"AIzaSyCKS7tWQRYRWHsawNfN42uAmISdUbJHJJw",authDomain:"blitzout-49b39.firebaseapp.com",projectId:"blitzout-49b39",storageBucket:"blitzout-49b39.appspot.com",messagingSenderId:"852428606926",appId:"1:852428606926:web:17444e6f8dbc2f95f0ef9f",measurementId:"G-93YN1YMTQ7"},wt=Object.entries(dr).filter(([n,e])=>!e).map(([n])=>n);wt.length>0&&(console.error("Missing Firebase environment variables:",wt),console.error("Please check your .env file and ensure all VITE_FIREBASE_* variables are set"));const vn=qr(dr),X=Yr(vn);function Bs(n=""){return U(this,null,function*(){try{const e=re();return yield Jr(e),e.currentUser?(yield ot(e.currentUser,{displayName:n}),e.currentUser):null}catch(e){throw console.error("Anonymous login error:",e),new ve(xe(e),"ANONYMOUS_LOGIN_FAILED",be(e))}})}function Gs(n,e,t=""){return U(this,null,function*(){try{const r=re(),o=yield Qr(r,n,e);return yield ot(o.user,{displayName:t}),o.user}catch(r){throw console.error("Registration error:",r),new ve(xe(r),"REGISTRATION_FAILED",be(r))}})}function Us(n,e){return U(this,null,function*(){try{const t=re();return(yield Kr(t,n,e)).user}catch(t){throw console.error("Email login error:",t),new ve(xe(t),"EMAIL_LOGIN_FAILED",be(t))}})}function Ns(){return U(this,null,function*(){try{const n=re(),e=new Zr;return(yield Xr(n,e)).user}catch(n){throw console.error("Google login error:",n),new ve(xe(n),"GOOGLE_LOGIN_FAILED",be(n))}})}function zs(n){return U(this,null,function*(){try{const e=re();return yield en(e,n),!0}catch(e){throw console.error("Password reset error:",e),new ve(xe(e),"PASSWORD_RESET_FAILED",be(e))}})}function Ws(n,e){return U(this,null,function*(){try{const r=re().currentUser;if(r!=null&&r.isAnonymous){const o=tn.credential(n,e);return(yield rn(r,o)).user}else throw new Error("User is not anonymous or not logged in")}catch(t){throw console.error("Account conversion error:",t),new ve(xe(t),"ACCOUNT_CONVERSION_FAILED",be(t))}})}function Vs(){return U(this,null,function*(){try{const n=re();return yield ar(n),!0}catch(n){throw console.error(n),n}})}function qs(){return U(this,null,function*(){try{const n=re();yield ar(n),["gameSettings","messages-storage","i18nextLng","blitzed-out-action-groups-migration","blitzed-out-background-migration","blitzed-out-migration-in-progress","blitzed-out-current-language-migration","blitzed-out-background-migration-in-progress","blitzed-out-migration-health"].forEach(s=>{try{localStorage.removeItem(s)}catch(u){console.warn(`Failed to remove localStorage key: ${s}`,u)}});const t=["gameSettings","messages-storage","blitzed-out-"];Object.keys(localStorage).forEach(s=>{if(t.some(u=>s.startsWith(u)))try{localStorage.removeItem(s)}catch(u){console.warn(`Failed to remove localStorage key: ${s}`,u)}});try{sessionStorage.clear()}catch(s){console.warn("Failed to clear sessionStorage:",s)}try{const{default:s}=yield J(()=>Promise.resolve().then(function(){return jn}),void 0);yield s.delete(),console.log("Successfully cleared IndexedDB")}catch(s){console.warn("Failed to clear IndexedDB:",s)}const o=["i18next"],i=window.location.hostname,c=[i];if(i.includes(".")){const s=i.split(".");for(let u=1;u<s.length-1;u++)c.push(`.${s.slice(u).join(".")}`)}const a=["/","/app","/auth","/login"];o.forEach(s=>{c.forEach(u=>{a.forEach(f=>{try{document.cookie=`${s}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${f}; domain=${u};`,document.cookie=`${s}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${f}; domain=${u}; secure;`,document.cookie=`${s}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${f}; domain=${u}; httpOnly;`,document.cookie=`${s}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${f}; domain=${u}; SameSite=Strict;`,document.cookie=`${s}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${f}; domain=${u}; SameSite=Lax;`,document.cookie=`${s}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${f}; domain=${u}; SameSite=None; secure;`}catch(m){}})}),a.forEach(u=>{try{document.cookie=`${s}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${u};`,document.cookie=`${s}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${u}; secure;`}catch(f){}}),console.log(`Attempted comprehensive clearing of cookie: ${s}`)}),console.log("Successfully wiped all app data")}catch(n){throw console.error("Error wiping app data:",n),n}})}function Js(n,e,t={},r={}){if(!n)return;const{enableCache:o=!0,enableDebounce:i=!0}=r,c=n.toUpperCase(),a=at("userList",c),s=Date.now();if(o){const f=Q.get(a);if(f&&ct(f,a)){f.queryCount++,Q.set(a,f),Z(a,Date.now()-s,!0);const m=Object.keys(f.data).sort().join(","),T=t?Object.keys(t).sort().join(","):"";m!==T&&e(f.data);return}}const u=()=>U(null,null,function*(){let f=!1;try{yield Ne();const m=Ur(),T=Nr(m,"users");zr(T,A=>{const k=Date.now(),F=k-s,D=A.val();if(!D){e({});return}const C={};Object.entries(D).forEach(([I,l])=>{l.room===c&&(C[I]={displayName:l.displayName,uid:I,lastSeen:l.lastSeen?new Date(l.lastSeen):new Date,isAnonymous:l.isAnonymous,joinedAt:l.joinedAt?new Date(l.joinedAt):new Date,room:l.room})});const $=C;if(o){it();const I=De(a);Q.set(a,{data:$,timestamp:k,queryCount:1,priority:I})}Z(a,F,!1,f);const O=Object.keys($).sort().join(","),j=t?Object.keys(t).sort().join(","):"";O!==j&&e($)},A=>{f=!0,console.error("getUserList error:",A),Z(a,Date.now()-s,!1,!0)})}catch(m){f=!0,console.error("getUserList connection error:",m),Z(a,Date.now()-s,!1,!0)}finally{ze()}});i?ut(a,u):u()}function Qs(n=""){return U(this,null,function*(){try{const e=re();return e.currentUser?(yield ot(e.currentUser,{displayName:n}),e.currentUser):null}catch(e){return console.error(e),null}})}function Ks(n,e){return U(this,null,function*(){try{yield Ue(ae(X,"custom-actions"),{grouping:n,customAction:e,ttl:new Date(Date.now()+5760*60*1e3)})}catch(t){console.error(t)}})}function bn(n){return U(this,null,function*(){const e=Oe(ae(X,"game-boards"),Te("checksum","==",n)),t=yield Vr(e);return t.size?t.docs[0]:null})}function Zs(n){return U(this,arguments,function*({title:e,gameBoard:t,settings:r}){if(e)try{const o=hn.sha256(t),i=yield bn(o);return i?(Wr(i.ref,{ttl:new Date(Date.now()+720*60*60*1e3)}),i):yield xn({title:e,gameBoard:t,settings:r,checksum:o})}catch(o){console.error(o)}})}function xn(n){return U(this,arguments,function*({title:e,gameBoard:t,settings:r,checksum:o}){try{return yield Ue(ae(X,"game-boards"),{title:e,gameBoard:t,settings:r,checksum:o,ttl:new Date(Date.now()+720*60*60*1e3)})}catch(i){console.error(i);return}})}function Xs(n){return U(this,null,function*(){try{const e=ir(X,"game-boards",n),t=yield Br(e);return t.exists()?t.data():void 0}catch(e){console.error(e);return}})}let _t={};const Q=new Map,me=new Map,Mt=15e3,wn=5e3,St=150,_n=50,hr=50,Mn=100,he={activeConnections:0,maxConnections:15,connectionQueue:[]},Ot=new Map;function Z(n,e,t,r=!1){const o=Ot.get(n)||{queryCount:0,totalLatency:0,cacheHits:0,lastQueryTime:0,avgLatency:0,p95Latency:0,connectionPoolHits:0,networkErrors:0,latencyHistory:[]};if(o.queryCount++,o.totalLatency+=e,o.lastQueryTime=Date.now(),o.avgLatency=o.totalLatency/o.queryCount,o.latencyHistory.push(e),o.latencyHistory.length>20&&o.latencyHistory.shift(),o.latencyHistory.length>=5){const i=[...o.latencyHistory].sort((a,s)=>a-s),c=Math.floor(i.length*.95);o.p95Latency=i[c]}t&&o.cacheHits++,r&&o.networkErrors++,Ot.set(n,o)}function De(n){return n.includes("messages")?"high":n.includes("userList")?"medium":"low"}function Sn(n){switch(n){case"high":return wn;case"medium":return Mt;case"low":return Mt*2}}function On(n){switch(n){case"high":return _n;case"medium":return St;case"low":return St*2}}function it(){if(Q.size<=Mn)return;const n=Array.from(Q.entries());n.sort(([,t],[,r])=>{const o={low:0,medium:1,high:2},i=o[t.priority]-o[r.priority];if(i!==0)return i;const c=t.queryCount-r.queryCount;return c!==0?c:t.timestamp-r.timestamp});const e=Math.ceil(Q.size*.2);for(let t=0;t<e;t++)Q.delete(n[t][0])}function Ne(){return new Promise(n=>{he.activeConnections<he.maxConnections?(he.activeConnections++,n()):he.connectionQueue.push(()=>{he.activeConnections++,n()})})}function ze(){if(he.activeConnections--,he.connectionQueue.length>0){const n=he.connectionQueue.shift();n&&n()}}function at(n,e,t){return`${n}:${e||"global"}:${t||""}`}function ct(n,e){const t=De(e),r=Sn(t);return Date.now()-n.timestamp<r}function ut(n,e,...t){const r=De(n),o=On(r),i=me.get(n);i&&clearTimeout(i);const c=setTimeout(()=>U(null,null,function*(){try{yield Ne(),e(...t)}catch(a){console.error("Query execution error:",a)}finally{ze(),me.delete(n)}}),o);me.set(n,c)}function ei(n){return U(this,null,function*(){var e=n,{room:t,user:r,text:o="",type:i="chat"}=e,c=yn(e,["room","user","text","type"]);const a=["chat","actions","settings","room","media"];if(!a.includes(i)){let m="Invalid message type. Was expecting ";return m+=a.join(", "),m+=` but got ${i}`,console.error(m)}if(!(r!=null&&r.uid))return;const s=Ge({room:t,user:r.uid,text:o,type:i},c);if(JSON.stringify(s)===JSON.stringify(_t))return;_t=s;const u=Date.now(),f=(t==null?void 0:t.toUpperCase())||"PUBLIC";try{return yield Ue(ae(X,"chat-rooms",f,"messages"),gn(Ge({text:o.trim(),ttl:new Date(u+864e5),type:i},c),{uid:r.uid,displayName:r.displayName,timestamp:Hr()}))}catch(m){console.error("Failed to send message:",m);return}})}function ti(n,e){return U(this,null,function*(){return Gr(ir(X,`/chat-rooms/${n.toUpperCase()}/messages/${e}`))})}function ri(n,e,t={}){if(!n)return;const r=re();if(!r.currentUser){let o,i;return o=r.onAuthStateChanged(c=>{c&&(i=Tt(n,e,t),o&&(o(),o=void 0))}),()=>{o&&o(),i&&i()}}return Tt(n,e,t)}function Tt(n,e,t={}){const{limitCount:r=hr,startAfterDoc:o,enableCache:i=!0,enableDebounce:c=!0}=t,a=n.toUpperCase(),s=at("messages",a,`limit:${r}`),u=Date.now();if(i){const m=Q.get(s);if(m&&ct(m,s))return m.queryCount++,Q.set(s,m),Z(s,Date.now()-u,!0),e(m.data),()=>{}}const f=()=>{let m=!1,T;try{Ne();const A=new Date;A.setHours(A.getHours()-3);let k=Oe(ae(X,"chat-rooms",a,"messages"),Te("timestamp",">",A),je("timestamp","desc"),He(r));return o&&(k=Oe(ae(X,"chat-rooms",a,"messages"),Te("timestamp",">",A),je("timestamp","desc"),or(o),He(r))),T=sr(k,F=>{const D=Date.now(),C=D-u,$=F.docs.map(O=>Ge({id:O.id},O.data()));if(i&&$.length>0){it();const O=F.docs[F.docs.length-1],j=De(s);Q.set(s,{data:$,timestamp:D,lastVisible:O,queryCount:1,priority:j})}Z(s,C,!1,m),e($)},F=>{m=!0,console.error("getMessages error:",F),Z(s,Date.now()-u,!1,!0)}),T}catch(A){return m=!0,console.error("getMessages connection error:",A),Z(s,Date.now()-u,!1,!0),()=>{}}finally{ze()}};if(c){let m;return ut(s,()=>{m=f()}),()=>{const T=me.get(s);T&&(clearTimeout(T),me.delete(s)),m&&m()}}return f()}function Tn(n,e={}){const{limitCount:t=hr,startAfterDoc:r,enableCache:o=!0,enableDebounce:i=!0}=e,c=at("schedule",null,`limit:${t}`),a=Date.now();if(o){const f=Q.get(c);if(f&&ct(f,c))return f.queryCount++,Q.set(c,f),Z(c,Date.now()-a,!0),n(f.data),()=>{}}const s=()=>U(null,null,function*(){let f=!1,m;try{yield Ne();const T=new Date;T.setMinutes(T.getMinutes()-5);let A=Oe(ae(X,"schedule"),Te("dateTime",">",T),je("dateTime","asc"),He(t));return r&&(A=Oe(ae(X,"schedule"),Te("dateTime",">",T),je("dateTime","asc"),or(r),He(t))),m=sr(A,k=>{const F=Date.now(),D=F-a,C=k.docs.map($=>Ge({id:$.id},$.data()));if(o&&C.length>0){it();const $=k.docs[k.docs.length-1],O=De(c);Q.set(c,{data:C,timestamp:F,lastVisible:$,queryCount:1,priority:O})}Z(c,D,!1,f),n(C)},k=>{f=!0,console.error("getSchedule error:",k),Z(c,Date.now()-a,!1,!0)}),m||(()=>{})}catch(T){return f=!0,console.error("getSchedule connection error:",T),Z(c,Date.now()-a,!1,!0),()=>{}}finally{ze()}});if(i){let f;return ut(c,()=>U(null,null,function*(){f=yield s()})),()=>{const m=me.get(c);m&&(clearTimeout(m),me.delete(c)),f&&f()}}const u=s();return u instanceof Promise?()=>{}:u}function Dn(n,e,t="PUBLIC"){return U(this,null,function*(){try{return yield Ue(ae(X,"schedule"),{dateTime:jr.fromDate(n),url:e,room:t})}catch(r){return console.error(r)}})}var Cn=Object.defineProperty,An=Object.defineProperties,$n=Object.getOwnPropertyDescriptors,Dt=Object.getOwnPropertySymbols,En=Object.prototype.hasOwnProperty,Pn=Object.prototype.propertyIsEnumerable,Ct=(n,e,t)=>e in n?Cn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,At=(n,e)=>{for(var t in e||(e={}))En.call(e,t)&&Ct(n,t,e[t]);if(Dt)for(var t of Dt(e))Pn.call(e,t)&&Ct(n,t,e[t]);return n},$t=(n,e)=>An(n,$n(e)),Fn=(n,e,t)=>new Promise((r,o)=>{var i=s=>{try{a(t.next(s))}catch(u){o(u)}},c=s=>{try{a(t.throw(s))}catch(u){o(u)}},a=s=>s.done?r(s.value):Promise.resolve(s.value).then(i,c);a((t=t.apply(n,e)).next())});function Ln(n={tables:["customTiles","gameBoard"]}){const{tables:e}=n,t=new Set(e),r={timeouts:{},queue:new Set,scheduleSync(o){this.timeouts[o]&&clearTimeout(this.timeouts[o]),this.queue.add(o),this.timeouts[o]=setTimeout(()=>{this.processSyncQueue()},2e3)},processSyncQueue(){var o;if(this.queue.size===0)return;const i=window;(o=i.authContext)!=null&&o.user&&!i.authContext.user.isAnonymous&&i.authContext.syncData(),this.queue.clear(),Object.keys(this.timeouts).forEach(c=>{clearTimeout(this.timeouts[c]),delete this.timeouts[c]})}};return{stack:"dbcore",name:"syncMiddleware",create(o){return $t(At({},o),{table(i){const c=o.table(i);return t.has(i)?$t(At({},c),{mutate:a=>Fn(null,null,function*(){const s=yield c.mutate(a);return["put","add","delete","deleteRange","update"].includes(a.type)&&r.scheduleSync(i),s})}):c}})}}}var kn=Object.defineProperty,In=(n,e,t)=>e in n?kn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ge=(n,e,t)=>In(n,typeof e!="symbol"?e+"":e,t),Rn=(n,e,t)=>new Promise((r,o)=>{var i=s=>{try{a(t.next(s))}catch(u){o(u)}},c=s=>{try{a(t.throw(s))}catch(u){o(u)}},a=s=>s.done?r(s.value):Promise.resolve(s.value).then(i,c);a((t=t.apply(n,e)).next())});class Yn extends Rr{constructor(){super("blitzedOut"),ge(this,"customTiles"),ge(this,"gameBoard"),ge(this,"customGroups"),ge(this,"localPlayerSessions"),ge(this,"localPlayerMoves"),ge(this,"localPlayerStats"),this.version(2).stores({customTiles:"++id, group, intensity, action, isEnabled, tags, gameMode, isCustom, locale",gameBoard:"++id, title, tiles, tags, gameMode, isActive"}),this.version(3).stores({customTiles:"++id, group, intensity, action, isEnabled, tags, gameMode, isCustom, locale",gameBoard:"++id, title, tiles, tags, gameMode, isActive",customGroups:"++id, name, label, locale, gameMode, isDefault, createdAt"}),this.version(4).stores({customTiles:"++id, group, intensity, action, isEnabled, tags, gameMode, isCustom, locale",gameBoard:"++id, title, tiles, tags, gameMode, isActive",customGroups:"++id, name, label, locale, gameMode, isDefault, createdAt, [name+locale+gameMode]"}).upgrade(e=>Rn(this,null,function*(){const t=yield e.table("customGroups").toArray(),r=new Set;for(const o of t){const i=`${o.name}-${o.locale}-${o.gameMode}`;r.has(i)?yield e.table("customGroups").delete(o.id):r.add(i)}})),this.version(5).stores({customTiles:"++id, group, intensity, action, isEnabled, tags, gameMode, isCustom, locale",gameBoard:"++id, title, tiles, tags, gameMode, isActive",customGroups:"++id, name, label, locale, gameMode, isDefault, createdAt, [name+locale+gameMode]",localPlayerSessions:"++id, sessionId, roomId, isActive, createdAt, updatedAt",localPlayerMoves:"++id, sessionId, playerId, timestamp, sequence",localPlayerStats:"++id, sessionId, playerId, lastActive"})}}const lt=new Yn;lt.use(Ln({tables:["customTiles","gameBoard","customGroups","localPlayerSessions","localPlayerMoves","localPlayerStats"]}));const jn=Object.freeze({__proto__:null,default:lt});var Hn=Object.defineProperty,Bn=Object.defineProperties,Gn=Object.getOwnPropertyDescriptors,Et=Object.getOwnPropertySymbols,Un=Object.prototype.hasOwnProperty,Nn=Object.prototype.propertyIsEnumerable,Pt=(n,e,t)=>e in n?Hn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,zn=(n,e)=>{for(var t in e||(e={}))Un.call(e,t)&&Pt(n,t,e[t]);if(Et)for(var t of Et(e))Nn.call(e,t)&&Pt(n,t,e[t]);return n},Wn=(n,e)=>Bn(n,Gn(e)),N=(n,e,t)=>new Promise((r,o)=>{var i=s=>{try{a(t.next(s))}catch(u){o(u)}},c=s=>{try{a(t.throw(s))}catch(u){o(u)}},a=s=>s.done?r(s.value):Promise.resolve(s.value).then(i,c);a((t=t.apply(n,e)).next())});const{customGroups:ne}=lt;ne.hook("creating",function(n,e,t){e.id||(e.id=rr()),e.locale===void 0&&(e.locale=Se.resolvedLanguage||Se.language||"en"),e.gameMode===void 0&&(e.gameMode="online"),e.isDefault===void 0&&(e.isDefault=!1);const r=new Date;e.createdAt||(e.createdAt=r),e.updatedAt=r});ne.hook("updating",function(n,e,t,r){n.updatedAt=new Date});const Vn=n=>{const e=["locale","gameMode","name","isDefault"];let t=ne.toCollection();return Object.entries(n).filter(([o])=>e.includes(o)).forEach(([o,i])=>{i==null||i===""||(t=t.filter(c=>c[o]===i))}),t},oe=(...n)=>N(null,[...n],function*(e={}){try{return yield Vn(e).toArray()}catch(t){return console.error("Error in getCustomGroups:",t),[]}}),qn=n=>N(null,null,function*(){try{return yield ne.get(n)}catch(e){console.error("Error in getCustomGroup:",e);return}}),dt=(n,e="en",t="online")=>N(null,null,function*(){try{return yield ne.where("name").equals(n).and(r=>r.locale===e&&r.gameMode===t).first()}catch(r){console.error("Error in getCustomGroupByName:",r);return}}),Jn=n=>N(null,null,function*(){try{const e=Wn(zn({},n),{createdAt:new Date,updatedAt:new Date});return yield ne.add(e)}catch(e){console.error("Error in addCustomGroup:",e);return}}),Qn=(n,e)=>N(null,null,function*(){try{return yield ne.update(n,e)}catch(t){return console.error("Error in updateCustomGroup:",t),0}}),fr=n=>N(null,null,function*(){try{yield ne.delete(n)}catch(e){console.error("Error in deleteCustomGroup:",e)}}),Kn=()=>N(null,null,function*(){try{return yield ne.clear(),!0}catch(n){return console.error("Error deleting all custom groups:",n),!1}}),Zn=n=>N(null,null,function*(){try{const e=new Date,t=n.map(r=>({name:r.name||"",label:r.label||"",intensities:r.intensities||[],id:r.id||rr(),locale:r.locale||"en",gameMode:r.gameMode||"online",isDefault:r.isDefault||!1,createdAt:r.createdAt||e,updatedAt:r.updatedAt||e}));return yield ne.bulkAdd(t)}catch(e){console.error("Error in importCustomGroups:",e);return}}),Xn=(n="en",e="online")=>N(null,null,function*(){try{const t=yield oe({locale:n,gameMode:e,isDefault:!0});return t.length>0?t:[]}catch(t){return console.error("Error creating default groups:",t),[]}}),eo=(n,e="en",t="online")=>N(null,null,function*(){try{const r=yield dt(n,e,t);return(r==null?void 0:r.intensities)||[]}catch(r){return console.error("Error in getGroupIntensities:",r),[]}}),to=(n,e="en",t="online",r)=>N(null,null,function*(){try{const o=yield dt(n,e,t);return!!(!o||r&&o.id===r)}catch(o){return console.error("Error in isGroupNameUnique:",o),!1}}),pr=n=>N(null,null,function*(){const e=Se.resolvedLanguage||Se.language||"en";return oe({locale:e,gameMode:n||"online"})}),mr=(n="en",e="online")=>N(null,null,function*(){try{const t=yield oe({locale:n,gameMode:e}),r=new Map;t.forEach(i=>{const c=r.get(i.name)||[];c.push(i),r.set(i.name,c)});let o=0;for(const[,i]of r)if(i.length>1){i.sort((c,a)=>{try{const s=c.createdAt instanceof Date?c.createdAt.getTime():new Date(c.createdAt).getTime(),u=a.createdAt instanceof Date?a.createdAt.getTime():new Date(a.createdAt).getTime();return s-u}catch(s){return console.warn("Date parsing failed in removeDuplicateGroups, using createdAt fallback:",s),c.createdAt.getTime()-a.createdAt.getTime()}});for(let c=1;c<i.length;c++)yield fr(i[c].id),o++}return o}catch(t){return console.error("Error in removeDuplicateGroups:",t),0}}),ro=()=>N(null,null,function*(){return 0}),ht=(n="en",e="online")=>N(null,null,function*(){try{return yield mr(n,e),(yield oe({locale:n,gameMode:e})).filter((o,i,c)=>c.findIndex(a=>a.name===o.name)===i)}catch(t){return console.error("❌ getAllAvailableGroups: Database error",{locale:n,gameMode:e,error:t}),[]}}),no=(n="en",e="online")=>N(null,null,function*(){try{const{getTiles:t}=yield J(()=>import("./chunk-E8HqAuJ1.js").then(function(a){return a.p}),__vite__mapDeps([0,1,2,3,4,5])),r=yield pr(e),o=yield t({locale:n,gameMode:e,isCustom:1}),i=new Set(o.map(a=>a.group));return r.filter(a=>!a.isDefault&&i.has(a.name))}catch(t){return console.error("Error in getCustomGroupsWithTiles:",t),[]}}),oo=()=>N(null,null,function*(){try{const n=yield oe({isDefault:!0});return[...new Set(n.map(t=>t.locale))].sort()}catch(n){return console.error("Error getting available locales:",n),["en"]}}),so=n=>N(null,null,function*(){try{const e={isDefault:!0};n&&(e.locale=n);const t=yield oe(e);return[...new Set(t.map(o=>o.gameMode))].sort()}catch(e){return console.error("Error getting available game modes:",e),["online"]}}),io=(n,e)=>N(null,null,function*(){try{return(yield oe({locale:n,gameMode:e,isDefault:!0})).map(r=>r.name).sort()}catch(t){return console.error("Error getting action groups for mode:",t),[]}}),ao=()=>N(null,null,function*(){try{const n=yield oe({isDefault:!0});return[...new Set(n.map(t=>t.name))].sort()}catch(n){return console.error("Error getting all action group names:",n),[]}}),co=()=>N(null,null,function*(){try{const n=yield oe({isDefault:!0}),e=new Map;return n.forEach(t=>{e.has(t.name)||e.set(t.name,{locales:new Set,gameModes:new Set,combinations:[]});const r=e.get(t.name);r?(r.locales.add(t.locale),r.gameModes.add(t.gameMode),r.combinations.push({locale:t.locale,gameMode:t.gameMode})):console.error(`Unexpected error: group data not found for group: ${t.name}`)}),Array.from(e.entries()).map(([t,r])=>({groupName:t,locales:Array.from(r.locales).sort(),gameModes:Array.from(r.gameModes).sort(),combinations:r.combinations})).sort((t,r)=>t.groupName.localeCompare(r.groupName))}catch(n){return console.error("Error getting group availability:",n),[]}}),ni=Object.freeze({__proto__:null,addCustomGroup:Jn,createDefaultGroups:Xn,deleteAllCustomGroups:Kn,deleteCustomGroup:fr,getActionGroupsForMode:io,getAllActionGroupNames:ao,getAllAvailableGroups:ht,getAvailableGameModes:so,getAvailableLocales:oo,getCurrentGroups:pr,getCustomGroup:qn,getCustomGroupByName:dt,getCustomGroups:oe,getCustomGroupsWithTiles:no,getGroupAvailability:co,getGroupIntensities:eo,importCustomGroups:Zn,isGroupNameUnique:to,recreateDefaultGroups:ro,removeDuplicateGroups:mr,updateCustomGroup:Qn});function uo(n,e){let t;try{t=n()}catch(o){return}return{getItem:o=>{var i;const c=s=>s===null?null:JSON.parse(s,void 0),a=(i=t.getItem(o))!=null?i:null;return a instanceof Promise?a.then(c):c(a)},setItem:(o,i)=>t.setItem(o,JSON.stringify(i,void 0)),removeItem:o=>t.removeItem(o)}}const nt=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return nt(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return nt(r)(t)}}}},lo=(n,e)=>(t,r,o)=>{let i=pe({storage:uo(()=>localStorage),partialize:F=>F,version:0,merge:(F,D)=>pe(pe({},D),F)},e),c=!1;const a=new Set,s=new Set;let u=i.storage;if(!u)return n((...F)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...F)},r,o);const f=()=>{const F=i.partialize(pe({},r()));return u.setItem(i.name,{state:F,version:i.version})},m=o.setState;o.setState=(F,D)=>{m(F,D),f()};const T=n((...F)=>{t(...F),f()},r,o);o.getInitialState=()=>T;let A;const k=()=>{var F,D;if(!u)return;c=!1,a.forEach($=>{var O;return $((O=r())!=null?O:T)});const C=((D=i.onRehydrateStorage)==null?void 0:D.call(i,(F=r())!=null?F:T))||void 0;return nt(u.getItem.bind(u))(i.name).then($=>{if($)if(typeof $.version=="number"&&$.version!==i.version){if(i.migrate){const O=i.migrate($.state,$.version);return O instanceof Promise?O.then(j=>[!0,j]):[!0,O]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,$.state];return[!1,void 0]}).then($=>{var O;const[j,I]=$;if(A=i.merge(I,(O=r())!=null?O:T),t(A,!0),j)return f()}).then(()=>{C==null||C(A,void 0),A=r(),c=!0,s.forEach($=>$(A))}).catch($=>{C==null||C(void 0,$)})};return o.persist={setOptions:F=>{i=pe(pe({},i),F),F.storage&&(u=F.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>k(),hasHydrated:()=>c,onHydrate:F=>(a.add(F),()=>{a.delete(F)}),onFinishHydration:F=>(s.add(F),()=>{s.delete(F)})},i.skipHydration||k(),A||T},ho=lo;var fo=Object.defineProperty,po=Object.defineProperties,mo=Object.getOwnPropertyDescriptors,Ft=Object.getOwnPropertySymbols,go=Object.prototype.hasOwnProperty,yo=Object.prototype.propertyIsEnumerable,Lt=(n,e,t)=>e in n?fo(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,le=(n,e)=>{for(var t in e||(e={}))go.call(e,t)&&Lt(n,t,e[t]);if(Ft)for(var t of Ft(e))yo.call(e,t)&&Lt(n,t,e[t]);return n},$e=(n,e)=>po(n,mo(e));const kt={locale:"en",gameMode:"online",boardUpdated:!1,room:"PUBLIC",background:"color",roomBackground:"useAppBackground",selectedActions:{},hasSeenRollButton:!1,themeMode:"system",playerDialog:!0},We=nr()(ho(n=>({settings:kt,updateSettings:e=>n(t=>({settings:le(le({},t.settings),e)})),setLocale:e=>n(t=>({settings:$e(le({},t.settings),{locale:e})})),resetSettings:()=>n({settings:kt}),updateSelectedAction:(e,t)=>n(r=>{const o=le({},r.settings.selectedActions);return t===null?delete o[e]:o[e]=t,{settings:$e(le({},r.settings),{selectedActions:o})}}),removeSelectedAction:e=>n(t=>{const r=le({},t.settings.selectedActions);return delete r[e],{settings:$e(le({},t.settings),{selectedActions:r})}}),clearSelectedActions:()=>n(e=>({settings:$e(le({},e.settings),{selectedActions:{}})})),getSelectedActionsByType:e=>{const{selectedActions:t={}}=We.getState().settings;return Object.entries(t||{}).filter(([,o])=>o.type===e).reduce((o,[i,c])=>(o[i]=c,o),{})}}),{name:"gameSettings",partialize:n=>({settings:n.settings})})),oi=()=>{const{settings:n,updateSettings:e}=We();return[n,e]},si=()=>{const{settings:n,updateSettings:e}=We();return{settings:n,updateSettings:e}};var vo=(n,e,t)=>new Promise((r,o)=>{var i=s=>{try{a(t.next(s))}catch(u){o(u)}},c=s=>{try{a(t.throw(s))}catch(u){o(u)}},a=s=>s.done?r(s.value):Promise.resolve(s.value).then(i,c);a((t=t.apply(n,e)).next())});const bo=n=>{const e={};for(const t of n){const r={label:t.label||t.name,type:t.type||"action",actions:{None:[]}};if(t.intensities&&Array.isArray(t.intensities))for(const o of t.intensities)r.actions[o.label]=[];e[t.name]=r}return e},xo=(n="en",e="online")=>vo(null,null,function*(){try{const t=yield ht(n,e);return bo(t)}catch(t){return console.error("Error importing actions from Dexie:",t),{}}});var wo=(n,e,t)=>new Promise((r,o)=>{var i=s=>{try{a(t.next(s))}catch(u){o(u)}},c=s=>{try{a(t.throw(s))}catch(u){o(u)}},a=s=>s.done?r(s.value):Promise.resolve(s.value).then(i,c);a((t=t.apply(n,e)).next())});const _o=(n="en",e="online")=>wo(null,null,function*(){try{const[t,r]=yield Promise.all([xo(n,e).catch(()=>({})),ht(n,e).catch(()=>[])]),o=Object.keys(t).length;if(r.length<o)return!1;const c=Object.keys(t),a=new Set(r.map(s=>s.name));for(const s of c)if(!a.has(s))return!1;return!0}catch(t){return console.error("Error in isDexieDataComplete:",t),!1}}),et=(n,e,t)=>{const r=n[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((o,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},It=5e3,Mo={fallbackLng:"en",supportedLngs:["en","es","fr","zh","hi"],ns:["translation","errors"],defaultNS:"translation",interpolation:{escapeValue:!1},react:{useSuspense:!1},detection:{order:["querystring","cookie","localStorage","navigator","htmlTag"],caches:["localStorage","cookie"]},load:"currentOnly",preload:!1,cleanCode:!0},So=(n,e)=>e==="translation"?et(Object.assign({"./locales/en/translation.json":()=>J(()=>import("./translation.json-DVaq1TOh.js"),[]),"./locales/es/translation.json":()=>J(()=>import("./translation.json-CJ7f32RE.js"),[]),"./locales/fr/translation.json":()=>J(()=>import("./translation.json-AuqOn_4j.js"),[]),"./locales/hi/translation.json":()=>J(()=>import("./translation.json-CDvHDxX_.js"),[]),"./locales/zh/translation.json":()=>J(()=>import("./translation.json-D_BuH3xK.js"),[])}),`./locales/${n}/translation.json`,4):et(Object.assign({"./locales/en/translation.json":()=>J(()=>import("./translation.json-DVaq1TOh.js"),[]),"./locales/es/translation.json":()=>J(()=>import("./translation.json-CJ7f32RE.js"),[]),"./locales/fr/translation.json":()=>J(()=>import("./translation.json-AuqOn_4j.js"),[]),"./locales/hi/translation.json":()=>J(()=>import("./translation.json-CDvHDxX_.js"),[]),"./locales/zh/translation.json":()=>J(()=>import("./translation.json-D_BuH3xK.js"),[])}),`./locales/${n}/${e}.json`,4).catch(()=>et(Object.assign({"./locales/en/translation.json":()=>J(()=>import("./translation.json-DVaq1TOh.js"),[])}),`./locales/en/${e}.json`,4)),q=Se.use(Cr).use(Ar).use($r(So));q.init(Mo).then(()=>{(()=>{const e=q.language,t=["en","es","fr"].filter(r=>r!==e);typeof window!="undefined"&&"requestIdleCallback"in window?window.requestIdleCallback(()=>{t.forEach(r=>{var o;(o=q==null?void 0:q.options)!=null&&o.supportedLngs&&Array.isArray(q.options.supportedLngs)&&q.options.supportedLngs.includes(r)&&q.loadLanguages(r).catch(console.warn)})},{timeout:It}):setTimeout(()=>{t.forEach(r=>{var o;(o=q==null?void 0:q.options)!=null&&o.supportedLngs&&Array.isArray(q.options.supportedLngs)&&q.options.supportedLngs.includes(r)&&q.loadLanguages(r).catch(console.warn)})},It)})()}).catch(console.error);var Oo=Object.defineProperty,To=Object.defineProperties,Do=Object.getOwnPropertyDescriptors,Rt=Object.getOwnPropertySymbols,Co=Object.prototype.hasOwnProperty,Ao=Object.prototype.propertyIsEnumerable,Yt=(n,e,t)=>e in n?Oo(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ee=(n,e)=>{for(var t in e||(e={}))Co.call(e,t)&&Yt(n,t,e[t]);if(Rt)for(var t of Rt(e))Ao.call(e,t)&&Yt(n,t,e[t]);return n},$o=(n,e)=>To(n,Do(e)),gr=(n,e,t)=>new Promise((r,o)=>{var i=s=>{try{a(t.next(s))}catch(u){o(u)}},c=s=>{try{a(t.throw(s))}catch(u){o(u)}},a=s=>s.done?r(s.value):Promise.resolve(s.value).then(i,c);a((t=t.apply(n,e)).next())});const yr="blitzed-out-migration-health",jt=3,Eo=300*1e3,vr=()=>{try{const n=localStorage.getItem(yr);return n?JSON.parse(n):{}}catch(n){return console.warn("Failed to load migration health state:",n),{}}},Pe=(n,e,t)=>{try{const r=`${n}-${e}`,o=vr();o[r]=Ee(Ee(Ee({},{failureCount:0,lastValidation:new Date().toISOString(),consecutiveFailures:0}),o[r]),t),localStorage.setItem(yr,JSON.stringify(o))}catch(r){console.warn("Failed to update migration health state:",r)}},tt=(n,e="online")=>gr(null,null,function*(){const t=n||q.resolvedLanguage||q.language||"en",r=`${t}-${e}`,i=vr()[r]||{failureCount:0,lastValidation:new Date(0).toISOString(),consecutiveFailures:0},c=$o(Ee({},i),{lastValidation:new Date(i.lastValidation)}),a={isHealthy:!1,requiresRecovery:!1,lastValidation:c.lastValidation,failureCount:c.failureCount,details:{migrationStatus:"incomplete",dataComplete:!1,locale:t,gameMode:e}};try{if(Date.now()-c.lastValidation.getTime()<Eo&&c.consecutiveFailures===0)return a.isHealthy=!0,a.details.migrationStatus="completed",a.details.dataComplete=!0,a;const u=yield _o(t,e);if(a.details.dataComplete=u,u)a.isHealthy=!0,a.details.migrationStatus="completed",Pe(t,e,{consecutiveFailures:0,lastValidation:new Date().toISOString()});else{const f=Po();a.details.migrationStatus=f;const m=c.failureCount+1,T=c.consecutiveFailures+1;Pe(t,e,{failureCount:m,consecutiveFailures:T,lastValidation:new Date().toISOString()}),a.failureCount=m,a.requiresRecovery=T>=jt,a.requiresRecovery&&(a.details.errorMessage=`Migration failed ${T} consecutive times. Data incomplete for ${t}/${e}.`)}return a}catch(s){console.error("Migration health check failed:",s);const u=c.failureCount+1,f=c.consecutiveFailures+1;return Pe(t,e,{failureCount:u,consecutiveFailures:f,lastValidation:new Date().toISOString()}),a.failureCount=u,a.requiresRecovery=f>=jt,a.details.migrationStatus="failed",a.details.errorMessage=`Health check failed: ${s instanceof Error?s.message:String(s)}`,a}}),Po=()=>{try{const n=localStorage.getItem("blitzed-out-action-groups-migration");if(n){const t=JSON.parse(n);if(t.completed&&t.version==="2.1.1")return"completed"}const e=localStorage.getItem("blitzed-out-background-migration");if(e){const t=JSON.parse(e);if(t.completedLanguages&&t.completedLanguages.length>0)return"completed"}return"incomplete"}catch(n){return console.warn("Failed to check migration status from storage:",n),"incomplete"}},Ht=(n,e="online")=>gr(null,null,function*(){const t=n||q.resolvedLanguage||q.language||"en";try{const r=["blitzed-out-migration-in-progress","blitzed-out-current-language-migration","blitzed-out-background-migration-in-progress"];let o=!1;r.forEach(i=>{try{localStorage.removeItem(i)}catch(c){console.warn(`Failed to remove ${i}:`,c),o=!0}});try{Pe(t,e,{failureCount:0,consecutiveFailures:0,lastValidation:new Date(0).toISOString()})}catch(i){console.warn("Failed to update health state:",i),o=!0}return!o}catch(r){return console.error("Migration recovery failed:",r),!1}});var de=(n,e,t)=>new Promise((r,o)=>{var i=s=>{try{a(t.next(s))}catch(u){o(u)}},c=s=>{try{a(t.throw(s))}catch(u){o(u)}},a=s=>s.done?r(s.value):Promise.resolve(s.value).then(i,c);a((t=t.apply(n,e)).next())});const br=Y.createContext(void 0);function ii(){const n=Y.useContext(br);if(n===void 0)throw new Error("useMigration must be used within a MigrationProvider");return n}function Fo({children:n}){const{i18n:e}=Er(),[t,r]=Y.useState(!1),[o,i]=Y.useState(!1),[c,a]=Y.useState(!1),[s,u]=Y.useState(null),[f,m]=Y.useState(!1),[T,A]=Y.useState(!1),[k,F]=Y.useState(null),D=Y.useRef(new Set),C=Y.useCallback(()=>de(null,null,function*(){return yield J(()=>import("./migrationService.ts-BJD6Wc1i.js"),__vite__mapDeps([6,0,1,2,3,4,5]))}),[]);Y.useEffect(()=>{const g=()=>de(null,null,function*(){try{const _=yield C(),h=e.language||"en";if(!(yield _.verifyMigrationIntegrity(h,"online"))){_.fixMigrationStatusCorruption(),i(!1),a(!1);return}const d=_.isCurrentLanguageMigrationCompleted(h),E=_.isMigrationCompleted();if(i(d),a(E),d){const p=yield tt(h,"online");m(p.isHealthy),!p.isHealthy&&p.requiresRecovery&&!T&&(A(!0),(yield Ht(h,"online"))?(i(!1),u(null)):u("Migration recovery failed. Some features may not work correctly."))}}catch(_){console.warn("Failed to check migration status:",_),u("Failed to check migration status"),m(!1)}});e.language&&e.language!=="undefined"&&g()},[e.language,C,T]);const $=Y.useCallback(()=>de(null,null,function*(){const g=e.language||"en";try{if(r(!0),u(null),yield Ht(g,"online")){A(!0),i(!1),m(!1);const h=yield C();if(yield h.runMigrationIfNeeded()){yield h.cleanupDuplicatesIfNeeded(),i(!0),a(h.isMigrationCompleted());const d=yield tt(g,"online");m(d.isHealthy)}}else u("Force recovery failed. Please try refreshing the page.")}catch(_){console.error("Force recovery failed:",_),u("Force recovery failed. Please try refreshing the page.")}finally{r(!1)}}),[e.language,C]),O=Y.useCallback(()=>de(null,null,function*(){if(!t){r(!0),u(null);try{const g=yield C();if(yield g.runMigrationIfNeeded()){yield g.cleanupDuplicatesIfNeeded(),i(!0),a(g.isMigrationCompleted());const h=e.language||"en",x=yield tt(h,"online");m(x.isHealthy),x.isHealthy||u("Migration completed but data validation failed. Some features may not work correctly.")}else u("Migration failed but app will continue with existing data"),m(!1)}catch(g){console.error("Migration failed:",g),u("Migration failed but app will continue with existing data"),m(!1)}finally{r(!1)}}}),[t,C,e.language]),j=Y.useCallback(g=>{k&&clearTimeout(k);const _=setTimeout(()=>de(null,null,function*(){try{const h=yield C();if(h.isCurrentLanguageMigrationCompleted(g)){i(!0);return}r(!0),u(null),(yield h.ensureLanguageMigrated(g))?(i(!0),a(h.isMigrationCompleted())):u("Migration failed but app will continue with existing data")}catch(h){console.error("Error during language migration:",h),u("Migration failed but app will continue with existing data")}finally{r(!1)}}),300);F(_)},[k,C]),I=Y.useCallback(g=>de(null,null,function*(){const _=g||e.language||"en";try{const h=yield C();if(h.isCurrentLanguageMigrationCompleted(_))return i(!0),!0;r(!0);const x=yield h.ensureLanguageMigrated(_);return x&&i(!0),x}catch(h){return console.error(`Failed to ensure ${_} migration:`,h),!1}finally{r(!1)}}),[e.language,C]);Y.useEffect(()=>{if(!e.language||e.language==="undefined")return;const g=h=>{j(h)};return e.on("languageChanged",g),de(null,null,function*(){try{const h=yield C(),x=e.language||"en",d=h.isCurrentLanguageMigrationCompleted(x);i(d);const E=`${x}-initial`;!d&&!t&&!D.current.has(E)&&(D.current.add(E),r(!0),setTimeout(()=>de(null,null,function*(){try{const p=yield C();(yield p.ensureLanguageMigrated(x))?(i(!0),a(p.isMigrationCompleted())):(u("Migration failed but app will continue with existing data"),D.current.delete(E))}catch(p){console.error("Error during migration execution:",p),u("Migration failed but app will continue with existing data"),D.current.delete(E)}finally{r(!1)}}),0))}catch(h){console.error("Error during initial migration check:",h),r(!1)}}),()=>{e.off("languageChanged",g),k&&clearTimeout(k)}},[e,j,t,k,C]);const l={isMigrationCompleted:c,isMigrationInProgress:t,currentLanguageMigrated:o,error:s,isHealthy:f,recoveryAttempted:T,triggerMigration:O,ensureLanguageMigrated:I,forceRecovery:$};return te.jsx(br.Provider,{value:l,children:n})}var Fe={exports:{}},Lo=Fe.exports,Bt;function ko(){return Bt||(Bt=1,function(n,e){(function(t,r){n.exports=r()})(Lo,function(){var t=1e3,r=6e4,o=36e5,i="millisecond",c="second",a="minute",s="hour",u="day",f="week",m="month",T="quarter",A="year",k="date",F="Invalid Date",D=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,$={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(b){var y=["th","st","nd","rd"],v=b%100;return"["+b+(y[(v-20)%10]||y[v]||y[0])+"]"}},O=function(b,y,v){var S=String(b);return!S||S.length>=y?b:""+Array(y+1-S.length).join(v)+b},j={s:O,z:function(b){var y=-b.utcOffset(),v=Math.abs(y),S=Math.floor(v/60),w=v%60;return(y<=0?"+":"-")+O(S,2,"0")+":"+O(w,2,"0")},m:function b(y,v){if(y.date()<v.date())return-b(v,y);var S=12*(v.year()-y.year())+(v.month()-y.month()),w=y.clone().add(S,m),M=v-w<0,P=y.clone().add(S+(M?-1:1),m);return+(-(S+(v-w)/(M?w-P:P-w))||0)},a:function(b){return b<0?Math.ceil(b)||0:Math.floor(b)},p:function(b){return{M:m,y:A,w:f,d:u,D:k,h:s,m:a,s:c,ms:i,Q:T}[b]||String(b||"").toLowerCase().replace(/s$/,"")},u:function(b){return b===void 0}},I="en",l={};l[I]=$;var g="$isDayjsObject",_=function(b){return b instanceof E||!(!b||!b[g])},h=function b(y,v,S){var w;if(!y)return I;if(typeof y=="string"){var M=y.toLowerCase();l[M]&&(w=M),v&&(l[M]=v,w=M);var P=y.split("-");if(!w&&P.length>1)return b(P[0])}else{var L=y.name;l[L]=y,w=L}return!S&&w&&(I=w),w||!S&&I},x=function(b,y){if(_(b))return b.clone();var v=typeof y=="object"?y:{};return v.date=b,v.args=arguments,new E(v)},d=j;d.l=h,d.i=_,d.w=function(b,y){return x(b,{locale:y.$L,utc:y.$u,x:y.$x,$offset:y.$offset})};var E=function(){function b(v){this.$L=h(v.locale,null,!0),this.parse(v),this.$x=this.$x||v.x||{},this[g]=!0}var y=b.prototype;return y.parse=function(v){this.$d=function(S){var w=S.date,M=S.utc;if(w===null)return new Date(NaN);if(d.u(w))return new Date;if(w instanceof Date)return new Date(w);if(typeof w=="string"&&!/Z$/i.test(w)){var P=w.match(D);if(P){var L=P[2]-1||0,R=(P[7]||"0").substring(0,3);return M?new Date(Date.UTC(P[1],L,P[3]||1,P[4]||0,P[5]||0,P[6]||0,R)):new Date(P[1],L,P[3]||1,P[4]||0,P[5]||0,P[6]||0,R)}}return new Date(w)}(v),this.init()},y.init=function(){var v=this.$d;this.$y=v.getFullYear(),this.$M=v.getMonth(),this.$D=v.getDate(),this.$W=v.getDay(),this.$H=v.getHours(),this.$m=v.getMinutes(),this.$s=v.getSeconds(),this.$ms=v.getMilliseconds()},y.$utils=function(){return d},y.isValid=function(){return this.$d.toString()!==F},y.isSame=function(v,S){var w=x(v);return this.startOf(S)<=w&&w<=this.endOf(S)},y.isAfter=function(v,S){return x(v)<this.startOf(S)},y.isBefore=function(v,S){return this.endOf(S)<x(v)},y.$g=function(v,S,w){return d.u(v)?this[S]:this.set(w,v)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(v,S){var w=this,M=!!d.u(S)||S,P=d.p(v),L=function(ee,V){var K=d.w(w.$u?Date.UTC(w.$y,V,ee):new Date(w.$y,V,ee),w);return M?K:K.endOf(u)},R=function(ee,V){return d.w(w.toDate()[ee].apply(w.toDate("s"),(M?[0,0,0,0]:[23,59,59,999]).slice(V)),w)},H=this.$W,G=this.$M,z=this.$D,ce="set"+(this.$u?"UTC":"");switch(P){case A:return M?L(1,0):L(31,11);case m:return M?L(1,G):L(0,G+1);case f:var se=this.$locale().weekStart||0,fe=(H<se?H+7:H)-se;return L(M?z-fe:z+(6-fe),G);case u:case k:return R(ce+"Hours",0);case s:return R(ce+"Minutes",1);case a:return R(ce+"Seconds",2);case c:return R(ce+"Milliseconds",3);default:return this.clone()}},y.endOf=function(v){return this.startOf(v,!1)},y.$set=function(v,S){var w,M=d.p(v),P="set"+(this.$u?"UTC":""),L=(w={},w[u]=P+"Date",w[k]=P+"Date",w[m]=P+"Month",w[A]=P+"FullYear",w[s]=P+"Hours",w[a]=P+"Minutes",w[c]=P+"Seconds",w[i]=P+"Milliseconds",w)[M],R=M===u?this.$D+(S-this.$W):S;if(M===m||M===A){var H=this.clone().set(k,1);H.$d[L](R),H.init(),this.$d=H.set(k,Math.min(this.$D,H.daysInMonth())).$d}else L&&this.$d[L](R);return this.init(),this},y.set=function(v,S){return this.clone().$set(v,S)},y.get=function(v){return this[d.p(v)]()},y.add=function(v,S){var w,M=this;v=Number(v);var P=d.p(S),L=function(G){var z=x(M);return d.w(z.date(z.date()+Math.round(G*v)),M)};if(P===m)return this.set(m,this.$M+v);if(P===A)return this.set(A,this.$y+v);if(P===u)return L(1);if(P===f)return L(7);var R=(w={},w[a]=r,w[s]=o,w[c]=t,w)[P]||1,H=this.$d.getTime()+v*R;return d.w(H,this)},y.subtract=function(v,S){return this.add(-1*v,S)},y.format=function(v){var S=this,w=this.$locale();if(!this.isValid())return w.invalidDate||F;var M=v||"YYYY-MM-DDTHH:mm:ssZ",P=d.z(this),L=this.$H,R=this.$m,H=this.$M,G=w.weekdays,z=w.months,ce=w.meridiem,se=function(V,K,ie,ue){return V&&(V[K]||V(S,M))||ie[K].slice(0,ue)},fe=function(V){return d.s(L%12||12,V,"0")},ee=ce||function(V,K,ie){var ue=V<12?"AM":"PM";return ie?ue.toLowerCase():ue};return M.replace(C,function(V,K){return K||function(ie){switch(ie){case"YY":return String(S.$y).slice(-2);case"YYYY":return d.s(S.$y,4,"0");case"M":return H+1;case"MM":return d.s(H+1,2,"0");case"MMM":return se(w.monthsShort,H,z,3);case"MMMM":return se(z,H);case"D":return S.$D;case"DD":return d.s(S.$D,2,"0");case"d":return String(S.$W);case"dd":return se(w.weekdaysMin,S.$W,G,2);case"ddd":return se(w.weekdaysShort,S.$W,G,3);case"dddd":return G[S.$W];case"H":return String(L);case"HH":return d.s(L,2,"0");case"h":return fe(1);case"hh":return fe(2);case"a":return ee(L,R,!0);case"A":return ee(L,R,!1);case"m":return String(R);case"mm":return d.s(R,2,"0");case"s":return String(S.$s);case"ss":return d.s(S.$s,2,"0");case"SSS":return d.s(S.$ms,3,"0");case"Z":return P}return null}(V)||P.replace(":","")})},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(v,S,w){var M,P=this,L=d.p(S),R=x(v),H=(R.utcOffset()-this.utcOffset())*r,G=this-R,z=function(){return d.m(P,R)};switch(L){case A:M=z()/12;break;case m:M=z();break;case T:M=z()/3;break;case f:M=(G-H)/6048e5;break;case u:M=(G-H)/864e5;break;case s:M=G/o;break;case a:M=G/r;break;case c:M=G/t;break;default:M=G}return w?M:d.a(M)},y.daysInMonth=function(){return this.endOf(m).$D},y.$locale=function(){return l[this.$L]},y.locale=function(v,S){if(!v)return this.$L;var w=this.clone(),M=h(v,S,!0);return M&&(w.$L=M),w},y.clone=function(){return d.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},b}(),p=E.prototype;return x.prototype=p,[["$ms",i],["$s",c],["$m",a],["$H",s],["$W",u],["$M",m],["$y",A],["$D",k]].forEach(function(b){p[b[1]]=function(y){return this.$g(y,b[0],b[1])}}),x.extend=function(b,y){return b.$i||(b(y,E,x),b.$i=!0),x},x.locale=h,x.isDayjs=_,x.unix=function(b){return x(1e3*b)},x.en=l[I],x.Ls=l,x.p={},x})}(Fe)),Fe.exports}var Io=ko();const W=ye(Io);var Ro=Object.defineProperty,Yo=Object.defineProperties,jo=Object.getOwnPropertyDescriptors,Gt=Object.getOwnPropertySymbols,Ho=Object.prototype.hasOwnProperty,Bo=Object.prototype.propertyIsEnumerable,Ut=(n,e,t)=>e in n?Ro(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,we=(n,e)=>{for(var t in e||(e={}))Ho.call(e,t)&&Ut(n,t,e[t]);if(Gt)for(var t of Gt(e))Bo.call(e,t)&&Ut(n,t,e[t]);return n},_e=(n,e)=>Yo(n,jo(e));const Nt=300*1e3,Go=100,Uo=nr((n,e)=>({schedule:[],loading:!1,error:null,_cache:{upcomingSchedule:{data:[],timestamp:0,limit:0},roomSchedule:{}},_performanceMetrics:{lastUpdateTime:Date.now(),updateCount:0,cacheHitRate:0},_pendingUpdates:[],_batchTimeout:null,loadSchedule:t=>{const r=Date.now();n(o=>{const i=o._performanceMetrics.updateCount+1;return{schedule:t,loading:!1,error:null,_performanceMetrics:{lastUpdateTime:r,updateCount:i,cacheHitRate:o._performanceMetrics.cacheHitRate}}}),e().invalidateCache()},addScheduleItem:t=>{const r=e();n(i=>({_pendingUpdates:[...i._pendingUpdates,t]})),r._batchTimeout&&clearTimeout(r._batchTimeout);const o=setTimeout(()=>{e().flushPendingScheduleUpdates()},Go);n(()=>({_batchTimeout:o}))},batchAddScheduleItems:t=>n(r=>{const o=[...r.schedule,...t],i=Date.now(),c=r._performanceMetrics.updateCount+1;return{schedule:o,_performanceMetrics:{lastUpdateTime:i,updateCount:c,cacheHitRate:r._performanceMetrics.cacheHitRate}}}),flushPendingScheduleUpdates:()=>{const t=e();t._pendingUpdates.length!==0&&(t._batchTimeout&&clearTimeout(t._batchTimeout),t.batchAddScheduleItems(t._pendingUpdates),n(()=>({_pendingUpdates:[],_batchTimeout:null})),t.invalidateCache())},removeScheduleItem:t=>{n(r=>({schedule:r.schedule.filter(o=>o.id!==t)})),e().invalidateCache()},clearSchedule:()=>{const t=e();t._batchTimeout&&clearTimeout(t._batchTimeout),n(()=>({schedule:[],loading:!1,error:null,_pendingUpdates:[],_batchTimeout:null})),e().invalidateCache()},invalidateCache:()=>n(()=>({_cache:{upcomingSchedule:{data:[],timestamp:0,limit:0},roomSchedule:{}}})),setLoading:t=>n(()=>({loading:t})),setError:t=>n(()=>({error:t,loading:!1})),getUpcomingSchedule:(t=10)=>{const r=e(),o=Date.now(),i=r._cache.upcomingSchedule;if(i.timestamp>0&&o-i.timestamp<Nt&&i.limit>=t){const u=r._performanceMetrics.updateCount+1,m=(r._performanceMetrics.cacheHitRate*(u-1)+1)/u;return n(T=>({_performanceMetrics:_e(we({},T._performanceMetrics),{cacheHitRate:m})})),i.data.slice(0,t)}const a=W(),s=r.schedule.filter(u=>u.dateTime.isAfter(a)).sort((u,f)=>u.dateTime.valueOf()-f.dateTime.valueOf()).slice(0,Math.max(t,20));return n(u=>({_cache:_e(we({},u._cache),{upcomingSchedule:{data:s,timestamp:o,limit:Math.max(t,20)}})})),s.slice(0,t)},getScheduleByRoom:t=>{const r=e(),o=Date.now(),i=r._cache.roomSchedule[t];if(i&&i.timestamp>0&&o-i.timestamp<Nt){const s=r._performanceMetrics.updateCount+1,f=(r._performanceMetrics.cacheHitRate*(s-1)+1)/s;return n(m=>({_performanceMetrics:_e(we({},m._performanceMetrics),{cacheHitRate:f})})),i.data}const a=r.schedule.filter(s=>s.room===t);return n(s=>({_cache:_e(we({},s._cache),{roomSchedule:_e(we({},s._cache.roomSchedule),{[t]:{data:a,timestamp:o}})})})),a},getPerformanceMetrics:()=>e()._performanceMetrics}));var No=Object.defineProperty,zt=Object.getOwnPropertySymbols,zo=Object.prototype.hasOwnProperty,Wo=Object.prototype.propertyIsEnumerable,Wt=(n,e,t)=>e in n?No(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Vo=(n,e)=>{for(var t in e||(e={}))zo.call(e,t)&&Wt(n,t,e[t]);if(zt)for(var t of zt(e))Wo.call(e,t)&&Wt(n,t,e[t]);return n},qo=(n,e,t)=>new Promise((r,o)=>{var i=s=>{try{a(t.next(s))}catch(u){o(u)}},c=s=>{try{a(t.throw(s))}catch(u){o(u)}},a=s=>s.done?r(s.value):Promise.resolve(s.value).then(i,c);a((t=t.apply(n,e)).next())});const Jo=Pr.createContext(void 0);function Qo(n){const{schedule:e,loadSchedule:t,flushPendingScheduleUpdates:r}=Uo(),o=Y.useRef(null),i=Y.useCallback(u=>{t(u)},[t]),c=Y.useCallback((u,f,m)=>qo(null,null,function*(){try{const T=yield Dn(u,f,m);return r(),T||void 0}catch(T){throw console.error("Error adding to schedule:",T),T}}),[r]),a=Y.useCallback(()=>{o.current&&(o.current(),o.current=null),r()},[r]);Y.useEffect(()=>(a(),o.current=Tn(i),a),[i,a]),Y.useEffect(()=>a,[a]);const s=Y.useMemo(()=>({schedule:e,addToSchedule:c}),[e,c]);return te.jsx(Jo.Provider,Vo({value:s},n))}var Ko=Object.defineProperty,Zo=Object.defineProperties,Xo=Object.getOwnPropertyDescriptors,Vt=Object.getOwnPropertySymbols,es=Object.prototype.hasOwnProperty,ts=Object.prototype.propertyIsEnumerable,qt=(n,e,t)=>e in n?Ko(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ve=(n,e)=>{for(var t in e||(e={}))es.call(e,t)&&qt(n,t,e[t]);if(Vt)for(var t of Vt(e))ts.call(e,t)&&qt(n,t,e[t]);return n},qe=(n,e)=>Zo(n,Xo(e));const B={LIGHT_CYAN:"8, 145, 178",DARK_CYAN:"72, 219, 251",BRIGHT_CYAN:"34, 211, 238",LIGHT_BORDER:"75, 85, 99",DARK_BORDER:"148, 163, 184"},xr={typography:{h1:{fontWeight:700,letterSpacing:"-0.025em"},h2:{fontWeight:700,letterSpacing:"-0.025em"},h3:{fontWeight:600,letterSpacing:"-0.025em"},h4:{fontWeight:600},h5:{fontWeight:600},h6:{fontWeight:600},button:{fontWeight:500,textTransform:"none"}},shape:{borderRadius:8}},rs=n=>({MuiBox:{variants:[{props:{variant:"systemMessage"},style:({theme:e,ownerState:t})=>{const{transparent:r=!1,fullWidth:o=!1}=t;return qe(Ve({background:r?e.palette.systemMessage.transparent:e.palette.systemMessage.main,border:"none",borderRadius:16,margin:"8px auto",alignSelf:"center",padding:"8px 12px",width:"fit-content",backdropFilter:r?"blur(4px)":"none",WebkitBackdropFilter:r?"blur(4px)":"none",transition:e.transitions.create(["background-color","backdrop-filter"],{duration:e.transitions.duration.short})},o&&{maxWidth:"95%",width:"auto"}),{[e.breakpoints.down("sm")]:{maxWidth:o?"98%":"95%"}})}}]},MuiButton:{styleOverrides:{root:{borderRadius:8,padding:"8px 16px",transition:"all 0.3s ease",textTransform:"none",fontWeight:500,"&:hover":{transform:"translateY(-1px)"}},contained:({theme:e})=>({background:e.palette.primary.main,boxShadow:"none","&:hover":{background:e.palette.primary.dark,boxShadow:"none",transform:"translateY(-2px)"}}),outlined:({theme:e})=>{const t=e.palette.mode==="light";return{borderColor:`rgba(${t?B.LIGHT_CYAN:B.DARK_CYAN}, 0.5)`,color:e.palette.primary.main,"&:hover":{borderColor:`rgba(${t?B.LIGHT_CYAN:B.DARK_CYAN}, 0.8)`,background:`rgba(${t?B.LIGHT_CYAN:B.DARK_CYAN}, 0.1)`,boxShadow:`0 0 20px rgba(${t?B.LIGHT_CYAN:B.DARK_CYAN}, 0.3)`}}}}},MuiCard:{styleOverrides:{root:()=>({borderRadius:12,background:"var(--container-background)",backdropFilter:"blur(15px)",WebkitBackdropFilter:"blur(15px)",border:"1px solid var(--container-border)",boxShadow:"var(--shadow-lg)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"var(--shadow-xl)"}})}},MuiPaper:{styleOverrides:{root:{backgroundImage:"none"},elevation1:({theme:e})=>({boxShadow:e.palette.mode==="light"?"0 1px 3px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.1)":"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24)"}),elevation2:({theme:e})=>({boxShadow:e.palette.mode==="light"?"0 3px 6px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.06)":"0 3px 6px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.12)"}),elevation4:({theme:e})=>({boxShadow:e.palette.mode==="light"?"0 10px 20px rgba(0, 0, 0, 0.08), 0 3px 6px rgba(0, 0, 0, 0.05)":"0 10px 20px rgba(0, 0, 0, 0.15), 0 3px 6px rgba(0, 0, 0, 0.1)"})}},MuiTextField:{styleOverrides:{root:({theme:e})=>{const t=e.palette.mode==="light";return{"& .MuiOutlinedInput-root":{transition:"border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out",borderRadius:"8px","& .MuiOutlinedInput-notchedOutline":{borderColor:t?`rgba(${B.LIGHT_BORDER}, 0.4)`:`rgba(${B.DARK_BORDER}, 0.23)`},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:t?`rgba(${B.LIGHT_BORDER}, 0.6)`:e.palette.primary.main},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e.palette.primary.main,boxShadow:`0 0 0 2px rgba(${t?B.LIGHT_CYAN:B.BRIGHT_CYAN}, 0.2)`},"& input::placeholder":{color:t?`rgba(${B.LIGHT_BORDER}, 0.7)`:`rgba(${B.DARK_BORDER}, 0.5)`,opacity:1},"& textarea::placeholder":{color:t?`rgba(${B.LIGHT_BORDER}, 0.7)`:`rgba(${B.DARK_BORDER}, 0.5)`,opacity:1}},"& .MuiInputLabel-root":{color:t?`rgba(${B.LIGHT_BORDER}, 0.8)`:`rgba(${B.DARK_BORDER}, 0.7)`,"&.Mui-focused":{color:e.palette.primary.main}}}}}},MuiSelect:{styleOverrides:{root:({theme:e})=>{const t=e.palette.mode==="light";return{borderRadius:"8px",transition:"border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out","& .MuiOutlinedInput-notchedOutline":{borderColor:t?`rgba(${B.LIGHT_BORDER}, 0.4)`:`rgba(${B.DARK_BORDER}, 0.23)`},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:t?`rgba(${B.LIGHT_BORDER}, 0.6)`:e.palette.primary.main},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e.palette.primary.main,boxShadow:`0 0 0 2px rgba(${t?B.LIGHT_CYAN:B.BRIGHT_CYAN}, 0.2)`}}}},defaultProps:{MenuProps:{disableScrollLock:!0,BackdropProps:{invisible:!0},PaperProps:{style:{backdropFilter:"none",WebkitBackdropFilter:"none"}}}}},MuiSwitch:{styleOverrides:{switchBase:({theme:e})=>({"&.Mui-checked":{color:e.palette.primary.main,"& + .MuiSwitch-track":{backgroundColor:e.palette.primary.main}}})}},MuiSlider:{styleOverrides:{root:({theme:e})=>({color:e.palette.primary.main})}},MuiCssBaseline:{styleOverrides:{body:({theme:e})=>{const t=e.palette.mode==="light";return{scrollbarWidth:"thin",scrollbarColor:t?"#d1d5db transparent":"#4b5563 transparent","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:t?"#d1d5db":"#4b5563",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:t?"#9ca3af":"#6b7280"}}},"*":{"@media (forced-colors: active)":{"&:focus":{outline:"2px solid ButtonText !important"}},"@media (prefers-reduced-motion: reduce)":{"&, &::before, &::after":{animationDuration:"0.01ms !important",animationIterationCount:"1 !important",transitionDuration:"0.01ms !important",scrollBehavior:"auto !important"}}},".keyboard-navigation *:focus":{outline:"2px solid #22d3ee",outlineOffset:"2px"}}},MuiAppBar:{styleOverrides:{root:()=>({backgroundColor:"var(--nav-background)",borderBottom:"1px solid var(--nav-border)",boxShadow:"var(--nav-shadow)"})}},MuiContainer:{styleOverrides:{root:()=>({"&.gradient-background":{minHeight:"100vh",background:"var(--page-gradient)",padding:"2rem 0"}})}},MuiModal:{styleOverrides:{root:{"&:not(.MuiPopover-root)":{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"}}}},MuiPopover:{styleOverrides:{root:{"& .MuiModal-backdrop":{backgroundColor:"transparent",backdropFilter:"none",WebkitBackdropFilter:"none"}}}},MuiDialog:{styleOverrides:{paper:()=>({background:"var(--color-surface)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid var(--nav-border)",borderRadius:"var(--border-radius-lg)",boxShadow:"var(--shadow-lg)"})}}}),ns=qe(Ve({},xr),{palette:{mode:"light",primary:{main:"#0891b2",dark:"#0e7490",light:"#22d3ee",contrastText:"#ffffff"},secondary:{main:"#06b6d4",dark:"#0e7490",light:"#a5f3fc",contrastText:"#ffffff"},background:{default:"#f8fafc",paper:"#ffffff"},text:{primary:"#0f172a",secondary:"#475569"},divider:"rgba(148, 163, 184, 0.2)",error:{main:"#dc2626"},warning:{main:"#d97706"},systemMessage:{main:"rgba(148, 163, 184, 0.15)",transparent:"rgba(148, 163, 184, 0.25)"},info:{main:"#2563eb"},success:{main:"#059669"}}}),os=qe(Ve({},xr),{palette:{mode:"dark",primary:{main:"#22d3ee",dark:"#0891b2",light:"#67e8f9"},secondary:{main:"#48dbfb",dark:"#0e7490",light:"#a5f3fc"},background:{default:"#0f172a",paper:"#1e293b"},text:{primary:"#f8fafc",secondary:"#cbd5e1"},divider:"rgba(148, 163, 184, 0.12)",error:{main:"#b91c1c"},warning:{main:"#b45309"},systemMessage:{main:"rgba(148, 163, 184, 0.1)",transparent:"rgba(148, 163, 184, 0.2)"},info:{main:"#1d4ed8"},success:{main:"#047857"}}}),wr=n=>{const e=mt(n);return mt(qe(Ve({},e),{components:rs(n.palette.mode)}))},ss=tr(wr(ns)),is=tr(wr(os)),as=n=>n==="light"?ss:is,_r=Y.createContext(void 0);function cs({children:n,defaultMode:e="system"}){const{settings:t,updateSettings:r}=We(),o=Fr("(prefers-color-scheme: dark)",{noSsr:!0}),i=t.themeMode||e,c=Y.useMemo(()=>i==="system"?o?"dark":"light":i,[i,o]),a=Y.useMemo(()=>as(c),[c]),s=m=>{r({themeMode:m})},u=()=>{s(c==="light"?"dark":"light")};Y.useEffect(()=>{},[o,i]),Y.useEffect(()=>{const m=document.body;return m.style.transition="background-color 0.3s ease, color 0.3s ease",m.classList.remove("theme-light","theme-dark"),m.classList.add(`theme-${c}`),()=>{m.style.transition="",m.classList.remove("theme-light","theme-dark")}},[c]);const f={theme:a,themeMode:i,resolvedThemeMode:c,prefersDarkMode:o,setThemeMode:s,toggleTheme:u};return te.jsx(_r.Provider,{value:f,children:n})}function us(){const n=Y.useContext(_r);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n}var Le={exports:{}},ls=Le.exports,Jt;function ds(){return Jt||(Jt=1,function(n,e){(function(t,r){n.exports=r()})(ls,function(){var t="week",r="year";return function(o,i,c){var a=i.prototype;a.week=function(s){if(s===void 0&&(s=null),s!==null)return this.add(7*(s-this.week()),"day");var u=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var f=c(this).startOf(r).add(1,r).date(u),m=c(this).endOf(t);if(f.isBefore(m))return 1}var T=c(this).startOf(r).date(u).startOf(t).subtract(1,"millisecond"),A=this.diff(T,t,!0);return A<0?c(this).startOf("week").week():Math.ceil(A)},a.weeks=function(s){return s===void 0&&(s=null),this.week(s)}}})}(Le)),Le.exports}var hs=ds();const fs=ye(hs);var ke={exports:{}},ps=ke.exports,Qt;function ms(){return Qt||(Qt=1,function(n,e){(function(t,r){n.exports=r()})(ps,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,o=/\d/,i=/\d\d/,c=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,s={},u=function(D){return(D=+D)+(D>68?1900:2e3)},f=function(D){return function(C){this[D]=+C}},m=[/[+-]\d\d:?(\d\d)?|Z/,function(D){(this.zone||(this.zone={})).offset=function(C){if(!C||C==="Z")return 0;var $=C.match(/([+-]|\d\d)/g),O=60*$[1]+(+$[2]||0);return O===0?0:$[0]==="+"?-O:O}(D)}],T=function(D){var C=s[D];return C&&(C.indexOf?C:C.s.concat(C.f))},A=function(D,C){var $,O=s.meridiem;if(O){for(var j=1;j<=24;j+=1)if(D.indexOf(O(j,0,C))>-1){$=j>12;break}}else $=D===(C?"pm":"PM");return $},k={A:[a,function(D){this.afternoon=A(D,!1)}],a:[a,function(D){this.afternoon=A(D,!0)}],Q:[o,function(D){this.month=3*(D-1)+1}],S:[o,function(D){this.milliseconds=100*+D}],SS:[i,function(D){this.milliseconds=10*+D}],SSS:[/\d{3}/,function(D){this.milliseconds=+D}],s:[c,f("seconds")],ss:[c,f("seconds")],m:[c,f("minutes")],mm:[c,f("minutes")],H:[c,f("hours")],h:[c,f("hours")],HH:[c,f("hours")],hh:[c,f("hours")],D:[c,f("day")],DD:[i,f("day")],Do:[a,function(D){var C=s.ordinal,$=D.match(/\d+/);if(this.day=$[0],C)for(var O=1;O<=31;O+=1)C(O).replace(/\[|\]/g,"")===D&&(this.day=O)}],w:[c,f("week")],ww:[i,f("week")],M:[c,f("month")],MM:[i,f("month")],MMM:[a,function(D){var C=T("months"),$=(T("monthsShort")||C.map(function(O){return O.slice(0,3)})).indexOf(D)+1;if($<1)throw new Error;this.month=$%12||$}],MMMM:[a,function(D){var C=T("months").indexOf(D)+1;if(C<1)throw new Error;this.month=C%12||C}],Y:[/[+-]?\d+/,f("year")],YY:[i,function(D){this.year=u(D)}],YYYY:[/\d{4}/,f("year")],Z:m,ZZ:m};function F(D){var C,$;C=D,$=s&&s.formats;for(var O=(D=C.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(x,d,E){var p=E&&E.toUpperCase();return d||$[E]||t[E]||$[p].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(b,y,v){return y||v.slice(1)})})).match(r),j=O.length,I=0;I<j;I+=1){var l=O[I],g=k[l],_=g&&g[0],h=g&&g[1];O[I]=h?{regex:_,parser:h}:l.replace(/^\[|\]$/g,"")}return function(x){for(var d={},E=0,p=0;E<j;E+=1){var b=O[E];if(typeof b=="string")p+=b.length;else{var y=b.regex,v=b.parser,S=x.slice(p),w=y.exec(S)[0];v.call(d,w),x=x.replace(w,"")}}return function(M){var P=M.afternoon;if(P!==void 0){var L=M.hours;P?L<12&&(M.hours+=12):L===12&&(M.hours=0),delete M.afternoon}}(d),d}}return function(D,C,$){$.p.customParseFormat=!0,D&&D.parseTwoDigitYear&&(u=D.parseTwoDigitYear);var O=C.prototype,j=O.parse;O.parse=function(I){var l=I.date,g=I.utc,_=I.args;this.$u=g;var h=_[1];if(typeof h=="string"){var x=_[2]===!0,d=_[3]===!0,E=x||d,p=_[2];d&&(p=_[2]),s=this.$locale(),!x&&p&&(s=$.Ls[p]),this.$d=function(S,w,M,P){try{if(["x","X"].indexOf(w)>-1)return new Date((w==="X"?1e3:1)*S);var L=F(w)(S),R=L.year,H=L.month,G=L.day,z=L.hours,ce=L.minutes,se=L.seconds,fe=L.milliseconds,ee=L.zone,V=L.week,K=new Date,ie=G||(R||H?1:K.getDate()),ue=R||K.getFullYear(),Ce=0;R&&!H||(Ce=H>0?H-1:K.getMonth());var Ae,Je=z||0,Qe=ce||0,Ke=se||0,Ze=fe||0;return ee?new Date(Date.UTC(ue,Ce,ie,Je,Qe,Ke,Ze+60*ee.offset*1e3)):M?new Date(Date.UTC(ue,Ce,ie,Je,Qe,Ke,Ze)):(Ae=new Date(ue,Ce,ie,Je,Qe,Ke,Ze),V&&(Ae=P(Ae).week(V).toDate()),Ae)}catch(ks){return new Date("")}}(l,h,g,$),this.init(),p&&p!==!0&&(this.$L=this.locale(p).$L),E&&l!=this.format(h)&&(this.$d=new Date("")),s={}}else if(h instanceof Array)for(var b=h.length,y=1;y<=b;y+=1){_[1]=h[y-1];var v=$.apply(this,_);if(v.isValid()){this.$d=v.$d,this.$L=v.$L,this.init();break}y===b&&(this.$d=new Date(""))}else j.call(this,I)}}})}(ke)),ke.exports}var gs=ms();const ys=ye(gs);var Ie={exports:{}},vs=Ie.exports,Kt;function bs(){return Kt||(Kt=1,function(n,e){(function(t,r){n.exports=r()})(vs,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(r,o,i){var c=o.prototype,a=c.format;i.en.formats=t,c.format=function(s){s===void 0&&(s="YYYY-MM-DDTHH:mm:ssZ");var u=this.$locale().formats,f=function(m,T){return m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(A,k,F){var D=F&&F.toUpperCase();return k||T[F]||t[F]||T[D].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(C,$,O){return $||O.slice(1)})})}(s,u===void 0?{}:u);return a.call(this,f)}}})}(Ie)),Ie.exports}var xs=bs();const ws=ye(xs);var Re={exports:{}},_s=Re.exports,Zt;function Ms(){return Zt||(Zt=1,function(n,e){(function(t,r){n.exports=r()})(_s,function(){return function(t,r,o){r.prototype.isBetween=function(i,c,a,s){var u=o(i),f=o(c),m=(s=s||"()")[0]==="(",T=s[1]===")";return(m?this.isAfter(u,a):!this.isBefore(u,a))&&(T?this.isBefore(f,a):!this.isAfter(f,a))||(m?this.isBefore(u,a):!this.isAfter(u,a))&&(T?this.isAfter(f,a):!this.isBefore(f,a))}}})}(Re)),Re.exports}var Ss=Ms();const Os=ye(Ss);var Ye={exports:{}},Ts=Ye.exports,Xt;function Ds(){return Xt||(Xt=1,function(n,e){(function(t,r){n.exports=r()})(Ts,function(){return function(t,r){var o=r.prototype,i=o.format;o.format=function(c){var a=this,s=this.$locale();if(!this.isValid())return i.bind(this)(c);var u=this.$utils(),f=(c||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(m){switch(m){case"Q":return Math.ceil((a.$M+1)/3);case"Do":return s.ordinal(a.$D);case"gggg":return a.weekYear();case"GGGG":return a.isoWeekYear();case"wo":return s.ordinal(a.week(),"W");case"w":case"ww":return u.s(a.week(),m==="w"?1:2,"0");case"W":case"WW":return u.s(a.isoWeek(),m==="W"?1:2,"0");case"k":case"kk":return u.s(String(a.$H===0?24:a.$H),m==="k"?1:2,"0");case"X":return Math.floor(a.$d.getTime()/1e3);case"x":return a.$d.getTime();case"z":return"["+a.offsetName()+"]";case"zzz":return"["+a.offsetName("long")+"]";default:return m}});return i.bind(this)(f)}}})}(Ye)),Ye.exports}var Cs=Ds();const As=ye(Cs);W.extend(ws);W.extend(fs);W.extend(Os);W.extend(As);const $s={YY:"year",YYYY:{sectionType:"year",contentType:"digit",maxLength:4},M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMM:{sectionType:"month",contentType:"letter"},MMMM:{sectionType:"month",contentType:"letter"},D:{sectionType:"day",contentType:"digit",maxLength:2},DD:"day",Do:{sectionType:"day",contentType:"digit-with-letter"},d:{sectionType:"weekDay",contentType:"digit",maxLength:2},dd:{sectionType:"weekDay",contentType:"letter"},ddd:{sectionType:"weekDay",contentType:"letter"},dddd:{sectionType:"weekDay",contentType:"letter"},A:"meridiem",a:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Es={year:"YYYY",month:"MMMM",monthShort:"MMM",dayOfMonth:"D",dayOfMonthFull:"Do",weekday:"dddd",weekdayShort:"dd",hours24h:"HH",hours12h:"hh",meridiem:"A",minutes:"mm",seconds:"ss",fullDate:"ll",keyboardDate:"L",shortDate:"MMM D",normalDate:"D MMMM",normalDateWithWeekday:"ddd, MMM D",fullTime12h:"hh:mm A",fullTime24h:"HH:mm",keyboardDateTime12h:"L hh:mm A",keyboardDateTime24h:"L HH:mm"},rt=["Missing UTC plugin","To be able to use UTC or timezones, you have to enable the `utc` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-utc"].join(`
`),er=["Missing timezone plugin","To be able to use timezones, you have to enable both the `utc` and the `timezone` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-timezone"].join(`
`);class Ps{constructor({locale:e,formats:t}={}){this.isMUIAdapter=!0,this.isTimezoneCompatible=!0,this.lib="dayjs",this.locale=void 0,this.formats=void 0,this.escapedCharacters={start:"[",end:"]"},this.formatTokenMap=$s,this.setLocaleToValue=r=>{const o=this.getCurrentLocaleCode();return o===r.locale()?r:r.locale(o)},this.hasUTCPlugin=()=>typeof W.utc!="undefined",this.hasTimezonePlugin=()=>typeof W.tz!="undefined",this.isSame=(r,o,i)=>{const c=this.setTimezone(o,this.getTimezone(r));return r.format(i)===c.format(i)},this.cleanTimezone=r=>{switch(r){case"default":return;case"system":return W.tz.guess();default:return r}},this.createSystemDate=r=>{let o;if(this.hasUTCPlugin()&&this.hasTimezonePlugin()){const i=W.tz.guess();i==="UTC"?o=W(r):o=W.tz(r,i)}else o=W(r);return this.setLocaleToValue(o)},this.createUTCDate=r=>{if(!this.hasUTCPlugin())throw new Error(rt);return this.setLocaleToValue(W.utc(r))},this.createTZDate=(r,o)=>{if(!this.hasUTCPlugin())throw new Error(rt);if(!this.hasTimezonePlugin())throw new Error(er);const i=r!==void 0&&!r.endsWith("Z");return this.setLocaleToValue(W(r).tz(this.cleanTimezone(o),i))},this.getLocaleFormats=()=>{const r=W.Ls,o=this.locale||"en";let i=r[o];return i===void 0&&(i=r.en),i.formats},this.adjustOffset=r=>{var i;if(!this.hasTimezonePlugin())return r;const o=this.getTimezone(r);if(o!=="UTC"){const c=r.tz(this.cleanTimezone(o),!0);if(c.$offset===((i=r.$offset)!=null?i:0))return r;r.$offset=c.$offset}return r},this.date=(r,o="default")=>r===null?null:o==="UTC"?this.createUTCDate(r):o==="system"||o==="default"&&!this.hasTimezonePlugin()?this.createSystemDate(r):this.createTZDate(r,o),this.getInvalidDate=()=>W(new Date("Invalid date")),this.getTimezone=r=>{var o;if(this.hasTimezonePlugin()){const i=(o=r.$x)==null?void 0:o.$timezone;if(i)return i}return this.hasUTCPlugin()&&r.isUTC()?"UTC":"system"},this.setTimezone=(r,o)=>{if(this.getTimezone(r)===o)return r;if(o==="UTC"){if(!this.hasUTCPlugin())throw new Error(rt);return r.utc()}if(o==="system")return r.local();if(!this.hasTimezonePlugin()){if(o==="default")return r;throw new Error(er)}return this.setLocaleToValue(W.tz(r,this.cleanTimezone(o)))},this.toJsDate=r=>r.toDate(),this.parse=(r,o)=>r===""?null:W(r,o,this.locale,!0),this.getCurrentLocaleCode=()=>this.locale||"en",this.is12HourCycleInCurrentLocale=()=>/A|a/.test(this.getLocaleFormats().LT||""),this.expandFormat=r=>{const o=this.getLocaleFormats(),i=c=>c.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(a,s,u)=>s||u.slice(1));return r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(c,a,s)=>{const u=s&&s.toUpperCase();return a||o[s]||i(o[u])})},this.isValid=r=>r==null?!1:r.isValid(),this.format=(r,o)=>this.formatByString(r,this.formats[o]),this.formatByString=(r,o)=>this.setLocaleToValue(r).format(o),this.formatNumber=r=>r,this.isEqual=(r,o)=>r===null&&o===null?!0:r===null||o===null?!1:r.toDate().getTime()===o.toDate().getTime(),this.isSameYear=(r,o)=>this.isSame(r,o,"YYYY"),this.isSameMonth=(r,o)=>this.isSame(r,o,"YYYY-MM"),this.isSameDay=(r,o)=>this.isSame(r,o,"YYYY-MM-DD"),this.isSameHour=(r,o)=>r.isSame(o,"hour"),this.isAfter=(r,o)=>r>o,this.isAfterYear=(r,o)=>this.hasUTCPlugin()?!this.isSameYear(r,o)&&r.utc()>o.utc():r.isAfter(o,"year"),this.isAfterDay=(r,o)=>this.hasUTCPlugin()?!this.isSameDay(r,o)&&r.utc()>o.utc():r.isAfter(o,"day"),this.isBefore=(r,o)=>r<o,this.isBeforeYear=(r,o)=>this.hasUTCPlugin()?!this.isSameYear(r,o)&&r.utc()<o.utc():r.isBefore(o,"year"),this.isBeforeDay=(r,o)=>this.hasUTCPlugin()?!this.isSameDay(r,o)&&r.utc()<o.utc():r.isBefore(o,"day"),this.isWithinRange=(r,[o,i])=>r>=o&&r<=i,this.startOfYear=r=>this.adjustOffset(r.startOf("year")),this.startOfMonth=r=>this.adjustOffset(r.startOf("month")),this.startOfWeek=r=>this.adjustOffset(this.setLocaleToValue(r).startOf("week")),this.startOfDay=r=>this.adjustOffset(r.startOf("day")),this.endOfYear=r=>this.adjustOffset(r.endOf("year")),this.endOfMonth=r=>this.adjustOffset(r.endOf("month")),this.endOfWeek=r=>this.adjustOffset(this.setLocaleToValue(r).endOf("week")),this.endOfDay=r=>this.adjustOffset(r.endOf("day")),this.addYears=(r,o)=>this.adjustOffset(r.add(o,"year")),this.addMonths=(r,o)=>this.adjustOffset(r.add(o,"month")),this.addWeeks=(r,o)=>this.adjustOffset(r.add(o,"week")),this.addDays=(r,o)=>this.adjustOffset(r.add(o,"day")),this.addHours=(r,o)=>this.adjustOffset(r.add(o,"hour")),this.addMinutes=(r,o)=>this.adjustOffset(r.add(o,"minute")),this.addSeconds=(r,o)=>this.adjustOffset(r.add(o,"second")),this.getYear=r=>r.year(),this.getMonth=r=>r.month(),this.getDate=r=>r.date(),this.getHours=r=>r.hour(),this.getMinutes=r=>r.minute(),this.getSeconds=r=>r.second(),this.getMilliseconds=r=>r.millisecond(),this.setYear=(r,o)=>this.adjustOffset(r.set("year",o)),this.setMonth=(r,o)=>this.adjustOffset(r.set("month",o)),this.setDate=(r,o)=>this.adjustOffset(r.set("date",o)),this.setHours=(r,o)=>this.adjustOffset(r.set("hour",o)),this.setMinutes=(r,o)=>this.adjustOffset(r.set("minute",o)),this.setSeconds=(r,o)=>this.adjustOffset(r.set("second",o)),this.setMilliseconds=(r,o)=>this.adjustOffset(r.set("millisecond",o)),this.getDaysInMonth=r=>r.daysInMonth(),this.getWeekArray=r=>{const o=this.startOfWeek(this.startOfMonth(r)),i=this.endOfWeek(this.endOfMonth(r));let c=0,a=o;const s=[];for(;a<i;){const u=Math.floor(c/7);s[u]=s[u]||[],s[u].push(a),a=this.addDays(a,1),c+=1}return s},this.getWeekNumber=r=>r.week(),this.getYearRange=([r,o])=>{const i=this.startOfYear(r),c=this.endOfYear(o),a=[];let s=i;for(;this.isBefore(s,c);)a.push(s),s=this.addYears(s,1);return a},this.locale=e,this.formats=Lr({},Es,t),W.extend(ys)}getDayOfWeek(e){return e.day()+1}}function Fs({children:n}){const{theme:e}=us();return te.jsxs(kr,{theme:e,children:[te.jsx(Ir,{}),te.jsx(nn,{dateAdapter:Ps,children:n})]})}function Ls({children:n}){return te.jsx(cs,{children:te.jsx(Fo,{children:te.jsx(Qo,{children:te.jsx(Fs,{children:n})})})})}const ai=Object.freeze({__proto__:null,default:Ls});export{W as A,xo as B,Xs as C,us as D,to as E,Zs as F,ii as G,ht as H,Qn as I,si as J,Ks as K,eo as L,fr as M,Ps as N,ti as O,jn as P,ni as Q,ai as R,Jo as S,J as _,Kn as a,an as b,Ws as c,lt as d,Qs as e,Gs as f,oe as g,Ns as h,Zn as i,Us as j,Bs as k,Vs as l,ri as m,mr as n,et as o,ho as p,dt as q,zs as r,Jn as s,q as t,We as u,Js as v,qs as w,oi as x,ei as y,ko as z};
//# sourceMappingURL=chunk-B-cyqPC2.js.map
