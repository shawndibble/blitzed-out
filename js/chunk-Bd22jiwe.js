const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/chunk-Bi4yU4Zg.js","js/chunk-QuzIwS35.js","js/chunk-D2XAL7ZP.js","js/index.tsx-ORzsZr0s.js","js/chunk-CalwtN_X.js","js/chunk-C_6Syue1.js","js/chunk-_5j352I4.js","js/chunk-CBj0jgHk.js","assets/index-BqbSN2YQ.js","js/chunk-B90GCnie.js","js/chunk-L6bkSC5G.js","js/chunk-CtJAfh3g.js","js/chunk-lwiWGiye.js","js/chunk-CWRIfDP8.js","js/chunk-B-XUGD5i.js","js/chunk-D2tVJ7i-.js","js/chunk-CZM7hJiR.js","js/chunk-B4PEA_xj.js","js/chunk-Do76cB_1.js","js/index.tsx-DOvSHrOw.js","js/chunk-CUA6xrHU.js","js/chunk-ORyNdZv_.js","js/chunk-BRLDtuGR.js","js/index.tsx-CUAiXJbS.js","js/index.tsx-DC1Mvs0N.js","js/chunk-CJKaVReo.js","js/chunk-CiUBNmqE.js","js/index.tsx-DqGlSipD.js","js/chunk-Dr312jl_.js"])))=>i.map(i=>d[i]);
import{_ as z,p as se,d as q,l as H,a as ue,s as ce,b as de,g as me,c as fe,u as pe,f as ge}from"../assets/index-BqbSN2YQ.js";import{am as B,r as i,j as e,aA as he,aB as xe,E as be,aa as _,T as E,ax as L,a1 as X,Q as P,a7 as w,ac as ye,as as je,az as I,O as Se,K as ve,P as Ce,aC as Re,n as Me,M as Te,W as ke,aD as De,Y as Ne,aE as Ae,aF as we,z as K,A as Be,R as Oe,aG as _e,ad as Ee,ab as Le}from"./chunk-QuzIwS35.js";import{u as ne,c as Pe}from"./chunk-D2XAL7ZP.js";import Ie from"./index.tsx-DC1Mvs0N.js";import{C as $e}from"./chunk-ORyNdZv_.js";import{u as ae,C as Ge,G as Fe,s as Ue}from"./chunk-CUA6xrHU.js";import{e as re,a as ze,i as G,b as oe}from"./chunk-CalwtN_X.js";import{u as F}from"./chunk-CBj0jgHk.js";import{t as Ve}from"./chunk-C_6Syue1.js";import{u as V}from"./chunk-CZM7hJiR.js";import{u as Q}from"./chunk-Do76cB_1.js";import{u as ie,g as Ke,R as We}from"./chunk-CJKaVReo.js";import{T as le}from"./chunk-lwiWGiye.js";import Je from"./index.tsx-DqGlSipD.js";import{u as He}from"./chunk-CiUBNmqE.js";import{u as Qe,s as Ye}from"./chunk-D2tVJ7i-.js";import{i as qe}from"./chunk-L6bkSC5G.js";import{u as Xe}from"./chunk-CtJAfh3g.js";import{N as Z}from"./chunk-Dr312jl_.js";import{A as Ze,C as ee,c as et}from"./chunk-_5j352I4.js";const tt=t=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:800,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,[t.breakpoints.down("sm")]:{width:"90%"}});function st({open:t,text:s="",displayName:a="",handleClose:n,stopAutoClose:o=()=>null,nextPlayer:c=null,isMyMessage:l=!1}){const{t:d}=B(),[f,x]=i.useState(!1),g=s?.match(/#\d*:.*(?=\n)/gs),v=re(s)||"",h=ze(s,d("seconds")),{timeLeft:b,togglePause:p}=ae(20,!1),[m,r]=i.useState(!0),u=c?.displayName,y=i.useCallback(()=>{p(),o(),r(!1)},[p,o,r]),S=i.useCallback(()=>{y(),x(!0)},[y]),N=i.useCallback(()=>{x(!1)},[]);return e.jsxs("div",{children:[e.jsx(he,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:t,onClose:n,slots:{backdrop:xe},slotProps:{backdrop:{timeout:500}},children:e.jsx(be,{in:t,children:e.jsxs(_,{sx:tt,children:[e.jsx(E,{id:"transition-modal-title",variant:"h6",component:"h2",children:`${g} ${d("for")} ${a}`}),e.jsx($e,{close:n}),e.jsx(E,{id:"transition-modal-description",variant:"h4",sx:{mt:2},children:v}),e.jsx("br",{}),e.jsx(E,{variant:"caption",children:m?e.jsx(L,{i18nKey:"autoCloseModal",values:{timeLeft:b}}):e.jsx(L,{i18nKey:"autoCloseStopped"})}),e.jsx("br",{}),h?.length&&e.jsxs(e.Fragment,{children:[e.jsx(L,{i18nKey:"timers"}),h.map(j=>e.jsx(Ge,{textString:j,preventParentClose:y},j))]}),!!c&&e.jsxs(_,{textAlign:"center",children:[e.jsx(X,{style:{margin:"1rem 0 0.5rem"}}),e.jsx(E,{variant:"body1",children:c.isSelf?e.jsx(L,{i18nKey:"yourTurn"}):e.jsx(L,{i18nKey:"nextPlayersTurn",values:{player:u}})})]}),!!l&&s.includes(d("finish"))&&e.jsxs(_,{textAlign:"center",children:[e.jsx(X,{style:{margin:"1rem 0 0.5rem"}}),e.jsx(P,{onClick:S,children:e.jsx(E,{children:d("playAgain")})})]})]})})}),e.jsx(Fe,{isOpen:f,close:N})]})}const nt="/audio/roll-dice-DysgIh_A.mp3",at="/audio/message-CBVROrdp.mp3";function U(){return U=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},U.apply(null,arguments)}function rt(t,s){if(t==null)return{};var a={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(s.indexOf(n)!==-1)continue;a[n]=t[n]}return a}function ot(t){i.useEffect(t,[])}var it=["id","volume","playbackRate","soundEnabled","interrupt","onload"];function te(t,s){var a={},n=a.volume,o=n===void 0?1:n,c=a.playbackRate,l=c===void 0?1:c,d=a.soundEnabled,f=d===void 0?!0:d,x=a.interrupt,g=x===void 0?!1:x,v=a.onload,h=rt(a,it),b=w.useRef(null),p=w.useRef(!1),m=w.useState(null),r=m[0],u=m[1],y=w.useState(null),S=y[0],N=y[1],j=function(){typeof v=="function"&&v.call(this),p.current&&u(this.duration()*1e3),N(this)};ot(function(){return z(()=>import("./chunk-Bi4yU4Zg.js").then(C=>C.h),__vite__mapDeps([0,1,2])).then(function(C){if(!p.current){var O;b.current=(O=C.Howl)!==null&&O!==void 0?O:C.default.Howl,p.current=!0,new b.current(U({src:Array.isArray(t)?t:[t],volume:o,rate:l,onload:j},h))}}),function(){p.current=!1}}),w.useEffect(function(){b.current&&S&&N(new b.current(U({src:Array.isArray(t)?t:[t],volume:o,onload:j},h)))},[JSON.stringify(t)]),w.useEffect(function(){S&&(S.volume(o),h.sprite||S.rate(l))},[S,o,l]);var T=w.useCallback(function(C){typeof C>"u"&&(C={}),!(!S||!f&&!C.forceSoundEnabled)&&(g&&S.stop(),C.playbackRate&&S.rate(C.playbackRate),S.play(C.id))},[S,f,g]),R=w.useCallback(function(C){S&&S.stop(C)},[S]),M=w.useCallback(function(C){S&&S.pause(C)},[S]),D=[T,{sound:S,stop:R,pause:M,duration:r}];return D}async function lt(t,s){try{await Ve.speak(t,s,-2)}catch(a){console.error("TTS failed:",a)}}function ut(){const{i18n:t}=B(),{user:s}=V(),{messages:a}=Q(),[n,o]=i.useState(!1),[c]=te(nt),[l]=te(at),[d]=F(),{playerDialog:f,othersDialog:x,mySound:g,otherSound:v,chatSound:h,readRoll:b,voicePreference:p}=d||{},m=i.useMemo(()=>[...a].pop(),[a]),r=i.useCallback(async M=>{if(M)try{await lt(M,p)}catch(D){console.error("Failed to speak text:",D)}},[p]),u=i.useMemo(()=>{if(!m?.timestamp)return!1;const M=se(m.timestamp);return M?q(M).diff(q(),"seconds")>=-2:!1},[m]),y=i.useMemo(()=>m?.uid===s?.uid,[m,s]),S=!!(f&&y),N=!!(x&&!y),j=(y&&g||!y&&v)&&m?.type==="actions",T=y&&b&&m?.type==="actions",R=h&&m?.type==="chat";return i.useEffect(()=>{if(Ue(t.resolvedLanguage||t.language),u&&m?.type==="actions"&&(S||N)&&o(m),u&&m){if(j&&c(),T){const M=re(m?.text);r(M)}R&&l()}},[t.resolvedLanguage,t.language,m,y,S,N,j,T,R,c,l,r,u]),{message:n,setMessage:o,isMyMessage:!!y}}const ct=()=>{const{t}=B(),{message:s,setMessage:a,isMyMessage:n}=ut(),o=ie(s),c=i.useRef(void 0);i.useEffect(()=>(s&&(c.current=setTimeout(()=>a(!1),21e3)),()=>{c.current&&clearTimeout(c.current)}),[s,a]);const l=i.useCallback(()=>{c.current&&clearTimeout(c.current),a(!1)},[a]),d=i.useCallback(()=>{c.current&&clearTimeout(c.current)},[]);return!s||typeof s!="object"||!s.text||s.text.includes(t("start"))?null:e.jsx(st,{text:s?.text,displayName:s?.displayName,open:!0,handleClose:l,stopAutoClose:d,nextPlayer:o,isMyMessage:n})};function dt(){const{messages:t}=Q(),[s,a]=i.useState(!1),n=H(t,"actions"),o=ue(t),c=ie(n),{playerDialog:l,othersDialog:d}=F()[0];if(i.useEffect(()=>{!c||o!==n||a(!0)},[c,o,n]),!n||!c)return null;const f=c?.isSelf;return!d&&f||!l&&!f?e.jsx(le,{open:s,close:()=>a(!1),type:f?"error":"info",vertical:"top",horizontal:"center",disableAutoHide:!0,children:f?e.jsx(L,{i18nKey:"yourTurn"}):e.jsx(L,{i18nKey:"playersTurn",values:{player:c.displayName}})}):null}const{t:mt}=ye;function ft(t){return t.replace(/(?:^|\.\s|!\s)(\w)/g,s=>s.toUpperCase())}function pt(t,s,a){const n=Math.random(),o=t.includes("{dom}")&&t.includes("{sub}"),c=s==="vers";function l(d){if(d==="{player}")return!0;const f=d==="{dom}"||d==="{sub}";if(!c&&d===`{${s}}`||!o&&c&&f)return!0;if(o&&c){const x=d==="{dom}"&&n<.5,g=d==="{sub}"&&n>=.5;return x||g}return!1}return t.replace(/{(player|dom|sub)}/g,d=>l(d)?a:d)}function gt(t,s,a){let n=pt(t,s,a);if(!n.includes(a)&&s!=="vers"&&(n.includes("{dom}")||n.includes("{sub}"))){const c=new RegExp(`\\{${s}\\}`);n.match(c)?n=n.replace(c,a):n=n.replace(/{(dom|sub)}/,a)}return n=n.replace(/{(dom|sub)}/g,mt("anotherPlayer")),ft(n)}function ht(t){const s=t.filter(o=>o).map(o=>o.split(": ")),a=[];s.forEach((o,c)=>{if(Number(o[1])===0)return;const l=Array(Number(o[1])).fill(c);a.push(...l)});const n=a[Math.floor(Math.random()*a.length)];return s.map(([o])=>o)[n]?.replace(/(\r\n|\n|\r)/gm,"")||""}function xt(t,s,a){if(!t)return"";const n=t.split("%");return n.length<=1?gt(t,s,a||""):ht(n)}function bt(t,s,a=[]){const{user:n}=V(),{t:o}=B(),[c]=F(),l=He(),d=a.length,[f,x]=i.useState(a[0]||{}),g=d-1,v=i.useRef(0),h=i.useCallback((p,m,r,u)=>{if(!p){console.error("Tile not found at location:",r);return}let y="";const S=xt(p.description||"",c.role||"sub",n?.displayName||"");m!==-1&&(y+=`${o("roll")}: ${m}
`),y+=`#${r+1}: ${p.title||o("unknownTile")}
`,y+=`${o("action")}: ${S}`,ce({room:t,user:n,text:u?u+y:y,type:"actions"})},[t,n,o,c.role]),b=i.useCallback(p=>{if(p===-1)return{preMessage:`${o("restartingGame")}
`,newLocation:0};const m=l.find(u=>u.isSelf)?.location||0;if(m===g)return{preMessage:`${o("alreadyFinished")}
`,newLocation:p};const r=p+m;return r>=g?{newLocation:g}:{newLocation:r}},[o,l,g]);return i.useEffect(()=>{const p=Array.isArray(s.value)?s.value[0]:s.value,m=s.time;if(p===0||m<=v.current)return;v.current=m;const{preMessage:r,newLocation:u}=b(p);u>=0&&u<a.length&&a[u]?(x({...a[u],index:u}),h(a[u],p,u,r)):console.error(`Invalid location or missing tile: ${u}, gameBoard length: ${a.length}`)},[s,a,h,b]),{tile:f,playerList:l}}function yt(t,s){const{user:{displayName:a}}=V(),[n,o]=i.useState(null),[c,l]=i.useState(a||"");i.useEffect(()=>{(n!==t||a!==c)&&(de({newRoom:t,oldRoom:n,newDisplayName:a||"",oldDisplayName:c,removeOnDisconnect:s||t?.toUpperCase()==="PUBLIC"}),o(t),l(a||""))},[t,a,n,c,s])}function jt(t,s){const a=i.useRef(void 0);return i.useCallback((...n)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>t(...n),s)},[t,s])}function St(t,s){const{i18n:n,t:o}=B(),{user:c}=V(),[l,d]=F(),f=ne(()=>me(l?.gameMode)),{messages:x,isLoading:g}=Q(),[v,h]=i.useState("1d6"),[b,p]=i.useState(""),m=Qe(),r=i.useRef(!1),u=i.useRef(!0),y=i.useCallback(async(j,T=null)=>{if(!r.current){r.current=!0;try{const{gameMode:R,newBoard:M}=await m(j),D={formData:{...l,...j},user:c,customTiles:f,actionsList:await qe(n.resolvedLanguage,R||"online"),tiles:M,title:o("settingsGenerated")};T&&(D.reason=o("rebuiltBoard",{messageUser:T})),await Ye(D)}finally{setTimeout(()=>{r.current=!1},500)}}},[l,c,f,n.resolvedLanguage,o,m]),S=i.useCallback(async()=>{l?.room!==t&&(await d({...l,room:t}),await y({...l,roomUpdated:!0,room:t}))},[l,t,d,y]),N=jt(S,200);return i.useEffect(()=>{if(!(g||!x.length))try{const j=H(x,"room");if(j){const T=JSON.parse(j.settings),{roomDice:R,roomBackgroundURL:M,roomTileCount:D}=T;let C="1d6";!G(t)&&R&&(C=R),h(C),p(M||"");const O=se(j.timestamp),A=(O?Date.now()-O.getTime():1/0)<300*1e3;j.uid!==c?.uid&&D&&s?.length&&D!==s?.length&&A&&!r.current&&y(T,j.displayName)}}catch(j){console.error("Error processing room message:",j)}},[x,g,t,c,s,y]),i.useEffect(()=>{if(!g)try{const j=H(x,"room");if(j||!G(t)&&!j||G(t)&&!oe(l?.gameMode||""))return;if(u.current){u.current=!1,l?.roomBackgroundURL?.length&&p(l.roomBackgroundURL);return}const T=t!==l?.room,R=l&&typeof l.room<"u",M=s?.length,D=!r.current;if(R&&T&&M&&D){N();return}l?.roomBackgroundURL?.length&&p(l.roomBackgroundURL)}catch(j){console.error("Error in room change effect:",j)}},[t,l,s,x,g,N]),{roller:v,roomBgUrl:b}}function vt(t,s){const[a,n]=i.useState(null),[o,c]=je(),l=o.get("importBoard"),{t:d}=B(),f=i.useCallback(()=>{n(null)},[]),x=i.useCallback(h=>{try{const b=JSON.parse(h);return Array.isArray(b)?b:null}catch{return null}},[]),g=i.useCallback(h=>{try{return h?JSON.parse(h):{}}catch{return{}}},[]),v=i.useCallback(async()=>{if(c({}),!l)return;const h=await fe(l);if(!h?.gameBoard)return n(d("failedBoardImport"));const b=x(h.gameBoard);if(!b)return n(d("failedBoardImport"));const p=h?.title!==d("settingsGenerated")?h.title:d("importedBoard");pe({...h,title:p,tiles:b,isActive:1});const m=g(h?.settings);s({...t,...m}),a!==d("updated")&&n(d("updated"))},[l,x,g,t,s,d,a,c]);return i.useEffect(()=>{l&&v()},[l,v]),[a,f]}const Ct=({selectedRoll:t,handleMenuItemClick:s})=>{const[a,n]=i.useState(!1),o=i.useRef(null),c=()=>{n(f=>!f)},l=f=>{f.target instanceof Node&&o.current?.contains(f.target)||n(!1)},d=new Map;return d.set("restart",I("restart")).set("manual",I("manual")).set("30",I("auto30")).set("60",I("auto60")).set("90",I("auto90")).set("custom",I("setTimer")),e.jsxs(e.Fragment,{children:[e.jsx(P,{size:"small","aria-controls":a?"split-button-menu":void 0,"aria-expanded":a?"true":void 0,"aria-label":"select roll options","aria-haspopup":"menu",onClick:c,ref:o,children:e.jsx(Ze,{})}),e.jsx(Se,{sx:{zIndex:1},open:a,anchorEl:o.current,transition:!0,disablePortal:!0,placement:"top-end",children:({TransitionProps:f})=>e.jsx(ve,{...f,style:{transformOrigin:"right bottom"},children:e.jsx(Ce,{children:e.jsx(Re,{onClickAway:l,children:e.jsx(Me,{id:"split-button-menu",autoFocusItem:!0,children:Array.from(d).map(([x,g])=>e.jsx(Te,{selected:x===t,onClick:()=>s(x),children:g},x))})})})})})]})},$=10,Rt=({isOpen:t,onClose:s,onSubmit:a})=>{const{t:n}=B(),[o,c]=i.useState(30),[l,d]=i.useState(!1),[f,x]=i.useState(!1),[g,v]=i.useState(20),[h,b]=i.useState(60),p=()=>{if(f){let r=Number.parseInt(String(g),10),u=Number.parseInt(String(h),10);Number.isNaN(r)?(r=l?1:$,v(r)):!l&&r<$&&(r=$),Number.isNaN(u)||u<r?(u=r,b(u)):u===0&&(u=180,b(u)),l&&(r*=60,u*=60);const y=Math.floor(Math.random()*(u-r+1))+r;a(y,{isRange:!0,min:r,max:u})}else{let r=Number.parseInt(String(o),10);Number.isNaN(r)?(r=l?1:$,c(r)):l?r*=60:r<$&&(r=$),a(r,{isRange:!1})}s()},m=()=>{c(r=>{const u=Number.parseFloat(String(r));return Number.isNaN(u)||u<=0?r:l?(u*60).toString():(u/60).toString()}),v(r=>{const u=Number.parseFloat(String(r));return Number.isNaN(u)||u<=0?r:l?(u*60).toString():(u/60).toString()}),b(r=>{const u=Number.parseFloat(String(r));return Number.isNaN(u)||u<=0?r:l?(u*60).toString():(u/60).toString()}),d(r=>!r)};return e.jsxs(ke,{open:t,onClose:s,maxWidth:"xs",children:[e.jsx(De,{children:n("setTimer")}),e.jsxs(Ne,{children:[e.jsx(_,{sx:{mb:2},children:e.jsx(Ae,{control:e.jsx(we,{checked:f,onChange:r=>x(r.target.checked)}),label:n("useRandomRange")})}),f?e.jsxs(_,{children:[e.jsx(E,{variant:"subtitle2",children:n("randomTimerRange")}),e.jsxs(_,{sx:{display:"flex",gap:2,my:2},children:[e.jsx(K,{label:n("minValue"),type:"number",value:g,onChange:r=>{const u=parseInt(r.target.value,10);v(u)},fullWidth:!0}),e.jsx(E,{variant:"body1",sx:{alignSelf:"center"},children:"-"}),e.jsx(K,{label:n("maxValue"),type:"number",value:h,onChange:r=>{const u=parseInt(r.target.value,10);b(Math.max(Number(g),u))},fullWidth:!0})]}),e.jsxs(P,{onClick:m,variant:"outlined",size:"small",children:[n(l?"minutes":"seconds"),e.jsx(ee,{sx:{ml:1}})]})]}):e.jsx(K,{autoFocus:!0,type:"number",value:o,onChange:r=>c(r.target.value),sx:{width:"15rem"},slotProps:{input:{endAdornment:e.jsx(Be,{position:"end",children:e.jsxs(P,{onClick:m,variant:"text",children:[n(l?"minutes":"seconds"),e.jsx(ee,{sx:{ml:1}})]})})}}})]}),e.jsxs(Oe,{children:[e.jsx(P,{onClick:s,children:n("cancel")}),e.jsx(P,{onClick:p,children:n("set")})]})]})};function Mt(t){return/^-?\d+$/.test(String(t))}function W(t,s,a){let n=0;for(let o=0;o<Number(t);o+=1)n+=Math.floor(Math.random()*Number(s))+1;a(n)}const Tt=i.memo(function({setRollValue:s,dice:a,isEndOfBoard:n}){const{t:o}=B(),[c,l]=i.useState(!1),[d,f]=i.useState("manual"),[x,g]=i.useState(0),[v,h]=i.useState(o("roll")),{timeLeft:b,setTimeLeft:p,togglePause:m,isPaused:r}=ae(x),[u,y]=i.useState(!1),[S,N]=i.useState({isRange:!1,min:30,max:120}),j=i.useCallback(k=>{s(k)},[s]),[T,R]=a.split("d"),M=()=>{if(d==="manual"){W(T,R,j),l(!0),setTimeout(()=>l(!1),4e3);return}r&&b===x&&W(T,R,j),m()},D=i.useCallback(k=>{if(k==="restart"){j(-1);return}if(f(String(k)),k==="custom"){y(!0);return}if(Mt(k)){r||m();const A=Number(k);g(A),p(A)}},[r,p,m,j]),C=()=>{y(!1)},O=(k,A={isRange:!1})=>{r||m(),g(k),p(k),N({...S,...A}),f("custom"),y(!1)};return i.useEffect(()=>{n&&m()},[n,m]),i.useEffect(()=>{if(c)h(o("wait"));else if(d==="manual")h(o("roll"));else if(r)h(`${o("play")} (${b})`);else if(b>0)h(`${o("pause")} (${b})`);else if(b===0&&!r&&d!=="manual"){W(T,R,j);let k;if(S.isRange){const{min:A,max:Y}=S;k=Math.floor(Math.random()*(Y-A+1))+A}else k=x;g(k),p(k),h(`${o("pause")} (${k})`)}},[c,d,b,r,x,S,o,T,R,j,p]),e.jsxs(e.Fragment,{children:[e.jsxs(_e,{variant:"contained",className:"dice-roller",children:[e.jsxs(P,{"aria-label":o("roll"),onClick:M,disabled:c,size:"large",children:[e.jsx(et,{sx:{mr:1}}),v]}),e.jsx(Ct,{selectedRoll:d,handleMenuItemClick:D})]}),e.jsx(Rt,{isOpen:u,onClose:C,onSubmit:O})]})}),kt=i.lazy(()=>z(()=>import("./index.tsx-ORzsZr0s.js"),__vite__mapDeps([3,1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),Dt=i.lazy(()=>z(()=>import("./index.tsx-DOvSHrOw.js"),__vite__mapDeps([19,1,2,16,8,9,6,18,15,4,7,17,10,11,12,13,14,20,21,5,22]))),Nt=i.lazy(()=>z(()=>import("./index.tsx-CUAiXJbS.js"),__vite__mapDeps([23,1,2,16,8,9,6,22,24,12,21,20,11,15,4,7,17,18,5,10,13,14,25,26,27,28])));function J(){return e.jsx(_,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100px",children:e.jsx(Le,{size:24})})}function At(){const t=Ee(),s=t.id||"",a=Xe(),{t:n}=B(),[o,c]=F();yt(s,o?.roomRealtime);const[l,d]=i.useState({value:0,time:0}),f=ne(ge)?.tiles,x=i.useCallback(C=>{d({value:C,time:Date.now()})},[]),{playerList:g,tile:v}=bt(s,l,f),{roller:h,roomBgUrl:b}=St(s,f),[p,m]=vt(o,c);if(!f||!f.length||!Object.keys(o).length||G(s)&&!oe(o.gameMode))return e.jsxs(e.Fragment,{children:[e.jsx(Z,{room:t.id,playerList:g}),e.jsx(Je,{open:!0})]});const{isVideo:r,url:u}=Ke(o,s,b),y=r?"video-adjust":"",N=u&&(r||!r&&u)?"":"default-room-background",{background:j,roomBackground:T}=o,R=!G(s)&&T!=="app"||j!=="color",M=e.jsx(i.Suspense,{fallback:e.jsx(J,{}),children:e.jsx(Nt,{playerList:g,isTransparent:R,gameBoard:f,settings:o})}),D=e.jsx("div",{className:"messages-container",children:e.jsxs(i.Suspense,{fallback:e.jsx(J,{}),children:[e.jsx(Dt,{room:s,isTransparent:R,currentGameBoardSize:f.length}),e.jsx(Ie,{room:s,isTransparent:R})]})});return e.jsxs(e.Fragment,{children:[e.jsx(Z,{room:s,playerList:g}),e.jsx(Tt,{setRollValue:x,dice:h,isEndOfBoard:v?.index!==void 0&&v.index>=(f?.length??0)-1}),e.jsx(We,{isVideo:r,url:u}),e.jsx(dt,{}),a?e.jsx(i.Suspense,{fallback:e.jsx(J,{}),children:e.jsx(kt,{tab1:M,tab2:D})}):e.jsxs(_,{className:Pe("desktop-container",y,N),children:[M,D]}),e.jsx(ct,{}),e.jsx(le,{type:p===n("updated")?"success":"error",open:!!p,close:m,children:p})]})}const qt=Object.freeze(Object.defineProperty({__proto__:null,default:At},Symbol.toStringTag,{value:"Module"}));export{gt as a,qt as i};
