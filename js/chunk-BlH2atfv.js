const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index.tsx-Dfj4icvq.js","js/chunk-DJZJtpVs.js","js/chunk-7OQk-BoX.js","js/chunk-9fkTg0gS.js","js/chunk-DEqUmdJg.js","js/chunk-CGbfZ7mk.js","js/chunk-B4PEA_xj.js","js/chunk-CsjAM9X4.js","assets/index-CIxzyEs1.js","js/schedule.tsx-noghk92h.js","js/chunk-4U1E0IXF.js","js/chunk-B4ipE-Yx.js","js/theme.tsx-CiRAj2No.js","js/chunk-C7J_81tG.js","js/chunk-CICpncNh.js","js/chunk-DtF_b7C9.js","js/index.tsx-C0A4SIAL.js","js/chunk-BAexkzqm.js","js/chunk-e35AIsXY.js","js/chunk-yLOK5aTh.js","js/chunk-BP8D9Umq.js","js/chunk-DE4u9lyp.js","js/index.tsx-BbzYcVgX.js","js/chunk-HM8k9wFq.js"])))=>i.map(i=>d[i]);
import{_ as j}from"../assets/index-CIxzyEs1.js";import{a7 as D,E as R,K as B,r,ad as G,j as e,aE as y,au as A,I as v,ak as N,aF as U,G as $,M as F,aG as q,aH as W,B as H,aI as K,aJ as J,am as V,aK as Q,aC as X,at as Y,s as _,aL as Z,aM as ee,aN as se}from"./chunk-DJZJtpVs.js";import{ScheduleContext as te}from"./schedule.tsx-noghk92h.js";import{e as oe,f as ne,g as z,D as re,h as ae,i as O,j as ie,k as ce,l as le}from"./chunk-DEqUmdJg.js";import{useTheme as de}from"./theme.tsx-CiRAj2No.js";import{i as ue}from"./chunk-C7J_81tG.js";const ke={en:{label:"English",voice:"Google UK English Male"},es:{label:"EspaÃ±ol",voice:"Google espaÃ±ol de Estados Unidos"},fr:{label:"FranÃ§ais",voice:"Google franÃ§ais"},zh:{label:"ä¸­æ–‡",voice:"Google ä¸­æ–‡ï¼ˆä¸­å›½å¤§é™†ï¼‰"},hi:{label:"à¤¹à¤¿à¤¨à¥à¤¦à¥€",voice:"Google à¤¹à¤¿à¤¨à¥à¤¦à¥€"}};function ge(){const s=D.useContext(te);if(!s)throw new Error("ScheduleContext's value is undefined.");return s}function he(s="sm"){const n=R();return B(n.breakpoints.down(s))}const me="/img/blitzed-out-DGhYHOgx.png";window.__castApiInitialized=window.__castApiInitialized||!1;window.__castScriptLoading=window.__castScriptLoading||!1;function fe(){const[s,n]=r.useState(!1),[l,i]=r.useState(null),{id:c}=G(),f=r.useRef(null),[g,C]=r.useState(!1),[I,b]=r.useState(!1),[p,h]=r.useState(!1),m=r.useCallback(a=>{try{const o=`${window.location.origin}/${c}/cast`;a.sendMessage("urn:x-cast:com.blitzedout.app",{type:"LOAD",url:o})}catch(o){console.error("Error sending cast message:",o)}},[c]);r.useEffect(()=>{const a=()=>{try{if(!window?.cast?.framework)return;if(window.__castApiInitialized){C(!0),o();return}window.cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:"1227B8DE",autoJoinPolicy:window.chrome?.cast?.AutoJoinPolicy?.ORIGIN_SCOPED}),window.__castApiInitialized=!0,C(!0),o()}catch(t){console.error("Error initializing Cast API:",t)}},o=()=>{try{const t=window.cast?.framework?.CastContext.getInstance();if(!t)return;const u=t.getCurrentSession();if(u&&(n(!0),i(u),c&&m(u)),!window?.cast?.framework)return;t.addEventListener(window.cast.framework.CastContextEventType.SESSION_STATE_CHANGED,S=>{console.log("ðŸŽ­ Cast session state changed:",S.sessionState);const d=t.getCurrentSession();switch(console.log("ðŸŽ­ Current session:",d?"exists":"null"),S.sessionState){case window.cast?.framework?.SessionState.SESSION_STARTED:case window.cast?.framework?.SessionState.SESSION_RESUMED:console.log("ðŸŽ­ Cast session started/resumed - setting isCasting=true"),n(!0),i(d),d&&c&&m(d);break;case window.cast?.framework?.SessionState.SESSION_ENDED:console.log("ðŸŽ­ Cast session ended - setting isCasting=false"),n(!1),i(null);break;default:S.sessionState==="SESSION_ENDING"?(console.log("ðŸŽ­ Cast session ending - setting isCasting=false"),n(!1),i(null)):console.log("ðŸŽ­ Unhandled session state:",S.sessionState);break}})}catch(t){console.error("Error setting up session listener:",t)}};if(window.chrome&&window.chrome.cast&&window.cast)a();else if(window.__onGCastApiAvailable=function(t){t&&a()},!document.querySelector('script[src*="cast_sender.js"]')&&!window.__castScriptLoading){window.__castScriptLoading=!0;const t=document.createElement("script");t.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",t.onload=()=>{window.__castScriptLoading=!1},t.onerror=()=>{window.__castScriptLoading=!1,console.error("Failed to load Cast SDK")},document.head.appendChild(t)}return()=>{}},[c,m]);const w=()=>{if(!g){console.warn("Cast API not ready yet");return}if(s){console.log("ðŸ›‘ Stop casting button clicked"),b(!0),console.log("ðŸ›‘ Immediately setting isCasting=false due to user request"),n(!1),i(null);try{const a=window.cast?.framework?.CastContext.getInstance();if(a){console.log("ðŸ›‘ Calling castContext.endCurrentSession(true)");try{const o=a.endCurrentSession(!0);o&&typeof o.catch=="function"&&o.catch(t=>{console.error("ðŸ›‘ Error ending session via context:",t)})}catch(o){console.error("ðŸ›‘ Error calling endCurrentSession:",o)}}if(l){console.log("ðŸ›‘ Calling castSession.endSession(true)");try{const o=l.endSession(!0);o&&typeof o.catch=="function"&&o.catch(t=>{console.error("ðŸ›‘ Error ending session directly:",t)})}catch(o){console.error("ðŸ›‘ Error calling endSession:",o)}}h(!0),setTimeout(()=>{console.log("ðŸ›‘ Clearing user stop flag"),b(!1)},3e3),setTimeout(()=>{console.log("ðŸ›‘ Clearing force disconnected flag"),h(!1)},1e4)}catch(a){console.error("ðŸ›‘ Error stopping cast session:",a),b(!1),h(!0),setTimeout(()=>{h(!1)},1e4)}}else{h(!1);try{const a=window.cast?.framework?.CastContext.getInstance();a&&a.requestSession().catch(o=>console.error("Error requesting cast session:",o))}catch(a){console.error("Error requesting cast session:",a)}}};return r.useEffect(()=>{s&&l&&c&&m(l)},[c,s,l,m]),r.useEffect(()=>{if(!g)return;const a=()=>{try{const t=window.cast?.framework?.CastContext.getInstance();if(!t)return;const u=t.getCurrentSession(),S=u?u.getSessionState():"NO_SESSION",d=u&&(u.getSessionState()==="CONNECTED"||u.getSessionState()==="SESSION_STARTED");(s&&!d||!s&&d)&&console.log("ðŸ” Periodic check - isCasting:",s,"sessionState:",S,"hasActiveSession:",d),s&&!d?(console.log("ðŸ”§ Fixing state: was casting but no active session - setting isCasting=false"),n(!1),i(null)):!s&&d&&!I&&!p?(console.log("ðŸ”§ Fixing state: not casting but has active session - setting isCasting=true"),n(!0),i(u)):!s&&d&&(I||p)&&console.log("ðŸ”§ User requested stop or force disconnected - session still active but respecting user request")}catch(t){console.error("Error checking cast state:",t)}};a();const o=setInterval(a,5e3);return()=>clearInterval(o)},[g,s,I,p]),g?e.jsx(y,{title:s?A("stopCasting"):A("startCasting"),children:e.jsx(v,{ref:f,onClick:w,color:s?"primary":"default",children:s?e.jsx(oe,{}):e.jsx(ne,{})})}):null}const M={light:ae,dark:re,system:z},pe={light:"Light theme",dark:"Dark theme",system:"Follow system"};function xe({size:s="medium",variant:n="menu",tooltip:l,showLabels:i=!0,"aria-label":c}){const f=R(),{themeMode:g,resolvedThemeMode:C,setThemeMode:I,toggleTheme:b}=de(),{t:p}=N(),[h,m]=D.useState(null),w=!!h,o=g==="system"?z:M[C],t=()=>{n==="toggle"?b():m(null)},u=x=>{n==="menu"?m(x.currentTarget):t()},S=()=>{m(null)},d=x=>{I(x),S()},k=()=>l||(n==="toggle"?C==="light"?p("theme.switchToDark","Switch to dark theme"):p("theme.switchToLight","Switch to light theme"):p("theme.chooseTheme","Choose theme")),T=()=>c||(n==="toggle"?`Toggle theme, currently ${C}`:`Theme menu, currently ${g}`);return n==="toggle"?e.jsx(y,{title:k(),arrow:!0,children:e.jsx(v,{onClick:t,size:s,"aria-label":T(),sx:{transition:"all 0.3s ease","&:hover":{transform:"scale(1.1)",backgroundColor:"action.hover"},"& .MuiSvgIcon-root":{transition:"transform 0.3s ease"},"&:hover .MuiSvgIcon-root":{transform:"rotate(180deg)"}},children:e.jsx(o,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(y,{title:k(),arrow:!0,children:e.jsx(v,{onClick:u,size:s,"aria-label":T(),"aria-controls":w?"theme-menu":void 0,"aria-haspopup":"true","aria-expanded":w?"true":void 0,sx:{transition:"all 0.3s ease",backgroundColor:w?"action.selected":"transparent","&:hover":{transform:"scale(1.05)",backgroundColor:"action.hover"},"& .MuiSvgIcon-root":{transition:"transform 0.3s ease"}},children:e.jsx(o,{})})}),e.jsx(U,{id:"theme-menu",anchorEl:h,open:w,onClose:S,TransitionComponent:$,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},PaperProps:{elevation:8,sx:{mt:1,minWidth:160,borderRadius:2,border:`1px solid ${f.palette.divider}`,"& .MuiMenuItem-root":{borderRadius:1,margin:"2px 4px",transition:"all 0.2s ease","&:hover":{backgroundColor:"action.hover",transform:"translateX(4px)"}}}},children:["light","dark","system"].map(x=>{const L=M[x],E=g===x;return e.jsxs(F,{onClick:()=>d(x),selected:E,sx:{fontWeight:E?600:400,backgroundColor:E?"action.selected":"transparent"},children:[e.jsx(q,{sx:{minWidth:36},children:e.jsx(L,{fontSize:"small",sx:{color:E?"primary.main":"text.secondary",transition:"color 0.2s ease"}})}),i&&e.jsx(W,{primary:p(`theme.${x}`,pe[x]),sx:{"& .MuiListItemText-primary":{fontSize:"0.875rem",color:E?"primary.main":"text.primary",transition:"color 0.2s ease"}}})]},x)})})]})}const P=r.forwardRef(({playerList:s,onClick:n,innerRef:l,...i},c)=>{const f=c||l;return n?e.jsxs(H,{...i,ref:f,onClick:n,sx:{display:"flex",alignItems:"center",borderRadius:1,px:.5,py:.25,minWidth:44,minHeight:44,color:"text.primary",fontSize:"inherit",fontWeight:500,"&:hover":{backgroundColor:"action.hover"},"&:focus":{backgroundColor:"action.focus"}},children:[e.jsx(O,{color:"success",sx:{fontSize:8,marginRight:"0.2rem"}}),s.length]}):e.jsxs("div",{...i,ref:f,style:{display:"flex",alignItems:"center",color:"var(--mui-palette-text-primary)",fontWeight:500},children:[e.jsx(O,{color:"success",sx:{fontSize:8,marginRight:"0.2rem"}}),s.length]})});P.displayName="PlayersOnline";const Se=r.lazy(()=>j(()=>import("./index.tsx-Dfj4icvq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),Ce=r.lazy(()=>j(()=>import("./index.tsx-C0A4SIAL.js"),__vite__mapDeps([16,8,1,2,4,17,10,11,18,13,14,15,6,19,20,21,9,5,12]))),we=r.lazy(()=>j(()=>import("./index.tsx-BbzYcVgX.js"),__vite__mapDeps([22,1,2,23])));function Ie(){return e.jsx(Y,{size:16})}function Te({room:s,playerList:n=[]}){const{t:l}=N(),[i,c]=r.useState(!1),[f,g]=r.useState(!1),[C,I]=r.useState(!1),{schedule:b}=ge(),p=he(),h=r.useRef(null),m=()=>{c(!0),I(!0)},w=()=>{g(!f)},a=()=>{g(!1)};return e.jsx(K,{position:"fixed",children:e.jsxs(J,{disableGutters:!0,variant:"dense",component:"nav",className:"nav",children:[e.jsxs("div",{className:"site-name",children:[e.jsx(V,{component:"img",sx:{height:32},alt:"Blitzed Out Logo",src:me}),e.jsx("h1",{className:"gradient-text",children:"Blitzed Out"})]}),e.jsx("div",{children:e.jsxs("div",{className:"nav-room-name",children:[e.jsx("h2",{children:ue(s)||s===void 0?l("public"):s}),e.jsx(P,{playerList:n,onClick:w,ref:h,"aria-label":l("online"),"aria-expanded":f,"aria-haspopup":"dialog"}),e.jsx(v,{onClick:m,"aria-label":"schedule game",sx:{ml:2},children:e.jsx(Q,{color:"primary",badgeContent:C?null:b.length,children:e.jsx(ie,{})})}),i&&e.jsx(X,{children:e.jsx(r.Suspense,{fallback:e.jsx(Ie,{}),children:e.jsx(Se,{open:i,close:()=>c(!1),isMobile:p})})}),n.length>0&&e.jsx(r.Suspense,{fallback:null,children:e.jsx(we,{isOpen:f,onClose:a,playerList:n,anchorEl:h.current})})]})}),e.jsxs("div",{className:"menu-drawer",children:[e.jsx(xe,{size:"medium",variant:"menu","aria-label":"Toggle theme menu - choose between light, dark, or system theme"}),e.jsx(fe,{}),e.jsx(r.Suspense,{fallback:null,children:e.jsx(Ce,{})})]})]})})}const Ae=_(s=>e.jsx(Z,{disableGutters:!0,elevation:0,square:!0,...s}))(({theme:s})=>({border:`1px solid ${s.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}})),Oe=_(ee)(({theme:s})=>({padding:s.spacing(2),borderTop:`1px solid ${s.palette.divider}`})),Me=_(s=>e.jsx(se,{expandIcon:e.jsx(ce,{sx:{fontSize:"0.9rem"}}),...s}))(({theme:s})=>({backgroundColor:s.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(148, 163, 184, .08)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:s.spacing(1)}}));function De({close:s}){return e.jsx(v,{"aria-label":"close",onClick:s,sx:{position:"absolute",right:8,top:8},children:e.jsx(le,{})})}export{Ae as A,De as C,Te as N,ge as a,Me as b,Oe as c,ke as l,he as u};
