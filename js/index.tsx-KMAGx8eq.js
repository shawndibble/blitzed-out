import{r as s,ac as G,an as W,j as a,M as q,ao as R,ap as r,aq as d,ar as g,aa as x,z as V,Q as h,a1 as U,T as Q,y as H,x as J,as as X,ab as Y}from"./chunk-BgixYSR_.js";import{u as Z}from"./chunk-Bwg9F6F9.js";import{u as _}from"./chunk-Cx_qUD5L.js";import{u as $,l as N}from"./chunk-BWsq5OBy.js";import{u as aa}from"./chunk-C36tYXRh.js";import{e as ea}from"../assets/index-CxGCeJLO.js";import{N as sa}from"./chunk-Cj8mlm6Y.js";import na from"./index.tsx-G4gv_Vfv.js";import{A as ta}from"./chunk-ZeU1iebl.js";import{u as ra,T as n}from"./chunk-BSt5prxn.js";import{a as ia,b as p}from"./chunk-DrDkBt_V.js";import"./chunk-eXrMvu-N.js";import"./chunk-DwZ1iRu-.js";import"./chunk-C7PvMB7v.js";import"./chunk-B1ySd6_S.js";import"./chunk-hbSUYYRY.js";function Na(){const{i18n:i,t:v}=ra(),{login:j,user:S}=Z(),[w,o]=s.useState(!1),[D,y]=s.useState("login"),[f,b]=s.useState(!1),I=()=>{y("login"),o(!0)},K=()=>{y("register"),o(!0)},A=G(),[z]=W(),P=!!z.get("importBoard"),c=A.id??"PUBLIC",k=aa(),u=_("sm"),[l,M]=s.useState(S?.displayName||""),[L,C]=$(),m=s.useCallback(async e=>{e.preventDefault(),await C({...L,displayName:l,room:c}),await j(l)},[l,j,c,L,C]),O=s.useCallback(async e=>{e.key==="Enter"&&await m(e)},[m]),T=i.resolvedLanguage||"en",B=s.useCallback(async e=>{const t=e.target.value;b(!0);try{await ea(t),await i.changeLanguage(t)}catch(F){console.error("Error changing language:",F),await i.changeLanguage(t)}finally{b(!1)}},[i]),E=s.useMemo(()=>Object.entries(N).map(([e,t])=>a.jsx(q,{value:e,children:t.label},e)),[N]);return a.jsxs(a.Fragment,{children:[a.jsx(sa,{room:c,playerList:k}),a.jsxs(R,{maxWidth:"sm",sx:{mt:8},children:[a.jsx(r,{container:!0,flexDirection:"column",children:a.jsx(d,{className:"unauthenticated-card",children:a.jsxs(g,{children:[a.jsx("h2",{className:"setup",children:a.jsx(n,{i18nKey:"setup"})}),a.jsxs(x,{component:"form",method:"post",onSubmit:m,className:"settings-box",children:[a.jsx(V,{fullWidth:!0,id:"displayName",label:v("displayName"),value:l,onChange:e=>M(e.target.value),required:!0,autoFocus:!0,onKeyDown:e=>O(e),margin:"normal"}),a.jsx(h,{variant:"contained",type:"submit",sx:{mr:1},fullWidth:!0,children:P?a.jsx(n,{i18nKey:"import"}):a.jsx(n,{i18nKey:"anonymousLogin"})}),a.jsx(U,{sx:{my:2},children:a.jsx(Q,{variant:"body2",color:"text.secondary",children:a.jsx(n,{i18nKey:"or",children:"OR"})})}),a.jsxs(x,{sx:{display:"flex",justifyContent:"space-evenly"},children:[a.jsx(h,{variant:"outlined",startIcon:a.jsx(ia,{}),onClick:I,sx:{mr:1},children:a.jsx(n,{i18nKey:"signIn"})}),a.jsx(h,{variant:"outlined",onClick:K,children:a.jsx(n,{i18nKey:"createAccount"})})]})]})]})})}),a.jsx(r,{container:!0,sx:{mt:1},children:a.jsx(r,{className:"language",children:a.jsx(d,{className:"unauthenticated-card",children:a.jsx(g,{className:"translation-card-content",children:a.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:2},children:[!u&&a.jsx(p,{}),a.jsxs(H,{size:"small",sx:{minWidth:160,flexGrow:1},children:[a.jsxs(J,{id:"unauth-language-label",sx:{display:"flex",alignItems:"center",fontSize:"0.875rem"},children:[u&&a.jsx(p,{sx:{mr:.5,fontSize:"1rem"}}),a.jsx(n,{i18nKey:"language"})]}),a.jsx(X,{labelId:"unauth-language-label",id:"unauth-language-select",value:T,disabled:f,label:a.jsxs(a.Fragment,{children:[u&&a.jsx(p,{sx:{fontSize:"1rem"}}),a.jsx(n,{i18nKey:"language"})]}),onChange:B,size:"small",inputProps:{endAdornment:f&&a.jsx(Y,{size:16})},children:E})]})]})})})})}),a.jsx(r,{container:!0,sx:{mt:1},children:a.jsx(r,{className:"language",children:a.jsx(d,{className:"unauthenticated-card",children:a.jsx(g,{children:a.jsx(na,{})})})})})]}),a.jsx(ta,{open:w,close:()=>o(!1),initialView:D})]})}export{Na as default};
