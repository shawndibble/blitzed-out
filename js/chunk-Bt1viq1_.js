const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index.tsx-B3aWWI28.js","js/chunk-DDoLnHI0.js","js/chunk-CtIAsvv6.js","js/chunk-D59Sa5ya.js","js/chunk-CoPHbQIg.js","js/chunk-bqvoNmJe.js","js/chunk-BDM5WtNj.js","js/chunk-B4PEA_xj.js","assets/index-BodytYbc.js","js/chunk-CbUvEgHM.js","js/chunk-Dk7I1tJi.js","js/chunk-COViFSNc.js","js/chunk-BICGdz9x.js","js/chunk-Bp62TkGl.js","js/index.tsx-Cu9Tuoh6.js","js/chunk-C7YV9Ru2.js","js/chunk-BmcVylZL.js"])))=>i.map(i=>d[i]);
import{X as g}from"./chunk-CtIAsvv6.js";import{R as v,r as n,u as I,j as e,q as O,t as b}from"./chunk-DDoLnHI0.js";import{S as k}from"../assets/index-BodytYbc.js";import{u as A}from"./chunk-BICGdz9x.js";import{O as j,Q as _,$ as R,a0 as z,a1 as N,T as h,W as P,a2 as T,B as D,a3 as B,a4 as L,a5 as M,C as q}from"./chunk-D59Sa5ya.js";import{t as S}from"./chunk-Dk7I1tJi.js";import{i as G}from"./chunk-Bp62TkGl.js";function U(){const s=v.useContext(k);if(!s)throw new Error("ScheduleContext's value is undefined.");return s}const W="/img/blitzed-out-DGhYHOgx.png";window.__castApiInitialized=window.__castApiInitialized||!1;function $(){const[s,i]=n.useState(!1),[o,d]=n.useState(null),{id:c}=I(),m=n.useRef(null),[u,f]=n.useState(!1),l=n.useCallback(a=>{try{const r=`${window.location.origin}/${c}/cast`;console.log("Sending cast message with URL:",r),a.sendMessage("urn:x-cast:com.blitzedout.app",{type:"LOAD",url:r})}catch(r){console.error("Error sending cast message:",r)}},[c]);n.useEffect(()=>{const a=()=>{try{if(!window?.cast?.framework)return;if(window.__castApiInitialized){f(!0),r();return}window.cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:"1227B8DE",autoJoinPolicy:window.chrome?.cast?.AutoJoinPolicy?.ORIGIN_SCOPED}),window.__castApiInitialized=!0,f(!0),r()}catch(t){console.error("Error initializing Cast API:",t)}},r=()=>{try{const t=window.cast?.framework?.CastContext.getInstance();if(!t)return;const x=t.getCurrentSession();if(x&&(i(!0),d(x),c&&l(x)),!window?.cast?.framework)return;t.addEventListener(window.cast.framework.CastContextEventType.SESSION_STATE_CHANGED,y=>{const w=t.getCurrentSession();switch(y.sessionState){case window.cast?.framework?.SessionState.SESSION_STARTED:case window.cast?.framework?.SessionState.SESSION_RESUMED:i(!0),d(w),w&&c&&l(w);break;case window.cast?.framework?.SessionState.SESSION_ENDED:i(!1),d(null);break;default:break}})}catch(t){console.error("Error setting up session listener:",t)}};if(window.chrome&&window.chrome.cast&&window.cast)a();else if(window.__onGCastApiAvailable=function(t){t&&a()},!document.querySelector('script[src*="cast_sender.js"]')){const t=document.createElement("script");t.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.head.appendChild(t)}return()=>{}},[c,l]);const p=()=>{if(u)if(s)o&&o.endSession(!0);else try{const a=window.cast?.framework?.CastContext.getInstance();a&&a.requestSession().then(()=>console.log("Cast session requested successfully"),r=>console.error("Error requesting cast session:",r))}catch(a){console.error("Error requesting cast session:",a)}};return n.useEffect(()=>{s&&o&&c&&l(o)},[c,s,o,l]),u?e.jsx(j,{title:s?S("stopCasting"):S("startCasting"),children:e.jsx(_,{ref:m,onClick:p,color:s?"primary":"default",children:s?e.jsx(R,{}):e.jsx(z,{})})}):null}function F({playerList:s,innerRef:i,...o}){return e.jsxs("div",{...o,ref:i,children:[e.jsx(N,{color:"success",sx:{fontSize:8,marginRight:"0.2rem"}}),s.length]})}const H=n.lazy(()=>g(()=>import("./index.tsx-B3aWWI28.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),J=n.lazy(()=>g(()=>import("./index.tsx-Cu9Tuoh6.js"),__vite__mapDeps([14,2,1,3,4,15,8,9,10,11,5,12,16])));function C(){return e.jsx(q,{size:16})}function V({room:s,playerList:i=[]}){const{t:o}=O(),[d,c]=n.useState(!1),[m,u]=n.useState(!1),{schedule:f}=U(),l=A(),p=()=>{c(!0),u(!0)},a=e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"h6",children:e.jsx(b,{i18nKey:"online"})}),e.jsx("ul",{children:i.map(r=>e.jsx("li",{children:e.jsx(h,{variant:"body1",children:r.displayName})},r.uid))})]});return e.jsx(P,{position:"fixed",children:e.jsxs(T,{disableGutters:!0,variant:"dense",component:"nav",className:"nav",children:[e.jsxs("div",{className:"site-name",children:[e.jsx(D,{component:"img",sx:{height:32},alt:"Blitzed Out Logo",src:W}),e.jsx("h1",{children:"Blitzed Out"})]}),e.jsx("div",{children:e.jsxs("div",{className:"nav-room-name",children:[e.jsx("h2",{children:G(s)||s===void 0?o("public"):s}),e.jsx(j,{title:a,children:e.jsx(E,{playerList:i})}),e.jsx(_,{onClick:p,"aria-label":"schedule game",sx:{ml:2},children:e.jsx(B,{color:"primary",badgeContent:m?null:f.length,children:e.jsx(L,{})})}),d&&e.jsx(M,{children:e.jsx(n.Suspense,{fallback:e.jsx(C,{}),children:e.jsx(H,{open:d,close:()=>c(!1),isMobile:l})})})]})}),e.jsxs("div",{className:"menu-drawer",children:[e.jsx($,{}),e.jsx(n.Suspense,{fallback:e.jsx(C,{}),children:e.jsx(J,{})})]})]})})}const E=n.forwardRef(({playerList:s,...i},o)=>e.jsx(F,{playerList:s,...i,innerRef:o}));E.displayName="WrapPlayersOnline";const te=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"}));export{V as N,te as i,U as u};
