import{j as e,aa as S,am as M,av as z,aw as W,aV as w,T as u,ax as m,U as I,r as h,z as _,Q as R,au as A,aW as J,aH as Z,y as D,x as ee,ay as te,M as ne,aX as se,aY as ie,aZ as oe,az as G,aQ as re,aR as ae,aS as le,a1 as V,ab as ce,D as de,J as pe,a_ as ue,a$ as xe,b0 as me,ad as he,as as ge,W as be,aD as je,Y as ye}from"./chunk-CMb_ATvh.js";import{C as Se}from"./chunk-BBrONRl2.js";import{u as fe}from"./chunk-DQWlF9SU.js";import{k as ve,l as Ce,H as ke,T as Ae,E as we}from"./chunk-jdmcjs0s.js";import{b as Pe,c as N,d as Ie,e as Re}from"./chunk-BHUSFDWr.js";import{i as P,b as B}from"./chunk-C7PvMB7v.js";import{d as Me}from"./chunk-BVhHzeSz.js";import{a as Te,r as Be,J as ze}from"./chunk-B90GCnie.js";import{I as L,Y as We,G as Ee}from"./chunk-BfQNrE3P.js";import{u as Ke}from"./chunk-DOVm5_QK.js";import"./chunk-B-Pfj4Vk.js";import"../assets/index-BPZ_Msrf.js";import"./chunk-BUE_ixxi.js";import"./chunk-B4PEA_xj.js";import"./chunk-B8IgU524.js";import"./chunk-ClYjm9Ad.js";import"./chunk-Bp-jfObm.js";import"./chunk-DF6wAis7.js";function K({children:t,justifyContent:s="space-evenly"}){return e.jsx(S,{sx:{mt:3,display:"flex",flexDirection:"row",justifyContent:s,alignItems:"center"},children:t})}function F({isPublic:t,onClick:s,isSelected:i}){const{t:a}=M();return e.jsx(z,{sx:{cursor:"pointer",border:i?"3px solid":"1px solid",borderColor:i?"primary.main":"grey.300",backgroundColor:i?"primary.50":"background.paper",transform:i?"scale(1.02)":"scale(1)",transition:"all 0.2s ease-in-out","&:hover":{borderColor:"primary.main",boxShadow:i?4:2,transform:"scale(1.02)"}},onClick:s,children:e.jsx(W,{sx:{p:3},children:e.jsxs(w,{direction:"row",spacing:3,alignItems:"center",children:[e.jsx(S,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,borderRadius:"50%",backgroundColor:i?"primary.main":"primary.50",color:i?"primary.contrastText":"primary.main",transition:"all 0.2s ease-in-out"},children:t?e.jsx(ve,{sx:{fontSize:28},"aria-label":"Public"}):e.jsx(Ce,{sx:{fontSize:28},"aria-label":"Private"})}),e.jsxs(w,{spacing:.5,flex:1,children:[e.jsxs(w,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(u,{variant:"h6",component:"h3",sx:{fontWeight:600},children:e.jsx(m,{i18nKey:t?"public":"private"})}),i&&e.jsx(I,{label:a("selected"),size:"small",color:"primary",sx:{fontSize:"0.75rem",fontWeight:500,height:20}})]}),e.jsx(u,{variant:"body1",color:"text.secondary",sx:{fontSize:"0.95rem"},children:e.jsx(m,{i18nKey:t?"publicRoomBenefit":"privateRoomBenefit"})})]})]})})})}function Oe({formData:t,setFormData:s,nextStep:i}){const a=Pe(),{t:n}=M(),[l,c]=h.useState(!P(t.room)),[r,d]=h.useState(t.room?.toUpperCase()||""),p=async C=>{try{const f=Te(),T=Be(f,`rooms/${C}/uids`);return(await ze(T)).exists()}catch(f){return console.warn("Error checking room existence:",f),!1}},o=h.useCallback(async()=>{const C=Me("123456789ABCDEFGHJKLMNPQRSTUVWXYZ",5);let f,T=0;const O=10;do if(f=C(),T++,T>=O){console.warn("Max attempts reached for room ID generation, using generated ID");break}while(await p(f));return f},[]),g=h.useCallback(()=>{s({...t,room:"PUBLIC",gameMode:"online"}),c(!1)},[t,s]),j=h.useCallback(async()=>{if(P(t.room)){const C=await o();s({...t,room:C}),d(C.toUpperCase())}c(!0)},[t,s,o]),y=h.useCallback(C=>{s({...t,room:C,boardUpdated:!0})},[t,s]),k=h.useCallback(C=>{const f=C.target.value.toUpperCase();d(f)},[]),b=h.useCallback(()=>{y(r)},[y,r]),x=h.useCallback(C=>{C.key==="Enter"&&y(r)},[y,r]);function v(){a(t.room),i(P(t.room)?2:1)}const E=P(t.room);return e.jsxs(S,{sx:{m:1},children:[e.jsx(u,{variant:"h5",gutterBottom:!0,textAlign:"center",children:e.jsx(m,{i18nKey:"chooseRoomType"})}),e.jsx(u,{variant:"body1",color:"text.secondary",textAlign:"center",sx:{mb:3},children:e.jsx(m,{i18nKey:"roomTypeDescription"})}),e.jsxs(w,{spacing:2,sx:{mb:3},children:[e.jsx(F,{isPublic:!0,onClick:g,isSelected:E}),e.jsx(F,{isPublic:!1,onClick:j,isSelected:!E})]}),l&&e.jsxs(S,{sx:{p:3,borderRadius:2,backgroundColor:"primary.50",mb:2},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:n("privateRoomCode")}),e.jsx(_,{fullWidth:!0,id:"privateRoom",value:r,onBlur:b,onKeyDown:x,onChange:k,inputProps:{style:{textTransform:"uppercase",fontFamily:"monospace",fontSize:"1.25rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.2em"}},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"background.paper","& fieldset":{borderColor:"divider",borderWidth:2},"&:hover fieldset":{borderColor:"primary.main"},"&.Mui-focused fieldset":{borderColor:"primary.main",borderWidth:2}}}}),e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mt:1.5,textAlign:"center"},children:n("privateRoomCodeHelp")})]}),e.jsx(K,{children:e.jsx(R,{variant:"contained",onClick:v,size:"large",children:e.jsx(m,{i18nKey:E?"nextSkip":"next"})})})]})}function Ne({formData:t,setFormData:s,nextStep:i,prevStep:a}){const[n,l]=h.useState(!B(t?.gameMode)),{t:c}=M();h.useEffect(()=>{l(!B(t?.gameMode))},[t?.gameMode]);const r=[{id:"local",title:"yesInteracting",description:c("physicalInteractionDesc"),isSelected:!B(t?.gameMode)},{id:"online",title:"noInteracting",description:c("soloOnlinePlayDesc"),isSelected:B(t?.gameMode)}],d=[{value:"dom",label:"Dominant",description:c("dominantRoleDesc")},{value:"vers",label:"Switch",description:c("switchRoleDesc")},{value:"sub",label:"Submissive",description:c("submissiveRoleDesc")}],p=[{id:"clothed",title:"noNaked",description:c("foreplayClothedDesc"),isSelected:!t.isNaked},{id:"naked",title:"yesNaked",description:c("intimateNudityDesc"),isSelected:t.isNaked}];return e.jsxs(S,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[e.jsx(u,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(m,{i18nKey:"playingWithPeople"})}),e.jsx(A,{container:!0,spacing:2,sx:{mb:3},children:r.map(o=>e.jsx(A,{size:{xs:12,sm:6},children:e.jsx(z,{sx:{cursor:"pointer",border:o.isSelected?"3px solid":"1px solid",borderColor:o.isSelected?"primary.main":"divider",backgroundColor:o.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%",transform:o.isSelected?"scale(1.02)":"scale(1)","&:hover":{borderColor:"primary.main",transform:"scale(1.02)",boxShadow:2}},onClick:()=>s({...t,gameMode:o.id==="local"?"local":"online",roomRealtime:o.id!=="local"}),children:e.jsx(W,{sx:{p:3},children:e.jsxs(w,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(u,{variant:"h6",sx:{fontWeight:600},children:c(o.title)}),e.jsx(u,{variant:"body2",color:"text.secondary",children:o.description}),o.isSelected&&e.jsx(I,{label:c("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},o.id))}),e.jsx(J,{in:n,timeout:500,children:e.jsxs(S,{sx:{mb:3},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:e.jsx(m,{i18nKey:"yourRole"})}),e.jsx(A,{container:!0,spacing:2,sx:{mb:3},children:d.map(o=>e.jsx(A,{size:{xs:12,sm:4},children:e.jsx(z,{sx:{cursor:"pointer",border:t.role===o.value?"2px solid":"1px solid",borderColor:t.role===o.value?"primary.main":"divider",backgroundColor:t.role===o.value?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>s({...t,role:o.value}),children:e.jsx(W,{sx:{p:2.5},children:e.jsxs(w,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(u,{variant:"subtitle1",sx:{fontWeight:600},children:c(o.value)}),e.jsx(u,{variant:"body2",color:"text.secondary",children:o.description}),t.role===o.value&&e.jsx(I,{label:c("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},o.value))}),e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:e.jsx(m,{i18nKey:"areYouNaked"})}),e.jsx(A,{container:!0,spacing:2,children:p.map(o=>e.jsx(A,{size:{xs:12,sm:6},children:e.jsx(z,{sx:{cursor:"pointer",border:o.isSelected?"2px solid":"1px solid",borderColor:o.isSelected?"primary.main":"divider",backgroundColor:o.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>s({...t,isNaked:o.id==="naked"}),children:e.jsx(W,{sx:{p:3},children:e.jsxs(w,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(u,{variant:"h6",sx:{fontWeight:600},children:c(o.title)}),e.jsx(u,{variant:"body2",color:"text.secondary",children:o.description}),o.isSelected&&e.jsx(I,{label:c("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},o.id))})]})}),e.jsx(S,{sx:{flexGrow:1}}),e.jsxs(K,{children:[e.jsx(R,{onClick:a,children:e.jsx(m,{i18nKey:"previous"})}),e.jsx(R,{variant:"contained",onClick:i,children:e.jsx(m,{i18nKey:"next"})})]})]})}function Fe({gameMode:t,onPresetSelect:s,selectedPreset:i,actionsList:a}){const{t:n}=M(),l={solo:[{id:"popperbating",name:n("presetPopperbating"),description:n("presetPopperbatingDesc"),actions:["bating"],consumptions:["poppers"],intensities:{bating:2,poppers:1}},{id:"smoking-tits",name:n("presetSmokingTits"),description:n("presetSmokingTitsDesc"),actions:["titTorture"],consumptions:["vaping"],intensities:{titTorture:2,vaping:1}},{id:"exploration-solo",name:n("presetExplorationSolo"),description:n("presetExplorationSoloDesc"),actions:["throatTraining","buttPlay","titTorture","ballBusting"],consumptions:[],intensities:{throatTraining:1,buttPlay:1,titTorture:1,ballBusting:1}},{id:"ball-busting",name:n("presetBallBusting"),description:n("presetBallBustingDesc"),actions:["ballBusting","bating"],consumptions:["poppers"],intensities:{ballBusting:2,bating:2}}],foreplay:[{id:"romantic-start",name:n("presetRomanticStart"),description:n("presetRomanticStartDesc"),actions:["kissing","stripping"],consumptions:["alcohol"],intensities:{kissing:2,stripping:1,alcohol:1}},{id:"degrading",name:n("presetDegrading"),description:n("presetDegradingDesc"),actions:["humiliation","footPlay","breathPlay"],consumptions:["poppers"],intensities:{humiliation:2,footPlay:2,breathPlay:2,poppers:2}},{id:"sensual-touch",name:n("presetSensualTouch"),description:n("presetSensualTouchDesc"),actions:["kissing","footPlay","tickling"],consumptions:[],intensities:{kissing:2,footPlay:1,tickling:1}},{id:"electric-play",name:n("presetElectricPlay"),description:n("presetElectricPlayDesc"),actions:["electric","bondage"],consumptions:["vaping"],intensities:{electric:1,bondage:2,vaping:1}}],sex:[{id:"gentle-sex",name:n("presetGentleSex"),description:n("presetGentleSexDesc"),actions:["throatTraining","bating","buttPlay"],consumptions:["alcohol"],intensities:{throatTraining:1,bating:1,buttPlay:1,alcohol:1}},{id:"fisting",name:n("presetFisting"),description:n("presetFistingDesc"),actions:["buttPlay"],consumptions:["poppers"],intensities:{buttPlay:4,poppers:4}},{id:"bdsm",name:n("presetBdsm"),description:n("presetBdsmDesc"),actions:["pissPlay","throatTraining","spanking","titTorture"],consumptions:[],intensities:{pissPlay:2,throatTraining:2,spanking:2,titTorture:2}},{id:"breath-control",name:n("presetBreathControl"),description:n("presetBreathControlDesc"),actions:["bating"],consumptions:["gasMask"],intensities:{bating:2,gasMask:2}}]},c=l[t]||l.solo,r=d=>{s(d)};return e.jsxs(S,{children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:n("quickStart")}),e.jsx(A,{container:!0,spacing:2,children:c.map(d=>e.jsx(A,{size:{xs:12,sm:6,lg:3},children:e.jsx(z,{sx:{cursor:"pointer",border:i===d.id?2:1,borderColor:i===d.id?"primary.main":"divider",backgroundColor:i===d.id?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>r(d),children:e.jsxs(W,{sx:{p:2.5},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:d.name}),e.jsxs(S,{children:[d.actions.map((p,o)=>e.jsx(I,{label:a[p]?.label||p,size:"small",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:"primary.main",color:"primary.main","&:hover":{backgroundColor:"primary.50"}}},`action-${o}`)),d.consumptions.map((p,o)=>e.jsx(I,{label:a[p]?.label||p,size:"small",color:"secondary",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:"secondary.main",color:"secondary.main","&:hover":{backgroundColor:"secondary.50"}}},`consumption-${o}`))]})]})})},d.id))})]})}function U(){return e.jsxs(u,{variant:"h6",sx:{mt:2},children:[e.jsx(m,{i18nKey:"setIntensityLevel"}),e.jsx(Z,{title:e.jsx(u,{variant:"body1",children:e.jsx(m,{i18nKey:"intensityTooltip"})}),arrow:!0,sx:{ml:1},children:e.jsx(ke,{sx:{ml:.5,fontSize:15}})})]})}const Ge=(t,s)=>{const{gameMode:i,isNaked:a}=t,n=B(i);return n&&["foreplay","sex"].includes(s.type)||!n&&a&&["solo","foreplay"].includes(s.type)||!n&&!a&&["solo","sex"].includes(s.type)},Ve=t=>{const s={...t},i=t.selectedActions||{},a={};return Object.entries(i).forEach(([n,l])=>{Ge(t,l)||(a[n]=l)}),s.selectedActions=a,s},Y=(t,s,i)=>{const a=t.selectedActions||{};return Object.entries(a).map(([n,l])=>{const c=s.find(r=>r.value===n);return l.type!==i||!c?null:n}).filter(n=>!!n)},Le=(t,s,i)=>{const a={...t},n={...a.selectedActions};return Object.keys(n).forEach(l=>{n[l].type===s&&!i.includes(l)&&delete n[l]}),a.selectedActions=n,a},H=(t,s,i)=>{i(a=>{const n=Le(a,s,t),l={...n.selectedActions};return t.forEach(c=>{if(l[c])return;let r={type:s,level:1};s==="consumption"&&(r={...r,variation:n.isAppend?"appendMost":"standalone"}),l[c]=r}),{...n,selectedActions:l}})},$=(t,s,i,a,n,l=null)=>{const c=t?.target?.value;if(c===0)return n(r=>r.filter(d=>d!==s)),a(r=>{const d={...r.selectedActions};return delete d[s],{...r,selectedActions:d}});a(r=>{const d={...r.selectedActions};return d[s]={...d[s]||{},type:i,level:c,...!!l&&{variation:l}},{...r,selectedActions:d}})},Ue=t=>!!(t&&Object.keys(t).some(s=>{const i=t[s];return(i?.level??0)>0&&i?.variation!=="appendMost"}));function q({onChange:t,values:s,options:i,label:a}){const n=h.useCallback(c=>i?.find(r=>r.value===c)?.label,[i]),l=h.useCallback(c=>e.jsx(S,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:c?.map(r=>e.jsx(I,{label:n(r)},r))}),[n]);return e.jsxs(D,{fullWidth:!0,children:[e.jsx(ee,{id:`${a}-label`,children:a}),e.jsx(te,{labelId:`${a}-label`,id:`${a}`,multiple:!0,value:s,onChange:t,fullWidth:!0,input:e.jsx(oe,{label:e.jsx(m,{i18nKey:"actionsLabel"})}),renderValue:l,children:i?.map(({label:c,value:r})=>e.jsxs(ne,{value:r,children:[e.jsx(se,{checked:s.includes(r)}),e.jsx(ie,{primary:c})]},r))})]})}const Ye=2;function He({formData:t,setFormData:s,options:i,actionsList:a}){const n="consumption",l=i(n),r=Y(t,l,n)||[],d=o=>{const{value:g}=o.target,j=typeof g=="string"?g.split(","):g;j.length<=Ye&&H(j,n,s)},p=(o,g)=>{const j=o.target.checked?"appendMost":"standalone",y=o.target.checked,k={...t.selectedActions};g.forEach(x=>{k[x]&&(k[x]={...k[x],variation:j})});const b={...t,isAppend:y,selectedActions:k};s(b)};return e.jsxs(e.Fragment,{children:[e.jsx(u,{variant:"h6",sx:{my:2},children:e.jsx(m,{i18nKey:"pickConsumptions"})}),e.jsx(q,{onChange:d,values:r,options:l,label:G("consumables")}),!!r.length&&e.jsxs(e.Fragment,{children:[e.jsx(U,{}),r.map(o=>e.jsx(L,{actionsFolder:a,settings:t,option:o,initValue:1,onChange:g=>$(g,o,n,s,()=>{},t.isAppend?"appendMost":"standalone")},o)),e.jsx(u,{variant:"h6",sx:{mt:2},children:e.jsx(m,{i18nKey:"standaloneOrCombine"})}),e.jsx(We,{trueCondition:t.isAppend,onChange:o=>p(o,r),yesLabel:"combineWithActions"})]})]})}const $e=4,qe=t=>B(t?.gameMode)?"solo":t.isNaked?"sex":"foreplay";function Qe({formData:t,setFormData:s,options:i,actionsList:a}){const n=qe(t),l=i(n),r=Y(t,l,n)||[],d=p=>{const{value:o}=p.target,g=typeof o=="string"?o.split(","):o;g.length<=$e&&H(g,n,s)};return e.jsxs(e.Fragment,{children:[e.jsx(u,{variant:"h6",sx:{my:2},children:e.jsx(m,{i18nKey:"pickActions"})}),e.jsx(q,{onChange:d,values:r,options:l,label:G("actionsLabel")}),r.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(U,{}),r.map(p=>e.jsx(L,{actionsFolder:a,settings:t,option:p,initValue:1,onChange:o=>$(o,p,n,s,()=>{})},p))]})]})}function Xe({formData:t,setFormData:s,nextStep:i,prevStep:a,actionsList:n}){const{t:l}=M(),[c,r]=h.useState(""),[d,p]=h.useState(!1);function o(x){return Object.keys(n).filter(v=>n[v]?.type===x)}h.useEffect(()=>{const x=Ve(t);s(x)},[]);const g=x=>o(x).map(v=>({value:v,label:n[v]?.label}));let j;t.gameMode==="online"?j="solo":t.gameMode==="local"&&!t.isNaked?j="foreplay":j="sex";const y=(x,v,E,C)=>{x.forEach(f=>{if(n[f]){const T=E.intensities?.[f]||v,Q=Object.keys(n[f].intensities||{}).filter(X=>X!=="None").length;C[f]={type:n[f].type,level:Math.min(T,Q)}}})},k=x=>{r(x.id);const v={};y(x.actions,2,x,v),y(x.consumptions,1,x,v),s({...t,selectedActions:v})},b=!Ue(t.selectedActions);return e.jsxs(S,{children:[e.jsx(Fe,{gameMode:j,onPresetSelect:k,selectedPreset:c,actionsList:n}),e.jsx(S,{sx:{mt:4},children:e.jsxs(re,{expanded:d,onChange:(x,v)=>p(v),children:[e.jsx(ae,{expandIcon:e.jsx(we,{}),"aria-controls":"customization-content",id:"customization-header",children:e.jsxs(w,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Ae,{}),e.jsx(u,{variant:"h6",children:l("customizeActions")})]})}),e.jsxs(le,{children:[e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:l("customizeActionsDesc")}),e.jsx(Qe,{formData:t,setFormData:s,options:g,actionsList:n}),e.jsx(V,{sx:{my:3}}),e.jsx(He,{formData:t,setFormData:s,options:g,actionsList:n})]})]})}),e.jsx(S,{sx:{mt:4},children:e.jsxs(K,{children:[e.jsx(R,{onClick:()=>a(P(t.room)?2:1),children:e.jsx(m,{i18nKey:"previous"})}),e.jsx(R,{variant:"contained",disabled:b,onClick:i,size:"large",children:e.jsx(m,{i18nKey:"next"})})]})})]})}function _e({formData:t,setFormData:s,prevStep:i,actionsList:a,close:n}){const l=[100,100],c=[0,0],[r,d]=h.useState(N(t?.finishRange||[],c)),[p,o]=h.useState(!1),g=Ie(),{t:j}=M();h.useEffect(()=>{let b={...t,boardUpdated:!0};(!r||!N(t.finishRange||[],l))&&(b.finishRange=l),s(b)},[]);async function y(){o(!0);try{await g(t,a)}catch(b){console.error("Error submitting settings:",b)}finally{o(!1)}typeof n=="function"&&n()}const k=[{id:"noOrgasm",title:"noOrgasm",description:j("noOrgasmDesc"),isSelected:!r},{id:"yesOrgasm",title:"yesOrgasm",description:j("yesOrgasmDesc"),isSelected:r}];return e.jsxs(S,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[e.jsx(u,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(m,{i18nKey:"WillYouOrgasm"})}),e.jsx(A,{container:!0,spacing:2,sx:{mb:4},children:k.map(b=>e.jsx(A,{size:{xs:12,sm:6},children:e.jsx(z,{sx:{cursor:"pointer",border:b.isSelected?"3px solid":"1px solid",borderColor:b.isSelected?"primary.main":"divider",backgroundColor:b.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%",transform:b.isSelected?"scale(1.02)":"scale(1)","&:hover":{borderColor:"primary.main",transform:"scale(1.02)",boxShadow:2}},onClick:()=>{const x=b.id==="yesOrgasm";s({...t,finishRange:x?c:l}),d(x)},children:e.jsx(W,{sx:{p:3},children:e.jsxs(w,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(u,{variant:"h6",sx:{fontWeight:600},children:j(b.title)}),e.jsx(u,{variant:"body2",color:"text.secondary",children:b.description}),b.isSelected&&e.jsx(I,{label:j("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},b.id))}),e.jsx(S,{sx:{flexGrow:1}}),e.jsxs(K,{children:[e.jsx(R,{onClick:i,disabled:p,children:e.jsx(m,{i18nKey:"previous"})}),e.jsx(R,{variant:"contained",onClick:y,disabled:p,startIcon:p?e.jsx(ce,{size:20,color:"inherit"}):null,size:"large",sx:{px:4},children:e.jsx(m,{i18nKey:"buildGame"})})]})]})}function Je({currentStep:t,isPublicRoom:s}){const{t:i}=M(),a=de(),n=pe(a.breakpoints.down("md")),l=s?[i("roomSelection","Room Selection"),i("actionsSelection","Actions Selection"),i("finishSetup","Finish Setup")]:[i("roomSelection","Room Selection"),i("gameModeSelection","Game Mode Selection"),i("actionsSelection","Actions Selection"),i("finishSetup","Finish Setup")],r=(d=>{if(s)switch(d){case 1:return 0;case 3:return 1;case 4:return 2;default:return 0}return d-1})(t);return e.jsx(ue,{activeStep:r,alternativeLabel:!n,orientation:"horizontal",sx:{...n&&{"& .MuiStepLabel-label":{display:"none"}}},children:l.map((d,p)=>e.jsx(xe,{children:e.jsx(me,{children:n?"":d})},p))})}function Ze({close:t}){const{id:s}=he(),[i,a]=h.useState(1),n={room:s};P(s)&&(n.gameMode="online",n.roomRealtime=!0);const[l,c]=Ke({gameMode:"online",roomRealtime:!0,actions:[],consumption:[],role:"sub",boardUpdated:!1,room:s||"PUBLIC"},n),r=h.useRef(!0),{actionsList:d}=Re(l.gameMode);h.useEffect(()=>{if(r.current){if(r.current=!1,l.advancedSettings){g();return}if(typeof t=="function"){if(P(s)){a(3);return}if(l.gameMode==="online"){a(3);return}a(2)}}},[l,t,s]);const p=y=>{if(!Number.isInteger(y))return a(i+1);a(i+(y||1))},o=y=>{if(!Number.isInteger(y))return a(i-1);a(i-(y||1))},g=()=>a(0),j=()=>{switch(i){case 1:return e.jsx(Oe,{formData:l,setFormData:c,nextStep:p});case 2:return e.jsx(Ne,{formData:l,setFormData:c,nextStep:p,prevStep:o});case 3:return e.jsx(Xe,{formData:l,setFormData:c,nextStep:p,prevStep:o,actionsList:d});case 4:return e.jsx(_e,{formData:l,setFormData:c,prevStep:o,actionsList:d,close:t});default:return null}};return i===0?e.jsx(Ee,{closeDialog:t}):e.jsxs(S,{children:[e.jsx(S,{sx:{width:"100%",mt:2,mb:4},children:e.jsx(Je,{currentStep:i,isPublicRoom:P(s)})}),j(),e.jsx(V,{sx:{mt:3}}),e.jsx(R,{onClick:g,children:e.jsx(m,{i18nKey:"advancedSetup"})})]})}function bt({open:t,close:s}){const i=fe(),[a]=ge();return a.get("importBoard")?null:e.jsxs(be,{fullScreen:i,open:t,maxWidth:"md",children:[e.jsxs(je,{children:[e.jsx(m,{i18nKey:"gameSettingsHeading"}),typeof s=="function"&&e.jsx(Se,{close:s})]}),e.jsx(ye,{children:e.jsx(Ze,{close:typeof s=="function"?s:void 0})})]})}export{bt as default};
