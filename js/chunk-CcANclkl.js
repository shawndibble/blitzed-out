import{E as f,K as h,r as m,a7 as g,au as x}from"./chunk-BCLv-HyH.js";import{M as y,o as w}from"./chunk-ghv0CanS.js";import{A as M}from"./chunk-C4_x7c3m.js";import{u as v}from"./chunk-BBKbBimA.js";function b(e="sm"){const t=f();return h(t.breakpoints.down(e))}function N(e){const t=e?.replace(/([A-Z])/g," $1").trim();return t?t.charAt(0).toUpperCase()+t.slice(1):""}function B(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}function R(e){const t=e?.split(/\r?\n/)||[];return t[t.length-1]?.split(":")[1]}function T(e,t){const n=new RegExp(`\\d+\\s${t}`,"g");return e.match(n)?.filter((r,c,u)=>u.indexOf(r)===c)}function $(e){return e?.toUpperCase()==="PUBLIC"}function k(e){return e==="online"}function A(){const e=m.useContext(M);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function C(){const e=g.useContext(y);if(!e)throw new Error("MessagesContext's value is undefined.");return e}function S(e){const t=w(e,"actions","DESC");return[...new Map(t.map(n=>[n.uid,n])).values()]}function F(){const{user:e}=A(),{messages:t,isLoading:n}=C(),{onlineUsers:r}=v();return m.useMemo(()=>{if(n||!e)return[];const u=S(t);return Object.values(r).map(s=>{const a=u.find(i=>i.uid===s.uid)?.text,l=/(?:#)[\d]*(?=:)/gs;let o=0;if(a&&a.match(l)){const i=a.match(l);i&&i[0]&&(o=Number(i[0].replace("#","")))}const d=o>0?o-1:o,p=!!a?.includes(x("finish"));return{displayName:s.displayName||"Unknown",uid:s.uid,isSelf:s.uid===e.uid,location:s.gameState?.location||d,isFinished:s.gameState?.isFinished||p,status:s.status||"away",lastActivity:s.lastSeen||new Date(0)}}).sort((s,a)=>s.isSelf?-1:a.isSelf?1:s.status==="active"&&a.status!=="active"?-1:a.status==="active"&&s.status!=="active"?1:s.displayName.localeCompare(a.displayName))},[e,r,t,n])}export{F as a,C as b,b as c,T as d,R as e,k as f,B as g,N as h,$ as i,A as u};
