import{j as e,ar as S,u as K,au as z,av as T,a$ as A,t as x,aw as h,a6 as L,aj as Q,r as g,S as ce,a3 as w,X as de,aP as G,at as P,aL as ue,Q as pe,O as xe,ay as he,M as me,aZ as ge,aV as be,b0 as ye,az as X,ax as J,aI as V,aK as Y,aJ as H,ae as Z,W as je,h as fe,b1 as Se,b2 as ve,b3 as Ce,aq as ke,a8 as we,aA as Pe,aa as Ae}from"./chunk-gLqOAnAo.js";import{u as Ie,C as Re}from"./chunk-CoT3YRZL.js";import{v as Me,w as ze,H as Te,d as Le,r as q,T as Ke}from"./chunk-DFT8axIh.js";import{i as M,d as O}from"./chunk-DfmEhtRA.js";import{b as Be}from"./chunk-D9KXFDlS.js";import{z as Oe,A as Ee,I as We}from"./chunk-DF6sfhGu.js";import{L as Ne,M as D,Y as _e,G as Ue}from"./chunk-qCrWNMY5.js";import{u as Ge}from"./chunk-BRW-j_h2.js";import{c as F,a as Ve,b as Ye}from"./chunk-yJSp0bHd.js";import{u as He}from"./chunk-XmCmKjvy.js";import"./chunk-Ce3NdNab.js";import"../assets/index-40AaoPFR.js";import"./chunk-BOQuZLLs.js";import"./chunk-C9KfLBvM.js";import"./chunk-Cxiyhgvx.js";import"./chunk-BpLDF4zL.js";import"./chunk-o-iJoEXR.js";import"./chunk-BhiRFd-u.js";import"./chunk-fFmCiWfE.js";(function(){var n=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{};n.SENTRY_RELEASE={id:"ba7d3cfce23f41097f343c1a83f9f2db3c72f794"}})();try{(function(){var n=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{},t=new n.Error().stack;t&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[t]="586798b4-a00f-432a-a719-c25a1d6edec8",n._sentryDebugIdIdentifier="sentry-dbid-586798b4-a00f-432a-a719-c25a1d6edec8")})()}catch(n){}function E({children:n,justifyContent:t="space-evenly"}){return e.jsx(S,{sx:{mt:3,display:"flex",flexDirection:"row",justifyContent:t,alignItems:"center"},children:n})}function $({isPublic:n,onClick:t,isSelected:o}){const{t:l}=K();return e.jsx(z,{sx:{cursor:"pointer",border:o?"3px solid":"1px solid",borderColor:o?"primary.main":"grey.300",backgroundColor:o?"primary.50":"background.paper",transform:o?"scale(1.02)":"scale(1)",transition:"all 0.2s ease-in-out","&:hover":{borderColor:"primary.main",boxShadow:o?4:2,transform:"scale(1.02)"}},onClick:t,children:e.jsx(T,{sx:{p:3},children:e.jsxs(A,{direction:"row",spacing:3,alignItems:"center",children:[e.jsx(S,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,borderRadius:"50%",backgroundColor:o?"primary.main":"primary.50",color:o?"primary.contrastText":"primary.main",transition:"all 0.2s ease-in-out"},children:n?e.jsx(Me,{sx:{fontSize:28},"aria-label":"Public"}):e.jsx(ze,{sx:{fontSize:28},"aria-label":"Private"})}),e.jsxs(A,{spacing:.5,flex:1,children:[e.jsxs(A,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(x,{variant:"h6",component:"h3",sx:{fontWeight:600},children:e.jsx(h,{i18nKey:n?"public":"private"})}),o&&e.jsx(L,{label:l("selected"),size:"small",color:"primary",sx:{fontSize:"0.75rem",fontWeight:500,height:20}})]}),e.jsx(x,{variant:"body1",color:"text.secondary",sx:{fontSize:"0.95rem"},children:e.jsx(h,{i18nKey:n?"publicRoomBenefit":"privateRoomBenefit"})})]})]})})})}function qe({formData:n,setFormData:t,nextStep:o}){var l;const{t:i}=K(),{id:s}=Q(),[u,p]=g.useState(!M(n.room||s)),[b,d]=g.useState(((l=n.room)==null?void 0:l.toUpperCase())||"");g.useEffect(()=>{const k=n.room||s,j=!M(k);p(j),d((k==null?void 0:k.toUpperCase())||"")},[s,n.room,u]);const a=async k=>{try{const j=Oe(),C=Ee(j,`rooms/${k}/uids`);return(await We(C)).exists()}catch(j){return!1}},r=g.useCallback(async()=>{const k=Be("123456789ABCDEFGHJKLMNPQRSTUVWXYZ",5);let j,C=0;const I=10;do if(j=k(),C++,C>=I)break;while(await a(j));return j},[]),c=g.useCallback(()=>{t({...n,room:"PUBLIC",gameMode:"online",roomRealtime:!0}),p(!1)},[n,t]),v=g.useCallback(async()=>{const k=await r();t({...n,room:k,gameMode:"online",roomRealtime:!1}),d(k.toUpperCase()),p(!0)},[n,t,r]),f=g.useCallback(k=>{t({...n,room:k,boardUpdated:!0})},[n,t]),m=g.useCallback(k=>{const j=k.target.value.toUpperCase();d(j)},[]),y=g.useCallback(()=>{f(b)},[f,b]),B=g.useCallback(k=>{k.key==="Enter"&&f(b)},[f,b]),R=M(n.room||s);function N(){o(R?3:1)}return e.jsxs(S,{sx:{m:1},children:[e.jsx(x,{variant:"h5",gutterBottom:!0,textAlign:"center",children:e.jsx(h,{i18nKey:"chooseRoomType"})}),e.jsx(x,{variant:"body1",color:"text.secondary",textAlign:"center",sx:{mb:3},children:e.jsx(h,{i18nKey:"roomTypeDescription"})}),e.jsxs(A,{spacing:2,sx:{mb:3},children:[e.jsx($,{isPublic:!0,onClick:c,isSelected:R}),e.jsx($,{isPublic:!1,onClick:v,isSelected:!R})]}),u&&e.jsxs(S,{sx:{p:3,borderRadius:2,backgroundColor:"primary.50",mb:2},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:i("privateRoomCode")}),e.jsx(ce,{fullWidth:!0,id:"privateRoom",value:b,onBlur:y,onKeyDown:B,onChange:m,inputProps:{style:{textTransform:"uppercase",fontFamily:"monospace",fontSize:"1.25rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.2em"}},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"background.paper","& fieldset":{borderColor:"divider",borderWidth:2},"&:hover fieldset":{borderColor:"primary.main"},"&.Mui-focused fieldset":{borderColor:"primary.main",borderWidth:2}}}}),e.jsx(x,{variant:"body2",color:"text.secondary",sx:{mt:1.5,textAlign:"center"},children:i("privateRoomCodeHelp")})]}),e.jsx(E,{children:e.jsx(w,{variant:"contained",onClick:N,size:"large",children:e.jsx(h,{i18nKey:"next"})})})]})}function Fe({formData:n,setFormData:t,nextStep:o,prevStep:l}){const{t:i}=K(),{hasLocalPlayers:s,clearLocalSession:u}=Ge(),[p,b]=g.useState(!1),[d,a]=g.useState(null),r=n.room!=="PUBLIC",c=g.useCallback(()=>{b(!0),a(null)},[]),v=g.useCallback(()=>{s&&u(),t(y=>({...y,hasLocalPlayers:!1,localPlayersData:void 0,localPlayerSessionSettings:void 0,gameMode:y.gameMode==="local"?"online":y.gameMode})),o()},[s,u,o,t]),f=g.useCallback(async(y,B)=>{try{t({...n,localPlayersData:y,localPlayerSessionSettings:B,hasLocalPlayers:!0}),b(!1),o()}catch(R){a(R instanceof Error?R.message:"Failed to save local player configuration")}},[n,t,o]),m=g.useCallback(()=>{b(!1),a(null)},[]);return g.useEffect(()=>{if(!r){const y=setTimeout(()=>{o()},100);return()=>clearTimeout(y)}},[r,o]),r?p?e.jsx(de,{in:!0,children:e.jsxs(S,{children:[d&&e.jsx(G,{severity:"error",sx:{mb:2},children:d}),e.jsx(Ne,{roomId:n.room||"PRIVATE",isPrivateRoom:r,onComplete:f,onCancel:m,initialPlayers:n.localPlayersData,initialSettings:n.localPlayerSessionSettings})]})}):e.jsxs(S,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[e.jsx(x,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(h,{i18nKey:"localPlayersStep.title"})}),e.jsx(x,{variant:"body1",color:"text.secondary",sx:{mb:3},children:e.jsx(h,{i18nKey:"localPlayersStep.subtitle"})}),e.jsxs(P,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(P,{size:{xs:12,sm:6},children:e.jsx(z,{sx:{cursor:"pointer",border:"1px solid",borderColor:"divider",backgroundColor:"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:c,children:e.jsx(T,{sx:{p:3},children:e.jsxs(A,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(x,{variant:"h6",sx:{fontWeight:600},children:e.jsx(h,{i18nKey:"localPlayersStep.setupOption.title"})}),e.jsx(x,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"pre-line",textAlign:"left",width:"100%",lineHeight:1.8,mb:2},children:e.jsx(h,{i18nKey:"localPlayersStep.setupOption.description"})}),e.jsx(w,{variant:"outlined",fullWidth:!0,size:"large",sx:{mt:2},"data-testid":"localPlayersStep.setupOption.button",onClick:c,children:i("localPlayersStep.setupOption.button")})]})})})}),e.jsx(P,{size:{xs:12,sm:6},children:e.jsx(z,{sx:{cursor:"pointer",border:"1px solid",borderColor:"divider",backgroundColor:"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:v,children:e.jsx(T,{sx:{p:3},children:e.jsxs(A,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(x,{variant:"h6",sx:{fontWeight:600},children:e.jsx(h,{i18nKey:"localPlayersStep.skipOption.title"})}),e.jsx(x,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"pre-line",textAlign:"left",width:"100%",lineHeight:1.8,mb:2},children:e.jsx(h,{i18nKey:"localPlayersStep.skipOption.description"})}),e.jsx(w,{variant:"outlined",fullWidth:!0,size:"large",sx:{mt:2},"data-testid":"localPlayersStep.skipOption.button",onClick:v,children:i("localPlayersStep.skipOption.button")})]})})})})]}),s&&e.jsx(G,{severity:"info",sx:{mb:3},children:e.jsx(x,{variant:"body2",children:e.jsx(h,{i18nKey:"localPlayersStep.currentStatus.hasPlayers"})})}),e.jsx(S,{sx:{flexGrow:1}}),e.jsxs(E,{children:[e.jsx(w,{onClick:l,children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(w,{variant:"contained",onClick:v,children:e.jsx(h,{i18nKey:"skip"})})]})]}):e.jsx(S,{sx:{minHeight:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:e.jsx(x,{variant:"h6",color:"text.secondary",children:i("localPlayersStep.publicRoomMessage","Local players are not available for public rooms. Continuing...")})})}function $e({formData:n,setFormData:t,nextStep:o,prevStep:l}){const{t:i}=K(),s=!!n.hasLocalPlayers;g.useEffect(()=>{s&&t(r=>({...r,gameMode:"local",roomRealtime:!1}))},[s,t]);const[u,p]=g.useState(!O(n==null?void 0:n.gameMode)&&!s);g.useEffect(()=>{p(!O(n==null?void 0:n.gameMode)&&!s)},[n==null?void 0:n.gameMode,s]);const b=[{id:"local",title:"yesInteracting",description:i("physicalInteractionDesc"),isSelected:!O(n==null?void 0:n.gameMode)},{id:"online",title:"noInteracting",description:i("soloOnlinePlayDesc"),isSelected:O(n==null?void 0:n.gameMode)}],d=[{value:"dom",label:"Dominant",description:i("dominantRoleDesc")},{value:"vers",label:"Switch",description:i("switchRoleDesc")},{value:"sub",label:"Submissive",description:i("submissiveRoleDesc")}],a=[{id:"clothed",title:"noNaked",description:i("foreplayClothedDesc"),isSelected:!n.isNaked},{id:"naked",title:"yesNaked",description:i("intimateNudityDesc"),isSelected:n.isNaked}];return e.jsxs(S,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[!s&&e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(h,{i18nKey:"playingWithPeople"})}),e.jsx(P,{container:!0,spacing:2,sx:{mb:3},children:b.map(r=>e.jsx(P,{size:{xs:12,sm:6},children:e.jsx(z,{role:"button",tabIndex:0,sx:{cursor:"pointer",border:r.isSelected?"3px solid":"1px solid",borderColor:r.isSelected?"primary.main":"divider",backgroundColor:r.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>t({...n,gameMode:r.id==="local"?"local":"online",roomRealtime:r.id!=="local"}),onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),t({...n,gameMode:r.id==="local"?"local":"online",roomRealtime:r.id!=="local"}))},children:e.jsx(T,{sx:{p:3},children:e.jsxs(A,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(x,{variant:"h6",sx:{fontWeight:600},children:i(r.title)}),e.jsx(x,{variant:"body2",color:"text.secondary",children:r.description}),r.isSelected&&e.jsx(L,{label:i("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},r.id))})]}),s&&e.jsx(x,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(h,{i18nKey:"gameModeSelection"})}),u&&e.jsxs(S,{sx:{mb:3},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:e.jsx(h,{i18nKey:"yourRole"})}),e.jsx(P,{container:!0,spacing:2,sx:{mb:3},children:d.map(r=>e.jsx(P,{size:{xs:12,sm:4},children:e.jsx(z,{role:"button",tabIndex:0,sx:{cursor:"pointer",border:n.role===r.value?"2px solid":"1px solid",borderColor:n.role===r.value?"primary.main":"divider",backgroundColor:n.role===r.value?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>t({...n,role:r.value}),onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),t({...n,role:r.value}))},children:e.jsx(T,{sx:{p:2.5},children:e.jsxs(A,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(x,{variant:"subtitle1",sx:{fontWeight:600},children:i(r.value)}),e.jsx(x,{variant:"body2",color:"text.secondary",children:r.description}),n.role===r.value&&e.jsx(L,{label:i("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},r.value))})]}),!O(n==null?void 0:n.gameMode)&&e.jsxs(S,{sx:{mb:3},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:e.jsx(h,{i18nKey:"areYouNaked"})}),e.jsx(P,{container:!0,spacing:2,children:a.map(r=>e.jsx(P,{size:{xs:12,sm:6},children:e.jsx(z,{role:"button",tabIndex:0,sx:{cursor:"pointer",border:r.isSelected?"2px solid":"1px solid",borderColor:r.isSelected?"primary.main":"divider",backgroundColor:r.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>t({...n,isNaked:r.id==="naked"}),onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),t({...n,isNaked:r.id==="naked"}))},children:e.jsx(T,{sx:{p:3},children:e.jsxs(A,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(x,{variant:"h6",sx:{fontWeight:600},children:i(r.title)}),e.jsx(x,{variant:"body2",color:"text.secondary",children:r.description}),r.isSelected&&e.jsx(L,{label:i("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},r.id))})]}),e.jsx(S,{sx:{flexGrow:1}}),e.jsxs(E,{children:[e.jsx(w,{onClick:l,children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(w,{variant:"contained",onClick:o,children:e.jsx(h,{i18nKey:"next"})})]})]})}const Qe=(n,t)=>{const{gameMode:o,isNaked:l}=n,i=O(o);return i&&["foreplay","sex"].includes(t.type)||!i&&l&&["solo","foreplay"].includes(t.type)||!i&&!l&&["solo","sex"].includes(t.type)},Xe=n=>{const t={...n},o=n.selectedActions||{},l={};return Object.entries(o).forEach(([i,s])=>{Qe(n,s)||(l[i]=s)}),t.selectedActions=l,t},ee=(n,t,o)=>{const l=n.selectedActions||{};return Object.entries(l).map(([i,s])=>{const u=t.find(p=>p.value===i);return s.type!==o||!u?null:i}).filter(i=>!!i)},Je=(n,t,o)=>{const l={...n},i={...l.selectedActions};return Object.keys(i).forEach(s=>{i[s].type===t&&!o.includes(s)&&delete i[s]}),l.selectedActions=i,l},ne=(n,t,o)=>{o(l=>{const i=Je(l,t,n),s={...i.selectedActions};return n.forEach(u=>{if(s[u])return;let p={type:t,levels:[1]};t==="consumption"&&(p={...p,variation:i.isAppend?"appendMost":"standalone"}),s[u]=p}),{...i,selectedActions:s}})},se=(n,t,o,l,i=null)=>{l(s=>{const u={...s.selectedActions||{}};return n.length===0?delete u[t]:u[t]={...u[t]||{},type:o,levels:n,...!!i&&{variation:i}},{...s,selectedActions:u}})},Ze=n=>!!(n&&Object.keys(n).some(t=>{const o=n[t];return(o==null?void 0:o.levels)&&o.levels.length>0&&(o==null?void 0:o.variation)!=="appendMost"}));function te(){return e.jsxs(x,{variant:"h6",sx:{mt:2},children:[e.jsx(h,{i18nKey:"setIntensityLevel"}),e.jsx(ue,{title:e.jsx(x,{variant:"body1",children:e.jsx(h,{i18nKey:"intensityTooltip"})}),arrow:!0,sx:{ml:1},children:e.jsx(Te,{sx:{ml:.5,fontSize:15}})})]})}function ie({onChange:n,values:t,options:o,label:l}){const i=g.useCallback(u=>{var p;return(p=o==null?void 0:o.find(b=>b.value===u))==null?void 0:p.label},[o]),s=g.useCallback(u=>e.jsx(S,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:u==null?void 0:u.map(p=>e.jsx(L,{label:i(p)},p))}),[i]);return e.jsxs(pe,{fullWidth:!0,children:[e.jsx(xe,{id:`${l}-label`,children:l}),e.jsx(he,{labelId:`${l}-label`,id:`${l}`,multiple:!0,value:t,onChange:n,fullWidth:!0,input:e.jsx(ye,{label:e.jsx(h,{i18nKey:"actionsLabel"})}),renderValue:s,children:o==null?void 0:o.map(({label:u,value:p})=>e.jsxs(me,{value:p,children:[e.jsx(ge,{checked:t.includes(p)}),e.jsx(be,{primary:u})]},p))})]})}const De=4,en=n=>O(n==null?void 0:n.gameMode)?"solo":n.isNaked?"sex":"foreplay";function nn({formData:n,setFormData:t,options:o,actionsList:l}){const i=en(n),s=o(i),p=ee(n,s,i)||[],b=d=>{const{value:a}=d.target,r=typeof a=="string"?a.split(","):a;r.length<=De&&ne(r,i,t)};return e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"h6",sx:{my:2},children:e.jsx(h,{i18nKey:"pickActions"})}),e.jsx(ie,{onChange:b,values:p,options:s,label:X("actionsLabel")}),p.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(te,{}),p.map(d=>{var a,r;const c=l[d],v=c!=null&&c.intensities?Object.keys(c.intensities).map(Number).filter(m=>m>0).sort((m,y)=>m-y):[1,2,3,4],f=((r=(a=n.selectedActions)==null?void 0:a[d])==null?void 0:r.levels)||[];return e.jsx(D,{actionName:d,actionLabel:(c==null?void 0:c.label)||d,selectedLevels:f,availableLevels:v,intensityNames:(c==null?void 0:c.intensities)||{},onChange:m=>se(m,d,i,t)},d)})]})]})}const sn=2;function tn({formData:n,setFormData:t,options:o,actionsList:l}){const i="consumption",s=o(i),p=ee(n,s,i)||[],b=a=>{const{value:r}=a.target,c=typeof r=="string"?r.split(","):r;c.length<=sn&&ne(c,i,t)},d=(a,r)=>{const c=a.target.checked?"appendMost":"standalone",v=a.target.checked,f={...n.selectedActions};r.forEach(y=>{f[y]&&(f[y]={...f[y],variation:c})});const m={...n,isAppend:v,selectedActions:f};t(m)};return e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"h6",sx:{my:2},children:e.jsx(h,{i18nKey:"pickConsumptions"})}),e.jsx(ie,{onChange:b,values:p,options:s,label:X("consumables")}),!!p.length&&e.jsxs(e.Fragment,{children:[e.jsx(te,{}),p.map(a=>{var r,c;const v=l[a],f=v!=null&&v.intensities?Object.keys(v.intensities).map(Number).filter(y=>y>0).sort((y,B)=>y-B):[1,2,3,4],m=((c=(r=n.selectedActions)==null?void 0:r[a])==null?void 0:c.levels)||[];return e.jsx(D,{actionName:a,actionLabel:(v==null?void 0:v.label)||a,selectedLevels:m,availableLevels:f,intensityNames:(v==null?void 0:v.intensities)||{},onChange:y=>se(y,a,i,t,n.isAppend?"appendMost":"standalone")},a)}),e.jsx(x,{variant:"h6",sx:{mt:2},children:e.jsx(h,{i18nKey:"standaloneOrCombine"})}),e.jsx(_e,{trueCondition:n.isAppend,onChange:a=>d(a,p),yesLabel:"combineWithActions"})]})]})}function on({gameMode:n,onPresetSelect:t,selectedPreset:o,actionsList:l,showTitle:i=!0}){const{t:s}=K(),u={solo:[{id:"popperbating",name:s("presetPopperbating"),description:s("presetPopperbatingDesc"),actions:["bating"],consumptions:["poppers"],intensities:{bating:2,poppers:1}},{id:"smoking-tits",name:s("presetSmokingTits"),description:s("presetSmokingTitsDesc"),actions:["titTorture"],consumptions:["vaping"],intensities:{titTorture:2,vaping:1}},{id:"exploration-solo",name:s("presetExplorationSolo"),description:s("presetExplorationSoloDesc"),actions:["throatTraining","buttPlay","titTorture","ballBusting"],consumptions:[],intensities:{throatTraining:1,buttPlay:1,titTorture:1,ballBusting:1}},{id:"ball-busting",name:s("presetBallBusting"),description:s("presetBallBustingDesc"),actions:["ballBusting","bating"],consumptions:["poppers"],intensities:{ballBusting:2,bating:2}}],foreplay:[{id:"romantic-start",name:s("presetRomanticStart"),description:s("presetRomanticStartDesc"),actions:["kissing","stripping"],consumptions:["alcohol"],intensities:{kissing:2,stripping:1,alcohol:1}},{id:"degrading",name:s("presetDegrading"),description:s("presetDegradingDesc"),actions:["humiliation","footPlay","breathPlay"],consumptions:["poppers"],intensities:{humiliation:2,footPlay:2,breathPlay:2,poppers:2}},{id:"sensual-touch",name:s("presetSensualTouch"),description:s("presetSensualTouchDesc"),actions:["kissing","footPlay","tickling"],consumptions:[],intensities:{kissing:2,footPlay:1,tickling:1}},{id:"electric-play",name:s("presetElectricPlay"),description:s("presetElectricPlayDesc"),actions:["electric","bondage"],consumptions:["vaping"],intensities:{electric:1,bondage:2,vaping:1}}],sex:[{id:"gentle-sex",name:s("presetGentleSex"),description:s("presetGentleSexDesc"),actions:["throatTraining","bating","buttPlay"],consumptions:["alcohol"],intensities:{throatTraining:1,bating:1,buttPlay:1,alcohol:1}},{id:"fisting",name:s("presetFisting"),description:s("presetFistingDesc"),actions:["buttPlay"],consumptions:["poppers"],intensities:{buttPlay:4,poppers:4}},{id:"bdsm",name:s("presetBdsm"),description:s("presetBdsmDesc"),actions:["pissPlay","throatTraining","spanking","titTorture"],consumptions:[],intensities:{pissPlay:2,throatTraining:2,spanking:2,titTorture:2}},{id:"breath-control",name:s("presetBreathControl"),description:s("presetBreathControlDesc"),actions:["bating"],consumptions:["gasMask"],intensities:{bating:2,gasMask:2}}]},p=u[n]||u.solo,b=d=>{t(d)};return e.jsxs(S,{children:[i&&e.jsx(x,{variant:"h6",gutterBottom:!0,children:s("quickStart")}),e.jsx(P,{container:!0,spacing:2,children:p.map(d=>e.jsx(P,{size:{xs:12,sm:6,lg:3},children:e.jsx(z,{sx:{cursor:"pointer",border:o===d.id?2:1,borderColor:o===d.id?"primary.main":"divider",backgroundColor:o===d.id?"primary.dark":"background.paper",transition:"all 0.2s ease-in-out",height:"100%",boxShadow:1,"&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:3,backgroundColor:o===d.id?"primary.dark":"action.hover"}},onClick:()=>b(d),children:e.jsxs(T,{sx:{p:2.5},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:d.name}),e.jsxs(S,{children:[d.actions.map((a,r)=>{var c;return e.jsx(L,{label:((c=l[a])==null?void 0:c.label)||a,size:"small",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:"primary.main",color:"primary.main","&:hover":{backgroundColor:"primary.50"}}},`action-${r}`)}),d.consumptions.map((a,r)=>{var c;return e.jsx(L,{label:((c=l[a])==null?void 0:c.label)||a,size:"small",color:"secondary",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:"secondary.main",color:"secondary.main","&:hover":{backgroundColor:"secondary.50"}}},`consumption-${r}`)})]})]})})},d.id))})]})}function rn({formData:n,setFormData:t,nextStep:o,prevStep:l,actionsList:i,isActionsLoading:s=!1}){const{t:u}=K(),[p,b]=g.useState(""),[d,a]=g.useState(!1),[r,c]=g.useState(!0);function v(j){return Object.keys(i).filter(C=>{var I;return((I=i[C])==null?void 0:I.type)===j})}g.useEffect(()=>{const j=Xe(n);t(j)},[]),g.useEffect(()=>{n.selectedActions&&Object.keys(n.selectedActions).length>0&&(a(!0),c(!1))},[]);const f=j=>v(j).map(C=>{var I;return{value:C,label:(I=i[C])==null?void 0:I.label}});let m;n.gameMode==="online"?m="solo":n.gameMode==="local"&&!n.isNaked?m="foreplay":m="sex";const y=(j,C,I,oe)=>{j.forEach(W=>{var _;if(i[W]){const re=((_=I.intensities)==null?void 0:_[W])||C,le=Object.keys(i[W].intensities||{}).filter(U=>U!=="None").length;oe[W]={type:i[W].type,levels:Array.from({length:Math.min(re,le)},(U,ae)=>ae+1)}}})},B=j=>{b(j.id);const C={};y(j.actions,2,j,C),y(j.consumptions,1,j,C),t({...n,selectedActions:C}),c(!1),a(!0)},R=(j,C)=>{c(C),C&&a(!1)},N=(j,C)=>{a(C),C&&c(!1)},k=!Ze(n.selectedActions);return s?e.jsxs(S,{children:[e.jsxs(S,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:300,gap:2},children:[e.jsx(J,{size:48}),e.jsx(x,{variant:"h6",color:"text.secondary",children:u("loadingAvailableActions")})]}),e.jsx(S,{sx:{mt:4},children:e.jsxs(E,{children:[e.jsx(w,{disabled:!0,children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(w,{variant:"contained",disabled:!0,size:"large",children:e.jsx(h,{i18nKey:"next"})})]})})]}):e.jsxs(S,{children:[e.jsxs(V,{expanded:r,onChange:R,sx:{backgroundColor:"background.default",borderTop:1,borderBottom:1,borderColor:"divider",borderLeft:"none",borderRight:"none",borderRadius:0,"&:before":{display:"none"},boxShadow:"none"},children:[e.jsx(Y,{expandIcon:e.jsx(q,{}),"aria-controls":"quickstart-content",id:"quickstart-header",sx:{backgroundColor:"background.default"},children:e.jsxs(A,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Le,{}),e.jsx(x,{variant:"h6",children:u("quickStart")})]})}),e.jsx(H,{sx:{pb:1},children:e.jsx(on,{gameMode:m,onPresetSelect:B,selectedPreset:p,actionsList:i,showTitle:!1})})]}),e.jsxs(V,{expanded:d,onChange:N,sx:{backgroundColor:"background.default",borderTop:r?"none":1,borderBottom:1,borderColor:"divider",borderLeft:"none",borderRight:"none",borderRadius:0,marginTop:r?-1:0,"&:before":{display:"none"},boxShadow:"none"},children:[e.jsx(Y,{expandIcon:e.jsx(q,{}),"aria-controls":"customization-content",id:"customization-header",sx:{backgroundColor:"background.default"},children:e.jsxs(A,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Ke,{}),e.jsx(x,{variant:"h6",children:u("customizeActions")})]})}),e.jsxs(H,{children:[e.jsx(x,{variant:"body2",color:"text.secondary",sx:{mb:2},children:u("customizeActionsDesc")}),e.jsx(nn,{formData:n,setFormData:t,options:f,actionsList:i}),e.jsx(Z,{sx:{my:3}}),e.jsx(tn,{formData:n,setFormData:t,options:f,actionsList:i})]})]}),e.jsx(S,{sx:{mt:4},children:e.jsxs(E,{children:[e.jsx(w,{onClick:()=>l(M(n.room)?3:1),children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(w,{variant:"contained",disabled:k,onClick:o,size:"large",children:e.jsx(h,{i18nKey:"next"})})]})})]})}function ln({formData:n,setFormData:t,prevStep:o,actionsList:l,close:i}){const s=[100,100],u=[0,0],[p,b]=g.useState(F((n==null?void 0:n.finishRange)||[],u)),[d,a]=g.useState(!1),r=Ve(),{t:c}=K();g.useEffect(()=>{let m={...n,boardUpdated:!0};(!p||!F(n.finishRange||[],s))&&(m.finishRange=s),t(m)},[]);async function v(){a(!0);try{await r(n,l)}catch(m){console.error("Error submitting settings:",m)}finally{a(!1)}typeof i=="function"&&i()}const f=[{id:"noOrgasm",title:"noOrgasm",description:c("noOrgasmDesc"),isSelected:!p},{id:"yesOrgasm",title:"yesOrgasm",description:c("yesOrgasmDesc"),isSelected:p}];return e.jsxs(S,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[e.jsx(x,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:e.jsx(h,{i18nKey:"WillYouOrgasm"})}),e.jsx(P,{container:!0,spacing:2,sx:{mb:4},children:f.map(m=>e.jsx(P,{size:{xs:12,sm:6},children:e.jsx(z,{sx:{cursor:"pointer",border:m.isSelected?"3px solid":"1px solid",borderColor:m.isSelected?"primary.main":"divider",backgroundColor:m.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%",transform:m.isSelected?"scale(1.02)":"scale(1)","&:hover":{borderColor:"primary.main",transform:"scale(1.02)",boxShadow:2}},onClick:()=>{const y=m.id==="yesOrgasm";t({...n,finishRange:y?u:s}),b(y)},children:e.jsx(T,{sx:{p:3},children:e.jsxs(A,{spacing:1,alignItems:"center",textAlign:"center",children:[e.jsx(x,{variant:"h6",sx:{fontWeight:600},children:c(m.title)}),e.jsx(x,{variant:"body2",color:"text.secondary",children:m.description}),m.isSelected&&e.jsx(L,{label:c("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},m.id))}),e.jsx(S,{sx:{flexGrow:1}}),e.jsxs(E,{children:[e.jsx(w,{onClick:o,disabled:d,children:e.jsx(h,{i18nKey:"previous"})}),e.jsx(w,{variant:"contained",onClick:v,disabled:d,startIcon:d?e.jsx(J,{size:20}):null,size:"large",sx:{px:4},children:e.jsx(h,{i18nKey:"buildGame"})})]})]})}function an({currentStep:n,isPublicRoom:t,onStepClick:o}){const{t:l}=K(),i=je(),s=fe(i.breakpoints.down("md")),u=t?[{label:String(l("roomSelection","Room Selection")),wizardStep:1},{label:String(l("actionsSelection","Actions Selection")),wizardStep:4},{label:String(l("finishSetup","Finish Setup")),wizardStep:5}]:[{label:String(l("roomSelection","Room Selection")),wizardStep:1},{label:String(l("localPlayersStep.title","Local Players")),wizardStep:2},{label:String(l("gameModeSelection","Game Mode Selection")),wizardStep:3},{label:String(l("actionsSelection","Actions Selection")),wizardStep:4},{label:String(l("finishSetup","Finish Setup")),wizardStep:5}],p=u.findIndex(d=>d.wizardStep===n),b=d=>{if(o){const a=u[d].wizardStep;o(a)}};return e.jsx(Se,{activeStep:p,alternativeLabel:!s,orientation:"horizontal",sx:{...s&&{"& .MuiStepLabel-label":{display:"none"}}},children:u.map((d,a)=>e.jsx(ve,{children:e.jsx(Ce,{onClick:()=>b(a),sx:{cursor:o?"pointer":"default","&:hover":o?{"& .MuiStepLabel-label":{color:"primary.main"}}:{}},children:s?null:d.label})},a))})}function cn({close:n}){const{id:t}=Q(),[o,l]=g.useState(1),i={room:t||"PUBLIC"},[s,u]=He({gameMode:"online",roomRealtime:!0,actions:[],consumption:[],role:"sub",boardUpdated:!1,room:t||"PUBLIC",selectedActions:{}},i),{actionsList:p,isLoading:b}=Ye(s.gameMode),d=f=>{if(!Number.isInteger(f))return l(o+1);l(o+(f||1))},a=f=>{if(!Number.isInteger(f))return l(o-1);l(o-(f||1))},r=()=>l(0),c=()=>{M(s.room)||s.gameMode==="online"?l(4):l(1)},v=()=>{switch(o){case 1:return e.jsx(qe,{formData:s,setFormData:u,nextStep:d});case 2:return M(s.room)?(l(4),null):e.jsx(Fe,{formData:s,setFormData:u,nextStep:d,prevStep:a});case 3:return M(s.room)?(l(4),null):e.jsx($e,{formData:s,setFormData:u,nextStep:d,prevStep:a});case 4:return e.jsx(rn,{formData:s,setFormData:u,nextStep:d,prevStep:a,actionsList:p,isActionsLoading:b});case 5:return e.jsx(ln,{formData:s,setFormData:u,prevStep:a,actionsList:p,close:n});default:return null}};return o===0?e.jsx(Ue,{closeDialog:n,onOpenSetupWizard:c}):e.jsxs(S,{children:[e.jsx(S,{sx:{width:"100%",mt:2,mb:4},children:e.jsx(an,{currentStep:o,isPublicRoom:M(s.room),onStepClick:l})}),v(),e.jsx(Z,{sx:{mt:3}}),e.jsx(w,{onClick:r,children:e.jsx(h,{i18nKey:"advancedSetup"})})]})}function Mn({open:n,close:t}){const o=Ie(),[l]=ke();return l.get("importBoard")?null:e.jsxs(we,{fullScreen:o,open:n,maxWidth:"md",children:[e.jsxs(Pe,{children:[e.jsx(h,{i18nKey:"gameSettingsHeading"}),typeof t=="function"&&e.jsx(Re,{close:t})]}),e.jsx(Ae,{children:e.jsx(cn,{close:typeof t=="function"?t:void 0})})]})}export{Mn as default};
//# sourceMappingURL=index.tsx-DIysf6jZ.js.map
