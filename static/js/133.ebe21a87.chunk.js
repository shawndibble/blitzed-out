"use strict";(self.webpackChunkblitzed_out=self.webpackChunkblitzed_out||[]).push([[133],{7133:function(e,t,n){n.r(t),n.d(t,{Camera:function(){return d},CameraWeb:function(){return l}});var r=n(4165),a=n(5861),i=n(5671),o=n(3144),c=n(136),u=n(9388),s=n(6653),p=n(2012),l=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"getPhoto",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(i,o){var c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.webUseInput||t.source===p.oK.Photos?n.fileInputExperience(t,i,o):t.source===p.oK.Prompt?((c=document.querySelector("pwa-action-sheet"))||(c=document.createElement("pwa-action-sheet"),document.body.appendChild(c)),c.header=t.promptLabelHeader||"Photo",c.cancelable=!1,c.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],c.addEventListener("onSelection",function(){var e=(0,a.Z)((0,r.Z)().mark((function e(a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===a.detail?n.fileInputExperience(t,i,o):n.cameraExperience(t,i,o);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):n.cameraExperience(t,i,o);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"pickImages",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.multipleFileInputExperience(t,a);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"cameraExperience",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n,i){var o,c=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!customElements.get("pwa-camera-modal")){e.next=16;break}return(o=document.createElement("pwa-camera-modal")).facingMode=t.direction===p.GW.Front?"user":"environment",document.body.appendChild(o),e.prev=4,e.next=7,o.componentOnReady();case 7:o.addEventListener("onPhoto",function(){var e=(0,a.Z)((0,r.Z)().mark((function e(a){var u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(u=a.detail)){e.next=5;break}i(new s.xz("User cancelled photos app")),e.next=14;break;case 5:if(!(u instanceof Error)){e.next=9;break}i(u),e.next=14;break;case 9:return e.t0=n,e.next=12,c._getCameraPhoto(u,t);case 12:e.t1=e.sent,(0,e.t0)(e.t1);case 14:o.dismiss(),document.body.removeChild(o);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o.present(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),this.fileInputExperience(t,n,i);case 14:e.next=18;break;case 16:console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(t,n,i);case 18:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"fileInputExperience",value:function(e,t,n){var r=document.querySelector("#_capacitor-camera-input"),a=function(){var e;null===(e=r.parentNode)||void 0===e||e.removeChild(r)};r||((r=document.createElement("input")).id="_capacitor-camera-input",r.type="file",r.hidden=!0,document.body.appendChild(r),r.addEventListener("change",(function(n){var i=r.files[0],o="jpeg";if("image/png"===i.type?o="png":"image/gif"===i.type&&(o="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){var c=new FileReader;c.addEventListener("load",(function(){if("dataUrl"===e.resultType)t({dataUrl:c.result,format:o});else if("base64"===e.resultType){var n=c.result.split(",")[1];t({base64String:n,format:o})}a()})),c.readAsDataURL(i)}else t({webPath:URL.createObjectURL(i),format:o}),a()})),r.addEventListener("cancel",(function(e){n(new s.xz("User cancelled photos app")),a()}))),r.accept="image/*",r.capture=!0,e.source===p.oK.Photos||e.source===p.oK.Prompt?r.removeAttribute("capture"):e.direction===p.GW.Front?r.capture="user":e.direction===p.GW.Rear&&(r.capture="environment"),r.click()}},{key:"multipleFileInputExperience",value:function(e,t){var n=document.querySelector("#_capacitor-camera-input-multiple"),r=function(){var e;null===(e=n.parentNode)||void 0===e||e.removeChild(n)};n||((n=document.createElement("input")).id="_capacitor-camera-input-multiple",n.type="file",n.hidden=!0,n.multiple=!0,document.body.appendChild(n),n.addEventListener("change",(function(t){for(var a=[],i=0;i<n.files.length;i++){var o=n.files[i],c="jpeg";"image/png"===o.type?c="png":"image/gif"===o.type&&(c="gif"),a.push({webPath:URL.createObjectURL(o),format:c})}e({photos:a}),r()})),n.addEventListener("cancel",(function(e){t(new s.xz("User cancelled photos app")),r()}))),n.accept="image/*",n.click()}},{key:"_getCameraPhoto",value:function(e,t){return new Promise((function(n,r){var a=new FileReader,i=e.type.split("/")[1];"uri"===t.resultType?n({webPath:URL.createObjectURL(e),format:i,saved:!1}):(a.readAsDataURL(e),a.onloadend=function(){var e=a.result;"dataUrl"===t.resultType?n({dataUrl:e,format:i,saved:!1}):n({base64String:e.split(",")[1],format:i,saved:!1})},a.onerror=function(e){r(e)})}))}},{key:"checkPermissions",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof navigator&&navigator.permissions){e.next=2;break}throw this.unavailable("Permissions API not available in this browser");case 2:return e.prev=2,e.next=5,window.navigator.permissions.query({name:"camera"});case 5:return t=e.sent,e.abrupt("return",{camera:t.state,photos:"granted"});case 9:throw e.prev=9,e.t0=e.catch(2),this.unavailable("Camera permissions are not available in this browser");case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"requestPermissions",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw this.unimplemented("Not implemented on web.");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pickLimitedLibraryPhotos",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw this.unavailable("Not implemented on web.");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLimitedLibraryPhotos",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw this.unavailable("Not implemented on web.");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(s.Uw),d=new l}}]);
//# sourceMappingURL=133.ebe21a87.chunk.js.map