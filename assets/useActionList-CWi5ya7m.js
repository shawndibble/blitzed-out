import{j as e,h as S,f as P,g as X,B as Z,aA as H,aB as Q,aC as _,Q as q,aP as fe,d as xe,aQ as ye,U as pe,k as ee,aR as je,m as be,aS as ve,aE as oe,F as Ce,a2 as Te,aT as Ae,o as we,q as Se,a0 as Ee,p as Me,G as Y,D as Ie}from"./mui-DHsUyARS.js";import{r as c}from"./vendor-BqRCY_y4.js";import{C as ke,u as Fe}from"./index-DKqE9Jrp.js";import{y as le,z as ce,B as Le,C as Ne,D as ae,E as De,F as Pe,G as Ke,i as te,I as Oe,a as Be}from"./index-DUeU9U8S.js";import{b as z,c as V,d as J,u as re,a as $e}from"./index-D1mI33Zi.js";import{T as Re}from"./index-Bc0qcu8j.js";import{f as qe,a as Ge}from"./strings-CIxtenGy.js";import{i as G,u as R,T as M}from"./translations-BGyRMCWP.js";function K(i){return[...Object.entries(i).flatMap(([r,{label:o,actions:l}])=>l?Object.keys(l).filter(h=>h!=="None").map((h,a)=>({group:qe(r),groupLabel:o,value:r,intensity:Number(a+1),translatedIntensity:h,label:`${o} - ${h}`})):[]),{group:G.t("misc"),groupLabel:G.t("misc"),value:"misc",intensity:1,translatedIntensity:G.t("all"),label:`${G.t("misc")} - ${G.t("all")}`}]}function We(i){var r;if(((r=i.match(/\[|\]/g))==null?void 0:r.length)!==2)throw new Error("ctSeparatorError")}function Ue(i,g){const r=(i==null?void 0:i.sort())||[],o=(g==null?void 0:g.sort())||[];return JSON.stringify(r)===JSON.stringify(o)}function ze(i,g){var T,v,w,s;const r=i.split(`
`).filter(Boolean),o=r[0],l=r[1],m=r.find(p=>p.startsWith("Tags:")),h=((w=(v=(T=m==null?void 0:m.replace("Tags:",""))==null?void 0:T.trim())==null?void 0:v.split(", "))==null?void 0:w.filter(Boolean))||[],a=r.find(p=>p.startsWith("GameMode:")),j=((s=a==null?void 0:a.replace("GameMode:",""))==null?void 0:s.trim())||"online",b=o.replace(/\[|\]/g,""),[x,y]=b.split(" - "),L=K(g[j]||{}).find(p=>p.translatedIntensity===y&&p.group===x);if(!L)throw new Error("ctGroupError");if(!l)throw new Error("ctActionError");return{group:L.value,intensity:L.intensity,action:l,tags:h,gameMode:j,isCustom:1}}function Ve(i,g,r){const o=(i==null?void 0:i.split("---"))||[];o.forEach(We);const l=o.map(a=>ze(a,r)).filter(Boolean),m=[],h=[];return l.forEach(a=>{const j=g.find(b=>b.group===a.group&&b.intensity===a.intensity&&b.action===a.action&&b.gameMode===a.gameMode);j?j&&!Ue(j.tags,a.tags)&&h.push({...j,tags:a.tags}):m.push(a)}),{newUniqueRecords:m,changedTagRecords:h}}function Je({expanded:i,handleChange:g,customTiles:r,mappedGroups:o,setSubmitMessage:l,bulkImport:m}){const h=c.useRef(null),{t:a}=R(),[j,b]=c.useState(""),x=()=>{const L=r.filter(T=>T.isCustom).map(({group:T,intensity:v,action:w,tags:s,gameMode:p="online"})=>{const t=K(o[p]||{}).find(f=>(f==null?void 0:f.intensity)===Number(v)&&(f==null?void 0:f.value)===T);let n="";return n+=`[${(t==null?void 0:t.group)||T} - ${(t==null?void 0:t.translatedIntensity)||v}]
`,n+=w,n+=s!=null&&s.length?`
Tags: `+(s==null?void 0:s.join(", ")):"",n+=`
GameMode: ${p}`,n});b(L.join(`
---
`))};async function y(d){if(!d.current)return;const T=d.current.importData.value;let v=[],w=[];try{const{newUniqueRecords:s,changedTagRecords:p}=Ve(T,r,o);v=s,w=p}catch(s){if(s instanceof Error)return l({type:"error",message:a(s.message)})}return!v.length&&!w.length?l({type:"error",message:a("ctNoNewError")}):(v.length&&(v.forEach(async s=>{le(`${s.group} - ${s.intensity}`,s.action)}),m(v)),w.length&&await Promise.all(w.map(async s=>{s.id!==void 0&&await ce(s.id,s)})),x())}return c.useEffect(()=>{i==="ctImport"&&x()},[i,r]),e.jsxs(z,{expanded:i==="ctImport",onChange:g("ctImport"),children:[e.jsx(V,{"aria-controls":"ctImport-content",id:"ctImport-header",children:e.jsx(S,{children:e.jsx(M,{i18nKey:"importExport"})})}),e.jsxs(J,{children:[e.jsx(S,{variant:"body1",sx:{mb:2},children:e.jsx(M,{i18nKey:"ctImportDescription"})}),e.jsxs(P,{component:"form",method:"post",ref:h,children:[e.jsx(X,{id:"importData",name:"importData",multiline:!0,required:!0,fullWidth:!0,sx:{pb:2},value:j,onChange:d=>b(d.target.value),InputProps:{endAdornment:e.jsx(ke,{text:j}),sx:{alignItems:"flex-start"}}}),e.jsx(Z,{fullWidth:!0,variant:"contained",type:"button",onClick:()=>y(h),children:e.jsx(M,{i18nKey:"import"})})]})]})]})}function ue({gameMode:i,groupFilter:g,intensityFilter:r,groups:o,mappedGroups:l,onGameModeChange:m,onGroupChange:h,onIntensityChange:a,hideAll:j=!1,sx:b={}}){const{t:x}=R(),[y,d]=c.useState([]),L=j?1:"all";c.useEffect(()=>{if(o){const s=Object.keys(o);d(s)}},[o,i]);function T(s){const p=s.target.value;h(p),a(L)}if(!(y!=null&&y.length))return null;const v=y.length===0||y.includes(g)?g:"",w=r==="all"?"all":r;return e.jsxs(P,{sx:{display:"flex",flexWrap:"wrap",gap:2,...b},children:[e.jsxs(H,{sx:{width:125,flexShrink:0},children:[e.jsx(Q,{id:"game-mode-filter-label",children:e.jsx(M,{i18nKey:"customTiles.gameMode"})}),e.jsxs(_,{labelId:"game-mode-filter-label",id:"game-mode-filter",value:i,label:x("customTiles.gameMode","Game Mode"),onChange:s=>{m(s.target.value)},slotProps:{input:{"aria-label":x("customTiles.gameMode","Game Mode")}},children:[e.jsx(q,{value:"online",children:e.jsx(M,{i18nKey:"online"})}),e.jsx(q,{value:"local",children:e.jsx(M,{i18nKey:"local"})})]})]}),e.jsxs(H,{sx:{minWidth:150,flex:1},children:[e.jsx(Q,{id:"group-filter-label",children:e.jsx(M,{i18nKey:"group"})}),e.jsx(_,{labelId:"group-filter-label",id:"group-filter",value:v,label:x("group"),onChange:T,slotProps:{input:{"aria-label":x("group")}},children:y.map(s=>{var p;return e.jsxs(q,{value:s,children:[l!=null&&l[i]&&Array.isArray(K(l[i]))&&((p=K(l[i]).find(A=>A.value===s))==null?void 0:p.groupLabel)||s,!j&&o[s]&&` (${o[s].count})`]},s)})})]}),e.jsxs(H,{sx:{minWidth:200,flex:1},disabled:!v,children:[e.jsx(Q,{id:"intensity-filter-label",children:e.jsx(M,{i18nKey:"customTiles.intensityLevel",children:"Intensity Level"})}),e.jsxs(_,{labelId:"intensity-filter-label",id:"intensity-filter",value:w,label:x("customTiles.intensityLevel","Intensity Level"),onChange:s=>a(s.target.value),slotProps:{input:{"aria-label":x("customTiles.intensityLevel","Intensity Level")}},children:[!j&&e.jsx(q,{value:"all",children:e.jsx(M,{i18nKey:"all",children:"All"})},"all"),v&&o&&o[v]&&Object.entries(o[v].intensities||{}).sort(([s],[p])=>Number(s)-Number(p)).map(([s,p])=>{var A;return e.jsxs(q,{value:Number(s),children:[l!=null&&l[i]&&Array.isArray(K(l[i]))?((A=K(l[i]).find(t=>t.value===v&&t.intensity===Number(s)))==null?void 0:A.translatedIntensity)||`Level ${s}`:`Level ${s}`,!j&&p!==void 0?` (${p})`:""]},s)})]})]})]})}function de(){const[i,g]=c.useState(()=>{try{const o=localStorage.getItem("gameSettings");return o?{locale:"en",gameMode:"online",...JSON.parse(o)}:{locale:"en",gameMode:"online"}}catch(o){return console.error("Error parsing game settings from localStorage:",o),{locale:"en",gameMode:"online"}}});c.useEffect(()=>{const o=l=>{if(l.key==="gameSettings"&&l.newValue)try{const m=JSON.parse(l.newValue);g(m)}catch(m){console.error("Error parsing updated game settings:",m)}};return window.addEventListener("storage",o),()=>window.removeEventListener("storage",o)},[]);const r=c.useCallback(o=>{g(l=>{const m={...l,...o};try{localStorage.setItem("gameSettings",JSON.stringify(m))}catch(h){console.error("Error saving game settings to localStorage:",h)}return m})},[]);return{settings:i,updateSettings:r}}function He({setSubmitMessage:i,boardUpdated:g,customTiles:r,mappedGroups:o,expanded:l,handleChange:m,tagList:h,updateTileId:a,setUpdateTileId:j}){const{t:b}=R(),{settings:x}=de(),[y,d]=c.useState({gameMode:x.gameMode||"online",group:"",intensity:"",action:"",tags:[b("custom")]}),[L,T]=c.useState({});c.useEffect(()=>{try{const t={};o[y.gameMode]&&K(o[y.gameMode]).forEach(f=>{const{value:I,label:k,intensity:C}=f;t[I]||(t[I]={label:k,intensities:{}}),C!==void 0&&(t[I].intensities[C]=1)}),T(t),setTimeout(()=>{d(n=>{if(!n.group||!t[n.group]){const f=Object.keys(t)[0];let I="";return f&&t[f]&&Object.keys(t[f].intensities).length>0&&(I=Number(Object.keys(t[f].intensities)[0])),{...n,group:n.group||f||"",intensity:y.intensity||I||""}}return n})},0)}catch(t){console.error("Error processing groups:",t),T({})}},[y.gameMode,o]),c.useEffect(()=>{const n=(Array.isArray(r)?r:[]).find(({id:f})=>f===a);if(n){const f=n.gameMode||x.gameMode;d({gameMode:f,group:n.group||"",intensity:n.intensity||"",action:n.action||"",tags:n.tags||[b("custom")]})}else d(f=>({...f,gameMode:x.gameMode}))},[a,x.gameMode,r,b]);function v(t,n,f){return(Array.isArray(r)?r:[]).find(k=>k.group===t&&k.intensity===n&&k.action===f)}function w(){j(null),d({gameMode:x.gameMode,group:y.group||"alcohol",intensity:y.intensity||1,action:"",tags:[b("custom")]})}async function s(){const t=document.querySelector('input[name="tags"]'),n=[...y.tags];t&&t.value.trim()&&(n.push(t.value.trim()),t.value="");const{gameMode:f,group:I,intensity:k,action:C}=y;if(!f||!I||!k||!C)return i({message:b("allFieldsRequired","All fields are required"),type:"error"});if(a==null&&v(I,k,C))return i({message:b("actionExists"),type:"error"});const N={group:I,intensity:Number(k),action:C,tags:n,gameMode:f,isCustom:1};if(a===null){let D=`${I} - Level ${k}`;if(Array.isArray(K(o==null?void 0:o[f]))){const B=K(o[f]).find(W=>W.value===I&&W.intensity===Number(k));B!=null&&B.label&&(D=B.label)}le(D,C),Le(N)}else ce(a,N);return g(),d(D=>({...D,action:"",tags:[b("custom")]})),i({message:b("customAdded"),type:"success"})}const p=t=>{switch(t.key){case",":case"Enter":{t.preventDefault(),t.stopPropagation(),t.currentTarget.value.length>0&&(d(n=>({...n,tags:[...n.tags,t.currentTarget.value]})),t.currentTarget.value="");break}}},A=t=>{t.target.value.length>0&&(d(n=>({...n,tags:[...n.tags,t.target.value]})),t.target.value=""),setTimeout(()=>{const n=document.querySelector(".MuiAutocomplete-popper");n&&(n.style.display="none")},150)};return e.jsxs(z,{expanded:l==="ctAdd",onChange:m("ctAdd"),children:[e.jsx(V,{"aria-controls":"ctAdd-content",id:"ctAdd-header",children:e.jsx(S,{children:e.jsx(M,{i18nKey:a?"ctUpdate":"ctAdd"})})}),e.jsx(J,{children:e.jsxs(P,{component:"form",method:"post",className:"settings-box",children:[e.jsx(ue,{gameMode:y.gameMode,groupFilter:y.group,intensityFilter:y.intensity,groups:L,mappedGroups:o,onGameModeChange:t=>{d(n=>({...n,gameMode:t,group:"",intensity:""}))},onGroupChange:t=>{d(n=>({...n,group:t,intensity:""}))},onIntensityChange:t=>{d(n=>({...n,intensity:Number(t)}))},hideAll:!0,sx:{mb:2}}),e.jsx(X,{id:"action",name:"action",required:!0,fullWidth:!0,label:b("action"),sx:{pb:2},value:y.action,onChange:t=>{d({...y,action:t.target.value})}}),e.jsx(fe,{id:"tags",disableCloseOnSelect:!0,multiple:!0,freeSolo:!0,options:h,value:y.tags,onChange:(t,n)=>{d({...y,tags:n})},renderInput:t=>(t.inputProps.onKeyDown=p,t.inputProps.onBlur=A,e.jsx(X,{...t,label:b("tags")})),sx:{pb:2},clearOnBlur:!0,blurOnSelect:!0,openOnFocus:!0,disablePortal:!1,componentsProps:{popper:{modifiers:[{name:"preventOverflow",options:{altAxis:!0,altBoundary:!0,padding:8}}]}}}),e.jsxs(P,{display:"flex",justifyContent:"space-evenly",children:[e.jsx(Z,{variant:"contained",type:"button",onClick:()=>w(),children:e.jsx(M,{i18nKey:"clear"})}),e.jsx(Z,{variant:"contained",type:"button",onClick:s,children:e.jsx(M,{i18nKey:a?"ctUpdate":"ctAdd"})})]})]})})]})}function Qe({expanded:i,handleChange:g}){return e.jsxs(e.Fragment,{children:[e.jsxs(z,{expanded:i==="help1",onChange:g("help1"),children:[e.jsx(V,{"aria-controls":"help1-content",id:"help1-header",children:e.jsx(S,{children:e.jsx(M,{i18nKey:"ctExplained"})})}),e.jsx(J,{children:e.jsxs(M,{i18nKey:"ctExplainedDescription",children:[e.jsx(S,{sx:{mb:2},children:"Custom tiles let you add your own variations to the game board. Utilize this dialog to add and remove tiles as you see fit."}),e.jsx(S,{sx:{mb:2},children:"Custom tiles are added based on the kink and intensity you pick from the drop down. As such, you need to have that kink and intensity (or a higher intensity) selected for your custom tiles to show on the board."}),e.jsx(S,{children:"Miscellaneous tiles are the only exception to the above. Regardless of what other options you pick, Miscellaneous tiles will show as their own group. If you use this option, ensure that you add multiple tiles to minimize repeats."})]})})]}),e.jsxs(z,{expanded:i==="help2",onChange:g("help2"),children:[e.jsx(V,{"aria-controls":"help2-content",id:"help2-header",children:e.jsx(S,{children:e.jsx(M,{i18nKey:"ctIdeas"})})}),e.jsx(J,{children:e.jsxs(M,{i18nKey:"ctIdeasDescription",children:[e.jsx(S,{variant:"h6",children:"Add new Activities"}),e.jsx(S,{variant:"subtitle2",sx:{mb:2},children:"Come up with new activities that are not part of the existing list"}),e.jsx(S,{variant:"h6",children:"Add harder tiles to easier intensities"}),e.jsx(S,{variant:"subtitle2",sx:{mb:1},children:"When you pick higher intensity levels, the game will use the earlier intensity level and gradual move to whatyou picked. If you want harder tiles early on, add several to lower intensities."}),e.jsx(S,{variant:"subtitle2",sx:{mb:2},children:"Example: You play Poppers - Advanced. Add advanced tiles to Poppers - Beginner"}),e.jsx(S,{variant:"h6",children:"Combine activities into a single tile"}),e.jsx(S,{variant:"subtitle2",sx:{mb:1},children:"Combine multiple activites together in a single tile that normally would not go together."}),e.jsx(S,{variant:"subtitle2",sx:{mb:2},children:"Example: Spit roast. Use a toy in your throat and ass at the same time."}),e.jsx(S,{variant:"h6",children:"Miscellaneous custom tiles"}),e.jsx(S,{variant:"subtitle2",sx:{mb:1},children:"Miscellaneous tiles allow you to add your own tiles without including other groups. Be aware, you will want to add several options to this group to minimize repeats."})]})})]})]})}function _e({tagList:i,boardUpdated:g,mappedGroups:r,updateTile:o,refreshTrigger:l}){var se;const{t:m,i18n:h}=R(),{settings:a}=de(),[j,b]=c.useState(null),[x,y]=c.useState(a.gameMode||"online"),[d,L]=c.useState(""),[T,v]=c.useState(""),[w,s]=c.useState(1),[p,A]=c.useState(!0),[t,n]=c.useState({items:[],total:0,totalPages:1}),[f,I]=c.useState({}),k=10;c.useEffect(()=>{async function u(){var F;try{A(!0);const E=await Ne(h.resolvedLanguage,x,j);I(E);const O=Object.keys(E),$=O.includes(d);(!d||!$)&&O.length>0?(L(O[0]),v("all")):$&&T!=="all"&&(Object.keys(((F=E[d])==null?void 0:F.intensities)||{}).includes(String(T))||v("all"))}catch(E){console.error("Error loading groups:",E)}finally{A(!1)}}u()},[x,h.resolvedLanguage,j,d,T]),c.useEffect(()=>{let u=!0;async function F(){try{A(!0);const E={group:d,intensity:T==="all"?null:Number(T),tag:j,gameMode:x,locale:a.locale,page:w,limit:k,paginated:!0},O=await ae(E);u&&(n(O),setTimeout(()=>{u&&A(!1)},300))}catch(E){console.error("Error loading tiles:",E),u&&A(!1)}}return d?F():A(!1),()=>{u=!1}},[d,T,j,x,w,k,l,a.locale]);function C(u){A(!0),b(j===u?null:u)}function N(u,F){A(!0),s(F)}async function D(u){await De(u),g();const F={group:d,intensity:T==="all"?null:T,tag:j,gameMode:x,locale:a.locale,page:w,limit:k,paginated:!0},E=await ae(F);n(E)}async function B(u){await Pe(u),g(),n(F=>({...F,items:F.items.map(E=>E.id===u?{...E,isEnabled:!E.isEnabled}:E)}))}function W(u){o(u);const F=document.querySelector(".MuiDialogContent-root");F&&(F.scrollTop=0)}const ge=(se=t.items)==null?void 0:se.map(({id:u,group:F,intensity:E,action:O,tags:$,isEnabled:ne=!0,isCustom:me=!0})=>{var ie;return e.jsxs(xe,{sx:{my:2},children:[e.jsx(ye,{title:O,slotProps:{title:{variant:"body1"},subheader:{variant:"body2"},action:{"aria-label":m("customTiles.actions")}},subheader:r!=null&&r[x]&&Array.isArray(K(r[x]))?(ie=K(r[x]).find(({value:U,intensity:he})=>U===F&&he===Number(E)))==null?void 0:ie.label:`${F} - Level ${E}`,action:e.jsxs(e.Fragment,{children:[e.jsx(pe,{checked:!!ne,onChange:()=>u!==void 0&&B(u),slotProps:{input:{"aria-label":m("customTiles.toggleTile")}}}),!!me&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{onClick:()=>u!==void 0&&W(u),"aria-label":m("customTiles.update"),children:e.jsx(je,{})}),e.jsx(ee,{onClick:()=>u!==void 0&&D(u),"aria-label":m("customTiles.delete"),children:e.jsx(be,{})})]})]}),sx:{pb:0}}),e.jsx(ve,{children:$==null?void 0:$.map(U=>e.jsx(oe,{label:U,sx:{m:.5}},U))})]},u)});return e.jsxs(P,{children:[e.jsx(P,{children:i==null?void 0:i.map(u=>e.jsx(oe,{label:u,sx:{m:.5},color:j===u?"primary":"default",onClick:()=>C(u)},u))}),e.jsx(P,{sx:{display:"flex",flexDirection:"column",gap:2,my:2,transition:"all 0.3s ease-in-out"},children:e.jsx(ue,{gameMode:x,groupFilter:d,intensityFilter:T,groups:f,mappedGroups:r,onGameModeChange:u=>{y(u),L(""),v(""),s(1)},onGroupChange:u=>{L(u),s(1)},onIntensityChange:u=>{v(u),s(1)}})}),e.jsxs(P,{sx:{position:"relative",minHeight:"200px"},children:[e.jsx(Ce,{in:p,timeout:300,children:e.jsx(P,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0)",zIndex:1,borderRadius:1},children:e.jsx(Te,{})})}),e.jsx(P,{sx:{opacity:p?.3:1,transition:"opacity 0.3s ease-in-out",pointerEvents:p?"none":"auto"},children:t.items.length===0?e.jsx(S,{variant:"body1",sx:{textAlign:"center",my:4},children:e.jsx(M,{i18nKey:"customTiles.noTilesFound",children:"No tiles found with the selected filters."})}):e.jsxs(e.Fragment,{children:[ge,t.totalPages>1&&e.jsx(P,{sx:{display:"flex",justifyContent:"center",mt:3,mb:2},children:e.jsx(Ae,{count:t.totalPages,page:w,onChange:N,color:"primary"})}),e.jsx(S,{variant:"body2",sx:{textAlign:"center",mt:2,color:"text.secondary"},children:e.jsxs(M,{i18nKey:"customTiles.showingTiles",values:{shown:t.items.length,total:t.total},children:["Showing ",{shown:t.items.length}," of ",{total:t.total}," tiles"]})})]})})]})]})}function ot({boardUpdated:i,setOpen:g,open:r=!1}){const{t:o,i18n:l}=R(),m=re(),h=re("md"),[a,j]=c.useState({message:"",type:"info"}),[b,x]=c.useState("ctAdd"),[y,d]=c.useState(null),[L,T]=c.useState(0),[v,w]=c.useState({online:{},local:{},solo:{}}),[s,p]=c.useState(!0),A=c.useCallback(()=>{T(C=>C+1)},[]),t=C=>(N,D)=>{x(D?C:"")};c.useEffect(()=>{async function C(){p(!0);try{const[N,D]=await Promise.all([te(l.resolvedLanguage,"online"),te(l.resolvedLanguage,"local")]);w({online:N,local:D,solo:{}})}catch(N){console.error("Error loading game mode actions:",N)}finally{p(!1)}}C()},[l.resolvedLanguage]);const n=Fe(()=>Oe({locale:l.resolvedLanguage})),f=c.useMemo(()=>n?Array.isArray(n)?n.map(({tags:C})=>C).flat().filter((C,N,D)=>C&&D.indexOf(C)===N).sort():[]:[],[n]),I=c.useCallback(async C=>{await Ke(C),i(),A()},[i,A]);if(!n||s)return null;const k=()=>{const C=e.jsxs(e.Fragment,{children:[e.jsx(Qe,{expanded:b,handleChange:t}),e.jsx(He,{setSubmitMessage:j,boardUpdated:()=>{i(),A()},customTiles:n,mappedGroups:v,expanded:b,handleChange:t,tagList:f,updateTileId:y,setUpdateTileId:d}),e.jsx(Je,{expanded:b,handleChange:t,customTiles:n,mappedGroups:v,setSubmitMessage:j,bulkImport:I})]}),N=Array.isArray(n)&&n.length>0&&e.jsx(P,{children:e.jsx(_e,{tagList:f,boardUpdated:()=>{i(),A()},mappedGroups:v,updateTile:D=>{d(D),x("ctAdd")},refreshTrigger:L})});return h?e.jsxs(e.Fragment,{children:[C,N&&e.jsxs(e.Fragment,{children:[e.jsx(Ie,{sx:{my:2}}),N]})]}):e.jsxs(Y,{container:!0,spacing:2,children:[e.jsx(Y,{size:{xs:12,md:6},children:C}),e.jsx(Y,{size:{xs:12,md:6},children:N})]})};return e.jsxs(e.Fragment,{children:[e.jsxs(we,{fullScreen:m,open:r,onClose:()=>g(!1),maxWidth:h?"sm":"lg",fullWidth:!0,children:[e.jsxs(Se,{children:[e.jsx(M,{i18nKey:"manageTiles"}),e.jsx(ee,{"aria-label":o("close"),onClick:()=>g(!1),sx:{position:"absolute",right:8,top:8,color:C=>C.palette.grey[500]},children:e.jsx(Ee,{})})]}),e.jsx(Me,{children:k()})]}),e.jsx(Re,{open:!!a.message,close:()=>j({message:"",type:"info"}),type:a.type,children:a.message})]})}function at(i={},g={}){const[r]=$e("gameSettings"),[o,l]=c.useState({...i,...r||{},...g}),{messages:m}=Ge();return c.useEffect(()=>{const h=Be(m,"room");if(h!=null&&h.settings)try{l(a=>({...a,...JSON.parse(h.settings)}))}catch(a){console.error("Error parsing message settings:",a)}},[m]),[o,l]}function rt(i){const{i18n:g}=R(),[r,o]=c.useState({}),[l,m]=c.useState(!0),h=c.useCallback(async()=>{if(i){m(!0);try{const a=await te(g.resolvedLanguage,i);o(a)}catch(a){console.error("Error importing actions:",a),o({})}finally{m(!1)}}},[i,g.resolvedLanguage]);return c.useEffect(()=>{h()},[h]),{actionsList:r,isLoading:l}}export{ot as C,rt as a,at as u};
