const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D6smYlPm.js","assets/mui-BMKXmDCw.js","assets/vendor-Bf6wU4zJ.js","assets/strings-BVYGyWlj.js","assets/translations-CairTNs2.js","assets/index-B6-h4wZ4.js","assets/firebase-C4LKcFbe.js","assets/index-BLb_hXVt.css","assets/index-BSTbXes0.js","assets/index-BB-q-kK8.js","assets/urls-bwAPA7IR.js","assets/useActionList-ByTOBZyz.js","assets/languages-KK0t13AM.js","assets/index-CignLajt.css","assets/index-CvINZvO-.js","assets/index-0XjfPz8-.css","assets/index-BbGQZ1R5.js","assets/index-Cfu8jHcT.js","assets/index-DCufWw07.js"])))=>i.map(i=>d[i]);
import{a as t,b as G,u as W}from"./vendor-Bf6wU4zJ.js";import{S as q,A as V,j as $,r as J,k as H,_ as A}from"./index-B6-h4wZ4.js";import{E as U,a0 as Q,j as e,k as _,a1 as Y,o as X,q as Z,p as ee,f as w,a2 as L,g as S,B as C,a3 as P,h as E,D as se,a4 as te,a5 as ne,a6 as oe,a7 as ae,a8 as ie,a9 as re,aa as le,ab as ce,ac as ue,ad as de,ae as me,af as ge,ag as he,ah as xe,ai as pe,aj as M,ak as fe,al as je,l as N,am as we,an as ye,w as be,ao as ve,ap as Ce,aq as Se,ar as D,as as ke,at as Ae,au as Ie,av as Le}from"./mui-BMKXmDCw.js";import{u as I,T as d}from"./translations-CairTNs2.js";import{i as Ee}from"./strings-BVYGyWlj.js";function B(s="sm"){const a=U();return Q(a.breakpoints.down(s))}function _e(s,a){const i=localStorage.getItem(s);if(!i)return a;const n=JSON.parse(i);return typeof a=="object"&&Object.keys(a).length?{...a,...n}:n}function es(s,a={}){const i=`${s}Storage`,[n,r]=t.useState(()=>_e(s,a));t.useEffect(()=>{const l=u=>r(u.newValue);return window.addEventListener(i,l),()=>window.removeEventListener(i,l)},[i]);const c=t.useCallback(l=>{localStorage.setItem(s,JSON.stringify(l));const u=new Event(i);u.newValue=l,window.dispatchEvent(u)},[s,i]);return[n,c]}function Pe(){const s=G.useContext(q);if(!s)throw new Error("ScheduleContext's value is undefined.");return s}const Te="/assets/blitzed-out-DGhYHOgx.png";function O(){const s=t.useContext(V);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}function De({close:s}){return e.jsx(_,{"aria-label":"close",onClick:s,sx:{position:"absolute",right:8,top:8},children:e.jsx(Y,{})})}function K({children:s,open:a,close:i=null,isMobile:n=null,title:r=null,isLoading:c=!1}){const l=n||B();return c?null:e.jsxs(X,{fullScreen:l,open:a,maxWidth:"md",children:[e.jsxs(Z,{children:[r,typeof i=="function"&&e.jsx(De,{close:i})]}),e.jsx(ee,{children:s})]})}function Be({onSuccess:s,onSwitchToRegister:a,onSwitchToForgotPassword:i,isLinking:n=!1}){const{t:r}=I(),[c,l]=t.useState(""),[u,x]=t.useState(""),[m,f]=t.useState(""),[o,g]=t.useState(!1),h=async y=>{y.preventDefault(),f(""),g(!0);try{await $(c,u),s&&s()}catch(j){console.error("Login error:",j),f(j.message||"Failed to sign in")}finally{g(!1)}};return e.jsxs(w,{component:"form",onSubmit:h,sx:{mt:1},children:[m&&e.jsx(L,{severity:"error",sx:{mb:2},children:m}),e.jsx(S,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:r("email"),name:"email",autoComplete:"email",autoFocus:!0,value:c,onChange:y=>l(y.target.value)}),e.jsx(S,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:r("password"),type:"password",id:"password",autoComplete:"current-password",value:u,onChange:y=>x(y.target.value)}),e.jsx(C,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:o,children:o?e.jsx(P,{size:24}):n?e.jsx(d,{i18nKey:"linkAccount",children:"Link Account"}):e.jsx(d,{i18nKey:"signIn"})}),e.jsxs(E,{align:"center",children:[e.jsx(C,{onClick:a,variant:"text",children:e.jsx(d,{i18nKey:"needAccount"})})," | ",e.jsx(C,{onClick:i,variant:"text",children:e.jsx(d,{i18nKey:"forgotPassword"})})]})]})}function Oe({onSuccess:s,onSwitchToLogin:a,isAnonymous:i=!1}){const{t:n}=I(),[r,c]=t.useState(""),[l,u]=t.useState(""),[x,m]=t.useState(""),[f,o]=t.useState(""),[g,h]=t.useState(""),[y,j]=t.useState(!1),R=async b=>{if(b.preventDefault(),h(""),x!==f){h(n("passwordsDoNotMatch")||"Passwords do not match");return}j(!0);try{await J(l==null?void 0:l.trim(),x,r==null?void 0:r.trim()),s&&s()}catch(v){console.error("Registration error:",v),h(v.message||"Failed to create account")}finally{j(!1)}};return e.jsxs(w,{component:"form",onSubmit:R,sx:{mt:1},children:[g&&e.jsx(L,{severity:"error",sx:{mb:2},children:g}),e.jsx(S,{margin:"normal",required:!0,fullWidth:!0,id:"displayName",label:n("displayName"),name:"displayName",autoComplete:"name",autoFocus:!0,value:r,onChange:b=>c(b.target.value)}),e.jsx(S,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:n("email"),name:"email",autoComplete:"email",value:l,onChange:b=>u(b.target.value)}),e.jsx(S,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:n("password"),type:"password",id:"password",autoComplete:"new-password",value:x,onChange:b=>m(b.target.value)}),e.jsx(S,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:n("confirmPassword"),type:"password",id:"confirmPassword",autoComplete:"new-password",value:f,onChange:b=>o(b.target.value)}),e.jsx(C,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:y,children:y?e.jsx(P,{size:24}):i?e.jsx(d,{i18nKey:"linkAccount"}):e.jsx(d,{i18nKey:"createAccount"})}),e.jsx(E,{align:"center",children:e.jsx(C,{onClick:a,variant:"text",children:e.jsx(d,{i18nKey:"alreadyHaveAccount"})})})]})}function Re({onSuccess:s,isLinking:a=!1}){const[i,n]=t.useState(""),[r,c]=t.useState(!1),l=async()=>{n(""),c(!0);try{await H(),s&&s()}catch(u){n(u.message||"Failed to sign in with Google")}finally{c(!1)}};return e.jsxs(w,{sx:{mt:2,mb:2},children:[i&&e.jsx(L,{severity:"error",sx:{mb:2},children:i}),e.jsx(se,{sx:{mb:2},children:e.jsx(E,{variant:"body2",color:"text.secondary",children:e.jsx(d,{i18nKey:"or",children:"OR"})})}),e.jsx(C,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(te,{}),onClick:l,disabled:r,sx:{mb:1},"aria-busy":r,"aria-live":"polite",children:r?e.jsx(P,{size:24}):a?e.jsx(d,{i18nKey:"linkWithGoogle",children:"Link with Google"}):e.jsx(d,{i18nKey:"signInWithGoogle",children:"Sign in with Google"})})]})}function ze({onToggleForm:s}){const[a,i]=t.useState(""),[n,r]=t.useState(""),[c,l]=t.useState(!1),[u,x]=t.useState(!1),{forgotPassword:m}=O(),f=async o=>{o.preventDefault(),r(""),l(!1),x(!0);try{await m(a),l(!0)}catch(g){r(g.message||"Failed to send reset email")}finally{x(!1)}};return e.jsxs(w,{component:"form",onSubmit:f,sx:{mt:1},children:[n&&e.jsx(L,{severity:"error",sx:{mb:2},children:n}),c&&e.jsx(L,{severity:"success",sx:{mb:2},children:e.jsx(d,{i18nKey:"resetEmailSent"})}),e.jsx(S,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:e.jsx(d,{i18nKey:"email"}),name:"email",autoComplete:"email",autoFocus:!0,value:a,onChange:o=>i(o.target.value)}),e.jsx(C,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:u,children:u?e.jsx(P,{size:24}):e.jsx(d,{i18nKey:"sendResetLink"})}),e.jsx(w,{sx:{textAlign:"center"},children:e.jsx(C,{variant:"text",onClick:()=>s("login"),children:e.jsx(d,{i18nKey:"backToLogin"})})})]})}function We({open:s,close:a,initialView:i="login"}){const[n,r]=t.useState(i),{isAnonymous:c}=O(),{t:l}=I(),u=()=>{switch(n){case"login":return l(c?"linkAccount":"signIn");case"register":return l("createAccount");case"reset":return l("resetPassword");default:return l("Authentication")}};return e.jsxs(K,{title:u(),open:s,close:a,children:[n==="login"&&e.jsxs(e.Fragment,{children:[e.jsx(Be,{onSwitchToRegister:()=>r("register"),onSwitchToForgotPassword:()=>r("reset"),onSuccess:a,isLinking:c}),e.jsx(Re,{onSuccess:a,isLinking:c})]}),n==="reset"&&e.jsx(ze,{onToggleForm:r}),n==="register"&&e.jsx(Oe,{onSwitchToLogin:()=>r("login"),onSuccess:a,isAnonymous:c})]})}const Me=t.lazy(()=>A(()=>import("./index-D6smYlPm.js").then(s=>s.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),Ne=t.lazy(()=>A(()=>import("./index-CvINZvO-.js"),__vite__mapDeps([14,1,2,4,5,6,7,3,15]))),Ke=t.lazy(()=>A(()=>import("./index-BbGQZ1R5.js"),__vite__mapDeps([16,1,2,8,5,6,4,7,9,3]))),Fe=t.lazy(()=>A(()=>import("./index-Cfu8jHcT.js"),__vite__mapDeps([17,1,2,9,4,5,6,7,10,3]))),Ge=t.lazy(()=>A(()=>import("./index-DCufWw07.js"),__vite__mapDeps([18,1,2,11,8,5,6,4,7,9,3])));function qe(){const{id:s}=W(),{user:a,logout:i,isAnonymous:n}=O(),r=B(),{i18n:c}=I(),[l,u]=t.useState(!1),x=p=>u(p),[m,f]=t.useState({settings:!1,gameBoard:!1,about:!1,schedule:!1,customTiles:!1,linkAccount:!1}),o=(p,k)=>f({...m,[p]:k}),g=async()=>{await i(),x(!1)},h=p=>window.open(p,"_blank","noreferrer"),y=e.jsx(ge,{children:e.jsx("path",{d:"M18.942 5.556a16.299 16.299 0 0 0-4.126-1.297c-.178.321-.385.754-.529 1.097a15.175 15.175 0 0 0-4.573 0 11.583 11.583 0 0 0-.535-1.097 16.274 16.274 0 0 0-4.129 1.3c-2.611 3.946-3.319 7.794-2.965 11.587a16.494 16.494 0 0 0 5.061 2.593 12.65 12.65 0 0 0 1.084-1.785 10.689 10.689 0 0 1-1.707-.831c.143-.106.283-.217.418-.331 3.291 1.539 6.866 1.539 10.118 0 .137.114.277.225.418.331-.541.326-1.114.606-1.71.832a12.52 12.52 0 0 0 1.084 1.785 16.46 16.46 0 0 0 5.064-2.595c.415-4.396-.709-8.209-2.973-11.589zM8.678 14.813c-.988 0-1.798-.922-1.798-2.045s.793-2.047 1.798-2.047 1.815.922 1.798 2.047c.001 1.123-.793 2.045-1.798 2.045zm6.644 0c-.988 0-1.798-.922-1.798-2.045s.793-2.047 1.798-2.047 1.815.922 1.798 2.047c0 1.123-.793 2.045-1.798 2.045z"})}),j=p=>{c.changeLanguage(p),localStorage.setItem("gameSettings",JSON.stringify({...JSON.parse(localStorage.getItem("gameSettings")||"{}"),locale:p}))},b=t.useMemo(()=>{const p=[{key:"gameBoard",title:e.jsx(d,{i18nKey:"gameBoards"}),icon:e.jsx(he,{}),onClick:()=>o("gameBoard",!0)},{key:"customTiles",title:e.jsx(d,{i18nKey:"customTilesLabel"}),icon:e.jsx(xe,{}),onClick:()=>o("customTiles",!0)},{key:"cast",title:e.jsx(d,{i18nKey:"cast"}),icon:e.jsx(pe,{}),onClick:()=>h(`/${s.toUpperCase()}/cast`)},{key:"schedule",title:e.jsx(d,{i18nKey:"schedule"}),icon:e.jsx(M,{}),onClick:()=>o("schedule",!0)},{key:"discord",title:"Discord",icon:y,onClick:()=>h("https://discord.gg/mSPBE2hFef")},{key:"about",title:e.jsx(d,{i18nKey:"about"}),icon:e.jsx(fe,{}),onClick:()=>o("about",!0)}];return a&&(p.unshift({key:"settings",title:e.jsx(d,{i18nKey:"settings"}),icon:e.jsx(ne,{}),onClick:()=>o("settings",!0)}),n&&p.push({key:"linkAccount",title:e.jsx(d,{i18nKey:"linkAccount"}),icon:e.jsx(oe,{}),onClick:()=>o("linkAccount",!0)}),p.push({key:"logout",title:e.jsx(d,{i18nKey:"logout"}),icon:e.jsx(ae,{}),onClick:()=>g()})),p},[a,s,n]).map(({key:p,title:k,icon:T,onClick:F})=>e.jsx(ie,{disablePadding:!0,onClick:F,children:e.jsxs(re,{children:[e.jsx(le,{children:T}),e.jsx(ce,{primary:k})]})},p)),v=(p,k,T={})=>e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(p,{open:m[k],close:()=>o(k,!1),isMobile:r,...T})});return e.jsxs(e.Fragment,{children:[e.jsx(_,{onClick:()=>x(!0),"aria-label":"open menu",children:e.jsx(ue,{})}),e.jsx(de,{anchor:"right",open:l,onClose:()=>x(!1),children:e.jsxs(w,{role:"presentation",onClick:()=>x(!1),sx:{width:250,display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(me,{sx:{flexGrow:1},children:b}),e.jsxs(w,{sx:{borderTop:"1px solid rgba(0, 0, 0, 0.12)",p:2,display:"flex",justifyContent:"center",gap:1},children:[e.jsx(w,{component:"span",onClick:()=>j("en"),sx:{cursor:"pointer",fontWeight:c.language==="en"?"bold":"normal",color:c.language==="en"?"primary.main":"inherit"},children:"English"}),e.jsx(w,{component:"span",children:"|"}),e.jsx(w,{component:"span",onClick:()=>j("fr"),sx:{cursor:"pointer",fontWeight:c.language==="fr"?"bold":"normal",color:c.language==="fr"?"primary.main":"inherit"},children:"Français"}),e.jsx(w,{component:"span",children:"|"}),e.jsx(w,{component:"span",onClick:()=>j("es"),sx:{cursor:"pointer",fontWeight:c.language==="es"?"bold":"normal",color:c.language==="es"?"primary.main":"inherit"},children:"Español"})]})]})}),m.settings&&v(Me,"settings"),m.about&&e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(K,{open:m.about,close:()=>o("about",!1),fullScreen:r,children:e.jsx(Ne,{close:()=>o("about",!1),isMobile:r})})}),m.gameBoard&&v(Ke,"gameBoard"),m.schedule&&v(Fe,"schedule"),m.customTiles&&v(Ge,"customTiles"),m.linkAccount&&v(We,"linkAccount")]})}function Ve({playerList:s,innerRef:a,...i}){return e.jsxs("div",{...i,ref:a,children:[e.jsx(je,{color:"success",sx:{fontSize:8,marginRight:"0.2rem"}}),s.length]})}let z=!1;function $e(){const[s,a]=t.useState(!1),[i,n]=t.useState(!1),{t:r}=I(),{id:c}=W(),l="1227B8DE",u=t.useCallback(()=>{if(!window.chrome||!window.chrome.cast){console.error("Chrome Cast API not available");return}const o=new window.chrome.cast.SessionRequest(l),g=new window.chrome.cast.ApiConfig(o,h=>{console.log("New or updated session",h),n(!0)},h=>{console.log("Receiver availability:",h),a(h===window.chrome.cast.ReceiverAvailability.AVAILABLE)},window.chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED);window.chrome.cast.initialize(g,()=>{console.log("Cast API initialized successfully"),window.chrome.cast.session&&n(!0)},h=>{console.error("Cast API initialization error:",h)})},[l]);t.useEffect(()=>{if(window.__onGCastApiAvailable=o=>{o&&window.chrome&&window.chrome.cast?u():console.log("Cast API not available")},z)window.chrome&&window.chrome.cast&&window.chrome.cast.isAvailable&&u();else{const o=document.querySelector('script[src*="cast_sender.js"]');o&&o.remove();const g=document.createElement("script");g.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",g.async=!0,document.body.appendChild(g),z=!0}return()=>{}},[u]);const x=()=>{if(!window.chrome||!window.chrome.cast||!window.chrome.cast.isAvailable){console.error("Cast API not available");return}window.chrome.cast.requestSession(o=>{console.log("Session started:",o),n(!0);const g=`${window.location.origin}/${c}/cast`,h=new window.chrome.cast.media.MediaInfo(g,"text/html");h.contentType="text/html",h.customData={roomId:c,isBlitzedOutCast:!0};const y=new window.chrome.cast.media.LoadRequest(h);o.loadMedia(y,j=>{console.log("Media loaded successfully",j)},j=>{console.error("Error loading media:",j)})},o=>{console.error("Error starting cast session:",o)})},m=()=>{if(!(!window.chrome||!window.chrome.cast||!window.chrome.cast.isAvailable))try{const o=window.chrome.cast.session;o?o.endSession(()=>{console.log("Session ended successfully"),n(!1)},g=>{console.error("Error ending session:",g)}):(console.log("No active session to stop"),n(!1))}catch(o){console.error("Error stopping cast:",o),n(!1)}},f=()=>{i?m():x()};return e.jsx(N,{title:r(i?"stopCasting":"startCasting"),children:e.jsx(_,{color:i?"primary":"default",onClick:f,disabled:!s,children:i?e.jsx(we,{}):e.jsx(ye,{})})})}const Je=t.lazy(()=>A(()=>import("./index-Cfu8jHcT.js"),__vite__mapDeps([17,1,2,9,4,5,6,7,10,3])));function ss({room:s,playerList:a=[]}){const{t:i}=I(),[n,r]=t.useState(!1),[c,l]=t.useState(!1),{schedule:u}=Pe(),{isMobile:x}=B(),m=()=>{r(!0),l(!0)},f=e.jsxs(e.Fragment,{children:[e.jsx(E,{variant:"h6",children:e.jsx(d,{i18nKey:"online"})}),e.jsx("ul",{children:a.map(o=>e.jsx("li",{children:e.jsx(E,{variant:"body1",children:o.displayName})},o.uid))})]});return e.jsx(be,{position:"fixed",children:e.jsxs(ve,{disableGutters:!0,variant:"dense",component:"nav",className:"nav",children:[e.jsxs("div",{className:"site-name",children:[e.jsx(w,{component:"img",sx:{height:32},alt:"Blitzed Out Logo",src:Te}),e.jsx("h1",{children:"Blitzed Out"})]}),e.jsx("div",{children:e.jsxs("div",{className:"nav-room-name",children:[e.jsx("h2",{children:Ee(s)||s===void 0?i("public"):s}),e.jsx(N,{title:f,children:e.jsx(He,{playerList:a})}),e.jsx(_,{onClick:m,"aria-label":"schedule game",sx:{ml:2},children:e.jsx(Ce,{color:"primary",badgeContent:c?null:u.length,children:e.jsx(M,{})})}),n&&e.jsx(Se,{children:e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Je,{open:n,close:()=>r(!1),isMobile:x})})})]})}),e.jsxs("div",{className:"menu-drawer",children:[e.jsx($e,{}),e.jsx(qe,{})]})]})})}const He=t.forwardRef((s,a)=>e.jsx(Ve,{...s,innerRef:a})),ts=D(s=>e.jsx(ke,{disableGutters:!0,elevation:0,square:!0,...s}))(({theme:s})=>({border:`1px solid ${s.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}})),ns=D(s=>e.jsx(Ae,{expandIcon:e.jsx(Ie,{sx:{fontSize:"0.9rem"}}),...s}))(({theme:s})=>({backgroundColor:s.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:s.spacing(1)}})),os=D(Le)(({theme:s})=>({padding:s.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}));export{We as A,De as C,ss as N,es as a,ts as b,ns as c,os as d,Pe as e,B as u};
