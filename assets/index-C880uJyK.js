const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CcT8jYGS.js","assets/mui-7PmIKoQ0.js","assets/vendor-poSPCy8P.js","assets/strings-J-FU9DP5.js","assets/translations-C_O5cPfK.js","assets/index-BPTilIU-.js","assets/firebase-Bq5WjqAs.js","assets/index-uiLgFlgU.css","assets/index-Duivgnbj.js","assets/index-Bv96QVkX.js","assets/urls-BP4ggioV.js","assets/useActionList-D1Ujy-u0.js","assets/index-CignLajt.css","assets/index-__RSncQ6.js","assets/index-0XjfPz8-.css","assets/index-wkB1PA6s.js","assets/index-DS1g8hyh.js","assets/index-i873PCZa.js"])))=>i.map(i=>d[i]);
import{r as t,a as V,u as G}from"./vendor-poSPCy8P.js";import{S as J,A as U,k as H,r as Q,m as Y,_ as I}from"./index-BPTilIU-.js";import{E as X,$ as Z,j as e,k as O,a0 as ee,o as se,q as te,p as ne,f as y,a1 as _,g as A,B as k,a2 as R,h as L,D as oe,a3 as ae,a4 as re,a5 as ie,a6 as le,a7 as ce,a8 as ue,a9 as de,aa as me,ab as ge,ac as xe,ad as he,ae as pe,af as fe,ag as je,ah as we,ai as F,aj as Se,ak as ye,l as K,al as Ce,am as be,w as ve,an as ke,ao as Ae,ap as Ee,aq as z,ar as Ie,as as _e,at as Le,au as De}from"./mui-7PmIKoQ0.js";import{u as D,T as m,t as P}from"./translations-C_O5cPfK.js";import{i as Te}from"./strings-J-FU9DP5.js";function N(s="sm"){const n=X();return Z(n.breakpoints.down(s))}function Pe(s,n){const a=localStorage.getItem(s);if(!a)return n;try{const o=JSON.parse(a);return typeof n=="object"&&n!==null&&Object.keys(n).length?{...n,...o}:o}catch(o){return console.error("Error parsing localStorage value:",o),n}}function ts(s,n={}){const a=`${s}Storage`,[o,r]=t.useState(()=>Pe(s,n));t.useEffect(()=>{const i=u=>{u.newValue!==void 0&&r(u.newValue)};return window.addEventListener(a,i),()=>window.removeEventListener(a,i)},[a]);const c=t.useCallback(i=>{try{localStorage.setItem(s,JSON.stringify(i));const u=new Event(a);u.newValue=i,window.dispatchEvent(u)}catch(u){console.error("Error updating localStorage:",u)}},[s,a]);return[o,c]}function Oe(){const s=V.useContext(J);if(!s)throw new Error("ScheduleContext's value is undefined.");return s}const Re="/assets/blitzed-out-DGhYHOgx.png";function B(){const s=t.useContext(U);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}function ze({close:s}){return e.jsx(O,{"aria-label":"close",onClick:s,sx:{position:"absolute",right:8,top:8},children:e.jsx(ee,{})})}function q({children:s,open:n,close:a=null,isMobile:o=null,title:r=null,isLoading:c=!1}){const i=o!==null?o:N();return c?null:e.jsxs(se,{fullScreen:i,open:n,maxWidth:"md",children:[e.jsxs(te,{children:[r,typeof a=="function"&&e.jsx(ze,{close:a})]}),e.jsx(ne,{children:s})]})}function Ne({onSuccess:s,onSwitchToRegister:n,onSwitchToForgotPassword:a,isLinking:o=!1}){const{t:r}=D(),[c,i]=t.useState(""),[u,h]=t.useState(""),[g,p]=t.useState(""),[l,d]=t.useState(!1),j=async w=>{w.preventDefault(),p(""),d(!0);try{await H(c,u),s&&s()}catch(f){console.error("Login error:",f),p(f.message||"Failed to sign in")}finally{d(!1)}};return e.jsxs(y,{component:"form",onSubmit:j,sx:{mt:1},children:[g&&e.jsx(_,{severity:"error",sx:{mb:2},children:g}),e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:r("email"),name:"email",autoComplete:"email",autoFocus:!0,value:c,onChange:w=>i(w.target.value)}),e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:r("password"),type:"password",id:"password",autoComplete:"current-password",value:u,onChange:w=>h(w.target.value)}),e.jsx(k,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:l,children:l?e.jsx(R,{size:24}):o?e.jsx(m,{i18nKey:"linkAccount",children:"Link Account"}):e.jsx(m,{i18nKey:"signIn"})}),e.jsxs(L,{align:"center",children:[e.jsx(k,{onClick:n,variant:"text",children:e.jsx(m,{i18nKey:"needAccount"})})," | ",e.jsx(k,{onClick:a,variant:"text",children:e.jsx(m,{i18nKey:"forgotPassword"})})]})]})}function Be({onSuccess:s,onSwitchToLogin:n,isAnonymous:a=!1}){const{t:o}=D(),[r,c]=t.useState(""),[i,u]=t.useState(""),[h,g]=t.useState(""),[p,l]=t.useState(""),[d,j]=t.useState(""),[w,f]=t.useState(!1),b=async S=>{if(S.preventDefault(),j(""),h!==p){j(o("passwordsDoNotMatch")||"Passwords do not match");return}f(!0);try{await Q(i==null?void 0:i.trim(),h,r==null?void 0:r.trim()),s&&s()}catch(C){console.error("Registration error:",C),j(C.message||"Failed to create account")}finally{f(!1)}};return e.jsxs(y,{component:"form",onSubmit:b,sx:{mt:1},children:[d&&e.jsx(_,{severity:"error",sx:{mb:2},children:d}),e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,id:"displayName",label:o("displayName"),name:"displayName",autoComplete:"name",autoFocus:!0,value:r,onChange:S=>c(S.target.value)}),e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:o("email"),name:"email",autoComplete:"email",value:i,onChange:S=>u(S.target.value)}),e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:o("password"),type:"password",id:"password",autoComplete:"new-password",value:h,onChange:S=>g(S.target.value)}),e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:o("confirmPassword"),type:"password",id:"confirmPassword",autoComplete:"new-password",value:p,onChange:S=>l(S.target.value)}),e.jsx(k,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:w,children:w?e.jsx(R,{size:24}):a?e.jsx(m,{i18nKey:"linkAccount"}):e.jsx(m,{i18nKey:"createAccount"})}),e.jsx(L,{align:"center",children:e.jsx(k,{onClick:n,variant:"text",children:e.jsx(m,{i18nKey:"alreadyHaveAccount"})})})]})}function We({onSuccess:s,isLinking:n=!1}){const[a,o]=t.useState(""),[r,c]=t.useState(!1),i=async()=>{o(""),c(!0);try{await Y(),s&&s()}catch(u){o(u.message||"Failed to sign in with Google")}finally{c(!1)}};return e.jsxs(y,{sx:{mt:2,mb:2},children:[a&&e.jsx(_,{severity:"error",sx:{mb:2},children:a}),e.jsx(oe,{sx:{mb:2},children:e.jsx(L,{variant:"body2",color:"text.secondary",children:e.jsx(m,{i18nKey:"or",children:"OR"})})}),e.jsx(k,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(ae,{}),onClick:i,disabled:r,sx:{mb:1},"aria-busy":r,"aria-live":"polite",children:r?e.jsx(R,{size:24}):n?P("linkWithGoogle","Link with Google"):P("signInWithGoogle","Sign in with Google")})]})}function Me({onToggleForm:s}){const[n,a]=t.useState(""),[o,r]=t.useState(""),[c,i]=t.useState(!1),[u,h]=t.useState(!1),{forgotPassword:g}=B(),p=async l=>{l.preventDefault(),r(""),i(!1),h(!0);try{await g(n),i(!0)}catch(d){r(d.message||"Failed to send reset email")}finally{h(!1)}};return e.jsxs(y,{component:"form",onSubmit:p,sx:{mt:1},children:[o&&e.jsx(_,{severity:"error",sx:{mb:2},children:o}),c&&e.jsx(_,{severity:"success",sx:{mb:2},children:e.jsx(m,{i18nKey:"resetEmailSent"})}),e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:e.jsx(m,{i18nKey:"email"}),name:"email",autoComplete:"email",autoFocus:!0,value:n,onChange:l=>a(l.target.value)}),e.jsx(k,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:u,children:u?e.jsx(R,{size:24}):e.jsx(m,{i18nKey:"sendResetLink"})}),e.jsx(y,{sx:{textAlign:"center"},children:e.jsx(k,{variant:"text",onClick:()=>s("login"),children:e.jsx(m,{i18nKey:"backToLogin"})})})]})}function Ge({open:s,close:n,initialView:a="login"}){const[o,r]=t.useState(a),{isAnonymous:c}=B(),{t:i}=D(),u=()=>{switch(o){case"login":return i(c?"linkAccount":"signIn");case"register":return i("createAccount");case"reset":return i("resetPassword");default:return i("Authentication")}};return e.jsxs(q,{title:u(),open:s,close:n,children:[o==="login"&&e.jsxs(e.Fragment,{children:[e.jsx(Ne,{onSwitchToRegister:()=>r("register"),onSwitchToForgotPassword:()=>r("reset"),onSuccess:n,isLinking:c}),e.jsx(We,{onSuccess:n,isLinking:c})]}),o==="reset"&&e.jsx(Me,{onToggleForm:r}),o==="register"&&e.jsx(Be,{onSwitchToLogin:()=>r("login"),onSuccess:n,isAnonymous:c})]})}const Fe=t.lazy(()=>I(()=>import("./index-CcT8jYGS.js").then(s=>s.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),Ke=t.lazy(()=>I(()=>import("./index-__RSncQ6.js"),__vite__mapDeps([13,1,2,4,5,6,7,3,14]))),qe=t.lazy(()=>I(()=>import("./index-wkB1PA6s.js"),__vite__mapDeps([15,1,2,8,5,6,4,7,9,3]))),$e=t.lazy(()=>I(()=>import("./index-DS1g8hyh.js"),__vite__mapDeps([16,1,2,9,4,5,6,7,10,3]))),Ve=t.lazy(()=>I(()=>import("./index-i873PCZa.js"),__vite__mapDeps([17,1,2,11,8,5,6,4,7,9,3])));function Je(){const{id:s}=G(),{user:n,logout:a,isAnonymous:o}=B(),r=N(),{i18n:c}=D(),[i,u]=t.useState(!1),h=x=>u(x),[g,p]=t.useState({settings:!1,gameBoard:!1,about:!1,schedule:!1,customTiles:!1,linkAccount:!1}),l=(x,v)=>p({...g,[x]:v}),d=async()=>{await a(),h(!1)},j=x=>window.open(x,"_blank","noreferrer"),w=e.jsx(pe,{children:e.jsx("path",{d:"M18.942 5.556a16.299 16.299 0 0 0-4.126-1.297c-.178.321-.385.754-.529 1.097a15.175 15.175 0 0 0-4.573 0 11.583 11.583 0 0 0-.535-1.097 16.274 16.274 0 0 0-4.129 1.3c-2.611 3.946-3.319 7.794-2.965 11.587a16.494 16.494 0 0 0 5.061 2.593 12.65 12.65 0 0 0 1.084-1.785 10.689 10.689 0 0 1-1.707-.831c.143-.106.283-.217.418-.331 3.291 1.539 6.866 1.539 10.118 0 .137.114.277.225.418.331-.541.326-1.114.606-1.71.832a12.52 12.52 0 0 0 1.084 1.785 16.46 16.46 0 0 0 5.064-2.595c.415-4.396-.709-8.209-2.973-11.589zM8.678 14.813c-.988 0-1.798-.922-1.798-2.045s.793-2.047 1.798-2.047 1.815.922 1.798 2.047c.001 1.123-.793 2.045-1.798 2.045zm6.644 0c-.988 0-1.798-.922-1.798-2.045s.793-2.047 1.798-2.047 1.815.922 1.798 2.047c0 1.123-.793 2.045-1.798 2.045z"})}),f=x=>{c.changeLanguage(x),localStorage.setItem("gameSettings",JSON.stringify({...JSON.parse(localStorage.getItem("gameSettings")||"{}"),locale:x}))},S=t.useMemo(()=>{const x=[{key:"gameBoard",title:e.jsx(m,{i18nKey:"gameBoards"}),icon:e.jsx(fe,{}),onClick:()=>l("gameBoard",!0)},{key:"customTiles",title:e.jsx(m,{i18nKey:"customTilesLabel"}),icon:e.jsx(je,{}),onClick:()=>l("customTiles",!0)},{key:"cast",title:e.jsx(m,{i18nKey:"tvMode"}),icon:e.jsx(we,{}),onClick:()=>j(`/${s==null?void 0:s.toUpperCase()}/cast`)},{key:"schedule",title:e.jsx(m,{i18nKey:"schedule"}),icon:e.jsx(F,{}),onClick:()=>l("schedule",!0)},{key:"discord",title:"Discord",icon:w,onClick:()=>j("https://discord.gg/mSPBE2hFef")},{key:"about",title:e.jsx(m,{i18nKey:"about"}),icon:e.jsx(Se,{}),onClick:()=>l("about",!0)}];return n&&(x.unshift({key:"settings",title:e.jsx(m,{i18nKey:"settings"}),icon:e.jsx(re,{}),onClick:()=>l("settings",!0)}),o&&x.push({key:"linkAccount",title:e.jsx(m,{i18nKey:"linkAccount"}),icon:e.jsx(ie,{}),onClick:()=>l("linkAccount",!0)}),x.push({key:"logout",title:e.jsx(m,{i18nKey:"logout"}),icon:e.jsx(le,{}),onClick:()=>d()})),x},[n,s,o]).map(({key:x,title:v,icon:E,onClick:T})=>e.jsx(ce,{disablePadding:!0,onClick:T,children:e.jsxs(ue,{children:[e.jsx(de,{children:E}),e.jsx(me,{primary:v})]})},x)),C=(x,v,E={})=>e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(x,{open:g[v],close:()=>l(v.toString(),!1),isMobile:r,...E})});return e.jsxs(e.Fragment,{children:[e.jsx(O,{onClick:()=>h(!0),"aria-label":"open menu",children:e.jsx(ge,{})}),e.jsx(xe,{anchor:"right",open:i,onClose:()=>h(!1),children:e.jsxs(y,{role:"presentation",onClick:()=>h(!1),sx:{width:250,display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(he,{sx:{flexGrow:1},children:S}),e.jsxs(y,{sx:{borderTop:"1px solid rgba(0, 0, 0, 0.12)",p:2,display:"flex",justifyContent:"center",gap:1},children:[e.jsx(y,{component:"span",onClick:()=>f("en"),sx:{cursor:"pointer",fontWeight:c.language==="en"?"bold":"normal",color:c.language==="en"?"primary.main":"inherit"},children:"English"}),e.jsx(y,{component:"span",children:"|"}),e.jsx(y,{component:"span",onClick:()=>f("fr"),sx:{cursor:"pointer",fontWeight:c.language==="fr"?"bold":"normal",color:c.language==="fr"?"primary.main":"inherit"},children:"Français"}),e.jsx(y,{component:"span",children:"|"}),e.jsx(y,{component:"span",onClick:()=>f("es"),sx:{cursor:"pointer",fontWeight:c.language==="es"?"bold":"normal",color:c.language==="es"?"primary.main":"inherit"},children:"Español"})]})]})}),g.settings&&C(Fe,"settings"),g.about&&e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(q,{open:g.about,close:()=>l("about",!1),children:e.jsx(Ke,{})})}),g.gameBoard&&C(qe,"gameBoard"),g.schedule&&C($e,"schedule"),g.customTiles&&C(Ve,"customTiles"),g.linkAccount&&C(Ge,"linkAccount")]})}function Ue({playerList:s,innerRef:n,...a}){return e.jsxs("div",{...a,ref:n,children:[e.jsx(ye,{color:"success",sx:{fontSize:8,marginRight:"0.2rem"}}),s.length]})}window.__castApiInitialized=window.__castApiInitialized||!1;function He(){const[s,n]=t.useState(!1),[a,o]=t.useState(null),{id:r}=G(),c=t.useRef(null),[i,u]=t.useState(!1);t.useEffect(()=>{const p=()=>{var d,j,w,f;try{if(!((d=window==null?void 0:window.cast)!=null&&d.framework))return;if(window.__castApiInitialized){u(!0),l();return}window.cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:"1227B8DE",autoJoinPolicy:(f=(w=(j=window.chrome)==null?void 0:j.cast)==null?void 0:w.AutoJoinPolicy)==null?void 0:f.ORIGIN_SCOPED}),window.__castApiInitialized=!0,u(!0),l()}catch(b){console.error("Error initializing Cast API:",b)}},l=()=>{var d,j,w;try{const f=(j=(d=window.cast)==null?void 0:d.framework)==null?void 0:j.CastContext.getInstance();if(!f)return;const b=f.getCurrentSession();if(b&&(n(!0),o(b),r&&h(b)),!((w=window==null?void 0:window.cast)!=null&&w.framework))return;f.addEventListener(window.cast.framework.CastContextEventType.SESSION_STATE_CHANGED,S=>{var x,v,E,T,W,M;const C=f.getCurrentSession();switch(S.sessionState){case((v=(x=window.cast)==null?void 0:x.framework)==null?void 0:v.SessionState.SESSION_STARTED):case((T=(E=window.cast)==null?void 0:E.framework)==null?void 0:T.SessionState.SESSION_RESUMED):n(!0),o(C),C&&r&&h(C);break;case((M=(W=window.cast)==null?void 0:W.framework)==null?void 0:M.SessionState.SESSION_ENDED):n(!1),o(null);break;default:break}})}catch(f){console.error("Error setting up session listener:",f)}};if(window.chrome&&window.chrome.cast&&window.cast)p();else if(window.__onGCastApiAvailable=function(d){d&&p()},!document.querySelector('script[src*="cast_sender.js"]')){const d=document.createElement("script");d.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.head.appendChild(d)}return()=>{}},[r]);const h=p=>{try{const l=`${window.location.origin}/${r}/cast`;console.log("Sending cast message with URL:",l),p.sendMessage("urn:x-cast:com.blitzedout.app",{type:"LOAD",url:l})}catch(l){console.error("Error sending cast message:",l)}},g=()=>{var p,l;if(i)if(s)a&&a.endSession(!0);else try{const d=(l=(p=window.cast)==null?void 0:p.framework)==null?void 0:l.CastContext.getInstance();d&&d.requestSession().then(()=>console.log("Cast session requested successfully"),j=>console.error("Error requesting cast session:",j))}catch(d){console.error("Error requesting cast session:",d)}};return t.useEffect(()=>{s&&a&&r&&h(a)},[r,s,a]),i?e.jsx(K,{title:s?P("stopCasting"):P("startCasting"),children:e.jsx(O,{ref:c,onClick:g,color:s?"primary":"default",children:s?e.jsx(Ce,{}):e.jsx(be,{})})}):null}const Qe=t.lazy(()=>I(()=>import("./index-DS1g8hyh.js"),__vite__mapDeps([16,1,2,9,4,5,6,7,10,3])));function ns({room:s,playerList:n=[]}){const{t:a}=D(),[o,r]=t.useState(!1),[c,i]=t.useState(!1),{schedule:u}=Oe(),h=N(),g=()=>{r(!0),i(!0)},p=e.jsxs(e.Fragment,{children:[e.jsx(L,{variant:"h6",children:e.jsx(m,{i18nKey:"online"})}),e.jsx("ul",{children:n.map(l=>e.jsx("li",{children:e.jsx(L,{variant:"body1",children:l.displayName})},l.uid))})]});return e.jsx(ve,{position:"fixed",children:e.jsxs(ke,{disableGutters:!0,variant:"dense",component:"nav",className:"nav",children:[e.jsxs("div",{className:"site-name",children:[e.jsx(y,{component:"img",sx:{height:32},alt:"Blitzed Out Logo",src:Re}),e.jsx("h1",{children:"Blitzed Out"})]}),e.jsx("div",{children:e.jsxs("div",{className:"nav-room-name",children:[e.jsx("h2",{children:Te(s)||s===void 0?a("public"):s}),e.jsx(K,{title:p,children:e.jsx($,{playerList:n})}),e.jsx(O,{onClick:g,"aria-label":"schedule game",sx:{ml:2},children:e.jsx(Ae,{color:"primary",badgeContent:c?null:u.length,children:e.jsx(F,{})})}),o&&e.jsx(Ee,{children:e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Qe,{open:o,close:()=>r(!1),isMobile:h})})})]})}),e.jsxs("div",{className:"menu-drawer",children:[e.jsx(He,{}),e.jsx(Je,{})]})]})})}const $=t.forwardRef(({playerList:s,...n},a)=>e.jsx(Ue,{playerList:s,...n,innerRef:a}));$.displayName="WrapPlayersOnline";const os=z(s=>e.jsx(Ie,{disableGutters:!0,elevation:0,square:!0,...s}))(({theme:s})=>({border:`1px solid ${s.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}})),as=z(s=>e.jsx(_e,{expandIcon:e.jsx(Le,{sx:{fontSize:"0.9rem"}}),...s}))(({theme:s})=>({backgroundColor:s.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:s.spacing(1)}})),rs=z(De)(({theme:s})=>({padding:s.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}));export{Ge as A,ze as C,ns as N,ts as a,os as b,as as c,rs as d,Oe as e,N as u};
