const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-yEZwe-B5.js","assets/mui-CFdxPsB0.js","assets/vendor-Bf6wU4zJ.js","assets/strings-BIn62cSG.js","assets/translations-CairTNs2.js","assets/index-BoYCg6nK.js","assets/firebase-C4LKcFbe.js","assets/index-BLzN9Xjz.css","assets/index-BKE11Gas.js","assets/index-DV7ZzWGL.js","assets/urls-bwAPA7IR.js","assets/useActionList-Dt1rfj5d.js","assets/languages-KK0t13AM.js","assets/index-CignLajt.css","assets/index-D6ZNd2Py.js","assets/index-0XjfPz8-.css","assets/index-Byg23eEr.js","assets/index-C3c5DQFs.js","assets/index-CP9piLk4.js"])))=>i.map(i=>d[i]);
import{a as t,b as F,u as M}from"./vendor-Bf6wU4zJ.js";import{S as N,A as G,j as q,r as V,k as $,_ as A}from"./index-BoYCg6nK.js";import{E as J,a0 as H,j as e,k as D,a1 as Q,o as U,q as Y,p as X,f as h,a2 as L,g as k,B as S,a3 as E,h as I,D as Z,a4 as ee,a5 as se,a6 as te,a7 as ne,a8 as ae,a9 as oe,aa as ie,ab as re,ac as le,ad as ce,ae as ue,af as de,ag as me,ah as xe,ai as ge,aj as K,ak as he,al as pe,w as je,am as fe,l as ye,an as be,ao as we,ap as P,aq as ve,ar as Se,as as ke,at as Ce}from"./mui-CFdxPsB0.js";import{u as _,T as c}from"./translations-CairTNs2.js";import{i as Ae}from"./strings-BIn62cSG.js";function W(s="sm"){const n=J();return H(n.breakpoints.down(s))}function Le(s,n){const r=localStorage.getItem(s);if(!r)return n;const a=JSON.parse(r);return typeof n=="object"&&Object.keys(n).length?{...n,...a}:a}function Ue(s,n={}){const r=`${s}Storage`,[a,o]=t.useState(()=>Le(s,n));t.useEffect(()=>{const i=d=>o(d.newValue);return window.addEventListener(r,i),()=>window.removeEventListener(r,i)},[r]);const l=t.useCallback(i=>{localStorage.setItem(s,JSON.stringify(i));const d=new Event(r);d.newValue=i,window.dispatchEvent(d)},[s,r]);return[a,l]}function Ie(){const s=F.useContext(N);if(!s)throw new Error("ScheduleContext's value is undefined.");return s}const _e="/assets/blitzed-out-DGhYHOgx.png";function B(){const s=t.useContext(G);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}function Ee({close:s}){return e.jsx(D,{"aria-label":"close",onClick:s,sx:{position:"absolute",right:8,top:8},children:e.jsx(Q,{})})}function z({children:s,open:n,close:r=null,isMobile:a=null,title:o=null,isLoading:l=!1}){const i=a||W();return l?null:e.jsxs(U,{fullScreen:i,open:n,maxWidth:"md",children:[e.jsxs(Y,{children:[o,typeof r=="function"&&e.jsx(Ee,{close:r})]}),e.jsx(X,{children:s})]})}function Te({onSuccess:s,onSwitchToRegister:n,onSwitchToForgotPassword:r,isLinking:a=!1}){const{t:o}=_(),[l,i]=t.useState(""),[d,g]=t.useState(""),[m,p]=t.useState(""),[u,y]=t.useState(!1),w=async f=>{f.preventDefault(),p(""),y(!0);try{await q(l,d),s&&s()}catch(b){console.error("Login error:",b),p(b.message||"Failed to sign in")}finally{y(!1)}};return e.jsxs(h,{component:"form",onSubmit:w,sx:{mt:1},children:[m&&e.jsx(L,{severity:"error",sx:{mb:2},children:m}),e.jsx(k,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:o("email"),name:"email",autoComplete:"email",autoFocus:!0,value:l,onChange:f=>i(f.target.value)}),e.jsx(k,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:o("password"),type:"password",id:"password",autoComplete:"current-password",value:d,onChange:f=>g(f.target.value)}),e.jsx(S,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:u,children:u?e.jsx(E,{size:24}):a?e.jsx(c,{i18nKey:"linkAccount",children:"Link Account"}):e.jsx(c,{i18nKey:"signIn"})}),e.jsxs(I,{align:"center",children:[e.jsx(S,{onClick:n,variant:"text",children:e.jsx(c,{i18nKey:"needAccount"})})," | ",e.jsx(S,{onClick:r,variant:"text",children:e.jsx(c,{i18nKey:"forgotPassword"})})]})]})}function De({onSuccess:s,onSwitchToLogin:n,isAnonymous:r=!1}){const{t:a}=_(),[o,l]=t.useState(""),[i,d]=t.useState(""),[g,m]=t.useState(""),[p,u]=t.useState(""),[y,w]=t.useState(""),[f,b]=t.useState(!1),O=async j=>{if(j.preventDefault(),w(""),g!==p){w(a("passwordsDoNotMatch")||"Passwords do not match");return}b(!0);try{await V(i==null?void 0:i.trim(),g,o==null?void 0:o.trim()),s&&s()}catch(v){console.error("Registration error:",v),w(v.message||"Failed to create account")}finally{b(!1)}};return e.jsxs(h,{component:"form",onSubmit:O,sx:{mt:1},children:[y&&e.jsx(L,{severity:"error",sx:{mb:2},children:y}),e.jsx(k,{margin:"normal",required:!0,fullWidth:!0,id:"displayName",label:a("displayName"),name:"displayName",autoComplete:"name",autoFocus:!0,value:o,onChange:j=>l(j.target.value)}),e.jsx(k,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:a("email"),name:"email",autoComplete:"email",value:i,onChange:j=>d(j.target.value)}),e.jsx(k,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:a("password"),type:"password",id:"password",autoComplete:"new-password",value:g,onChange:j=>m(j.target.value)}),e.jsx(k,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:a("confirmPassword"),type:"password",id:"confirmPassword",autoComplete:"new-password",value:p,onChange:j=>u(j.target.value)}),e.jsx(S,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:f,children:f?e.jsx(E,{size:24}):r?e.jsx(c,{i18nKey:"linkAccount"}):e.jsx(c,{i18nKey:"createAccount"})}),e.jsx(I,{align:"center",children:e.jsx(S,{onClick:n,variant:"text",children:e.jsx(c,{i18nKey:"alreadyHaveAccount"})})})]})}function Pe({onSuccess:s,isLinking:n=!1}){const[r,a]=t.useState(""),[o,l]=t.useState(!1),i=async()=>{a(""),l(!0);try{await $(),s&&s()}catch(d){a(d.message||"Failed to sign in with Google")}finally{l(!1)}};return e.jsxs(h,{sx:{mt:2,mb:2},children:[r&&e.jsx(L,{severity:"error",sx:{mb:2},children:r}),e.jsx(Z,{sx:{mb:2},children:e.jsx(I,{variant:"body2",color:"text.secondary",children:e.jsx(c,{i18nKey:"or",children:"OR"})})}),e.jsx(S,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(ee,{}),onClick:i,disabled:o,sx:{mb:1},"aria-busy":o,"aria-live":"polite",children:o?e.jsx(E,{size:24}):n?e.jsx(c,{i18nKey:"linkWithGoogle",children:"Link with Google"}):e.jsx(c,{i18nKey:"signInWithGoogle",children:"Sign in with Google"})})]})}function We({onToggleForm:s}){const[n,r]=t.useState(""),[a,o]=t.useState(""),[l,i]=t.useState(!1),[d,g]=t.useState(!1),{forgotPassword:m}=B(),p=async u=>{u.preventDefault(),o(""),i(!1),g(!0);try{await m(n),i(!0)}catch(y){o(y.message||"Failed to send reset email")}finally{g(!1)}};return e.jsxs(h,{component:"form",onSubmit:p,sx:{mt:1},children:[a&&e.jsx(L,{severity:"error",sx:{mb:2},children:a}),l&&e.jsx(L,{severity:"success",sx:{mb:2},children:e.jsx(c,{i18nKey:"resetEmailSent"})}),e.jsx(k,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:e.jsx(c,{i18nKey:"email"}),name:"email",autoComplete:"email",autoFocus:!0,value:n,onChange:u=>r(u.target.value)}),e.jsx(S,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:d,children:d?e.jsx(E,{size:24}):e.jsx(c,{i18nKey:"sendResetLink"})}),e.jsx(h,{sx:{textAlign:"center"},children:e.jsx(S,{variant:"text",onClick:()=>s("login"),children:e.jsx(c,{i18nKey:"backToLogin"})})})]})}function Be({open:s,close:n,initialView:r="login"}){const[a,o]=t.useState(r),{isAnonymous:l}=B(),{t:i}=_(),d=()=>{switch(a){case"login":return i(l?"linkAccount":"signIn");case"register":return i("createAccount");case"reset":return i("resetPassword");default:return i("Authentication")}};return e.jsxs(z,{title:d(),open:s,close:n,children:[a==="login"&&e.jsxs(e.Fragment,{children:[e.jsx(Te,{onSwitchToRegister:()=>o("register"),onSwitchToForgotPassword:()=>o("reset"),onSuccess:n,isLinking:l}),e.jsx(Pe,{onSuccess:n,isLinking:l})]}),a==="reset"&&e.jsx(We,{onToggleForm:o}),a==="register"&&e.jsx(De,{onSwitchToLogin:()=>o("login"),onSuccess:n,isAnonymous:l})]})}const Oe=t.lazy(()=>A(()=>import("./index-yEZwe-B5.js").then(s=>s.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),Ke=t.lazy(()=>A(()=>import("./index-D6ZNd2Py.js"),__vite__mapDeps([14,1,2,4,5,6,7,3,15]))),ze=t.lazy(()=>A(()=>import("./index-Byg23eEr.js"),__vite__mapDeps([16,1,2,8,5,6,4,7,9,3]))),Re=t.lazy(()=>A(()=>import("./index-C3c5DQFs.js"),__vite__mapDeps([17,1,2,9,4,5,6,7,10,3]))),Fe=t.lazy(()=>A(()=>import("./index-CP9piLk4.js"),__vite__mapDeps([18,1,2,11,8,5,6,4,7,9,3])));function Me(){const{id:s}=M(),{user:n,logout:r,isAnonymous:a}=B(),o=W(),{i18n:l}=_(),[i,d]=t.useState(!1),g=x=>d(x),[m,p]=t.useState({settings:!1,gameBoard:!1,about:!1,schedule:!1,customTiles:!1,linkAccount:!1}),u=(x,C)=>p({...m,[x]:C}),y=async()=>{await r(),g(!1)},w=x=>window.open(x,"_blank","noreferrer"),f=e.jsx(de,{children:e.jsx("path",{d:"M18.942 5.556a16.299 16.299 0 0 0-4.126-1.297c-.178.321-.385.754-.529 1.097a15.175 15.175 0 0 0-4.573 0 11.583 11.583 0 0 0-.535-1.097 16.274 16.274 0 0 0-4.129 1.3c-2.611 3.946-3.319 7.794-2.965 11.587a16.494 16.494 0 0 0 5.061 2.593 12.65 12.65 0 0 0 1.084-1.785 10.689 10.689 0 0 1-1.707-.831c.143-.106.283-.217.418-.331 3.291 1.539 6.866 1.539 10.118 0 .137.114.277.225.418.331-.541.326-1.114.606-1.71.832a12.52 12.52 0 0 0 1.084 1.785 16.46 16.46 0 0 0 5.064-2.595c.415-4.396-.709-8.209-2.973-11.589zM8.678 14.813c-.988 0-1.798-.922-1.798-2.045s.793-2.047 1.798-2.047 1.815.922 1.798 2.047c.001 1.123-.793 2.045-1.798 2.045zm6.644 0c-.988 0-1.798-.922-1.798-2.045s.793-2.047 1.798-2.047 1.815.922 1.798 2.047c0 1.123-.793 2.045-1.798 2.045z"})}),b=x=>{l.changeLanguage(x),localStorage.setItem("gameSettings",JSON.stringify({...JSON.parse(localStorage.getItem("gameSettings")||"{}"),locale:x}))},j=t.useMemo(()=>{const x=[{key:"gameBoard",title:e.jsx(c,{i18nKey:"gameBoards"}),icon:e.jsx(me,{}),onClick:()=>u("gameBoard",!0)},{key:"customTiles",title:e.jsx(c,{i18nKey:"customTilesLabel"}),icon:e.jsx(xe,{}),onClick:()=>u("customTiles",!0)},{key:"cast",title:e.jsx(c,{i18nKey:"cast"}),icon:e.jsx(ge,{}),onClick:()=>w(`/${s.toUpperCase()}/cast`)},{key:"schedule",title:e.jsx(c,{i18nKey:"schedule"}),icon:e.jsx(K,{}),onClick:()=>u("schedule",!0)},{key:"discord",title:"Discord",icon:f,onClick:()=>w("https://discord.gg/mSPBE2hFef")},{key:"about",title:e.jsx(c,{i18nKey:"about"}),icon:e.jsx(he,{}),onClick:()=>u("about",!0)}];return n&&(x.unshift({key:"settings",title:e.jsx(c,{i18nKey:"settings"}),icon:e.jsx(se,{}),onClick:()=>u("settings",!0)}),a&&x.push({key:"linkAccount",title:e.jsx(c,{i18nKey:"linkAccount"}),icon:e.jsx(te,{}),onClick:()=>u("linkAccount",!0)}),x.push({key:"logout",title:e.jsx(c,{i18nKey:"logout"}),icon:e.jsx(ne,{}),onClick:()=>y()})),x},[n,s,a]).map(({key:x,title:C,icon:T,onClick:R})=>e.jsx(ae,{disablePadding:!0,onClick:R,children:e.jsxs(oe,{children:[e.jsx(ie,{children:T}),e.jsx(re,{primary:C})]})},x)),v=(x,C,T={})=>e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(x,{open:m[C],close:()=>u(C,!1),isMobile:o,...T})});return e.jsxs(e.Fragment,{children:[e.jsx(D,{onClick:()=>g(!0),"aria-label":"open menu",children:e.jsx(le,{})}),e.jsx(ce,{anchor:"right",open:i,onClose:()=>g(!1),children:e.jsxs(h,{role:"presentation",onClick:()=>g(!1),sx:{width:250,display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(ue,{sx:{flexGrow:1},children:j}),e.jsxs(h,{sx:{borderTop:"1px solid rgba(0, 0, 0, 0.12)",p:2,display:"flex",justifyContent:"center",gap:1},children:[e.jsx(h,{component:"span",onClick:()=>b("en"),sx:{cursor:"pointer",fontWeight:l.language==="en"?"bold":"normal",color:l.language==="en"?"primary.main":"inherit"},children:"English"}),e.jsx(h,{component:"span",children:"|"}),e.jsx(h,{component:"span",onClick:()=>b("fr"),sx:{cursor:"pointer",fontWeight:l.language==="fr"?"bold":"normal",color:l.language==="fr"?"primary.main":"inherit"},children:"Français"}),e.jsx(h,{component:"span",children:"|"}),e.jsx(h,{component:"span",onClick:()=>b("es"),sx:{cursor:"pointer",fontWeight:l.language==="es"?"bold":"normal",color:l.language==="es"?"primary.main":"inherit"},children:"Español"})]})]})}),m.settings&&v(Oe,"settings"),m.about&&e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(z,{open:m.about,close:()=>u("about",!1),fullScreen:o,children:e.jsx(Ke,{close:()=>u("about",!1),isMobile:o})})}),m.gameBoard&&v(ze,"gameBoard"),m.schedule&&v(Re,"schedule"),m.customTiles&&v(Fe,"customTiles"),m.linkAccount&&v(Be,"linkAccount")]})}function Ne({playerList:s,innerRef:n,...r}){return e.jsxs("div",{...r,ref:n,children:[e.jsx(pe,{color:"success",sx:{fontSize:8,marginRight:"0.2rem"}}),s.length]})}const Ge=t.lazy(()=>A(()=>import("./index-C3c5DQFs.js"),__vite__mapDeps([17,1,2,9,4,5,6,7,10,3])));function Ye({room:s,playerList:n=[]}){const{t:r}=_(),[a,o]=t.useState(!1),[l,i]=t.useState(!1),{schedule:d}=Ie(),{isMobile:g}=W(),m=()=>{o(!0),i(!0)},p=e.jsxs(e.Fragment,{children:[e.jsx(I,{variant:"h6",children:e.jsx(c,{i18nKey:"online"})}),e.jsx("ul",{children:n.map(u=>e.jsx("li",{children:e.jsx(I,{variant:"body1",children:u.displayName})},u.uid))})]});return e.jsx(je,{position:"fixed",children:e.jsxs(fe,{disableGutters:!0,variant:"dense",component:"nav",className:"nav",children:[e.jsxs("div",{className:"site-name",children:[e.jsx(h,{component:"img",sx:{height:32},alt:"Blitzed Out Logo",src:_e}),e.jsx("h1",{children:"Blitzed Out"})]}),e.jsx("div",{children:e.jsxs("div",{className:"nav-room-name",children:[e.jsx("h2",{children:Ae(s)||s===void 0?r("public"):s}),e.jsx(ye,{title:p,children:e.jsx(qe,{playerList:n})}),e.jsx(D,{onClick:m,"aria-label":"schedule game",sx:{ml:2},children:e.jsx(be,{color:"primary",badgeContent:l?null:d.length,children:e.jsx(K,{})})}),a&&e.jsx(we,{children:e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Ge,{open:a,close:()=>o(!1),isMobile:g})})})]})}),e.jsx("div",{className:"menu-drawer",children:e.jsx(Me,{})})]})})}const qe=t.forwardRef((s,n)=>e.jsx(Ne,{...s,innerRef:n})),Xe=P(s=>e.jsx(ve,{disableGutters:!0,elevation:0,square:!0,...s}))(({theme:s})=>({border:`1px solid ${s.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}})),Ze=P(s=>e.jsx(Se,{expandIcon:e.jsx(ke,{sx:{fontSize:"0.9rem"}}),...s}))(({theme:s})=>({backgroundColor:s.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:s.spacing(1)}})),es=P(Ce)(({theme:s})=>({padding:s.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}));export{Be as A,Ee as C,Ye as N,Ue as a,Xe as b,Ze as c,es as d,Ie as e,W as u};
