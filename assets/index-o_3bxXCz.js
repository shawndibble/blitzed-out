const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/chunk-Dai8FbIP.js","js/chunk-CWxWCCzs.js","js/chunk-CR4GjU2t.js","js/chunk-BRtkROVE.js","js/chunk-Cyt02cKC.js","js/chunk-CCm1Ib7k.js","js/pwa-action-sheet.entry.js-C5gCw_UB.js","js/pwa-camera-modal.entry.js-CM6e-dVW.js","js/pwa-toast.entry.js-VRjbOFcX.js","js/pwa-camera-modal-instance.entry.js-CsPPsHxe.js","js/pwa-camera.entry.js-YQ3YOhdW.js"])))=>i.map(i=>d[i]);
import{u as F,j as i,r as p,a5 as A,a6 as fe,H as J,V as z,a7 as Ee,a8 as E,x as P,a4 as ce,a9 as Y,I as Z,K as et,k as gr,_ as je,aa as Ce,a0 as _e,W as Lt,v as Ls,ab as fs,ac as ms,ad as ps,l as Le,ae as ve,af as yr,ag as Ih,ah as Lh,ai as gs,M as W,aj as We,ak as Ae,al as q,Y as te,am as le,an as ys,ao as he,ap as be,S as Gl,aq as Mh,i as At,ar as Je,d as Rh,as as Wl,E as re,D as ue,at as oe,au as Cn,av as st,aw as $h,ax as Kl,Z as xs,X as bs,ay as Dh,a2 as xr,a1 as kt,az as Nh,aA as Lo,aB as Bh,L as br,aC as Oh,aD as vr,aE as Fh,aF as ql,aG as Ms,aH as Vh,aI as zh,aJ as Uh,aK as Gh,aL as Wh,aM as Mo,aN as Kh,aO as qh,aP as Hh,aQ as Hl,z as Yh,aR as Yl,aS as Xh,aT as Jh,aU as Zh,J as pn,aV as Qh,aW as ef,R as Fe,U as tf,P as nf,aX as sf,y as rf,aY as of,aZ as Ro,a_ as Xl,a$ as af,b0 as nn,b1 as Ht,b2 as wr,b3 as zn,b4 as vs,b5 as lf,b6 as Jl,b7 as cf,b8 as jr,b9 as Tn,ba as $e,bb as uf,bc as df,bd as ft,be as Zs,bf as hf,bg as dn,bh as Dt,bi as ff,bj as mf,bk as pf,bl as cn,bm as gf,bn as yf,bo as xf,bp as Qs,bq as bf,br as vf,bs as wf,bt as jf,bu as _f,bv as Sf,T as kf,w as Cf,c as Tf,bw as Af}from"../js/chunk-CWxWCCzs.js";import{l as Pf,r as Ef,a as If,A as _r,u as Lf,b as Zl,s as Pt,c as Mf,i as Rf,d as Ql,e as $f,_ as ht,f as it,h as qe,j as Me,k as Rs,m as $s,n as rs,o as De,p as Mt,q as Sr,t as Df,v as ec,g as tc,w as $o,x as Nf,y as Bf,z as nc,B as sc,C as kr,D as ic,E as rc,F as Cr,G as Do,H as Of,I as Ff,J as Vf,K as Yt,L as oc,M as No,N as zf,O as Uf,P as Gf,Q as ac,R as Wf,S as Kf,T as qf,U as Hf,V as Tr,W as Yf,X as Xf,Y as Jf,Z as Bo,$ as Oo,a0 as Zf,a1 as Qf,a2 as em,a3 as ei,a4 as tm}from"../js/chunk-Dai8FbIP.js";import{ag as lc,ah as Ar,ai as nm,aj as sm,ak as im,al as rm,am as om,o as Ue,an as Ds,ao as am,ap as lm,aq as cc,ar as cm,as as Pi,at as um,au as uc,L as dm,A as hm,av as ws,aw as fm,ax as Un,ay as An,az as Pn,aA as dc,aB as Ze,aC as sn,aD as Ns,aE as Fo,aF as Vo,aG as mm,aH as Bs,aI as pm,aJ as gm,aK as ym,aL as xm,aM as js,aN as bm,aO as vm,aP as wm,aQ as hc,aR as jm,aS as Pr,aT as _m,aU as Sm,aV as km,aW as Cm,aX as Tm,aY as Am,aZ as Pm,a_ as Em,a$ as Im,b0 as Lm,b1 as Mm,b2 as Rm,b3 as zo,b4 as $m,b5 as Dm,b6 as Nm,b7 as Bm,b8 as Om,b9 as Fm,ba as Vm,bb as Uo,bc as zm,bd as Um,be as Gm,bf as Wm,bg as Km}from"../js/chunk-CR4GjU2t.js";import{d as mt,n as os,p as qm,i as gn,h as fc,c as En,r as Hm}from"../js/chunk-BRtkROVE.js";import{z as Os,A as Xt,D as mc,a as Fs,F as pc,H as gc,I as Ym}from"../js/chunk-Cyt02cKC.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{};e.SENTRY_RELEASE={id:"e813eec1e7bc9496fb578434805a43cbb313f9b2"}}catch(t){}})();try{(function(){var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="887f9154-ea03-451c-a80d-d0656dd2fc4f",e._sentryDebugIdIdentifier="sentry-dbid-887f9154-ea03-451c-a80d-d0656dd2fc4f")})()}catch(e){}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function Er(){const{t:e}=F();return i.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:`linear-gradient(
          135deg,
          rgba(15, 23, 42, 0.9) 0%,
          rgba(30, 41, 59, 0.95) 20%,
          rgba(51, 65, 85, 0.9) 40%,
          rgba(30, 41, 59, 0.95) 60%,
          rgba(15, 23, 42, 0.9) 80%,
          rgba(2, 6, 23, 0.95) 100%
        )`,zIndex:9999,fontFamily:"'Roboto Fallback', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif"},children:[i.jsx("div",{style:{width:"60px",height:"60px",border:"4px solid rgba(255, 255, 255, 0.1)",borderLeft:"4px solid #0abde3",borderRadius:"50%",animation:"app-skeleton-spin 1.4s linear infinite",marginBottom:"24px"}}),i.jsxs("div",{style:{fontSize:"clamp(1.25rem, 4vw, 3rem)",fontWeight:600,letterSpacing:"-0.025em",color:"#0abde3",textAlign:"center",fontFamily:"'Roboto Fallback', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif",textShadow:"2px 2px 4px rgba(0, 0, 0, 0.8)"},children:[e("loading"),"..."]})]})}function Xm({onSuccess:e,onSwitchToRegister:t,onSwitchToForgotPassword:n,isLinking:s=!1}){const{t:r}=F(),[o,a]=p.useState(""),[l,c]=p.useState(""),[u,h]=p.useState(""),[d,f]=p.useState(!1),g=async m=>{m.preventDefault(),h(""),f(!0);try{await Pf(o,l),e&&e()}catch(y){console.error("Login error:",y),h(y.message||"Failed to sign in")}finally{f(!1)}};return i.jsxs(A,{component:"form",onSubmit:g,sx:{mt:1},children:[u&&i.jsx(fe,{severity:"error",sx:{mb:2},children:u}),i.jsx(J,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:r("email"),name:"email",autoComplete:"email",autoFocus:!0,value:o,onChange:m=>a(m.target.value)}),i.jsx(J,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:r("password"),type:"password",id:"password",autoComplete:"current-password",value:l,onChange:m=>c(m.target.value)}),i.jsx(z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:d,children:d?i.jsx(Ee,{size:24}):s?i.jsx(E,{i18nKey:"linkAccount",children:"Link Account"}):i.jsx(E,{i18nKey:"signIn"})}),i.jsxs(P,{align:"center",children:[i.jsx(z,{onClick:t,variant:"text",children:i.jsx(E,{i18nKey:"needAccount"})})," | ",i.jsx(z,{onClick:n,variant:"text",children:i.jsx(E,{i18nKey:"forgotPassword"})})]})]})}function Jm({onSuccess:e,onSwitchToLogin:t,isAnonymous:n=!1}){const{t:s}=F(),[r,o]=p.useState(""),[a,l]=p.useState(""),[c,u]=p.useState(""),[h,d]=p.useState(""),[f,g]=p.useState(""),[m,y]=p.useState(!1),b=async v=>{if(v.preventDefault(),g(""),c!==h){g(s("passwordsDoNotMatch")||"Passwords do not match");return}y(!0);try{await Ef(a==null?void 0:a.trim(),c,r==null?void 0:r.trim()),e&&e()}catch(_){console.error("Registration error:",_),g(_.message||"Failed to create account")}finally{y(!1)}};return i.jsxs(A,{component:"form",onSubmit:b,sx:{mt:1},children:[f&&i.jsx(fe,{severity:"error",sx:{mb:2},children:f}),i.jsx(J,{margin:"normal",required:!0,fullWidth:!0,id:"displayName",label:s("displayName"),name:"displayName",autoComplete:"name",autoFocus:!0,value:r,onChange:v=>o(v.target.value)}),i.jsx(J,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:s("email"),name:"email",autoComplete:"email",value:a,onChange:v=>l(v.target.value)}),i.jsx(J,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:s("password"),type:"password",id:"password",autoComplete:"new-password",value:c,onChange:v=>u(v.target.value)}),i.jsx(J,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:s("confirmPassword"),type:"password",id:"confirmPassword",autoComplete:"new-password",value:h,onChange:v=>d(v.target.value)}),i.jsx(z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:m,children:m?i.jsx(Ee,{size:24}):n?i.jsx(E,{i18nKey:"linkAccount"}):i.jsx(E,{i18nKey:"createAccount"})}),i.jsx(P,{align:"center",children:i.jsx(z,{onClick:t,variant:"text",children:i.jsx(E,{i18nKey:"alreadyHaveAccount"})})})]})}function Zm({onSuccess:e,isLinking:t=!1}){const[n,s]=p.useState(""),[r,o]=p.useState(!1),a=async()=>{s(""),o(!0);try{await If(),e&&e()}catch(l){s(l.message||"Failed to sign in with Google")}finally{o(!1)}};return i.jsxs(A,{sx:{mt:2,mb:2},children:[n&&i.jsx(fe,{severity:"error",sx:{mb:2},children:n}),i.jsx(ce,{sx:{mb:2},children:i.jsx(P,{variant:"body2",color:"text.secondary",children:i.jsx(E,{i18nKey:"or",children:"OR"})})}),i.jsx(z,{fullWidth:!0,variant:"outlined",startIcon:i.jsx(lc,{}),onClick:a,disabled:r,sx:{mb:1},"aria-busy":r,"aria-live":"polite",children:r?i.jsx(Ee,{size:24}):t?Y("linkWithGoogle","Link with Google"):Y("signInWithGoogle","Sign in with Google")})]})}function Vs(){const e=p.useContext(_r);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function Qe({close:e}){return i.jsx(Z,{"aria-label":"close",onClick:e,sx:{position:"absolute",right:8,top:8},children:i.jsx(Ar,{})})}function Ie(e="sm"){const t=et();return gr(t.breakpoints.down(e))}function yc({children:e,open:t,close:n=null,isMobile:s=null,title:r=null,isLoading:o=!1,maxWidth:a="md",fullWidth:l=!1,ariaLabelledby:c,ariaDescribedby:u,actions:h}){const d=Ie(),f=s!==null?s:d;return o?null:i.jsxs(je,{fullScreen:f,open:t,maxWidth:a,fullWidth:l,"aria-labelledby":c,"aria-describedby":u,disableRestoreFocus:!0,children:[i.jsxs(Ce,{children:[r,typeof n=="function"&&i.jsx(Qe,{close:n})]}),i.jsx(_e,{children:e}),h&&i.jsx(Lt,{sx:{p:2,gap:1},children:h})]})}function Qm({onToggleForm:e}){const[t,n]=p.useState(""),[s,r]=p.useState(""),[o,a]=p.useState(!1),[l,c]=p.useState(!1),{forgotPassword:u}=Vs(),h=async d=>{d.preventDefault(),r(""),a(!1),c(!0);try{await u(t),a(!0)}catch(f){r(f.message||"Failed to send reset email")}finally{c(!1)}};return i.jsxs(A,{component:"form",onSubmit:h,sx:{mt:1},children:[s&&i.jsx(fe,{severity:"error",sx:{mb:2},children:s}),o&&i.jsx(fe,{severity:"success",sx:{mb:2},children:i.jsx(E,{i18nKey:"resetEmailSent"})}),i.jsx(J,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:i.jsx(E,{i18nKey:"email"}),name:"email",autoComplete:"email",autoFocus:!0,value:t,onChange:d=>n(d.target.value)}),i.jsx(z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:l,children:l?i.jsx(Ee,{size:24}):i.jsx(E,{i18nKey:"sendResetLink"})}),i.jsx(A,{sx:{textAlign:"center"},children:i.jsx(z,{variant:"text",onClick:()=>e("login"),children:i.jsx(E,{i18nKey:"backToLogin"})})})]})}function xc({open:e,close:t,initialView:n="login"}){const[s,r]=p.useState(n),{isAnonymous:o}=Vs(),{t:a}=F(),l=()=>{switch(s){case"login":return a(o?"linkAccount":"signIn");case"register":return a("createAccount");case"reset":return a("resetPassword");default:return a("Authentication")}};return i.jsxs(yc,{title:l(),open:e,close:t,children:[s==="login"&&i.jsxs(i.Fragment,{children:[i.jsx(Xm,{onSwitchToRegister:()=>r("register"),onSwitchToForgotPassword:()=>r("reset"),onSuccess:t,isLinking:o}),i.jsx(Zm,{onSuccess:t,isLinking:o})]}),s==="reset"&&i.jsx(Qm,{onToggleForm:r}),s==="register"&&i.jsx(Jm,{onSwitchToLogin:()=>r("login"),onSuccess:t,isAnonymous:o})]})}const Jt=Ls(e=>i.jsx(fs,{disableGutters:!0,elevation:0,square:!0,...e}))(({theme:e})=>({border:`1px solid ${e.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}})),Zt=Ls(ms)(({theme:e})=>({padding:e.spacing(2),borderTop:`1px solid ${e.palette.divider}`})),Qt=Ls(e=>i.jsx(ps,{expandIcon:i.jsx(nm,{sx:{fontSize:"0.9rem"}}),...e}))(({theme:e})=>({backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(148, 163, 184, .08)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:e.spacing(1)}}));function bc(){const{t:e}=F(),[t,n]=p.useState(!1),s=r=>(o,a)=>{n(a?r:!1)};return i.jsxs(A,{className:"game-guide",children:[i.jsx(A,{className:"hero-section",children:i.jsxs(E,{i18nKey:"gameDesc",children:[i.jsx(P,{component:"h1",variant:"h4",className:"hero-title gradient-text-flame",children:"Transform Your Intimate Adventures - Blitzed Out Adult Board Game"}),i.jsx(P,{variant:"body1",className:"hero-subtitle",children:"Blitzed Out is a customizable adult experience platform. Whether you're exploring solo, spicing things up as a couple, or hosting an unforgettable party â€” this is your playground."}),i.jsx(P,{variant:"body1",className:"hero-subtitle",children:"Create personalized experiences with endless customization, join private rooms, or discover new adventures with a vibrant community."})]})}),i.jsx(ce,{className:"section-divider"}),i.jsxs(A,{className:"features-section",children:[i.jsx(P,{component:"h2",variant:"h6",className:"section-title",children:i.jsx(E,{i18nKey:"whySpecialTitle"})}),i.jsxs(A,{className:"features-grid",children:[i.jsx(A,{className:"feature-item",children:i.jsxs(E,{i18nKey:"customizationFeature",children:[i.jsx(A,{className:"feature-icon",children:"ðŸŽ²"}),i.jsx(P,{component:"h3",variant:"subtitle1",className:"feature-title",children:"Unlimited Customization"}),i.jsx(P,{variant:"body2",className:"feature-description",children:"Create your perfect experience with custom boards, actions, and intensity levels tailored to your desires."})]})}),i.jsx(A,{className:"feature-item",children:i.jsxs(E,{i18nKey:"privacyFeature",children:[i.jsx(A,{className:"feature-icon",children:"ðŸ”’"}),i.jsx(P,{component:"h3",variant:"subtitle1",className:"feature-title",children:"Complete Privacy Control"}),i.jsx(P,{variant:"body2",className:"feature-description",children:"Private rooms, local play options, and anonymous sessions. Your privacy and comfort come first."})]})}),i.jsx(A,{className:"feature-item",children:i.jsxs(E,{i18nKey:"varietyFeature",children:[i.jsx(A,{className:"feature-icon",children:"ðŸŒŸ"}),i.jsx(P,{component:"h3",variant:"subtitle1",className:"feature-title",children:"Endless Variety"}),i.jsx(P,{variant:"body2",className:"feature-description",children:"From gentle exploration to intense adventures â€” with community-created content and regular updates."})]})})]})]}),i.jsxs(Jt,{expanded:t==="panel1",onChange:s("panel1"),className:"about-accordion",children:[i.jsx(Qt,{"aria-controls":"panel1-content",id:"panel1-header",children:i.jsx(P,{component:"h3",className:"accordion-title",children:i.jsx(E,{i18nKey:"gettingStartedTitle"})})}),i.jsxs(Zt,{children:[i.jsx(P,{variant:"body1",sx:{mb:2},children:e("gettingStartedMainText")}),i.jsx(P,{variant:"body2",className:"helpful-tip",children:e("gettingStartedTip")})]})]})]})}const ep="/img/blitzed-out-DGhYHOgx.png";window.__castApiInitialized=window.__castApiInitialized||!1;window.__castScriptLoading=window.__castScriptLoading||!1;function tp(){const[e,t]=p.useState(!1),[n,s]=p.useState(null),{id:r}=Le(),o=p.useRef(null),[a,l]=p.useState(!1),[c,u]=p.useState(!1),h=p.useCallback((g=!1)=>{t(!1),s(null),g&&u(!1)},[]),d=p.useCallback(g=>{try{const m=`${window.location.origin}/${r}/cast`;g.sendMessage("urn:x-cast:com.blitzedout.app",{type:"LOAD",url:m})}catch(m){console.error("Error sending cast message:",m)}},[r]);p.useEffect(()=>{const g=()=>{var y,b,v,_;try{if(!((y=window==null?void 0:window.cast)!=null&&y.framework))return;if(window.__castApiInitialized){l(!0),m();return}window.cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:"1227B8DE",autoJoinPolicy:(_=(v=(b=window.chrome)==null?void 0:b.cast)==null?void 0:v.AutoJoinPolicy)==null?void 0:_.ORIGIN_SCOPED}),window.__castApiInitialized=!0,l(!0),m()}catch(x){console.error("Error initializing Cast API:",x)}},m=()=>{var y,b,v;try{const _=(b=(y=window.cast)==null?void 0:y.framework)==null?void 0:b.CastContext.getInstance();if(!_)return;const x=_.getCurrentSession();if(x&&(t(!0),s(x),r&&d(x)),!((v=window==null?void 0:window.cast)!=null&&v.framework))return;_.addEventListener(window.cast.framework.CastContextEventType.SESSION_STATE_CHANGED,w=>{var j,C,S,T,L,k;const I=_.getCurrentSession();switch(w.sessionState){case((C=(j=window.cast)==null?void 0:j.framework)==null?void 0:C.SessionState.SESSION_STARTED):case((T=(S=window.cast)==null?void 0:S.framework)==null?void 0:T.SessionState.SESSION_RESUMED):c||(t(!0),s(I),I&&r&&d(I));break;case((k=(L=window.cast)==null?void 0:L.framework)==null?void 0:k.SessionState.SESSION_ENDED):h(!0);break;default:w.sessionState==="SESSION_ENDING"&&h();break}})}catch(_){console.error("Error setting up session listener:",_)}};if(window.chrome&&window.chrome.cast&&window.cast)g();else if(window.__onGCastApiAvailable=function(y){y&&g()},!document.querySelector('script[src*="cast_sender.js"]')&&!window.__castScriptLoading){window.__castScriptLoading=!0;const y=document.createElement("script");y.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",y.onload=()=>{window.__castScriptLoading=!1},y.onerror=()=>{window.__castScriptLoading=!1,console.error("Failed to load Cast SDK")},document.head.appendChild(y)}return()=>{}},[r,d,c,h]);const f=()=>{var g,m,y,b;if(!a){console.warn("Cast API not ready yet");return}if(e){u(!0),h();try{const v=(m=(g=window.cast)==null?void 0:g.framework)==null?void 0:m.CastContext.getInstance();v&&v.endCurrentSession(!0),n&&n.endSession(!0)}catch(v){}}else{u(!1);try{const v=(b=(y=window.cast)==null?void 0:y.framework)==null?void 0:b.CastContext.getInstance();v&&v.requestSession().catch(_=>console.error("Error requesting cast session:",_))}catch(v){console.error("Error requesting cast session:",v)}}};return p.useEffect(()=>{e&&n&&r&&d(n)},[r,e,n,d]),a?i.jsx(ve,{title:e?Y("stopCasting"):Y("startCasting"),children:i.jsx(Z,{ref:o,onClick:f,color:e?"primary":"default",children:e?i.jsx(sm,{}):i.jsx(im,{})})}):null}const np={light:om,dark:rm};function sp({size:e="medium",tooltip:t,"aria-label":n}){const{resolvedThemeMode:s,toggleTheme:r}=Lf(),{t:o}=F(),a=np[s],l=()=>{r()},c=()=>t||(s==="light"?o("theme.switchToDark","Switch to dark theme"):o("theme.switchToLight","Switch to light theme")),u=()=>n||`Toggle theme, currently ${s}`;return i.jsx(ve,{title:c(),arrow:!0,children:i.jsx(Z,{onClick:l,size:e,"aria-label":u(),sx:{transition:"all 0.3s ease","&:hover":{transform:"scale(1.1)",backgroundColor:"action.hover"},"& .MuiSvgIcon-root":{transition:"transform 0.3s ease"},"&:hover .MuiSvgIcon-root":{transform:"rotate(180deg)"}},children:i.jsx(a,{})})})}function ip(e){const t=e==null?void 0:e.replace(/([A-Z])/g," $1").trim();return t?t.charAt(0).toUpperCase()+t.slice(1):""}function yn(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}function vc(e){var t;const n=(e==null?void 0:e.split(/\r?\n/))||[];return(t=n[n.length-1])==null?void 0:t.split(":")[1]}function wc(e,t){var n;const s=new RegExp(`\\d+\\s${t}`,"g");return(n=e.match(s))==null?void 0:n.filter((r,o,a)=>a.indexOf(r)===o)}function Q(e){return(e==null?void 0:e.toUpperCase())==="PUBLIC"}function Se(e){return e==="online"}function gt({children:e,open:t,close:n,type:s="error",hideCloseButton:r=!1,vertical:o="bottom",horizontal:a="center",disableAutoHide:l=!1}){const{t:c}=F(),u=(d,f)=>{f!=="clickaway"&&n()},h=!r&&i.jsx(Z,{size:"small","aria-label":c("close"),onClick:u,children:i.jsx(Ar,{fontSize:"small"})});return i.jsx(yr,{children:i.jsx(Ih,{open:t,autoHideDuration:l?6e4:4e3,onClose:u,action:h,anchorOrigin:{vertical:o,horizontal:a},TransitionComponent:Lh,children:i.jsx(fe,{onClose:r?void 0:u,severity:s,sx:{width:"100%"},children:e})})})}function rp(e){const t=e==null?void 0:e.split(".");return!t||(t==null?void 0:t.length)<2?!1:t==null?void 0:t[t.length-1]}function op(e){const t=rp(e);return typeof t=="string"&&["mp4","webm","mkv","flv","avi","mov","wmv","mpg","mv4"].includes(t)}function ap(e){return e?e!=null&&e.startsWith("http")?e:op(e)?`/videos/${e}`:`/images/${e}`:""}function jc(e){return new URL(e).hostname.replace("www.","").replace(".com","").replace(".net","").replace(".gg","")}function lp(e){if(!e||typeof e!="string")return!1;try{const t=e.trim();if(!t)return!1;const n=new URL(t);if(!["http:","https:"].includes(n.protocol))return!1;let s;try{s=decodeURIComponent(n.pathname)}catch(r){return!1}return!(s.includes("../")||s.includes("..\\")||!n.hostname||n.hostname.includes("..")||n.pathname==="/"&&!n.search&&!n.hash)}catch(t){return!1}}function cp({title:e,date:t,url:n,description:s="",location:r="",baseUrl:o="https://blitzedout.com/PUBLIC",downloadIcs:a,buttonSx:l={}}){const c=et(),{t:u}=F(),[h,d]=p.useState(null),f=!!h,g=j=>{d(j.currentTarget)},m=()=>{d(null)},y=()=>e||u("calendar.gameTitle"),b=()=>{a(y(),t,n,v()),m()},v=()=>{let j=`${y()}`;return o&&(j+=`
${o}`),n&&(j+=`

${u("calendar.videoLink")}: ${n}`),s&&(j+=`

${s}`),j},_=()=>{const j=t.toISOString().replace(/-|:|\.\d+/g,""),C=new Date(t.getTime()+3600*1e3).toISOString().replace(/-|:|\.\d+/g,""),S="https://calendar.google.com/calendar/render",T=new URLSearchParams({action:"TEMPLATE",text:y(),dates:`${j}/${C}`,details:v()});return(r||n)&&T.append("location",r||n||""),`${S}?${T.toString()}`},x=()=>{const j="https://outlook.live.com/calendar/0/deeplink/compose",C=new URLSearchParams({path:"/calendar/action/compose",rru:"addevent",subject:y(),startdt:t.toISOString(),enddt:new Date(t.getTime()+36e5).toISOString(),body:v()});return(r||n)&&C.append("location",r||n||""),`${j}?${C.toString()}`},w=()=>{const j=Math.floor(t.getTime()/1e3),C=Math.floor((t.getTime()+3600*1e3)/1e3),S="https://calendar.yahoo.com/",T=new URLSearchParams({v:"60",title:y(),st:j.toString(),et:C.toString(),desc:v()});return(r||n)&&T.append("in_loc",r||n||""),`${S}?${T.toString()}`};return i.jsxs(i.Fragment,{children:[i.jsx(z,{variant:"outlined",size:"small",startIcon:i.jsx(Ds,{fontSize:"small"}),onClick:g,"aria-controls":f?"calendar-menu":void 0,"aria-haspopup":"true","aria-expanded":f?"true":void 0,sx:{borderColor:Ue(c.palette.secondary.main,.3),color:c.palette.secondary.main,"&:hover":{borderColor:c.palette.secondary.main,backgroundColor:Ue(c.palette.secondary.main,.05)},...l},children:u("calendar.addToCalendar")}),i.jsxs(gs,{id:"calendar-menu",anchorEl:h,open:f,onClose:m,MenuListProps:{"aria-labelledby":"calendar-button",dense:!0},children:[i.jsxs(W,{onClick:b,children:[i.jsx(We,{children:i.jsx(am,{fontSize:"small"})}),i.jsx(Ae,{children:u("calendar.downloadIcs")})]}),i.jsxs(W,{component:"a",href:_(),target:"_blank",rel:"noopener noreferrer",onClick:m,children:[i.jsx(We,{children:i.jsx(lc,{fontSize:"small"})}),i.jsx(Ae,{children:u("calendar.googleCalendar")})]}),i.jsxs(W,{component:"a",href:x(),target:"_blank",rel:"noopener noreferrer",onClick:m,children:[i.jsx(We,{children:i.jsx(lm,{fontSize:"small"})}),i.jsx(Ae,{children:u("calendar.outlookCalendar")})]}),i.jsxs(W,{component:"a",href:w(),target:"_blank",rel:"noopener noreferrer",onClick:m,children:[i.jsx(We,{children:i.jsx(cc,{fontSize:"small"})}),i.jsx(Ae,{children:u("calendar.yahooCalendar")})]}),i.jsxs(W,{onClick:b,children:[i.jsx(We,{children:i.jsx(cm,{fontSize:"small"})}),i.jsx(Ae,{children:u("calendar.appleCalendar")})]})]})]})}const up=(e,t,n,s)=>{const r=new Date(t.getTime()+36e5),o=u=>u.toISOString().replace(/-|:|\.\d+/g,"").slice(0,15)+"Z",a=o(t),l=o(r);let c=["BEGIN:VCALENDAR","VERSION:2.0","CALSCALE:GREGORIAN","METHOD:PUBLISH","BEGIN:VEVENT",`DTSTART:${a}`,`DTEND:${l}`,`SUMMARY:${e}`,`DESCRIPTION:${(s==null?void 0:s.replace(/\n/g,"\\n"))||e}`,"STATUS:CONFIRMED"];return n&&c.push(`URL:${n}`),c=c.concat(["END:VEVENT","END:VCALENDAR"]),c.join(`\r
`)},dp=(e,t,n,s)=>{const r=up(e,t,n,s),o=new Blob([r],{type:"text/calendar;charset=utf-8"}),a=document.createElement("a");a.href=URL.createObjectURL(o),a.download=`blitzed-out-game-${t.toISOString().split("T")[0]}.ics`,document.body.appendChild(a),a.click(),document.body.removeChild(a)},hp=e=>{try{const{href:t}=new URL(e),n=jc(e);return i.jsx(z,{href:t,target:"_blank",rel:"noreferrer",variant:"outlined",size:"small",startIcon:e.includes("meet")||e.includes("zoom")?i.jsx(um,{}):i.jsx(uc,{}),children:n})}catch(t){return null}};function fp({game:e}){const t=et(),{t:n}=F(),s=e.dateTime.toDate(),r=new Date().toDateString()===s.toDateString(),o=s.getTime()-new Date().getTime()<1440*60*1e3&&s>new Date;return i.jsxs(q,{container:!0,spacing:2,alignItems:"center",children:[i.jsx(q,{size:12,children:i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.jsx(Pi,{fontSize:"small",color:r?"secondary":"action",sx:{opacity:r?1:.7}}),i.jsxs(A,{sx:{display:"flex",gap:2},children:[i.jsx(P,{variant:"body2",fontWeight:r?"bold":"normal",children:s.toLocaleString([],{weekday:"short",month:"short",day:"numeric"})}),i.jsx(P,{variant:"body2",color:"text.secondary",children:s.toLocaleString([],{hour:"numeric",minute:"2-digit"})})]}),o&&i.jsx(te,{label:n("soon"),size:"small",color:"primary",sx:{height:20,fontSize:"0.7rem",ml:1,borderRadius:1,fontWeight:"bold",backgroundColor:Ue(t.palette.success.main,.8)}})]})}),i.jsx(q,{size:12,children:i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.url?hp(e.url):i.jsx(P,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic",fontSize:"0.85rem"},children:n("noLinkProvided")}),i.jsx(cp,{title:n("calendar.gameTitle"),date:s,url:e.url,downloadIcs:dp,buttonSx:{ml:1}})]})})]})}function _c({open:e,close:t,isMobile:n}){const{t:s}=F(),[r,o]=p.useState(""),{schedule:a,addToSchedule:l}=Zl(),c=mt().add(2,"week"),u=et(),h=p.useCallback(()=>{o(null)},[]),d=p.useCallback(f=>{f.preventDefault();const g=f.currentTarget,m=g.elements.namedItem("date-time"),y=new Date(m.value),v=g.elements.namedItem("link").value;if(!y||!(y instanceof Date)){o(s("scheduleValidation.selectDateTime"));return}if(y<mt().toDate()){o(s("scheduleValidation.selectFutureDateTime"));return}if(a.find(_=>_.dateTime.toDate().toUTCString()===y.toUTCString())){o(s("scheduleValidation.gameAlreadyScheduled"));return}if(y>c.toDate()){o(s("scheduleValidation.selectWithinTwoWeeks"));return}if(v&&!v.startsWith("http")){o(s("scheduleValidation.enterValidUrl"));return}l(y,v),g.reset()},[a,l,c,s]);return i.jsx(i.Fragment,{children:i.jsxs(dm,{dateAdapter:hm,children:[i.jsx(je,{fullScreen:n,open:e,onClose:t,maxWidth:"md",children:i.jsxs("form",{onSubmit:d,children:[i.jsxs(Ce,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.jsx(Ds,{color:"primary"}),i.jsx(P,{variant:"h5",component:"span",fontWeight:"bold",children:i.jsx(E,{i18nKey:"schedule"})}),i.jsx(Qe,{close:t})]}),i.jsxs(_e,{children:[i.jsxs(le,{elevation:3,sx:{mb:4,background:Ue(u.palette.primary.main,.05),border:`1px solid ${Ue(u.palette.primary.main,.1)}`,borderRadius:2,overflow:"visible",position:"relative"},children:[i.jsx(ys,{title:i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.jsx(Pi,{color:"primary"}),i.jsx(P,{variant:"h6",fontWeight:"bold",children:s("upcomingGames")})]}),sx:{pb:1,borderBottom:`1px solid ${Ue(u.palette.divider,.1)}`}}),i.jsx(he,{sx:{p:2},children:a.length?i.jsx(be,{spacing:2,children:a==null?void 0:a.map(f=>i.jsx(Gl,{elevation:1,sx:{p:1.5,borderRadius:1.5},children:i.jsx(fp,{game:f})},f.id))}):i.jsxs(A,{sx:{p:3,textAlign:"center",color:Ue(u.palette.text.primary,.6),borderRadius:1,background:Ue(u.palette.background.paper,.5)},children:[i.jsx(P,{variant:"body1",children:s("noPlannedGames")}),i.jsx(P,{variant:"body2",sx:{mt:1,fontSize:"0.85rem"},children:s("scheduleFirstGame")})]})})]}),i.jsxs(le,{elevation:2,sx:{background:Ue(u.palette.background.paper,.7),borderRadius:2},children:[i.jsx(ys,{title:i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.jsx(ws,{color:"secondary"}),i.jsx(P,{variant:"h6",fontWeight:"bold",children:i.jsx(E,{i18nKey:"scheduleGame"})})]}),sx:{pb:1,borderBottom:`1px solid ${Ue(u.palette.divider,.1)}`}}),i.jsx(he,{children:i.jsxs(be,{spacing:3,sx:{mt:1},children:[i.jsx(fm,{name:"date-time",label:s("dateTime"),closeOnSelect:!1,disablePast:!0,maxDate:c,timeSteps:{minutes:30},sx:{width:"100%"},slotProps:{textField:{variant:"outlined",fullWidth:!0}}}),i.jsx(J,{label:s("camUrl"),variant:"outlined",name:"link",fullWidth:!0,placeholder:"https://...",helperText:s("optionalLinkHelper")}),i.jsx(z,{variant:"contained",type:"submit",fullWidth:!0,size:"large",startIcon:i.jsx(Pi,{}),sx:{mt:2,py:1.2,borderRadius:1.5,fontWeight:"bold",textTransform:"none",boxShadow:u.shadows[4],"&:hover":{boxShadow:u.shadows[8]}},children:i.jsx(E,{i18nKey:"schedule"})})]})})]})]})]})}),i.jsx(gt,{open:!!r,close:h,children:r})]})})}const In={en:{label:"English",voice:"Google UK English Male"},es:{label:"EspaÃ±ol",voice:"Google espaÃ±ol de Estados Unidos"},fr:{label:"FranÃ§ais",voice:"Google franÃ§ais"},zh:{label:"ä¸­æ–‡",voice:"Google ä¸­æ–‡ï¼ˆä¸­å›½å¤§é™†ï¼‰"},hi:{label:"à¤¹à¤¿à¤¨à¥à¤¦à¥€",voice:"Google à¤¹à¤¿à¤¨à¥à¤¦à¥€"}};function mp({open:e,onClose:t,onConfirm:n,onCancel:s,title:r,message:o,confirmText:a,cancelText:l,severity:c="info",confirmColor:u="primary"}){const{t:h}=F(),d=Ie(),f=()=>{s?s():t()},g=async()=>{try{await n(),t()}catch(m){console.error("Confirmation action failed:",m)}};return i.jsxs(je,{open:e,onClose:t,fullScreen:d,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"confirmation-dialog-title","aria-describedby":"confirmation-dialog-description",children:[i.jsx(Ce,{id:"confirmation-dialog-title",children:r}),i.jsxs(_e,{children:[c!=="info"&&i.jsxs(fe,{severity:c,sx:{mb:2},children:[c==="warning"&&h("warning"),c==="error"&&h("error"),c==="success"&&h("success")]}),i.jsx(Mh,{id:"confirmation-dialog-description",children:o})]}),i.jsxs(Lt,{sx:{p:2,gap:1},children:[i.jsx(z,{onClick:f,variant:"outlined",fullWidth:d,children:l||h("cancel")}),i.jsx(z,{onClick:g,variant:"contained",color:u,fullWidth:d,autoFocus:!0,children:a||h("confirm")})]})]})}function pp({open:e,onClose:t,onRebuildBoard:n,onKeepBoard:s,fromLanguage:r,toLanguage:o}){var a,l;const{t:c}=F(),u=((a=In[r])==null?void 0:a.label)||r,h=((l=In[o])==null?void 0:l.label)||o,d=()=>{n(),t()},f=()=>{s(),t()};return i.jsx(mp,{open:e,onClose:t,onConfirm:d,onCancel:f,title:i.jsx(E,{i18nKey:"languageChangeTitle"}),message:i.jsxs(i.Fragment,{children:[i.jsx(E,{i18nKey:"languageChangeMessage",values:{fromLanguage:u,toLanguage:h}}),i.jsx("br",{}),i.jsx("br",{}),i.jsx(E,{i18nKey:"languageChangeExplanation"})]}),confirmText:c("rebuildBoardAction"),cancelText:c("keepCurrentBoard"),severity:"info",confirmColor:"primary"})}function gp(e){const{t}=At;let n=`### ${t("roomSettings")}\r
`;return Object.entries(e).forEach(([s,r])=>{if(s!=="room"){if(s==="roomBackgroundURL"&&r!==""){n+=`* ${t(s)}: [${jc(r)}:link:](${r})\r
`;return}if(s==="roomRealtime"){n+=`* ${t("playerList")}: ${t(r?"delayed":"realtime")}\r
`;return}r!==""&&(n+=`* ${t(s)}: ${r}\r
`)}}),n}function yp(e){const t={};return Object.entries(e).forEach(([n,s])=>{n.startsWith("room")&&!["roomUpdated","roomBackground","roomBackgroundURL"].includes(n)&&(t[n]=s)}),e.roomBackgroundURL&&e.roomBackgroundURL.trim()!==""&&(t.roomBackgroundURL=e.roomBackgroundURL),t}async function xp(e,t,n){let s=e;return t!==void 0&&t.length>0&&(s=await n(t)),s}function Sc(e,t){const n=yp(e);return Pt({room:e.room,user:t,text:gp(n),type:"room",settings:JSON.stringify(n)})}const Go=50,Ei=100,Ii=50,Wo=1,Ko=10,Li=1,_s=10,bp=["none","all","default","undefined","null"],Mi=["solo","foreplay","sex","consumption"],vp=(e,t="en",n="online",s)=>{const r=[],o=[];if(!e||e.trim().length===0)return r.push("Group name is required"),{isValid:!1,errors:r,warnings:o};const a=e.trim();return a.length>Go&&r.push(`Group name must be ${Go} characters or less`),bp.includes(a.toLowerCase())&&r.push(`"${a}" is a reserved name and cannot be used`),/^[a-zA-Z0-9_-]+$/.test(a)||r.push("Group name can only contain letters, numbers, hyphens, and underscores"),/^[a-zA-Z]/.test(a)||r.push("Group name must start with a letter"),{isValid:r.length===0,errors:r,warnings:o}},kc=e=>{const t=[],n=[];return!e||e.trim().length===0?(t.push(Y("groupLabelRequired")),{isValid:!1,errors:t,warnings:n}):(e.trim().length>Ei&&t.push(`Group label must be ${Ei} characters or less`),{isValid:t.length===0,errors:t,warnings:n})},wp=e=>{const t=[],n=[];if(!e||e.length===0)return t.push("At least one intensity level is required"),{isValid:!1,errors:t,warnings:n};e.length<Li&&t.push(`At least ${Li} intensity level is required`),e.length>_s&&t.push(`Maximum ${_s} intensity levels allowed`);const s=new Set,r=new Set;for(let l=0;l<e.length;l++){const c=e[l];if((!c.id||c.id.trim().length===0)&&t.push(`Intensity level ${l+1} is missing an ID`),!c.label||c.label.trim().length===0)t.push(`Intensity level ${l+1} is missing a label`);else{const u=c.label.trim();u.length>Ii&&t.push(`Intensity level ${l+1} label must be ${Ii} characters or less`),r.has(u.toLowerCase())?t.push(`Intensity label "${u}" is used multiple times`):r.add(u.toLowerCase())}typeof c.value!="number"||!Number.isInteger(c.value)?t.push(`Intensity level ${l+1} must have a valid integer value`):((c.value<Wo||c.value>Ko)&&t.push(`Intensity level ${l+1} value must be between ${Wo} and ${Ko}`),s.has(c.value)?t.push(`Intensity value ${c.value} is used multiple times`):s.add(c.value))}const o=Array.from(s).sort((l,c)=>l-c);let a=o[0];for(const l of o){if(l!==a){n.push("Intensity values are not sequential. Consider using values like 1, 2, 3, 4 for better user experience");break}a++}return{isValid:t.length===0,errors:t,warnings:n}},jp=async(e,t)=>{const n=[],s=[],r=vp(e.name,e.locale||"en",e.gameMode||"online");n.push(...r.errors),s.push(...r.warnings||[]);const o=kc(e.label);n.push(...o.errors),s.push(...o.warnings||[]);const a=wp(e.intensities);if(n.push(...a.errors),s.push(...a.warnings||[]),r.isValid&&e.name)try{await Rf(e.name,e.locale||"en",e.gameMode||"online",t)||n.push(`A group with the name "${e.name}" already exists for this locale and game mode`)}catch(l){s.push("Could not verify group name uniqueness"),console.warn("Failed to check group name uniqueness:",l instanceof Error?l.message:"Unknown error")}return{isValid:n.length===0,errors:n,warnings:s}},qo=async(e,t="en",n="online")=>{const s=[],r=[];if(!e.group_id||e.group_id.trim().length===0)return s.push("Tile must belong to a group"),{isValid:!1,errors:s,warnings:r};try{const o=await Mf(e.group_id);if(!o)return s.push(`Group with ID "${e.group_id}" does not exist`),{isValid:!1,errors:s,warnings:r};const a=o.intensities.map(l=>l.value);a.includes(e.intensity)||s.push(`Intensity ${e.intensity} is not valid for group "${o.name}". Valid intensities: ${a.join(", ")}`),(!e.action||e.action.trim().length===0)&&s.push("Tile action is required")}catch(o){s.push(`Error validating tile: ${o}`)}return{isValid:s.length===0,errors:s,warnings:r}};function _p(e,t){return e!==null&&typeof e=="object"&&typeof t=="string"&&t in e}async function Sp(e,t,n){const s=e.selectedActions||{},r=Object.entries(n).filter(([u])=>s[u]).reduce((u,[h,d])=>{const f=s[h].levels||[],g=Object.keys(d.actions);return u[h]=f.map(m=>g[m]).filter(Boolean),u},{}),{getCustomGroups:o}=await ht(async()=>{const{getCustomGroups:u}=await import("../js/chunk-Dai8FbIP.js").then(function(h){return h.ax});return{getCustomGroups:u}},__vite__mapDeps([0,1,2,3,4])),a=await o({}),l=new Map(a.map(u=>[u.id,u.name]));return((t==null?void 0:t.filter(u=>{if(!u.isCustom)return!1;const h=l.get(u.group_id||"");if(!h)return!1;const d=r[h];return d&&d.length>=Number(u.intensity)}))||[]).length}async function kp(e,t,n,s){const{t:r}=At;let o=`### ${At.t("gameSettingsHeading")}\r
`;s&&(o+=`##### ${s}\r
`),o+=`--- \r
`;const a=e.selectedActions||{};if(Object.entries(n).forEach(([u,h])=>{if(!a[u])return;const{role:d,variation:f,levels:g}=a[u],m=d||e.role||"sub";if(g&&g.length>0){o+=h==null?void 0:h.label;let y=null;f?y=r(f):Se(e.gameMode)||(y=_p(h,m)?h[m]:r(m)),y&&(o+=`: ${y}`),o+=`\r
`;const b=(h==null?void 0:h.intensities)||{};g.forEach(v=>{let _=b[v];if(!_&&(h!=null&&h.actions)&&typeof h.actions=="object"){const x=Object.keys(h.actions);v<x.length&&v>0&&(_=x[v])}_||(_=`Level ${v}`),o+=`* ${_}\r
`}),o+=`\r
`}}),e.customGroups&&Array.isArray(e.customGroups)){for(const u of e.customGroups)if(u.groupName&&u.intensity)try{const h=await $f(u.groupName,e.locale||"en",e.gameMode||"online"),d=(h==null?void 0:h.label)||u.groupName;o+=`* ${d}: Level ${u.intensity} (Custom)\r
`}catch(h){console.error(`Error loading custom group ${u.groupName}:`,h),o+=`* ${u.groupName}: Level ${u.intensity} (Custom)\r
`}}if(o.endsWith(`--- \r
`))return"";const{finishRange:l}=e;if(o+=`--- \r
`,l){const u=l[0],h=l[1]-l[0],d=100-l[1],g=[u>0?{percent:u,text:r("noCum")}:null,h>0?{percent:h,text:r("ruined")}:null,d>0?{percent:d,text:r("cum")}:null].filter(m=>m!==null);g.length===1&&g[0].percent===100?o+=`* ${r("finishSlider")} ${g[0].text.replace(":","")} \r
`:g.length>0&&(o+=`* ${r("finishSlider")} \r
\r
`,g.forEach(m=>{const y=m.percent===100?m.text.replace(":",""):`${m.text} ${m.percent}%`;o+=`  - ${y} \r
`}))}const c=await Sp(e,t,n);return c&&(o+=`* ${r("customTilesLabel")}: ${c} \r
`),o}function Cp(e){const t={};return Object.entries(e).forEach(([n,s])=>{!["displayName","background","boardUpdated","chatSound","mySound","otherSound","othersDialog","playerDialog","readRoll","hideBoardActions","advancedSettings"].includes(n)&&!n.startsWith("room")&&(t[n]=s)}),t}async function Ir({title:e,formData:t,user:n,actionsList:s,tiles:r,customTiles:o=[],reason:a=""}){const l=JSON.stringify(Cp(t)),c=await Ql({title:e,gameBoard:JSON.stringify(r),settings:l}),u=await kp(t,o,s,a);if(!(!(c!=null&&c.id)||u===""))return Pt({room:(t==null?void 0:t.room)||"PUBLIC",user:n,text:u,type:"settings",gameBoardId:c.id,boardSize:r.length,gameMode:t.gameMode})}function Ri(e){for(let t=e.length-1;t>0;t-=1){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function Ho(e,t){return(e==null?void 0:e.length)!==(t==null?void 0:t.length)?!1:e.every((n,s)=>n===t[s])}var Tp=Object.defineProperty,Ap=(e,t,n)=>t in e?Tp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yo=(e,t,n)=>Ap(e,typeof t!="symbol"?t+"":t,n);const{t:Rt}=At;class Pp{constructor(t){Yo(this,"bags",new Map),Yo(this,"originalTiles",new Map);const n=new Map;t.forEach(s=>{const r=`${s.group_id}-${s.intensity}`;n.has(r)||n.set(r,[]),n.get(r).push(s)}),n.forEach((s,r)=>{const o=[...s];Ri(o),this.bags.set(r,o),this.originalTiles.set(r,[...s])})}getTile(t,n){const s=`${t}-${n}`;let r=this.bags.get(s);if(!r||r.length===0){const o=this.originalTiles.get(s);if(!o||o.length===0)return null;r=[...o],Ri(r),this.bags.set(s,r)}return r.pop()||null}}function Ep(e,t,n=[]){return e.filter(s=>{const r=s.action,o=n.find(a=>a.id===s.group_id);return(o==null?void 0:o.type)==="consumption"||(o==null?void 0:o.type)==="solo"?!0:t==="vers"?r.includes("{sub}")&&r.includes("{dom}")||r.includes("{player}"):!r.match(/{(dom|sub)}/)||r.includes(`{${t}}`)})}const Xo=new Map;function Ip(e,t,n){const s=`${e}-${t}-${n}`,r=Xo.get(s);if(r!==void 0)return r;const o=e/t,a=Math.floor(n/o)+1;return Xo.set(s,a),a}function Cc(e,t,n,s,r,o){if(!e.length)return{title:"",description:""};const a=e[0],l=n[a.name];if(!l||!l.levels||l.levels.length===0)return{title:"",description:""};if(l.variation){const g=l.variation==="appendSome"?.4:l.variation==="appendMost"?.9:1;if(l.variation!=="standalone"&&Math.random()>g)return{title:"",description:""}}const c=Math.max(...a.intensities.map(g=>g.value)),u=Ip(r,c,s),h=l.levels;let d;h.includes(u)?d=u:d=h.reduce((g,m)=>Math.abs(m-u)<Math.abs(g-u)?m:g);let f=t.getTile(a.id,d);if(!f){const g=h.filter(m=>m!==d);for(const m of g)if(f=t.getTile(a.id,m),f)break;if(!f)return{title:"",description:""}}return{title:a.label,description:f.action,standalone:l.variation==="standalone",role:o.role||"sub"}}function Lp(e,t,n,s,r,o,a){if(e.standalone||!t.length||!e.description)return e.description||"";const l=Cc(t,n,s,r,o,a);return l.description?`${l.description.trim().replace(/([^.,!?])$/,"$1.")} ${e.description}`:e.description}async function Mp(e,t,n,s){const r=n.selectedActions||{},o=new Pp(t),a=e.filter(h=>{const d=r[h.name];return d&&d.levels&&d.levels.length>0&&(!d.variation||d.variation==="standalone")}),l=e.filter(h=>{const d=r[h.name];return d&&d.levels&&d.levels.length>0&&(d.variation==="appendSome"||d.variation==="appendMost")});Ri(a);let c=0;const u=[];for(let h=1;h<=s;h++){const d=a.length>0?[a[c%a.length]]:[];c++;const f=Cc(d,o,r,h,s,n),g=Lp(f,l,o,r,h,s,n);u.push({title:f.title,description:g.trim(),role:f.role})}return u}function ti(e,t){const n={title:Rt("start"),description:Rt("start")},{finishRange:s=[33,66]}=t,r=`${Rt("noCum")} ${s[0]}%\r
${Rt("ruined")} ${s[1]-s[0]}%\r
${Rt("cum")} ${100-s[1]}%`,o={title:Rt("finish"),description:r};return[n,...e.map(a=>({title:a.title,description:a.description})),o]}async function Rp(e,t,n,s=40){try{const r=await it({locale:t,gameMode:n}),o=r.map(x=>x.id),l=(o.length>0?await qe({}):[]).filter(x=>x.group_id&&o.includes(x.group_id)),c=e.selectedActions||{},u=Object.keys(c).filter(x=>{var w;return((w=c[x])==null?void 0:w.levels)&&c[x].levels.length>0}),h=r.filter(x=>u.includes(x.name)),d=r.map(x=>x.name),f=u.filter(x=>!d.includes(x)),g=e.role||"sub",y=Ep(l,g,r).filter(x=>r.find(w=>w.id===x.group_id));if(!h.length||!y.length)return{board:ti([],e),metadata:{totalTiles:s+2,tilesWithContent:2,selectedGroups:u,missingGroups:f,availableTileCount:y.length}};const b=await Mp(h,y,e,s),v=b.filter(x=>x.description.trim().length>0).length,_=ti(b,e);return{board:_,metadata:{totalTiles:_.length,tilesWithContent:v+2,selectedGroups:u,missingGroups:f,availableTileCount:y.length}}}catch(r){return console.error("Error building game board:",r),{board:ti([],e),metadata:{totalTiles:2,tilesWithContent:2,selectedGroups:[],missingGroups:[],availableTileCount:0}}}}function Lr(){const e=Je($s),[t,n]=Me(),{i18n:s}=F(),r=p.useCallback(async o=>{var a,l;const c=o!=null&&o.roomUpdate||o!=null&&o.boardUpdated?o:{...t,...o,selectedActions:{...t.selectedActions,...o.selectedActions}};let{gameMode:u,boardUpdated:h}=c;const{roomTileCount:d=40,finishRange:f,room:g}=c,m=Q(g||"");if(!o||!f)return{gameMode:u};m&&!Se(u||"")&&(u="online",h=!0);const y=u||"online",b=s.resolvedLanguage||"en",v=m?40:d||40,_=await Rp(c,b,y,v);return _.metadata.missingGroups.length>0&&console.warn("Missing groups for board building:",_.metadata.missingGroups),_.metadata.tilesWithContent<v/2&&console.warn("Low tile content ratio:",{tilesWithContent:_.metadata.tilesWithContent,totalTiles:_.metadata.totalTiles,availableTileCount:_.metadata.availableTileCount}),(o!=null&&o.boardUpdated||h||((l=(a=e==null?void 0:e.tiles)==null?void 0:a.length)!=null?l:0)!==_.board.length)&&(await n(c),await Rs({title:(e==null?void 0:e.title)||"",tiles:_.board})),{settingsBoardUpdated:h,gameMode:u,newBoard:_.board,metadata:_.metadata}},[e,s.resolvedLanguage,t,n]);return p.useCallback(o=>r(o),[r])}var $p=Object.defineProperty,Dp=(e,t,n)=>t in e?$p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tc=(e,t,n)=>Dp(e,typeof t!="symbol"?t+"":t,n);const Ac=class hn{constructor(){Tc(this,"currentSession",null)}static getInstance(){return hn.instance||(hn.instance=new hn),hn.instance}async createSession(t,n,s){try{this.validateSessionInput(t,n,s);const r=os(),o=Date.now(),a=n.map(u=>{var h,d;return{...u,location:(h=u.location)!=null?h:0,isFinished:(d=u.isFinished)!=null?d:!1}}),l={id:r,roomId:t,players:a,currentPlayerIndex:0,isActive:!0,createdAt:o,updatedAt:o,settings:{...s}},c={sessionId:l.id,roomId:l.roomId,players:l.players,currentPlayerIndex:l.currentPlayerIndex,isActive:l.isActive,createdAt:l.createdAt,updatedAt:l.updatedAt,settings:l.settings};return await rs.localPlayerSessions.add(c),this.currentSession=l,l}catch(r){throw new Error(`Failed to create local player session: ${r instanceof Error?r.message:"Unknown error"}`)}}async getSession(t){try{if(!t)throw new Error("Session ID is required");const n=await rs.localPlayerSessions.where("sessionId").equals(t).first();return n?this.convertDbSessionToSession(n):null}catch(n){throw new Error(`Failed to get session: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateSession(t,n){var s;try{if(!t)throw new Error("Session ID is required");const r=await this.getSession(t);if(!r)throw new Error("Session not found");const o={...r,...n,id:t,createdAt:r.createdAt,updatedAt:Date.now()},a={roomId:o.roomId,players:o.players,currentPlayerIndex:o.currentPlayerIndex,isActive:o.isActive,updatedAt:o.updatedAt,settings:o.settings};return await rs.localPlayerSessions.where("sessionId").equals(t).modify(a),((s=this.currentSession)==null?void 0:s.id)===t&&(this.currentSession=o),o}catch(r){throw new Error(`Failed to update session: ${r instanceof Error?r.message:"Unknown error"}`)}}async advanceLocalTurn(t){try{if(!t)throw new Error("Session ID is required");const n=await this.getSession(t);if(!n)throw new Error("Session not found");if(!n.isActive)throw new Error("Cannot advance turn on inactive session");if(n.players.length===0)throw new Error("No players in session");const s=(n.currentPlayerIndex+1)%n.players.length,r=n.players.map((a,l)=>({...a,isActive:l===s}));return(await this.updateSession(t,{players:r,currentPlayerIndex:s})).players[s]}catch(n){throw new Error(`Failed to advance turn: ${n instanceof Error?n.message:"Unknown error"}`)}}getCurrentSession(){return this.currentSession}async updatePlayerPosition(t,n,s,r=!1){try{if(!t)throw new Error("Session ID is required");if(!n)throw new Error("Player ID is required");if(s<0)throw new Error("Location must be non-negative");const o=await this.getSession(t);if(!o)throw new Error("Session not found");if(!o.isActive)throw new Error("Cannot update player position on inactive session");const a=o.players.findIndex(c=>c.id===n);if(a===-1)throw new Error(`Player with ID ${n} not found in session`);const l=[...o.players];return l[a]={...l[a],location:s,isFinished:r},await this.updateSession(t,{players:l}),l[a]}catch(o){throw new Error(`Failed to update player position: ${o instanceof Error?o.message:"Unknown error"}`)}}clearCurrentSession(){this.currentSession=null}validateSessionInput(t,n,s){if(!t||typeof t!="string")throw new Error("Valid room ID is required");if(!Array.isArray(n)||n.length<2||n.length>4)throw new Error("Session must have between 2 and 4 players");n.forEach((c,u)=>{if(!c.id||typeof c.id!="string")throw new Error(`Player at index ${u} must have a valid ID`);if(!c.name||typeof c.name!="string")throw new Error(`Player at index ${u} must have a valid name`);if(!["sub","dom","vers"].includes(c.role))throw new Error(`Player at index ${u} must have a valid role`);if(typeof c.location!="undefined"&&(typeof c.location!="number"||c.location<0))throw new Error(`Player at index ${u} must have a valid location (non-negative number)`)});const r=n.map(c=>c.id),o=new Set(r);if(r.length!==o.size)throw new Error("All players must have unique IDs");const a=n.map(c=>c.name.toLowerCase()),l=new Set(a);if(a.length!==l.size)throw new Error("All players must have unique names");if(!s||typeof s!="object")throw new Error("Valid settings object is required")}convertDbSessionToSession(t){return{id:t.sessionId,roomId:t.roomId,players:t.players,currentPlayerIndex:t.currentPlayerIndex,isActive:t.isActive,createdAt:t.createdAt,updatedAt:t.updatedAt,settings:t.settings}}};Tc(Ac,"instance");let Np=Ac;const wt=Np.getInstance(),Pc=Rh()(qm((e,t)=>({session:null,error:null,isLoading:!1,hasLocalPlayers:()=>{const n=t().session;return(n==null?void 0:n.isActive)===!0&&n.players.length>0},isLocalPlayerRoom:()=>{const n=t().session;return(n==null?void 0:n.isActive)===!0},getCurrentPlayer:()=>{const n=t().session;if(!(n!=null&&n.isActive)||!n.players||n.players.length===0)return null;const s=n.currentPlayerIndex||0,r=n.players[s];if(!r)return null;const o={...r};return typeof o.location!="number"&&(o.location=0),typeof o.isFinished!="boolean"&&(o.isFinished=!1),o},setSession:n=>{const s=n?t()._migrateSession(n):null;e({session:s,error:null})},_migrateSession:n=>{if(!n||!n.players)return n;const s=n.players.map(r=>({...r,location:typeof r.location=="number"?r.location:0,isFinished:typeof r.isFinished=="boolean"?r.isFinished:!1,sound:r.sound||""}));return{...n,players:s}},clearSession:()=>{wt.clearCurrentSession(),e({session:null,error:null})},setError:n=>{e({error:n,isLoading:!1})},setLoading:n=>{e({isLoading:n})},initSession:async(n,s,r)=>{try{e({isLoading:!0,error:null});const o=await wt.createSession(n,s,r);e({session:o,isLoading:!1,error:null})}catch(o){const a=o instanceof Error?o.message:"Failed to create session";e({error:a,isLoading:!1,session:null})}},loadSession:async n=>{try{e({isLoading:!0,error:null});const s=await wt.getSession(n);e({session:s,isLoading:!1,error:null})}catch(s){const r=s instanceof Error?s.message:"Failed to load session";e({error:r,isLoading:!1,session:null})}},nextLocalPlayer:async()=>{try{e({isLoading:!0,error:null});const n=t().session;if(!n)throw new Error("No active session");await wt.advanceLocalTurn(n.id);const s=await wt.getSession(n.id);e({session:s,isLoading:!1,error:null})}catch(n){const s=n instanceof Error?n.message:"Failed to advance turn";e({error:s,isLoading:!1})}},updateSessionSettings:async n=>{try{e({isLoading:!0,error:null});const s=t().session;if(!s)throw new Error("No active session");const r=await wt.updateSession(s.id,{settings:n});e({session:r,isLoading:!1,error:null})}catch(s){const r=s instanceof Error?s.message:"Failed to update session settings";e({error:r,isLoading:!1})}}}),{name:"local-player-store",partialize:e=>({session:e.session}),onRehydrateStorage:()=>e=>{e&&(e.isLoading=!1,e.error=null)}}));function rn(){var e;const{session:t,error:n,isLoading:s,hasLocalPlayers:r,isLocalPlayerRoom:o,getCurrentPlayer:a,setSession:l,clearSession:c,setError:u,setLoading:h,initSession:d,loadSession:f,nextLocalPlayer:g,updateSessionSettings:m}=Pc(),y=p.useMemo(()=>(t==null?void 0:t.players)||[],[t==null?void 0:t.players]),b=a(),v=(e=t==null?void 0:t.currentPlayerIndex)!=null?e:-1,_=t==null?void 0:t.settings,x=p.useCallback(async(D,R,V)=>{await d(D,R,V)},[d]),w=p.useCallback(async D=>{await f(D)},[f]),j=p.useCallback(async()=>{await g()},[g]),C=p.useCallback(()=>{c()},[c]),S=p.useCallback(async D=>{await m(D)},[m]),T=p.useCallback(D=>D>=0&&D<y.length?y[D]:null,[y]),L=p.useCallback(D=>y.find(R=>R.id===D)||null,[y]),k=p.useCallback(D=>{const R=L(D);return(R==null?void 0:R.isActive)===!0},[L]),I=p.useCallback(()=>{if(y.length===0)return null;const D=(v+1)%y.length;return T(D)},[y,v,T]),N=p.useCallback(()=>{if(y.length===0)return null;const D=v===0?y.length-1:v-1;return T(D)},[y,v,T]);return{session:t,localPlayers:y,currentPlayer:b,currentPlayerIndex:v,sessionSettings:_,error:n,isLoading:s,hasLocalPlayers:r(),isLocalPlayerRoom:o(),playerCount:y.length,isValidSession:(t==null?void 0:t.isActive)===!0&&y.length>=2,createLocalSession:x,loadLocalSession:w,clearLocalSession:C,advanceToNextPlayer:j,updateSettings:S,getPlayerByIndex:T,getPlayerById:L,isPlayerActive:k,getNextPlayer:I,getPreviousPlayer:N,setSession:l,setError:u,setLoading:h}}function Bp(){const{id:e}=Le(),t=Wl();return n=>{const s=e!==void 0&&(e==null?void 0:e.toUpperCase())!==(n==null?void 0:n.toUpperCase()),r=(n==null?void 0:n.replace(/^\/+/,""))||"PUBLIC";s&&t(`/${r}`)}}function Op(e){var t;const n=(t=e.roomBackgroundURL)==null?void 0:t.trim();n!==e.roomBackgroundURL&&(e.roomBackgroundURL=n||""),e.roomBackgroundURL&&!lp(e.roomBackgroundURL)&&(e.roomBackgroundURL="")}function Fp(e){const t={...e},n={};return e.selectedActions&&Object.entries(e.selectedActions).forEach(([s,r])=>{r&&r.levels&&r.levels.length>0&&(n[s]=r)}),Object.keys(t).forEach(s=>{const r=t[s];r&&typeof r=="object"&&r.type&&Mi.includes(r.type)&&delete t[s]}),t.selectedActions=n,t}function Mr(){const{user:e,updateUser:t}=De(),{id:n}=Le(),{t:s}=F(),r=Lr(),[o,a]=Me(),l=Je(()=>Sr(o==null?void 0:o.gameMode)),c=Je($s),u=Bp(),{messages:h}=Mt(),{createLocalSession:d}=rn(),f=p.useCallback(m=>{var y;const b=(y=n||"")==null?void 0:y.toUpperCase(),v=(m.room||"").toUpperCase(),_=b!==v,x=!!(m.room&&!Q(m.room)),w=x&&m.roomTileCount!==(o==null?void 0:o.roomTileCount);return{roomChanged:_,isPrivateRoom:x,privateBoardSizeChanged:w}},[n,o==null?void 0:o.roomTileCount]),g=p.useCallback(async(m,y)=>{const{displayName:b}=m,v=await xp(e,b,t);Op(m);const{settingsBoardUpdated:_,gameMode:x,newBoard:w=[]}=await r(m),{roomChanged:j,isPrivateRoom:C,privateBoardSizeChanged:S}=f(m);if(!v)return;C&&(m.roomUpdated||!h.find(I=>I.type==="room"))&&await Sc(m,v),(c==null?void 0:c.tiles)!==w&&await Rs({title:s("settingsGenerated"),tiles:w,isActive:1,gameMode:x}),(_||j||S)&&!h.some(I=>{var N;return I.type==="settings"&&I.uid===v.uid&&Date.now()-(((N=I.timestamp)==null?void 0:N.toMillis())||0)<5e3})&&await Ir({formData:m,user:v,customTiles:l,actionsList:y,title:"Settings Generated Board",tiles:w});const L=m;if(L.hasLocalPlayers&&L.localPlayersData&&L.localPlayerSessionSettings)try{await d(m.room,L.localPlayersData,L.localPlayerSessionSettings)}catch(I){console.error("Error creating local session:",I)}const k=Fp(m);a({...k,boardUpdated:!1,roomUpdated:!1,gameMode:x}),u(m.room)},[e,t,r,f,h,c,s,l,a,u,d]);return p.useCallback((m,y)=>g(m,y),[g])}const Ec="None";function zs(e,t=!1,n){const{i18n:s}=F(),[r,o]=p.useState({}),[a,l]=p.useState(!0);return p.useEffect(()=>{(async()=>{if(!e){o({}),l(!1);return}l(!0);try{const u=s.resolvedLanguage||"en";let h;if(t){h=await Df(e);const f=await ec(u,e,null);h=h.map(g=>{var m,y;if((m=f==null?void 0:f[g.id])!=null&&m.intensities){const b=Object.keys(f[g.id].intensities).map(Number),v=((y=g.intensities)==null?void 0:y.filter(_=>b.includes(_.value)))||[];return{...g,intensities:v}}return g})}else h=await tc(u,e);const d={};for(const f of h){const g={[Ec]:[]},m={};f.intensities&&Array.isArray(f.intensities)&&f.intensities.sort((y,b)=>y.value-b.value).forEach(y=>{g[y.label]=[],m[y.value]=y.label}),d[f.name]={label:f.label||f.name,type:f.type||"action",actions:g,intensities:m}}o(d)}catch(u){console.error("Error loading unified actions:",{error:u,locale:s.resolvedLanguage,gameMode:e,showOnlyGroupsWithTiles:t}),o({})}finally{l(!1)}})()},[e,s.resolvedLanguage,t,n]),{actionsList:r,isLoading:a}}function Vp(e,t=!1,n=!1){if(t)return e;const s={...e};return n||delete s.useRoomBackground,s}function zp(e){return e?"roomBackground":"background"}function Up(e){return e?"roomBackgroundURL":"backgroundURL"}function Gp({formData:e,setFormData:t,backgrounds:n,isRoom:s=!1,isPrivateRoom:r=!1}){const{t:o}=F(),a=zp(s),l=Up(s),c=p.useMemo(()=>Vp(n,s,r),[n,s,r]),u=e==null?void 0:e[a],[h,d]=p.useState(u||""),f=()=>[i.jsx(W,{value:"",children:o(r?"useRoomBackground":"customTiles.color")},"empty"),...Object.entries(c).map(([b,v])=>i.jsx(W,{value:b,children:v},b))],g=y=>{const b=y.target.value,v={...e,[a]:b};if(b!=="custom"){const _={...v,[l]:""};s&&(_.roomUpdated=!0),t(_),d(b);return}s&&(v.roomUpdated=!0),t(v),d(b)};p.useEffect(()=>{const y=u&&c[u]?u:"";h!==y&&d(y)},[h,u,c]);const m=y=>{const b={...e,[a]:"custom",[l]:y.target.value};s&&(b.roomUpdated=!0),t(b)};return i.jsxs(i.Fragment,{children:[i.jsxs(re,{fullWidth:!0,margin:"normal",children:[i.jsx(ue,{id:"background-label",children:o("background")}),i.jsx(oe,{labelId:"background-label",id:"background",label:o("background"),value:h,onChange:g,displayEmpty:!0,children:f()})]}),h==="custom"&&i.jsx(J,{sx:{mt:2},label:o("url"),value:(e==null?void 0:e[l])||"",fullWidth:!0,onChange:m,helperText:i.jsxs(i.Fragment,{children:[o("supportedSites"),i.jsx("br",{}),o("requiresEmbeddedUrl")]})})]})}var Wp=Object.defineProperty,Kp=(e,t,n)=>t in e?Wp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qp=(e,t,n)=>Kp(e,t+"",n);class Hp{constructor(){qp(this,"voiceLoadPromise")}async waitForVoices(){return this.voiceLoadPromise?this.voiceLoadPromise:(this.voiceLoadPromise=new Promise(t=>{let n=window.speechSynthesis.getVoices();if(n.length>0){t(n);return}const s=()=>{n=window.speechSynthesis.getVoices(),n.length>0&&(window.speechSynthesis.removeEventListener("voiceschanged",s),t(n))};window.speechSynthesis.addEventListener("voiceschanged",s),setTimeout(()=>{window.speechSynthesis.removeEventListener("voiceschanged",s),t(window.speechSynthesis.getVoices())},3e3)}),this.voiceLoadPromise)}async getAvailableVoicesAsync(){return(await this.waitForVoices()).map(n=>({name:n.name,displayName:`${n.name} (${n.lang})`}))}async getPreferredVoiceAsync(){const t=await this.getAvailableVoicesAsync();return t.length>0?t[0].name:null}async speak(t,n,s=0){return new Promise((r,o)=>{if(!("speechSynthesis"in window)){o(new Error("Speech synthesis not supported"));return}const a=new SpeechSynthesisUtterance(t);if(a.pitch=s,n){const c=window.speechSynthesis.getVoices().find(u=>u.name===n);c&&(a.voice=c)}a.onend=()=>r(),a.onerror=l=>o(new Error(`Speech failed: ${l.error}`)),window.speechSynthesis.speak(a)})}stop(){var t;(t=window.speechSynthesis)!=null&&t.speaking&&window.speechSynthesis.cancel()}isAvailable(){return"speechSynthesis"in window}}const Ln=new Hp,Yp=()=>{const[e,t]=p.useState(!1),[n,s]=p.useState(!1),[r,o]=p.useState(null),a=p.useCallback(()=>{Ln.stop(),t(!1),s(!1)},[]),l=p.useCallback(async(c,u={})=>{try{s(!0),o(null),a(),t(!0),await Ln.speak(c,u.voice,u.pitch),s(!1),t(!1)}catch(h){const d=h instanceof Error?h.message:"TTS failed";o(d),t(!1),s(!1),console.error("TTS Error:",h)}},[a]);return p.useEffect(()=>()=>{a()},[a]),{speak:l,stop:a,isPlaying:e,error:r,isLoading:n}};function Xp({formData:e,setFormData:t,onVoiceChange:n}){const{t:s}=F(),[r,o]=p.useState([]),[a,l]=p.useState(!0),{speak:c}=Yp(),u=e.voicePreference||"",h=p.useCallback(m=>{const y={...e,voicePreference:m};t(y),n==null||n(m)},[e,t,n]);p.useEffect(()=>{let m=!0;return(async()=>{try{if(m){l(!0);const b=await Ln.getAvailableVoicesAsync();if(m){const v=b.filter(_=>_.displayName.includes("Google")||_.name.includes("Google"));if(o(v),!u&&v.length>0){const _=await Ln.getPreferredVoiceAsync();_&&v.some(x=>x.name===_)&&m?h(_):m&&h(v[0].name)}l(!1)}}}catch(b){console.error("Failed to load voices:",b),m&&l(!1)}})(),()=>{m=!1}},[u,h]);const d=m=>{h(m.target.value)},f=async()=>{const m=u||(r.length>0?r[0].name:"");if(!m)return;const y=s("tts.sampleText","Take a drink and enjoy the game.");try{await c(y,{voice:m,pitch:-2})}catch(b){console.error("Failed to play sample:",b)}},g=m=>m.displayName.replace(/^Google\s+/i,"");return a?i.jsx(A,{sx:{py:1},children:i.jsx(P,{variant:"body2",color:"text.secondary",children:s("loadingVoices","Loading voices...")})}):r.length===0?i.jsx(A,{sx:{py:1},children:i.jsx(P,{variant:"body2",color:"text.secondary",children:s("noVoicesAvailable","No voices available for this language")})}):i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1,py:1},children:[i.jsxs(re,{fullWidth:!0,size:"small",children:[i.jsx(ue,{id:"voice-select-label",children:s("voiceSelection","Voice")}),i.jsx(oe,{labelId:"voice-select-label",value:u,label:s("voiceSelection","Voice"),onChange:d,children:r.map(m=>i.jsx(W,{value:m.name,children:g(m)},m.name))})]}),i.jsx(ve,{title:s("playSample","Play sample"),children:i.jsx(Z,{onClick:f,color:"primary",disabled:!u,size:"small",children:i.jsx(Un,{})})})]})}function Jp({boardUpdated:e}){const{i18n:t}=F(),[n,s]=p.useState(t.resolvedLanguage||"en"),[r,o]=p.useState(!1);async function a(c){o(!0),s(c);try{await t.changeLanguage(c),e()}catch(u){console.error("Error changing language:",u),await t.changeLanguage(c),e()}finally{o(!1)}}const l=Object.entries(In).map(([c,u])=>i.jsx(W,{value:c,children:u.label},c));return i.jsx(A,{sx:{minWidth:120,mt:1,mb:2},children:i.jsxs(re,{fullWidth:!0,children:[i.jsxs(ue,{id:"language-label",sx:{display:"flex",alignItems:"center"},children:[i.jsx(An,{sx:{mr:1}}),i.jsx(E,{i18nKey:"language"})]}),i.jsx(oe,{labelId:"language-label",id:"language-select",value:n,disabled:r,label:i.jsxs(i.Fragment,{children:[i.jsx(An,{}),i.jsx(E,{i18nKey:"language"})]}),onChange:c=>a(c.target.value),endAdornment:r&&i.jsx(Ee,{size:20}),MenuProps:{disableScrollLock:!0,BackdropProps:{invisible:!0},PaperProps:{style:{backdropFilter:"none",WebkitBackdropFilter:"none"}}},children:l})]})})}function Ic({trueCondition:e,onChange:t,yesLabel:n,noLabel:s=null,sx:r={}}){const o=s!=null?s:n;return i.jsx(A,{sx:{display:"flex",justifyContent:"center",my:1,...r},children:i.jsx(Cn,{control:i.jsx(st,{checked:e||!1,onChange:t}),label:Y(e?n:o)})})}function ut({field:e,formData:t,handleSwitch:n}){return i.jsx(Ic,{trueCondition:t[e],onChange:s=>n(s,e),yesLabel:e,sx:{justifyContent:"left"}})}function Zp({formData:e,setFormData:t,boardUpdated:n}){const[s,r]=Me(),o=!!(e.room&&!Q(e.room)),{t:a}=F(),l={useRoomBackground:a("useRoomBackground"),color:a("color"),gray:a("gray"),"metronome.gif":a("hypnoDick"),"pink-spiral.gif":a("pinkSpiral"),custom:a("customURL")};function c(h,d){t({...e,[d]:h.target.checked}),r({...s,[d]:h.target.checked})}function u(h){r({...s,voicePreference:h})}return i.jsxs(i.Fragment,{children:[i.jsx(Jp,{boardUpdated:n}),i.jsx(P,{variant:"h5",children:i.jsx(E,{i18nKey:"dialog"})}),i.jsx(ut,{field:"playerDialog",formData:e,handleSwitch:c}),i.jsx(ut,{field:"othersDialog",formData:e,handleSwitch:c}),i.jsx(ce,{}),i.jsx(P,{variant:"h5",sx:{mt:2},children:i.jsx(E,{i18nKey:"sounds"})}),i.jsx(ut,{field:"mySound",formData:e,handleSwitch:c}),i.jsx(ut,{field:"otherSound",formData:e,handleSwitch:c}),i.jsx(ut,{field:"chatSound",formData:e,handleSwitch:c}),i.jsx(ut,{field:"readRoll",formData:e,handleSwitch:c}),e.readRoll&&i.jsx(Xp,{formData:e,setFormData:t,onVoiceChange:u}),i.jsx(ce,{}),i.jsx(P,{variant:"h5",sx:{mt:2,textTransform:"capitalize"},children:i.jsx(E,{i18nKey:"misc"})}),i.jsx(ut,{field:"hideBoardActions",formData:e,handleSwitch:c}),i.jsx(ut,{field:"advancedSettings",formData:e,handleSwitch:c}),i.jsx(Gp,{formData:e,setFormData:t,backgrounds:l,isPrivateRoom:o}),i.jsx(ce,{})]})}function Qp({formData:e,setFormData:t}){const n=(r,o)=>{t({...e,finishRange:o,boardUpdated:!0})},s=(e==null?void 0:e.finishRange)||[30,70];return i.jsxs(A,{children:[i.jsx(ce,{}),i.jsx(P,{id:"finish-slider",sx:{my:1},children:i.jsx(E,{i18nKey:"finishSlider"})}),i.jsx($h,{"aria-labelledby":"finish-slider",value:s,onChange:n,valueLabelDisplay:"off"}),i.jsxs(A,{display:"flex",flexDirection:"column",justifyContent:"space-between",textAlign:"center",children:[i.jsxs(P,{whiteSpace:"nowrap",children:[i.jsx(E,{i18nKey:"noCum"})," ",s[0],"%"]}),i.jsxs(P,{whiteSpace:"nowrap",children:[i.jsx(E,{i18nKey:"ruined"})," ",s[1]-s[0],"%"]}),i.jsxs(P,{whiteSpace:"nowrap",children:[i.jsx(E,{i18nKey:"cum"})," ",100-s[1],"%"]})]}),i.jsx(ce,{sx:{my:1}})]})}function Jo({children:e}){return i.jsx(q,{size:{xs:12,md:5},children:e})}function ni({children:e,title:t,subtitle:n,defaultExpanded:s=!1,hasSelectedOptions:r=!1,...o}){const a=et();return i.jsxs(fs,{defaultExpanded:s,...o,sx:{backgroundColor:"inherit",backgroundImage:"none",boxShadow:"none"},children:[i.jsx(ps,{expandIcon:i.jsx(Pn,{}),sx:{px:0},children:i.jsxs(A,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[i.jsxs(P,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,minWidth:"fit-content"},children:[t,":",r&&i.jsx(A,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:a.palette.primary.main,flexShrink:0}})]}),i.jsx(P,{sx:{pt:.5,ml:2,flex:1},children:n})]})}),i.jsx(ms,{sx:{px:0},children:i.jsx(q,{container:!0,columnSpacing:2,justifyContent:"space-evenly",className:"columned-grid",children:e})})]})}function Rr({actionName:e,actionLabel:t,selectedLevels:n,availableLevels:s,intensityNames:r={},onChange:o,disabled:a=!1,showValueGlow:l=!1}){const{t:c}=F(),u=et(),h=`${e}-intensity-label`,d=l&&n.length>0,f=d?{boxShadow:`0 0 8px ${u.palette.primary.main}`}:{},g=d?{backgroundColor:"var(--color-surface)",borderRadius:"8px",padding:"0 8px"}:{},m=v=>{const x=v.target.value.filter(w=>!isNaN(w)).sort((w,j)=>w-j);o(x)},y=v=>{v.stopPropagation(),o([])},b=v=>v.length===0?c("none"):v.map(_=>r[_]||`${c("level")} ${_}`).join(", ");return s.length===0?i.jsx(i.Fragment,{}):i.jsxs(re,{margin:"normal",fullWidth:!0,disabled:a,children:[i.jsx(ue,{id:h,sx:g,children:t}),i.jsx(oe,{labelId:h,id:e,label:t,multiple:!0,value:n,onChange:m,renderValue:b,sx:f,endAdornment:n.length>0&&i.jsx(Z,{size:"small",onClick:y,sx:{position:"absolute",right:24,top:"50%",transform:"translateY(-50%)",zIndex:1,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:i.jsx(dc,{fontSize:"small"})}),children:s.map(v=>i.jsxs(W,{value:v,children:[i.jsx(Kl,{checked:n.includes(v)}),i.jsx(Ae,{primary:r[v]||`${c("level")} ${v}`})]},v))})]})}const Lc=p.forwardRef(({value:e,onChange:t,label:n,options:s,defaultValue:r=null,sx:o,helpIcon:a=!1,fullWidth:l=!0,...c},u)=>{const h=p.useMemo(()=>s.map(d=>typeof d=="string"?i.jsx(W,{value:d,children:Y(d)},d):i.jsx(W,{value:d.value,children:d.label},d.value)),[s]);return i.jsxs(re,{fullWidth:l,margin:"normal",sx:o,...c,ref:u,children:[i.jsxs(ue,{id:`${n}Label`,children:[i.jsx(E,{i18nKey:n}),!!a&&i.jsx(Ze,{sx:{ml:1,fontSize:16}})]}),i.jsx(oe,{labelId:`${n}Label`,id:n,label:i.jsxs(i.Fragment,{children:[i.jsx(E,{i18nKey:n}),!!a&&i.jsx(Ze,{sx:{ml:1,fontSize:16}})]}),value:e||r||"",onChange:t,children:h})]})});function eg({option:e,settings:t,setSettings:n,actionsFolder:s,type:r,showVariation:o=!1,showRole:a=!1}){var l,c,u,h,d,f;const{t:g}=F(),m=`${e}label`,y=(l=s[e])==null?void 0:l.label;function b(j,C,S){var T,L,k;const I=(T=t.selectedActions)==null?void 0:T[C];n({...t,selectedActions:{...t.selectedActions,[C]:{...I,type:r,levels:(L=I==null?void 0:I.levels)!=null?L:[],[S]:(k=j==null?void 0:j.target)==null?void 0:k.value}},boardUpdated:!0})}function v(j,C){var S;const T=(S=t.selectedActions)==null?void 0:S[C];n({...t,selectedActions:{...t.selectedActions,[C]:{...T,type:r,levels:j}},boardUpdated:!0})}let _=12;(o||a)&&(_=6);let x=["dom","vers","sub"];(c=s[e])!=null&&c.dom&&(x=[{label:s[e].dom,value:"dom"},{label:g("vers"),value:"vers"},{label:s[e].sub,value:"sub"}]);const w=()=>{var j,C;const S=s[e],T=S!=null&&S.intensities?Object.keys(S.intensities).map(Number).filter(k=>k>0).sort((k,I)=>k-I):[1,2,3,4],L=((C=(j=t.selectedActions)==null?void 0:j[e])==null?void 0:C.levels)||[];return i.jsx(Rr,{actionName:e,actionLabel:(S==null?void 0:S.label)||e,selectedLevels:L,availableLevels:T,intensityNames:(S==null?void 0:S.intensities)||{},onChange:k=>v(k,e),showValueGlow:!0})};return i.jsxs(q,{container:!0,justifyContent:"center",children:[i.jsx(q,{size:_,children:w()}),!!a&&i.jsx(q,{size:6,children:i.jsx(Lc,{sx:{ml:1},value:(h=(u=t.selectedActions)==null?void 0:u[e])==null?void 0:h.role,onChange:j=>b(j,e,"role"),label:`${g("role")}: ${y}`,options:x,defaultValue:t.role||"sub"})}),!!o&&i.jsx(q,{size:6,children:i.jsx(ve,{placement:"top",title:i.jsxs(E,{i18nKey:"variationTooltip",children:[i.jsx(P,{variant:"subtitle2",children:"Standalone = Its own tile. "}),i.jsx(P,{variant:"subtitle2",children:"Append Some = 50% chance."}),i.jsx(P,{variant:"subtitle2",children:"Append Most = 90% chance."})]}),arrow:!0,children:i.jsxs(re,{fullWidth:!0,margin:"normal",sx:{ml:1},children:[i.jsxs(ue,{id:`${m}Variation`,children:[`${y} ${g("variation")}`,i.jsx(Ze,{sx:{ml:1,fontSize:16}})]}),i.jsxs(oe,{labelId:`${m}Variation`,id:`${e}Variation`,label:i.jsxs(i.Fragment,{children:[y," ",g("variation"),i.jsx(Ze,{sx:{ml:1,fontSize:16}})]}),value:((f=(d=t.selectedActions)==null?void 0:d[e])==null?void 0:f.variation)||"standalone",onChange:j=>b(j,e,"variation"),children:[i.jsx(W,{value:"standalone",children:i.jsx(E,{i18nKey:"standalone"})}),i.jsx(W,{value:"appendSome",children:i.jsx(E,{i18nKey:"appendSome"})}),i.jsx(W,{value:"appendMost",children:i.jsx(E,{i18nKey:"appendMost"})})]})]})})})]},e)}function tg({formData:e,setFormData:t}){return i.jsxs(be,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",sx:{mt:1},children:[i.jsx(P,{children:i.jsx(E,{i18nKey:"solo"})}),i.jsx(ve,{title:i.jsx(P,{variant:"subtitle2",children:i.jsx(E,{i18nKey:"soloTooltip"})}),arrow:!0,children:i.jsx(Ze,{sx:{fontSize:15}})}),i.jsx(st,{id:"gameMode",checked:!Se(e.gameMode),onChange:n=>t({...e,gameMode:n.target.checked?"local":"online",boardUpdated:!0}),inputProps:{"aria-label":"Game Type"}}),i.jsx(P,{children:i.jsx(E,{i18nKey:"gameMode.local"})}),i.jsx(ve,{title:i.jsx(P,{variant:"subtitle2",children:i.jsx(E,{i18nKey:"localTooltip"})}),arrow:!0,children:i.jsx(Ze,{sx:{fontSize:15}})})]})}function ng({formData:e}){const[t,n]=p.useState(!1);return p.useEffect(()=>{const s=Object.values(e).filter(o=>typeof o=="object"&&(o==null?void 0:o.type)==="consumption"&&(o==null?void 0:o.levels)&&o.levels.length>0).length,r=Object.values(e).filter(o=>typeof o=="object"&&(o==null?void 0:o.levels)&&o.levels.length>0).length;n(s>1&&s>=r-s)},[e]),t?i.jsx(fe,{severity:"warning",children:i.jsx(E,{i18nKey:"consumptionWarning"})}):null}function sg({formData:e,setFormData:t,actionsList:n}){const{t:s}=F(),{hasLocalPlayers:r}=Pc(),o=!Se(e.gameMode),a=!r();function l(h){return Object.keys(n).filter(d=>{var f;return((f=n[d])==null?void 0:f.type)===h}).some(d=>{var f;const g=(f=e.selectedActions)==null?void 0:f[d];return(g==null?void 0:g.levels)&&g.levels.length>0})}function c(h,d={}){return Object.keys(n).filter(f=>{var g;return((g=n[f])==null?void 0:g.type)===h}).map(f=>i.jsx(Jo,{children:i.jsx(eg,{option:f,settings:e,setSettings:t,actionsFolder:n,type:h,...d})},f))}const u=h=>{const d=JSON.parse(JSON.stringify(e));return Object.keys(d).forEach(f=>{d.role=h,f.includes("role")&&(d[f]=h)}),d};return i.jsxs(A,{maxWidth:"97%",children:[i.jsx(tg,{formData:e,setFormData:t}),Q(e==null?void 0:e.room)&&!Se(e.gameMode)&&i.jsx(q,{container:!0,alignContent:"center",justifyContent:"space-evenly",children:i.jsx(q,{sx:{py:3},children:i.jsx(P,{variant:"h5",children:i.jsx(E,{i18nKey:"privateRequired"})})})}),o?i.jsxs(i.Fragment,{children:[i.jsx(q,{container:!0,columnSpacing:2,justifyContent:"space-evenly",children:a&&i.jsx(Jo,{children:i.jsx(Lc,{value:e.role,onChange:h=>t({...u(h.target.value),boardUpdated:!0}),label:"mainRole",options:["dom","vers","sub"],defaultValue:"sub"})})}),i.jsx(ni,{title:s("consumption"),subtitle:s("consumptionSubtitle"),hasSelectedOptions:l("consumption"),children:c("consumption",{showVariation:!0})}),i.jsx(ni,{title:s("foreplay"),subtitle:s("foreplaySubtitle"),hasSelectedOptions:l("foreplay"),children:c("foreplay",{showRole:a})}),i.jsx(ni,{title:s("sex"),subtitle:s("sexSubtitle"),hasSelectedOptions:l("sex"),children:c("sex",{showRole:a})})]}):i.jsxs(i.Fragment,{children:[i.jsx(q,{container:!0,columnSpacing:2,justifyContent:"space-evenly",children:c("consumption",{showVariation:!0})}),i.jsx(ce,{}),i.jsx(q,{container:!0,columnSpacing:2,justifyContent:"center",children:c("solo")})]}),i.jsx(Qp,{setFormData:t,formData:e}),i.jsx(ng,{formData:e})]})}const $r=[{name:"Simple (1-3)",intensities:[{label:"intensityLabels.beginner",value:1,isDefault:!0},{label:"intensityLabels.intermediate",value:2,isDefault:!0},{label:"intensityLabels.advanced",value:3,isDefault:!0}]},{name:"Basic (1-4)",intensities:[{label:"intensityLabels.light",value:1,isDefault:!0},{label:"intensityLabels.medium",value:2,isDefault:!0},{label:"intensityLabels.intense",value:3,isDefault:!0},{label:"intensityLabels.extreme",value:4,isDefault:!0}]},{name:"Extended (1-5)",intensities:[{label:"intensityLabels.veryLight",value:1,isDefault:!0},{label:"intensityLabels.light",value:2,isDefault:!0},{label:"intensityLabels.medium",value:3,isDefault:!0},{label:"intensityLabels.intense",value:4,isDefault:!0},{label:"intensityLabels.veryIntense",value:5,isDefault:!0}]}];function ig({formState:e,validation:t,currentEditingGroup:n,locale:s,onFormStateChange:r,generateGroupName:o,updateIntensityLabel:a,addIntensity:l,removeIntensity:c,handleTemplateChange:u}){const{t:h}=F(),{label:d,type:f,localGameMode:g,selectedTemplateIndex:m,intensityLabels:y}=e,b=w=>{r({label:w})},v=w=>{r({type:w})},_=w=>{r({localGameMode:w})},x=w=>{r({selectedTemplateIndex:w}),u(w)};return i.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:3},children:[!t.isValid&&i.jsx(fe,{severity:"error",children:t.errors.map((w,j)=>i.jsx("div",{children:w},j))}),i.jsxs(A,{sx:{p:2,bgcolor:"background.paper",borderRadius:1,border:"1px solid",borderColor:"divider"},children:[i.jsx(P,{variant:"h6",sx:{mb:2},children:h("customGroups.groupInformation")}),i.jsxs(J,{select:!0,label:h("customGroups.gameMode"),value:g,onChange:w=>_(w.target.value),helperText:h("customGroups.gameModeHelp"),fullWidth:!0,sx:{mb:2},children:[i.jsx(W,{value:"online",children:h("gameMode.online")}),i.jsx(W,{value:"local",children:h("gameMode.local")})]}),i.jsxs(J,{select:!0,label:h("customGroups.groupType"),value:f,onChange:w=>v(w.target.value),helperText:h("customGroups.groupTypeHelp"),fullWidth:!0,required:!0,error:d.trim().length>0&&!f,sx:{mb:2},children:[i.jsx(W,{value:"",children:i.jsx("em",{children:h("groupTypes.selectType")})}),i.jsx(W,{value:"solo",children:h("groupTypes.solo")}),g==="local"&&[i.jsx(W,{value:"foreplay",children:h("groupTypes.foreplay")},"foreplay"),i.jsx(W,{value:"sex",children:h("groupTypes.sex")},"sex")],i.jsx(W,{value:"consumption",children:h("groupTypes.consumption")})]}),i.jsx(J,{label:h("customGroups.groupLabel"),value:d,onChange:w=>b(w.target.value),placeholder:"e.g., My Custom Group",helperText:h("customGroups.groupLabelHelp",{maxLength:Ei}),fullWidth:!0,required:!0,error:d.trim().length>0&&!kc(d).isValid,sx:{mb:2}}),i.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[i.jsxs(P,{variant:"body2",color:"text.secondary",children:[i.jsx("strong",{children:h("customGroups.locale")})," ",s]}),n?i.jsxs(P,{variant:"body2",color:"text.secondary",children:[i.jsx("strong",{children:h("customGroups.internalId")})," ",n.name," (locked)"]}):i.jsxs(P,{variant:"body2",color:"text.secondary",children:[i.jsx("strong",{children:h("customGroups.internalId")})," ",d?o(d):h("customGroups.autoGenerated")]})]})]}),i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2,p:2,bgcolor:"action.hover",borderRadius:1},children:[i.jsx(P,{variant:"body2",sx:{fontWeight:"medium",minWidth:"auto"},children:h("customGroups.quickStart")}),i.jsx(J,{select:!0,value:m,onChange:w=>x(Number(w.target.value)),size:"small",sx:{minWidth:200},label:h("customGroups.chooseTemplate"),children:$r.map((w,j)=>i.jsx(W,{value:j,children:w.name==="Basic (1-4)"?h("templateBasic"):w.name==="Simple (1-3)"?h("templateSimple"):w.name==="Extended (1-5)"?h("templateExtended"):w.name},j))}),i.jsx(P,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:h("customGroups.selectTemplateDescription")})]}),i.jsxs(A,{children:[i.jsxs(P,{variant:"h6",sx:{mb:2},children:[h("customGroups.intensityLabels")," (",y.length,"/",_s,")"]}),i.jsx(P,{variant:"body2",color:"text.secondary",sx:{mb:2},children:h("customGroups.customizeIntensityDescription")}),i.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:[y.map((w,j)=>i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2},children:[i.jsx(P,{variant:"body2",sx:{minWidth:"30px",fontWeight:"bold",color:"primary.main"},children:j+1}),i.jsx(J,{label:h("customGroups.levelInputLabel",{level:j+1}),value:w,onChange:C=>a(j,C.target.value),size:"small",sx:{flex:1},inputProps:{maxLength:Ii}}),i.jsx(Z,{onClick:()=>c(j),disabled:y.length<=Li,color:"error",size:"small",children:i.jsx(sn,{})})]},j)),i.jsx(z,{startIcon:i.jsx(ws,{}),onClick:l,disabled:y.length>=_s,variant:"outlined",size:"small",sx:{alignSelf:"flex-start",mt:1},children:h("customGroups.addIntensityLevel")})]})]})]})}function rg({existingGroups:e,loadingGroups:t,tileCounts:n,onEditGroup:s,onDeleteGroup:r}){const{t:o}=F();return t?i.jsx(P,{children:o("Loading groups...")}):e.length===0?i.jsx(P,{color:"text.secondary",sx:{textAlign:"center",py:4},children:o("customGroups.noCustomGroupsFound")}):i.jsx(A,{children:i.jsx(xs,{children:e.map((a,l)=>i.jsxs(p.Fragment,{children:[i.jsxs(bs,{children:[i.jsx(Ae,{primary:a.label,secondary:i.jsxs(A,{component:"span",sx:{display:"block"},children:[i.jsxs(P,{variant:"body2",color:"text.secondary",component:"span",sx:{display:"block"},children:[o("customGroups.intensityLevelsCount",{count:a.intensities.length}),": ",a.intensities.map(c=>c.label).join(", ")]}),i.jsx(P,{variant:"body2",color:"text.secondary",component:"span",sx:{display:"block",mt:.5},children:o("customGroups.customTilesCount",{count:n[a.id]||0})})]})}),i.jsxs(Dh,{children:[i.jsx(Z,{edge:"end","aria-label":"edit",onClick:()=>s(a),sx:{mr:1},children:i.jsx(Ns,{})}),i.jsx(Z,{edge:"end","aria-label":"delete",onClick:()=>r(a.id),color:"error",children:i.jsx(sn,{})})]})]}),l<e.length-1&&i.jsx(ce,{})]},a.id))})})}function og({open:e,pendingDeleteGroup:t,onClose:n,onConfirm:s}){var r;const{t:o}=F();return i.jsxs(je,{open:e,onClose:n,children:[i.jsx(Ce,{children:o("customGroups.confirmDelete")}),i.jsx(_e,{children:i.jsx(P,{children:((r=t==null?void 0:t.tileCount)!=null?r:0)>0?o("customGroups.deleteGroupWithTiles",{name:t==null?void 0:t.name,count:t==null?void 0:t.tileCount}):o("customGroups.deleteGroupConfirm",{name:t==null?void 0:t.name})})}),i.jsxs(Lt,{children:[i.jsx(z,{onClick:n,children:o("cancel")}),i.jsx(z,{onClick:s,color:"error",variant:"contained",children:o("delete")})]})]})}const Zo=e=>{const t=$r.findIndex(n=>n.intensities.length===e.length);return t>=0?t:0};function ag({open:e,onClose:t,onGroupCreated:n,onGroupUpdated:s,editingGroup:r,locale:o,gameMode:a}){const{t:l}=F(),[c,u]=p.useState({label:"",type:"",localGameMode:a,selectedTemplateIndex:0,intensityLabels:[l("intensityLabels.beginner"),l("intensityLabels.intermediate"),l("intensityLabels.advanced")]}),[h,d]=p.useState({selectedTab:0,isLoading:!0,currentEditingGroup:null,validation:{isValid:!0,errors:[]},isSubmitting:!1}),[f,g]=p.useState([]),[m,y]=p.useState({}),[b,v]=p.useState(!1),[_,x]=p.useState(null),w=p.useCallback(async()=>{try{const M=await it({locale:o,isDefault:!1});g(M);const $={};await Promise.all(M.map(async B=>{const G=await $o(B.name,o,"online"),U=await $o(B.name,o,"local");$[B.id]=G+U})),y($)}catch(M){console.error("Error reloading groups:",M)}},[o]);p.useEffect(()=>{(async()=>{if(e){d($=>({...$,isLoading:!0}));try{await w()}catch($){console.error("Error loading groups:",$)}finally{d($=>({...$,isLoading:!1}))}}})()},[e,o,w]);const j=M=>M.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"_").substring(0,20)||`group_${os(6).toLowerCase()}`,C=M=>M==="online"?["solo","consumption"]:["solo","foreplay","sex","consumption"];p.useEffect(()=>{if(r){const M=r.gameMode||a,$=C(M),B=r.type||"";d(G=>({...G,currentEditingGroup:r})),u({label:r.label,type:$.includes(B)?B:"",localGameMode:M,selectedTemplateIndex:Zo(r.intensities),intensityLabels:r.intensities.map(G=>G.label)})}else if(h.currentEditingGroup){const M=h.currentEditingGroup.gameMode||a,$=C(M),B=h.currentEditingGroup.type||"";u({label:h.currentEditingGroup.label,type:$.includes(B)?B:"",localGameMode:M,selectedTemplateIndex:Zo(h.currentEditingGroup.intensities),intensityLabels:h.currentEditingGroup.intensities.map(G=>G.label)})}else d(M=>({...M,currentEditingGroup:null})),u({label:"",type:"",localGameMode:a,selectedTemplateIndex:0,intensityLabels:[l("intensityLabels.beginner"),l("intensityLabels.intermediate"),l("intensityLabels.advanced")]});d(M=>({...M,validation:{isValid:!0,errors:[]}}))},[r,h.currentEditingGroup,e,a,l]),p.useEffect(()=>{const M=C(c.localGameMode);c.type&&!M.includes(c.type)&&u($=>({...$,type:""}))},[c.localGameMode,c.type]);const S=M=>{const $=$r[M];u(B=>({...B,selectedTemplateIndex:M,intensityLabels:$.intensities.map(G=>l(G.label))}))},T=(M,$)=>{const B=[...c.intensityLabels];B[M]=$,u(G=>({...G,intensityLabels:B}))},L=()=>{c.intensityLabels.length>=5||u(M=>({...M,intensityLabels:[...M.intensityLabels,l("customGroups.levelLabel",{level:M.intensityLabels.length+1})]}))},k=M=>{c.intensityLabels.length<=2||u($=>({...$,intensityLabels:$.intensityLabels.filter((B,G)=>G!==M)}))};p.useEffect(()=>{(async()=>{var $;if(!c.label.trim()&&!c.type&&c.intensityLabels.length===0){d(X=>({...X,validation:{isValid:!0,errors:[]}}));return}const B=[];if(c.type&&!Mi.includes(c.type)&&B.push(l("typeValidationError",{types:Mi.join(", ")})),c.label.trim()&&!c.type&&B.push(l("typeRequiredError")),B.length>0){d(X=>({...X,validation:{isValid:!1,errors:B}}));return}const G=c.intensityLabels.map((X,ye)=>({id:os(),label:X,value:ye+1,isDefault:!1})),U={name:h.currentEditingGroup?h.currentEditingGroup.name:j(c.label),label:c.label.trim(),intensities:G,type:c.type||void 0,locale:o,gameMode:c.localGameMode,isDefault:!1},H=await jp(U,($=h.currentEditingGroup)==null?void 0:$.id);d(X=>({...X,validation:H}))})()},[c.label,c.type,c.intensityLabels,c.localGameMode,o,h.currentEditingGroup,l]);const I=M=>{d($=>({...$,currentEditingGroup:M,selectedTab:1})),u($=>({...$,label:M.label,intensityLabels:M.intensities.map(B=>B.label)}))},N=async M=>{const $=f.find(G=>G.id===M);if(!$)return;const B=m[M]||0;x({id:M,name:$.label,tileCount:B}),v(!0)},D=async()=>{if(!_)return;const{id:M,tileCount:$}=_,B=f.find(G=>G.id===M);if(B)try{$>0&&await Nf(B.name,o,a),await Bf(M),await w(),s==null||s(null)}catch(G){console.error("Error deleting group:",G)}finally{v(!1),x(null)}},R=async()=>{if(!(!h.validation.isValid||h.isSubmitting)){d(M=>({...M,isSubmitting:!0}));try{const M=c.intensityLabels.map((B,G)=>({id:os(),label:B,value:G+1,isDefault:!1})),$={name:h.currentEditingGroup?h.currentEditingGroup.name:j(c.label),label:c.label.trim(),intensities:M,type:c.type||void 0,locale:o,gameMode:c.localGameMode,isDefault:!1};if(h.currentEditingGroup)await nc(h.currentEditingGroup.id,$),s==null||s(h.currentEditingGroup);else{const B=await sc($);B&&(n==null||n({...$,id:B,createdAt:new Date,updatedAt:new Date,isDefault:!1,locale:o,gameMode:c.localGameMode}))}V(),t()}catch(M){console.error("Error saving custom group:",M),d($=>({...$,validation:{isValid:!1,errors:[l("failedToSaveGroup",{error:M})]}}))}finally{d(M=>({...M,isSubmitting:!1}))}}},V=()=>{d(M=>({...M,currentEditingGroup:null,validation:{isValid:!0,errors:[]}})),u({label:"",type:"",localGameMode:a,selectedTemplateIndex:0,intensityLabels:[l("intensityLabels.beginner"),l("intensityLabels.intermediate"),l("intensityLabels.advanced")]})},O=M=>{u($=>({...$,...M}))};return i.jsxs(i.Fragment,{children:[i.jsxs(je,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,sx:{"& .MuiDialog-paper":{minHeight:"600px"}},children:[i.jsxs(Ce,{children:[l("customGroups.manageCustomGroups"),i.jsx(P,{variant:"body2",color:"text.secondary",sx:{mt:1},children:l("customGroups.createNewGroupsDescription")}),i.jsxs(xr,{value:h.selectedTab,onChange:(M,$)=>{d(B=>({...B,selectedTab:$})),$===1&&!h.currentEditingGroup&&V()},sx:{mt:2,borderBottom:1,borderColor:"divider"},children:[i.jsx(kt,{label:l("customGroups.existingGroups")}),i.jsx(kt,{label:h.currentEditingGroup?l("customGroups.editGroup"):l("customGroups.createNew")})]})]}),i.jsxs(_e,{dividers:!0,children:[h.selectedTab===0&&i.jsx(rg,{existingGroups:f,loadingGroups:h.isLoading,tileCounts:m,onEditGroup:I,onDeleteGroup:N}),h.selectedTab===1&&i.jsx(ig,{formState:c,validation:h.validation,currentEditingGroup:h.currentEditingGroup,locale:o,onFormStateChange:O,generateGroupName:j,updateIntensityLabel:T,addIntensity:L,removeIntensity:k,handleTemplateChange:S})]}),i.jsxs(Lt,{children:[i.jsx(z,{onClick:t,disabled:h.isSubmitting,children:l("cancel")}),i.jsx(z,{onClick:R,variant:"contained",disabled:!h.validation.isValid||h.isSubmitting,children:h.isSubmitting?l("customGroups.saving"):h.currentEditingGroup?l("customGroups.updateGroup"):l("customGroups.createGroup")})]})]}),i.jsx(og,{open:b,pendingDeleteGroup:_,onClose:()=>v(!1),onConfirm:D})]})}const Mc=(e,t)=>{const n=t||At.resolvedLanguage||At.language||"en",s=Je(()=>it({locale:n,gameMode:e}),[n,e]);return{groups:p.useMemo(()=>s?s.map(o=>({...o,hasNoTiles:!1,isAvailableForSetup:!0})):[],[s]),loading:s===void 0,error:null,isEmpty:s?s.length===0:!0}};function lg({value:e,onChange:t,locale:n,gameMode:s,includeDefault:r=!0,disabled:o=!1,refreshTrigger:a=0}){const{t:l}=F(),{groups:c,loading:u}=Mc(s,n),h=r?c:c.filter(d=>!d.isDefault);return u?i.jsxs(re,{fullWidth:!0,disabled:!0,children:[i.jsx(ue,{children:l("customGroups.loadingGroups")}),i.jsx(oe,{value:"",children:i.jsx(W,{value:"",children:i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.jsx(Ee,{size:16}),i.jsx("span",{children:l("customGroups.loadingGroups")})]})})})]}):i.jsx(A,{children:i.jsxs(re,{fullWidth:!0,disabled:o,children:[i.jsx(ue,{id:"group-label",children:l("group")}),i.jsx(oe,{labelId:"group-label",value:e,onChange:d=>t(d.target.value),label:l("group"),children:h.length===0?i.jsx(W,{value:"",disabled:!0,children:i.jsx(P,{color:"text.secondary",children:l("customGroups.noGroupsAvailable",{locale:n,gameMode:s})})}):h.map(d=>i.jsx(W,{value:d.id,children:i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.jsx("span",{children:d.label}),d.isDefault&&i.jsx(te,{label:l("default"),size:"small",variant:"outlined"})]})},d.id))})]})})}function cg({setSubmitMessage:e,boardUpdated:t,customTiles:n,mappedGroups:s,expanded:r,handleChange:o,tagList:a,updateTileId:l,setUpdateTileId:c,sharedFilters:u,setSharedFilters:h}){const{t:d}=F(),{settings:f}=kr(),[g,m]=p.useState({action:"",tags:[d("custom")]}),[y,b]=p.useState(!1),[v,_]=p.useState(""),[x,w]=p.useState(0),{groups:j}=Mc(u.gameMode,f.locale||"en");p.useEffect(()=>{if(j.length>0&&!u.groupName){const R=j[0];h({...u,groupName:R.name,intensity:""})}},[j,u,h]);const C=j.find(R=>R.name===u.groupName);p.useEffect(()=>{const V=setTimeout(async()=>{if(!C||!u.intensity||!g.action){_("");return}try{const O=await qo({group_id:C.id,intensity:Number(u.intensity),action:g.action,tags:g.tags,isCustom:1},f.locale||"en",u.gameMode);O.isValid?_(""):_(O.errors.join(", "))}catch(O){console.error("Error validating tile:",O),_("")}},300);return()=>clearTimeout(V)},[C,u.intensity,u.gameMode,g.action,g.tags,f.locale]),p.useEffect(()=>{const V=(Array.isArray(n)?n:[]).find(({id:O})=>O===l);if(V){const O=j.find(M=>M.id===V.group_id);h({...u,groupName:(O==null?void 0:O.name)||"",intensity:V.intensity?V.intensity.toString():""}),m({action:V.action||"",tags:V.tags||[d("custom")]})}else if(!u.groupName&&j.length>0){const O=j[0];h({...u,groupName:O.name,intensity:""})}},[l,n,j,d,h,u]);function S(R,V,O){return(Array.isArray(n)?n:[]).find($=>$.group_id===R&&$.intensity===V&&$.action===O)}function T(){c(null),h({gameMode:f.gameMode,groupName:"",intensity:""}),m({action:"",tags:[d("custom")]}),_("")}const L=R=>{h({...u,groupName:R.name,intensity:""}),b(!1),w(V=>V+1)},k=()=>{w(R=>R+1)};async function I(){const R=document.querySelector('input[name="tags"]'),V=[...g.tags];R&&R.value.trim()&&(V.push(R.value.trim()),R.value="");const{gameMode:O,intensity:M}=u,{action:$}=g;if(!O||!C||!M||!$)return e({message:d("allFieldsRequired","All fields are required"),type:"error"});if(v)return e({message:v,type:"error"});if(l==null&&S(C.id,M,$))return e({message:d("actionExists"),type:"error"});const B={group_id:C.id,intensity:Number(M),action:$,tags:V,isCustom:1};try{const G=await qo(B,f.locale||"en",O);if(!G.isValid)return e({message:G.errors.join(", "),type:"error"});if(l===null){const U=`${C.name} - Level ${M}`;ic(U,$),await rc(B)}else await Cr(l,B);return t(),m({action:"",tags:[d("custom")]}),e({message:d(l?"customUpdated":"customAdded"),type:"success"})}catch(G){return console.error("Error saving custom tile:",G),e({message:d("errorSavingTile"),type:"error"})}}const N=R=>{switch(R.key){case",":case"Enter":{R.preventDefault(),R.stopPropagation(),R.currentTarget.value.length>0&&(m(V=>({...V,tags:[...V.tags,R.currentTarget.value]})),R.currentTarget.value="");break}}},D=R=>{R.target.value.length>0&&(m(V=>({...V,tags:[...V.tags,R.target.value]})),R.target.value=""),setTimeout(()=>{const V=document.querySelector(".MuiAutocomplete-popper");V&&(V.style.display="none")},150)};return i.jsxs(i.Fragment,{children:[i.jsxs(Jt,{expanded:r==="ctAdd",onChange:o("ctAdd"),className:"about-accordion",children:[i.jsx(Qt,{"aria-controls":"ctAdd-content",id:"ctAdd-header",children:i.jsx(P,{className:"accordion-title",children:i.jsx(E,{i18nKey:l?"ctUpdate":"ctAdd"})})}),i.jsx(Zt,{children:i.jsxs(A,{component:"form",method:"post",className:"settings-box",children:[i.jsxs(re,{fullWidth:!0,sx:{mb:2},children:[i.jsx(ue,{children:d("customTiles.gameMode")}),i.jsxs(oe,{value:u.gameMode,onChange:R=>{h({gameMode:R.target.value,groupName:"",intensity:""})},label:d("customTiles.gameMode"),children:[i.jsx(W,{value:"online",children:d("solo")}),i.jsx(W,{value:"local",children:d("local")})]})]}),i.jsx(lg,{value:(C==null?void 0:C.id)||"",onChange:R=>{const V=j.find(O=>O.id===R);h({...u,groupName:(V==null?void 0:V.name)||"",intensity:""})},locale:f.locale||"en",gameMode:u.gameMode,refreshTrigger:x}),i.jsxs(re,{fullWidth:!0,sx:{mt:2},children:[i.jsx(ue,{children:d("customTiles.intensityLevel")}),i.jsx(oe,{value:u.intensity,onChange:R=>{h({...u,intensity:R.target.value})},label:d("customTiles.intensityLevel"),children:C==null?void 0:C.intensities.map(R=>i.jsxs(W,{value:R.value.toString(),children:[R.label," (Level ",R.value,")"]},R.value))})]}),v&&i.jsx(A,{sx:{mt:1,mb:2},children:i.jsx(P,{color:"error",variant:"body2",children:v})}),i.jsx(J,{id:"action",name:"action",required:!0,fullWidth:!0,label:d("action"),sx:{mt:2,pb:2},value:g.action,onChange:R=>{m({...g,action:R.target.value})},onKeyUp:R=>{R.key==="Enter"&&I()}}),i.jsx(Nh,{id:"tags",disableCloseOnSelect:!0,multiple:!0,freeSolo:!0,options:a,value:g.tags,onChange:(R,V)=>{m({...g,tags:V})},renderInput:R=>(R.inputProps.onKeyDown=N,R.inputProps.onBlur=D,i.jsx(J,{...R,label:d("tags")})),sx:{pb:2},clearOnBlur:!0,blurOnSelect:!0,openOnFocus:!0,disablePortal:!1,componentsProps:{popper:{modifiers:[{name:"preventOverflow",options:{altAxis:!0,altBoundary:!0,padding:8}}]}}}),i.jsxs(A,{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:{xs:"stretch",sm:"space-evenly"},gap:1,children:[i.jsx(z,{variant:"outlined",type:"button",onClick:()=>b(!0),children:d("manageGroups.title")}),i.jsx(z,{variant:"contained",type:"button",onClick:()=>T(),children:i.jsx(E,{i18nKey:"clear"})}),i.jsx(z,{variant:"contained",type:"button",onClick:I,children:i.jsx(E,{i18nKey:l?"ctUpdate":"ctAdd"})})]})]})})]}),i.jsx(ag,{open:y,onClose:()=>b(!1),onGroupCreated:L,onGroupUpdated:k,locale:f.locale||"en",gameMode:u.gameMode})]})}function ug({expanded:e,handleChange:t}){const n=Ie(),[s,r]=p.useState({}),[o,a]=p.useState({}),l=d=>{r(f=>({...f,[d]:!f[d]}))},c=d=>{a(f=>({...f,[d]:!f[d]}))},u=[{id:"custom-actions",icon:i.jsx(Fo,{}),title:"Custom Actions",description:"Add your own personalized activities to the game",tip:"Think of custom tiles as your personal touch - add activities that match your style and preferences perfectly.",color:"primary"},{id:"category-intensity",icon:i.jsx(Bs,{}),title:"Category & Intensity Rules",description:"Tiles appear based on your game settings",tip:"Your tiles only show up when you select their category and intensity level (or higher) in game settings.",color:"secondary"}],h=[{id:"new-activities",icon:i.jsx(pm,{}),title:"New Activities",description:"Create unique actions not in the default list",tips:["Think outside the box - what creative activities would make your game more exciting?",'Add themed tiles like "Movie Night Actions" or "Kitchen Adventures"',"Create seasonal tiles for holidays or special occasions","Design role-play scenarios with specific character actions"],color:"primary"},{id:"intensity-boost",icon:i.jsx(gm,{}),title:"Early Intensity Boost",description:"Add advanced tiles to beginner levels",tips:["Pro tip: Add exciting advanced tiles to lower intensities to start games with more energy.","Copy your favorite advanced tiles and add them to beginner categories",'Create "gateway" tiles that introduce advanced concepts gradually',"Mix easy and challenging elements in the same tile for variety"],color:"secondary"},{id:"mix-match",icon:i.jsx(ym,{}),title:"Mix & Match",description:"Combine different activities into one tile",tips:["Mix activities that don't usually go together for unexpected combinations.","Combine physical actions with mental challenges or games","Create multi-step tiles that build on each other","Blend different intensity levels within a single creative tile"],color:"success"},{id:"custom-groups",icon:i.jsx(xm,{}),title:"Custom Groups",description:"Create your own tile categories with unique intensities",tips:['Design completely custom groups like "Couples Yoga" or "Adventure Challenges"',"Set your own intensity progression from gentle to wild","Create themed collections that tell a story or follow a theme","Build niche categories that perfectly match your interests"],color:"warning"},{id:"share-creations",icon:i.jsx(js,{}),title:"Share & Discover",description:"Import/export tiles to share with others",tips:["Export your best tile collections to share with friends or partners","Import creative tiles from others to expand your game options","Create themed tile packs and share them in communities","Backup your custom tiles by exporting them regularly"],color:"info"}];return i.jsxs(i.Fragment,{children:[i.jsxs(Jt,{expanded:e==="help1",onChange:t("help1"),className:"about-accordion",children:[i.jsx(Qt,{"aria-controls":"help1-content",id:"help1-header",children:i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[i.jsx(Fo,{color:"primary"}),i.jsx(P,{className:"accordion-title",children:i.jsx(E,{i18nKey:"ctExplained"})})]})}),i.jsx(Zt,{sx:{p:0},children:i.jsx(xs,{dense:!0,children:u.map((d,f)=>i.jsxs(A,{children:[i.jsxs(bs,{sx:{cursor:"pointer",borderRadius:1,"&:hover":{bgcolor:"action.hover",transform:"translateX(4px)",transition:"all 0.2s ease-in-out"},transition:"all 0.2s ease-in-out"},onClick:()=>c(d.id),children:[i.jsx(We,{sx:{minWidth:n?36:40},children:i.jsx(A,{sx:{color:`${d.color}.main`,display:"flex",alignItems:"center"},children:d.icon})}),i.jsx(Ae,{primary:i.jsx(P,{variant:"subtitle2",sx:{fontWeight:500,fontSize:n?"0.9rem":"1rem"},children:d.title}),secondary:i.jsx(P,{variant:"body2",sx:{fontSize:n?"0.8rem":"0.85rem",color:"text.secondary"},children:d.description})}),i.jsx(Z,{size:"small",sx:{ml:1},children:o[d.id]?i.jsx(Vo,{}):i.jsx(Pn,{})})]}),i.jsx(Lo,{in:o[d.id],timeout:"auto",unmountOnExit:!0,children:i.jsx(A,{sx:{ml:n?4:6,mr:2,mb:1,p:1.5,bgcolor:"action.selected",borderRadius:1,borderLeft:3,borderLeftColor:`${d.color}.main`},children:i.jsxs(P,{variant:"body2",sx:{fontSize:n?"0.8rem":"0.85rem",fontStyle:"italic",color:"text.secondary"},children:["ðŸ’¡ ",d.tip]})})}),f<u.length-1&&i.jsx(ce,{variant:"inset",sx:{ml:n?4:6}})]},d.id))})})]}),i.jsxs(Jt,{expanded:e==="help2",onChange:t("help2"),className:"about-accordion",children:[i.jsx(Qt,{"aria-controls":"help2-content",id:"help2-header",children:i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[i.jsx(mm,{color:"primary"}),i.jsx(P,{className:"accordion-title",children:i.jsx(E,{i18nKey:"ctIdeas"})})]})}),i.jsx(Zt,{sx:{p:0},children:i.jsx(xs,{dense:!0,children:h.map((d,f)=>i.jsxs(A,{children:[i.jsxs(bs,{sx:{cursor:"pointer",borderRadius:1,"&:hover":{bgcolor:"action.hover",transform:"translateX(4px)",transition:"all 0.2s ease-in-out"},transition:"all 0.2s ease-in-out"},onClick:()=>l(d.id),children:[i.jsx(We,{sx:{minWidth:n?36:40},children:i.jsx(A,{sx:{color:`${d.color}.main`,display:"flex",alignItems:"center"},children:d.icon})}),i.jsx(Ae,{primary:i.jsx(P,{variant:"subtitle2",sx:{fontWeight:500,fontSize:n?"0.9rem":"1rem"},children:d.title}),secondary:i.jsx(P,{variant:"body2",sx:{fontSize:n?"0.8rem":"0.85rem",color:"text.secondary"},children:d.description})}),i.jsx(Z,{size:"small",sx:{ml:1},children:s[d.id]?i.jsx(Vo,{}):i.jsx(Pn,{})})]}),i.jsx(Lo,{in:s[d.id],timeout:"auto",unmountOnExit:!0,children:i.jsx(A,{sx:{ml:n?4:6,mr:2,mb:1,p:1.5,bgcolor:"action.selected",borderRadius:1,borderLeft:3,borderLeftColor:`${d.color}.main`},children:d.tips.map((g,m)=>i.jsx(P,{variant:"body2",sx:{fontSize:n?"0.8rem":"0.85rem",fontStyle:m===0?"italic":"normal",color:"text.secondary",mb:m<d.tips.length-1?1:0,"&:before":m===0?{content:'"ðŸ’¡ "'}:{content:'"â€¢ "'}},children:g},m))})}),f<h.length-1&&i.jsx(ce,{variant:"inset",sx:{ml:n?4:6}})]},d.id))})})]})]})}function Mn({text:e,copiedText:t=null,icon:n=null,tooltip:s=null}){const{t:r}=F(),[o,a]=p.useState(!1),l=t||r("copied"),c=n||i.jsx(bm,{}),u=()=>{navigator.clipboard.writeText(e),a(!0)},h=()=>a(!1);return i.jsxs(i.Fragment,{children:[i.jsx(ve,{title:s||r("copyToClipboard"),children:i.jsx(Z,{onClick:u,children:c})}),i.jsx(gt,{open:o,close:h,type:"success",children:l})]})}function Rc(e,t,n){const s=`default-${t}-${n}-${e}`;let r=0;for(let a=0;a<s.length;a++){const l=s.charCodeAt(a);r=(r<<5)-r+l,r=r&r}const o=Math.abs(r).toString(16).padStart(8,"0");return`default_${t}_${n}_${e}_${o}`.slice(0,50)}function Dr(e){const t=JSON.parse(JSON.stringify(e)),n=s=>{if(Array.isArray(s))return s.map(n);if(s!==null&&typeof s=="object"){const r={};return Object.keys(s).sort().forEach(o=>{r[o]=n(s[o])}),r}return s};return JSON.stringify(n(t))}async function Nr(e){const n=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",n);return`sha256-${Array.from(new Uint8Array(s)).map(a=>a.toString(16).padStart(2,"0")).join("")}`}async function $c(e){const t=(e.intensities||[]).map(r=>({value:r.value,label:r.label})).sort((r,o)=>r.value-o.value),n={name:e.name,gameMode:e.gameMode,type:e.type,intensities:t},s=Dr(n);return await Nr(s)}async function Dc(e,t){const n=(e.tags||[]).sort(),s={action:e.action,groupName:t,intensity:e.intensity,gameMode:"online",tags:n},r=Dr(s);return await Nr(r)}async function dg(e,t,n,s){const o=Dr({action:e,groupName:t,intensity:n,gameMode:s});return await Nr(o)}const hg="2.0.0",Qo=100;class $i extends Error{constructor(t,n){super(t),this.cause=n,this.name="ImportExportError"}}async function fg(e,t){const n={success:!1,importedGroups:0,importedTiles:0,importedDisabledDefaults:0,skippedItems:0,errors:[],warnings:[]},s=[...new Set(e.data.customGroups.map(u=>u.locale))],r=[...new Set(e.data.customGroups.map(u=>u.gameMode))],o=[];for(const u of s)for(const h of r){const d=await it({locale:u,gameMode:h});o.push(...d)}const a=new Map(o.map(u=>[u.name,u])),l=new Map(o.map(u=>[u.name,u.id])),c=new Map;for(const u of o){const h=await qe({group_id:u.id});for(const d of h){const f=`${d.action}_${d.intensity}_${u.id}`;c.set(f,d)}}return{groupMap:a,groupIdMap:l,existingTileMap:c,result:n,importData:e,options:t}}async function mg(e){const t=await $c(e);return{name:e.name,label:e.label,gameMode:e.gameMode,locale:e.locale,type:e.type,intensities:e.intensities.map(n=>({value:n.value,label:n.label})),contentHash:t}}async function pg(e,t){const n=await Dc(e,t.name);return{action:e.action,groupName:t.name,intensity:e.intensity,tags:e.tags||[],gameMode:t.gameMode,locale:t.locale,isEnabled:e.isEnabled!==0,contentHash:n}}async function gg(e,t){const n=await dg(e.action,t.name,e.intensity,t.gameMode);return{action:e.action,groupName:t.name,intensity:e.intensity,gameMode:t.gameMode,contentHash:n}}async function yg(e){for(const t of e.importData.data.customGroups)try{const n=e.groupMap.get(t.name);if(n){if(await $c(n)===t.contentHash){e.result.skippedItems++,e.result.warnings.push(`Skipped identical group: ${t.name}`);continue}await nc(n.id,si(t)),e.result.warnings.push(`Updated existing group: ${t.name}`);continue}const s=await sc(si(t));if(e.result.importedGroups++,s){const r={...si(t),id:s,createdAt:new Date,updatedAt:new Date};e.groupMap.set(t.name,r),e.groupIdMap.set(t.name,s)}}catch(n){const s=n instanceof Error?n.message:String(n);e.result.errors.push(`Failed to import group ${t.name}: ${s}`)}}async function xg(e){const t=[];for(let n=0;n<e.importData.data.customTiles.length;n+=Qo)t.push(e.importData.data.customTiles.slice(n,n+Qo));for(const n of t){const s=[];for(const r of n)try{let o=e.groupIdMap.get(r.groupName),a=e.groupMap.get(r.groupName);if(!o||!a){const u=Rc(r.groupName,r.locale,r.gameMode),d=(await it({locale:r.locale,gameMode:r.gameMode})).find(f=>f.id===u);if(d)o=u,a=d,e.groupIdMap.set(r.groupName,o),e.groupMap.set(r.groupName,a);else{e.result.warnings.push(`Skipped tile for missing group: ${r.groupName} (${r.locale}/${r.gameMode})`);continue}}if(!a.intensities.some(u=>u.value===r.intensity)){e.result.warnings.push(`Skipped tile with invalid intensity ${r.intensity} for group ${r.groupName}`);continue}const l=`${r.action}_${r.intensity}_${o}`,c=e.existingTileMap.get(l);if(c){if(await Dc(c,a.name)===r.contentHash){e.result.skippedItems++,e.result.warnings.push(`Skipped identical tile: ${r.action}`);continue}if(c.id!==void 0){await Cr(c.id,ea(r,o)),e.result.warnings.push(`Updated existing tile: ${r.action}`);continue}}s.push({data:ea(r,o),tile:r})}catch(o){const a=o instanceof Error?o.message:String(o);e.result.errors.push(`Failed to import tile ${r.action}: ${a}`)}for(const{data:r,tile:o}of s)try{await rc(r),e.result.importedTiles++}catch(a){const l=a instanceof Error?a.message:String(a);e.result.errors.push(`Failed to add tile ${o.action}: ${l}`)}}}async function bg(e){for(const t of e.importData.data.disabledDefaultTiles)try{let n=e.groupIdMap.get(t.groupName);if(!n){const r=Rc(t.groupName,"en",t.gameMode),a=(await it({locale:"en",gameMode:t.gameMode})).find(l=>l.id===r);if(a)n=r,e.groupIdMap.set(t.groupName,n),e.groupMap.set(t.groupName,a);else{e.result.warnings.push(`Skipped disabled default for missing group: ${t.groupName}`);continue}}const s=await qe({group_id:n,isCustom:0,intensity:t.intensity,action:t.action});if(s.length>0){const r=s[0];r.id!==void 0&&(await Cr(r.id,{...r,isEnabled:0}),e.result.importedDisabledDefaults++)}else e.result.warnings.push(`Default tile not found to disable: ${t.action} (${t.groupName})`)}catch(n){const s=n instanceof Error?n.message:String(n);e.result.errors.push(`Failed to disable default tile ${t.action}: ${s}`)}}function si(e){return{name:e.name,label:e.label,intensities:e.intensities.map((t,n)=>({id:`${e.name}-${t.value}`,label:t.label,value:t.value,isDefault:!1})),type:e.type,isDefault:!1,locale:e.locale,gameMode:e.gameMode}}function ea(e,t){return{group_id:t,intensity:e.intensity,action:e.action,tags:e.tags,isEnabled:e.isEnabled?1:0,isCustom:1}}function vg(e){return e&&typeof e=="object"&&e.formatVersion&&e.data&&Array.isArray(e.data.customGroups)&&Array.isArray(e.data.customTiles)}async function Us(e={},t){try{const{includeDisabledDefaults:n=!1,singleGroupName:s}=e,r="en",o="online";t==null||t("Analyzing exportable data",0,100);const a=await it({locale:r,gameMode:o,isDefault:!1}),l=await qe({isCustom:1}),c=n?await qe({isCustom:0,isEnabled:0}):[],u=new Set(a.map(T=>T.id)),h=new Set(l.map(T=>T.group_id).filter(Boolean)),d=new Set(c.map(T=>T.group_id).filter(Boolean)),f=new Set([...u,...h,...d]),m=(await it({locale:r,gameMode:o})).filter(T=>f.has(T.id)),y=s?m.filter(T=>T.name===s):m,b=new Map(y.map(T=>[T.id,T])),v=new Set(y.map(T=>T.id));t==null||t("Processing groups",20,100);const _=[];for(const T of y.filter(L=>!L.isDefault))_.push(await mg(T));t==null||t("Processing custom tiles",50,100);const x=[],w=l.filter(T=>T.group_id&&v.has(T.group_id));for(const T of w){const L=b.get(T.group_id);L&&x.push(await pg(T,L))}t==null||t("Processing disabled defaults",80,100);const j=[],C=c.filter(T=>T.group_id&&v.has(T.group_id));for(const T of C){const L=b.get(T.group_id);L&&j.push(await gg(T,L))}const S={formatVersion:hg,exportedAt:new Date().toISOString(),data:{customGroups:_,customTiles:x,disabledDefaultTiles:j}};return t==null||t("Finalizing export",100,100),JSON.stringify(S,null,2)}catch(n){throw new $i("Export failed",n)}}async function wg(e,t={},n){var s,r;try{let o;if(typeof e=="string"?o=JSON.parse(e):o=e,!vg(o))throw new $i("Invalid import data format");const a={validateContent:(s=t.validateContent)!=null?s:!0,preserveDisabledDefaults:(r=t.preserveDisabledDefaults)!=null?r:!1};n==null||n("Preparing import",0,100);const l=await fg(o,a);return n==null||n("Importing groups",25,100),await yg(l),n==null||n("Importing tiles",75,100),await xg(l),a.preserveDisabledDefaults&&o.data.disabledDefaultTiles.length>0&&(n==null||n("Importing disabled defaults",85,100),await bg(l)),l.result.success=l.result.errors.length===0,n==null||n("Import complete",100,100),l.result}catch(o){throw new $i("Import failed",o)}}async function Di(e,t,n){return rs.customGroups.where("[name+locale+gameMode]").between(["",e,t],["ï¿¿",e,t]).toArray()}async function jg(e="en",t="online",n=!1,s="all"){const r=s==="disabled"?[]:(await Di(e,t)).filter(y=>!y.isDefault),o=s==="disabled"?[]:await qe({isCustom:1}),a=await(async()=>s==="disabled"?await qe({isCustom:0,isEnabled:0}):s==="custom"?[]:n?await qe({isCustom:0,isEnabled:0}):[])(),l=new Set(r.map(y=>y.id)),c=new Set(o.map(y=>y.group_id).filter(Boolean)),u=new Set(a.map(y=>y.group_id).filter(Boolean)),h=new Set([...l,...c,...u]),g=(await Di(e,t)).filter(y=>h.has(y.id)).filter((y,b,v)=>v.findIndex(_=>_.name===y.name)===b),m=[];for(const y of g){let b=0,v=0,_=0;s!=="disabled"&&!y.isDefault&&(b=1),s!=="disabled"&&(v=o.filter(w=>w.group_id===y.id).length),s!=="custom"&&(_=a.filter(w=>w.group_id===y.id).length);const x=b+v+_;x>0&&m.push({name:y.name,label:y.label||y.name,exportCount:{customGroups:b,customTiles:v,disabledDefaults:_,total:x}})}return m.sort((y,b)=>y.exportCount.total!==b.exportCount.total?b.exportCount.total-y.exportCount.total:y.name.localeCompare(b.name))}async function _g(e="en",t="online",n={}){try{const s={singleGroupName:n.singleGroup,includeDisabledDefaults:!1};return await Us(s)}catch(s){const r=s instanceof Error?s.message:String(s);throw new Error(`Export failed: ${r}`)}}async function Sg(e,t="en",n="online"){return Us({singleGroupName:e,includeDisabledDefaults:!0})}async function kg(e="en",t="online"){try{const n=await _g(e,t,{exportScope:"all"}),s=JSON.parse(n);return s.data.disabledDefaultTiles=[],JSON.stringify(s,null,2)}catch(n){const s=n instanceof Error?n.message:String(n);throw new Error(`Export failed: ${s}`)}}async function Cg(e="en",t="online"){try{const s=await Us({includeDisabledDefaults:!0}),r=JSON.parse(s);return r.data.customGroups=[],r.data.customTiles=[],JSON.stringify(r,null,2)}catch(n){const s=n instanceof Error?n.message:String(n);throw new Error(`Export failed: ${s}`)}}function Tg({expanded:e,handleChange:t,customTiles:n,mappedGroups:s,setSubmitMessage:r,bulkImport:o,onImportSuccess:a}){const l=p.useRef(null),{t:c}=F(),{settings:u}=kr(),[h,d]=p.useState(""),[f,g]=p.useState(null),[m,y]=p.useState("all"),[b,v]=p.useState(""),[_,x]=p.useState([]),[w,j]=p.useState(new Map),C=k=>{const I=[];return k.customGroups>0&&I.push(`${k.customGroups} ${k.customGroups===1?"group":"groups"}`),k.customTiles>0&&I.push(`${k.customTiles} ${k.customTiles===1?"tile":"tiles"}`),k.disabledDefaults>0&&I.push(`${k.disabledDefaults} disabled`),I.length>0?`(${I.join(", ")})`:""},S=p.useCallback(async()=>{try{let k;const I=u.locale||"en",N=u.gameMode||"online";switch(m){case"single":if(!b){r({message:c("errors.selectGroupToExport"),type:"error"});return}k=await Sg(b,I,N);break;case"custom":k=await kg(I,N);break;case"disabled":k=await Cg(I,N);break;default:k=await Us({includeDisabledDefaults:!0});break}d(k),r({message:"Export successful!",type:"success"})}catch(k){console.error("Error exporting data:",k),r({message:`Export failed: ${k instanceof Error?k.message:String(k)}`,type:"error"})}},[m,b,u.locale,u.gameMode,r,c]);async function T(k){if(!k.current)return;const N=k.current.importData.value;if(!N.trim())return r({type:"error",message:c("enterDataToImport")});try{r({type:"info",message:"Importing data..."});const D=await wg(N,{validateContent:!0,preserveDisabledDefaults:!0});if(g(D),D.success){if(D.importedTiles>0){const V=await qe({isCustom:1}),O=await it({}),M=new Map(O.map($=>[$.id,$]));V.slice(-D.importedTiles).forEach(async $=>{const B=M.get($.group_id||""),G=(B==null?void 0:B.name)||"Unknown Group",U=B==null?void 0:B.intensities.find(X=>X.value===$.intensity),H=(U==null?void 0:U.label)||`Level ${$.intensity+1}`;ic(`${G} - ${H}`,$.action)})}let R="Import successful!";D.importedGroups>0&&(R+=` Imported ${D.importedGroups} groups.`),D.importedTiles>0&&(R+=` Imported ${D.importedTiles} tiles.`),D.importedDisabledDefaults>0&&(R+=` Imported ${D.importedDisabledDefaults} disabled defaults.`),D.skippedItems>0&&(R+=` Skipped ${D.skippedItems} items.`),r({type:"success",message:R}),await S(),a==null||a()}else r({type:"error",message:`Import failed: ${D.errors.join(", ")}`})}catch(D){console.error("Import error:",D),r({type:"error",message:`Import failed: ${D.message||D}`}),g(null)}}const L=p.useCallback(async()=>{try{const k=m==="single"||m==="all",I=await Di(u.locale||"en","online"),N=new Map;I.forEach(R=>{N.set(R.name,R.id)}),j(N);const D=await jg(u.locale||"en","online",k,m);x(D)}catch(k){console.error("Error loading available groups:",k)}},[u.locale,m]);return p.useEffect(()=>{e==="ctImport"&&(L(),S())},[e,n,S,L,m]),i.jsxs(Jt,{expanded:e==="ctImport",onChange:t("ctImport"),className:"about-accordion",children:[i.jsx(Qt,{"aria-controls":"ctImport-content",id:"ctImport-header",children:i.jsx(P,{className:"accordion-title",children:i.jsx(E,{i18nKey:"importExport"})})}),i.jsx(Zt,{children:i.jsxs(A,{component:"form",method:"post",className:"settings-box",ref:l,children:[i.jsxs(re,{fullWidth:!0,sx:{mb:2},children:[i.jsx(ue,{children:c("export.scope")}),i.jsxs(oe,{value:m,onChange:k=>y(k.target.value),label:c("export.scope"),children:[i.jsx(W,{value:"all",children:c("exportScope.all")}),i.jsx(W,{value:"custom",children:c("exportScope.custom")}),i.jsx(W,{value:"single",children:c("exportScope.single")}),i.jsx(W,{value:"disabled",children:c("exportScope.disabled")})]})]}),m==="single"&&i.jsxs(re,{fullWidth:!0,sx:{mb:2},children:[i.jsx(ue,{children:c("export.selectGroup")}),i.jsx(oe,{value:b,onChange:k=>v(k.target.value),label:c("export.selectGroup"),children:_.map((k,I)=>i.jsxs(W,{value:k.name,children:[k.label," ",C(k.exportCount)]},w.get(k.name)||`${k.name}-${u.locale}-${u.gameMode}-${I}`))})]}),i.jsx(J,{name:"importData",label:c("importExport"),multiline:!0,rows:8,fullWidth:!0,variant:"outlined",placeholder:c("placeholder.importData"),value:h,onChange:k=>d(k.target.value),sx:{mb:2}}),i.jsxs(A,{sx:{display:"flex",gap:2,mb:2},children:[i.jsx(z,{variant:"contained",onClick:()=>T(l),children:c("import")}),i.jsx(Mn,{text:h})]}),f&&i.jsxs(A,{sx:{mt:2},children:[i.jsx(fe,{severity:f.success?"success":"error",children:f.success?c("importMessages.importSuccess"):c("importMessages.importFailed")}),f.warnings.length>0&&i.jsxs(fe,{severity:"warning",sx:{mt:1},children:[i.jsx(P,{variant:"subtitle2",children:"Warnings:"}),f.warnings.map((k,I)=>i.jsxs(P,{variant:"body2",children:["â€¢ ",k]},I))]}),f.errors.length>0&&i.jsxs(fe,{severity:"error",sx:{mt:1},children:[i.jsx(P,{variant:"subtitle2",children:"Errors:"}),f.errors.map((k,I)=>i.jsxs(P,{variant:"body2",children:["â€¢ ",k]},I))]})]})]})})]})}function Ag(e){return Object.entries(e).flatMap(([t,{label:n,actions:s}])=>s?Object.keys(s).filter(o=>o!==Ec).map((o,a)=>({group:ip(t),groupLabel:n,value:t,intensity:Number(a+1),translatedIntensity:o,label:`${n} - ${o}`})):[])}function Pg({gameMode:e,groupFilter:t,intensityFilter:n,groups:s,mappedGroups:r,dexieGroups:o,onGameModeChange:a,onGroupChange:l,onIntensityChange:c,hideAll:u=!1,sx:h={}}){const{t:d}=F(),[f,g]=p.useState([]),m=p.useMemo(()=>{if(!(r!=null&&r[e]))return[];const x=Ag(r[e]);return Array.isArray(x)?x:[]},[r,e]),y=p.useCallback(x=>{if(o!=null&&o[x])return o[x].label||x;const w=m.find(j=>j.value===x);return w!=null&&w.groupLabel?w.groupLabel:x},[o,m]);p.useEffect(()=>{let x=[];o&&Object.keys(o).length>0?x=Object.keys(o):s&&Object.keys(s).length>0&&(x=Object.keys(s)),g(x)},[s,o,e]);function b(x){const w=x.target.value;l(w)}if(!(f!=null&&f.length))return null;const v=f.length===0||f.includes(t)?t:"",_=n==="all"?"all":n;return i.jsxs(A,{sx:{display:"flex",flexWrap:"wrap",gap:2,...h},children:[i.jsxs(re,{sx:{width:125,flexShrink:0},children:[i.jsx(ue,{id:"game-mode-filter-label",children:i.jsx(E,{i18nKey:"customTiles.gameMode"})}),i.jsxs(oe,{labelId:"game-mode-filter-label",id:"game-mode-filter",value:e,label:d("customTiles.gameMode","Game Mode"),onChange:x=>{a(x.target.value)},slotProps:{input:{"aria-label":d("customTiles.gameMode","Game Mode")}},children:[i.jsx(W,{value:"online",children:i.jsx(E,{i18nKey:"gameMode.online"})}),i.jsx(W,{value:"local",children:i.jsx(E,{i18nKey:"gameMode.local"})})]})]}),i.jsxs(re,{sx:{minWidth:150,flex:1},children:[i.jsx(ue,{id:"group-filter-label",children:i.jsx(E,{i18nKey:"group"})}),i.jsx(oe,{labelId:"group-filter-label",id:"group-filter",value:v,label:d("group"),onChange:b,slotProps:{input:{"aria-label":d("group")}},children:f.map(x=>i.jsxs(W,{value:x,children:[y(x),!u&&s&&s[x]&&` (${s[x].count})`]},x))})]}),i.jsxs(re,{sx:{minWidth:200,flex:1},disabled:!v,children:[i.jsx(ue,{id:"intensity-filter-label",children:i.jsx(E,{i18nKey:"customTiles.intensityLevel",children:"Intensity Level"})}),i.jsxs(oe,{labelId:"intensity-filter-label",id:"intensity-filter",value:_,label:d("customTiles.intensityLevel","Intensity Level"),onChange:x=>c(x.target.value),slotProps:{input:{"aria-label":d("customTiles.intensityLevel","Intensity Level")}},children:[!u&&i.jsx(W,{value:"all",children:i.jsx(E,{i18nKey:"all",children:"All"})},"all"),v&&o&&o[v]&&o[v].intensities.sort((x,w)=>x.value-w.value).map(x=>{const w=s&&s[v]&&s[v].intensities&&s[v].intensities[x.value]||0;return i.jsxs(W,{value:x.value,children:[x.label,u?"":` (${w})`]},x.value)})]})]})]})}function Eg({tagList:e,boardUpdated:t,mappedGroups:n,updateTile:s,refreshTrigger:r,sharedFilters:o,setSharedFilters:a}){var l,c,u,h;const{t:d,i18n:f}=F(),{settings:g}=kr(),[m,y]=p.useState(null),b=o.gameMode,v=o.groupName,_=o.intensity||"all",[x,w]=p.useState(1),[j,C]=p.useState(!0),[S,T]=p.useState({items:[],total:0,totalPages:1}),[L,k]=p.useState({}),[I,N]=p.useState({}),D=10;p.useEffect(()=>{async function U(){try{C(!0);const[H,X]=await Promise.all([tc(f.resolvedLanguage,b),ec(f.resolvedLanguage,b,m)]),ye={};H.forEach(se=>{ye[se.name]=se}),N(ye);const me={};H.forEach(se=>{const nt=X[se.id]||X[se.name]||{count:0,intensities:{}};me[se.name]={label:se.label||se.name,count:nt.count,intensities:nt.intensities}}),k(me);const Ne=H.map(se=>se.name),Te=Ne.includes(v);if((!v||!Te)&&Ne.length>0)a({...o,groupName:Ne[0],intensity:""});else if(Te&&_!=="all"){const se=H.find(nt=>nt.name===v);se&&(se.intensities.map(Eh=>Eh.value).includes(Number(_))||a({...o,intensity:""}))}}catch(H){console.error("Error loading groups and counts:",H)}finally{C(!1)}}U()},[b,f.resolvedLanguage,m,v,_,a,o]),p.useEffect(()=>{let U=!0;async function H(){var X;try{C(!0);const Ne={group:((X=I[v])==null?void 0:X.id)||v,tag:m,intensity:_==="all"||_===""?null:_,page:x,limit:D,paginated:!0},Te=await Do(Ne);U&&(T(Te),setTimeout(()=>{U&&C(!1)},300))}catch(ye){console.error("Error loading tiles:",ye),U&&C(!1)}}return v&&Object.keys(I).length>0?H():C(!1),()=>{U=!1}},[v,_,m,b,x,D,r,g.locale,I]);function R(U){C(!0),y(m===U?null:U)}function V(U,H){C(!0),w(H)}async function O(U){var H;await Of(U),t();const ye={group:((H=I[v])==null?void 0:H.id)||v,tag:m,intensity:_==="all"||_===""?null:_,page:x,limit:D,paginated:!0},me=await Do(ye);T(me)}async function M(U){await Ff(U),t(),T(H=>({...H,items:H.items.map(X=>X.id===U?{...X,isEnabled:!X.isEnabled}:X)}))}function $(U){s(U);const H=document.querySelector(".MuiDialogContent-root");H&&(H.scrollTop=0)}function B(U,H){const X=Object.entries(I).find(([ye,me])=>me.id===U);if(X){const[ye,me]=X,Ne=me.label||ye,Te=me.intensities.find(nt=>nt.value===Number(H)),se=(Te==null?void 0:Te.label)||`Level ${Number(H)+1}`;return`${Ne} - ${se}`}return`Unknown Group - Level ${Number(H)+1}`}const G=(l=S.items)==null?void 0:l.map(({id:U,group_id:H,intensity:X,action:ye,tags:me,isEnabled:Ne=!0,isCustom:Te=!0})=>i.jsxs(le,{sx:{my:2},children:[i.jsx(ys,{title:ye,slotProps:{title:{variant:"body1"},subheader:{variant:"body2"},action:{"aria-label":d("customTiles.actions")}},subheader:B(H||"",X),action:i.jsxs(i.Fragment,{children:[i.jsx(st,{checked:!!Ne,onChange:()=>U!==void 0&&M(U),slotProps:{input:{"aria-label":d("customTiles.toggleTile")}}}),!!Te&&i.jsxs(i.Fragment,{children:[i.jsx(Z,{onClick:()=>U!==void 0&&$(U),"aria-label":d("customTiles.update"),children:i.jsx(Ns,{})}),i.jsx(Z,{onClick:()=>U!==void 0&&O(U),"aria-label":d("customTiles.delete"),children:i.jsx(sn,{})})]})]}),sx:{pb:0}}),i.jsx(Bh,{children:me==null?void 0:me.map(se=>i.jsx(te,{label:se==="default"?d("default"):se,sx:{m:.5}},se))})]},U));return i.jsxs(A,{children:[i.jsx(A,{children:e==null?void 0:e.map(U=>i.jsx(te,{label:U,sx:{m:.5},color:m===U?"primary":"default",onClick:()=>R(U)},U))}),i.jsx(A,{sx:{display:"flex",flexDirection:"column",gap:2,my:2,transition:"all 0.3s ease-in-out"},children:i.jsx(Pg,{gameMode:b,groupFilter:v,intensityFilter:_,groups:L,mappedGroups:n,dexieGroups:I,onGameModeChange:U=>{a({gameMode:U,groupName:"",intensity:""}),w(1)},onGroupChange:U=>{const H={...o,groupName:U,intensity:""};a(H),w(1)},onIntensityChange:U=>{a({...o,intensity:U==="all"?"":U.toString()}),w(1)}})}),i.jsxs(A,{sx:{position:"relative",minHeight:"200px"},children:[i.jsx(br,{in:j,timeout:300,children:i.jsx(A,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0)",zIndex:1,borderRadius:1},children:i.jsx(Ee,{})})}),i.jsx(A,{sx:{opacity:j?.3:1,transition:"opacity 0.3s ease-in-out",pointerEvents:j?"none":"auto"},children:((c=S.items)==null?void 0:c.length)===0?i.jsx(P,{variant:"body1",sx:{textAlign:"center",my:4},children:i.jsx(E,{i18nKey:"customTiles.noTilesFound",children:"No tiles found with the selected filters."})}):i.jsxs(i.Fragment,{children:[G,S.totalPages>1&&i.jsx(A,{sx:{display:"flex",justifyContent:"center",mt:3,mb:2},children:i.jsx(Oh,{count:S.totalPages,page:x,onChange:V,color:"primary"})}),i.jsx(P,{variant:"body2",sx:{textAlign:"center",mt:2,color:"text.secondary"},children:i.jsxs(E,{i18nKey:"customTiles.showingTiles",values:{shown:((u=S.items)==null?void 0:u.length)||0,total:S.total},children:["Showing ",{shown:((h=S.items)==null?void 0:h.length)||0}," of ",{total:S.total}," tiles"]})})]})})]})]})}function Nc({boardUpdated:e,setOpen:t,open:n=!1}){const{t:s,i18n:r}=F(),o=Ie(),a=Ie("md"),[l,c]=p.useState({message:"",type:"info"}),[u,h]=p.useState("ctAdd"),[d,f]=p.useState(null),[g,m]=p.useState(0),[y,b]=p.useState({online:{},local:{},solo:{}}),[v,_]=p.useState(!0),[x,w]=p.useState({gameMode:"online",groupName:"",intensity:""}),j=p.useCallback(()=>{m(I=>I+1)},[]),C=I=>(N,D)=>{h(D?I:"")};p.useEffect(()=>{async function I(){_(!0);try{const[N,D,R]=await Promise.all([gn(r.resolvedLanguage,"online"),gn(r.resolvedLanguage,"local"),gn(r.resolvedLanguage,"solo")]);b({online:N,local:D,solo:R})}catch(N){console.error("Error loading game mode actions:",N)}finally{_(!1)}}I()},[r.resolvedLanguage]);const S=Je(()=>qe({locale:r.resolvedLanguage})),T=p.useMemo(()=>S?Array.isArray(S)?S.map(({tags:I})=>I).flat().filter((I,N,D)=>I&&D.indexOf(I)===N).sort():[]:[],[S]),L=p.useCallback(async I=>{await Vf(I),e(),j()},[e,j]);if(!S||v)return null;const k=()=>{const I=i.jsxs(i.Fragment,{children:[i.jsx(ug,{expanded:u,handleChange:C}),i.jsx(cg,{setSubmitMessage:c,boardUpdated:()=>{e(),j()},customTiles:S,mappedGroups:y,expanded:u,handleChange:C,tagList:T,updateTileId:d,setUpdateTileId:f,sharedFilters:x,setSharedFilters:w}),i.jsx(Tg,{expanded:u,handleChange:C,customTiles:S,mappedGroups:y,setSubmitMessage:c,bulkImport:L,onImportSuccess:j})]}),N=i.jsx(A,{children:i.jsx(Eg,{tagList:T,boardUpdated:()=>{e(),j()},mappedGroups:y,updateTile:D=>{f(D),h("ctAdd")},refreshTrigger:g,sharedFilters:x,setSharedFilters:w})});return a?i.jsxs(i.Fragment,{children:[I,N&&i.jsxs(i.Fragment,{children:[i.jsx(ce,{sx:{my:2}}),N]})]}):i.jsxs(q,{container:!0,spacing:2,children:[i.jsx(q,{size:{xs:12,md:6},children:I}),i.jsx(q,{size:{xs:12,md:6},children:N})]})};return i.jsxs(i.Fragment,{children:[i.jsxs(je,{fullScreen:o,open:n,onClose:()=>t(!1),maxWidth:a?"sm":"lg",fullWidth:!0,disableRestoreFocus:!0,children:[i.jsxs(Ce,{children:[i.jsx(E,{i18nKey:"manageTiles"}),i.jsx(Z,{"aria-label":s("close"),onClick:()=>t(!1),sx:{position:"absolute",right:8,top:8,color:I=>I.palette.grey[500]},children:i.jsx(Ar,{})})]}),i.jsx(_e,{children:k()})]}),i.jsx(gt,{open:!!l.message,close:()=>c({message:"",type:"info"}),type:l.type,children:l.message})]})}function Ig({formData:e,setFormData:t}){const{t:n}=F(),s=r=>{const o=r.target.value.trim();t({...e,roomBackgroundURL:o,roomUpdated:!0})};return i.jsx(J,{sx:{mt:2},label:n("roomBackgroundURL"),value:(e==null?void 0:e.roomBackgroundURL)||"",fullWidth:!0,onChange:s,helperText:n("supportedSites"),placeholder:n("roomBackgroundPlaceholder"),type:"url",inputMode:"url",autoComplete:"off",spellCheck:!1,autoCapitalize:"none"})}function Lg({formData:e,setFormData:t}){const{t:n}=F(),s={"1d4":2.5,"1d6":3.5,"2d4":5},r=e!=null&&e.roomTileCount?Math.floor(e.roomTileCount/s[e.roomDice||"1d6"]):16,o=Array.from({length:7},(a,l)=>(l+2)*10).map(a=>i.jsx(W,{value:a,children:a},a));return i.jsxs(A,{children:[i.jsx(P,{variant:"subtitle1",sx:{mb:2,fontWeight:"medium"},children:i.jsx(E,{i18nKey:"gameSpeed"})}),i.jsxs(A,{sx:{display:"flex",gap:2,alignItems:"flex-end",flexWrap:"wrap"},children:[i.jsxs(re,{sx:{minWidth:120,flex:1},children:[i.jsx(ue,{id:"diceRole-label",children:i.jsx(E,{i18nKey:"roomDice"})}),i.jsxs(oe,{labelId:"diceRole-label",id:"diceRole-select",value:(e==null?void 0:e.roomDice)||"1d4",label:n("roomDice"),onChange:a=>t({...e,roomDice:a.target.value,roomUpdated:!0}),children:[i.jsx(W,{value:"1d4",children:"1d4"}),i.jsx(W,{value:"1d6",children:"1d6"}),i.jsx(W,{value:"2d4",children:"2d4"})]})]}),i.jsxs(re,{sx:{minWidth:120,flex:1},children:[i.jsx(ue,{id:"tile-count-label",children:i.jsx(E,{i18nKey:"roomTileCount"})}),i.jsx(oe,{labelId:"tile-count-label",id:"tile-count-select",value:String((e==null?void 0:e.roomTileCount)||40),label:n("roomTileCount"),onChange:a=>t({...e,roomTileCount:Number(a.target.value),roomUpdated:!0}),children:o})]}),i.jsxs(A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:120},children:[i.jsx(P,{variant:"body2",color:"text.secondary",sx:{mb:1},children:i.jsx(E,{i18nKey:"averageRolls"})}),i.jsx(te,{label:r,color:"primary",variant:"outlined",sx:{minWidth:50,fontWeight:"bold"}})]})]})]})}function Mg({formData:e,setFormData:t}){const n=p.useCallback(()=>{t({...e,roomRealtime:!e.roomRealtime,roomUpdated:!0})},[e,t]);return i.jsxs(A,{children:[i.jsx(P,{variant:"subtitle1",sx:{mb:2,fontWeight:"medium"},children:i.jsx(E,{i18nKey:"playerListOptions"})}),i.jsx(A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs(be,{direction:"row",spacing:2,alignItems:"center",children:[i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[i.jsx(P,{variant:"body2",color:"text.secondary",children:i.jsx(E,{i18nKey:"realtime"})}),i.jsx(ve,{title:i.jsx(P,{variant:"subtitle2",children:i.jsx(E,{i18nKey:"realtimeTooltip"})}),arrow:!0,children:i.jsx(Ze,{sx:{fontSize:16,color:"text.secondary"}})})]}),i.jsx(Cn,{control:i.jsx(st,{checked:!!e.roomRealtime,onChange:n,inputProps:{"aria-label":Y("playerList")}}),label:"",sx:{margin:0}}),i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[i.jsx(P,{variant:"body2",color:"text.secondary",children:i.jsx(E,{i18nKey:"delayed"})}),i.jsx(ve,{title:i.jsx(P,{variant:"subtitle2",children:i.jsx(E,{i18nKey:"delayedTooltip"})}),arrow:!0,children:i.jsx(Ze,{sx:{fontSize:16,color:"text.secondary"}})})]})]})})]})}function Rg({formData:e,setFormData:t}){var n;const{id:s}=Le(),{t:r}=F(),o=h=>{let d;h.target.checked&&Q(s)?d=fc("123456789ABCDEFGHJKLMNPQRSTUVWXYZ",5)():s&&h.target.checked&&!Q(s)?d=s:d="PUBLIC",t({...e,room:d.toUpperCase(),gameMode:Q(d)?"online":e.gameMode})},a=p.useCallback(h=>{t({...e,room:h.currentTarget.value,boardUpdated:!0})},[e,t]),l=p.useCallback(h=>{h.key==="Enter"&&t({...e,room:h.currentTarget.value,boardUpdated:!0})},[e,t]),c=p.useCallback(h=>{const d=h.target.value.toUpperCase();h.target.value=d},[]),u=!Q(e.room);return i.jsxs(i.Fragment,{children:[i.jsxs(be,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",sx:{width:"100%"},children:[i.jsx(P,{children:i.jsx(E,{i18nKey:"public"})}),i.jsx(st,{id:"showPrivate",checked:u,onChange:o,slotProps:{input:{"aria-label":r("room")}}}),i.jsx(P,{children:i.jsx(E,{i18nKey:"private"})}),i.jsx(ve,{title:i.jsx(P,{variant:"subtitle2",children:i.jsx(E,{i18nKey:"privateOptions"})}),arrow:!0,children:i.jsx(Ze,{sx:{fontSize:15}})})]}),u&&i.jsx(J,{fullWidth:!0,id:"privateRoom",label:r("privateRoom"),defaultValue:(n=e.room)==null?void 0:n.toUpperCase(),margin:"normal",onBlur:a,onKeyDown:l,onChange:c,inputProps:{style:{textTransform:"uppercase"}}})]})}const $g=Ls(he)(`
  &:last-child {
    padding-bottom: 8px;
  }
`);function Dg({player:e,index:t,isActive:n,canEdit:s=!0,canDelete:r=!0,onEdit:o,onDelete:a,onRoleChange:l}){const{t:c}=F(),[u,h]=p.useState(null),[d,f]=p.useState(null),g=C=>{h(C.currentTarget)},m=()=>{h(null)},y=C=>{C.stopPropagation(),f(C.currentTarget)},b=()=>{f(null)},v=()=>{m(),o==null||o(e)},_=()=>{m(),a==null||a(e.id)},x=C=>{b(),l==null||l(e.id,C)},w=C=>C.split(" ").map(S=>S.charAt(0)).join("").toUpperCase().slice(0,2)||"P",j=C=>{switch(C){case"dom":return"primary";case"sub":return"secondary";case"vers":return"default";default:return"default"}};return i.jsxs(le,{sx:{border:n?"2px solid":"1px solid",borderColor:n?"primary.main":"divider",bgcolor:n?"action.selected":"background.paper",transition:"all 0.2s ease-in-out","&:hover":{borderColor:"primary.main",elevation:2}},children:[i.jsx($g,{children:i.jsxs(A,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[i.jsx(vr,{sx:{bgcolor:n?"primary.main":"grey.500",marginTop:.5,width:24,height:24,fontWeight:"bold"},children:w(e.name)}),i.jsx(A,{sx:{flexGrow:1,minWidth:0},children:i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[i.jsx(P,{variant:"h6",component:"h3",sx:{fontWeight:n?600:500,color:n?"primary.main":"text.primary",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flexGrow:1},children:e.name||c("localPlayers.defaultPlayerName",{number:t+1})}),i.jsx(te,{label:c(`roles.${e.role}`),size:"small",variant:"outlined",color:j(e.role),onClick:s?y:void 0,sx:{cursor:s?"pointer":"default","&:hover":s?{bgcolor:"action.hover"}:{}}}),n&&i.jsx(te,{label:c("localPlayers.currentPlayer"),size:"small",color:"primary",icon:i.jsx(vm,{})})]})}),(s||r)&&i.jsx(Z,{size:"small",onClick:g,"aria-label":c("localPlayers.playerActions",{name:e.name}),children:i.jsx(cc,{})})]})}),i.jsxs(gs,{anchorEl:u,open:!!u,onClose:m,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[s&&i.jsxs(W,{onClick:v,children:[i.jsx(We,{children:i.jsx(Ns,{fontSize:"small"})}),i.jsx(Ae,{children:c("localPlayers.editPlayer")})]}),r&&i.jsxs(W,{onClick:_,sx:{color:"error.main"},children:[i.jsx(We,{children:i.jsx(sn,{fontSize:"small",sx:{color:"error.main"}})}),i.jsx(Ae,{children:c("localPlayers.deletePlayer")})]})]}),i.jsx(gs,{anchorEl:d,open:!!d,onClose:b,transformOrigin:{horizontal:"left",vertical:"top"},anchorOrigin:{horizontal:"left",vertical:"bottom"},children:["dom","sub","vers"].map(C=>i.jsx(W,{onClick:()=>x(C),selected:e.role===C,children:i.jsx(te,{label:c(`roles.${C}`),size:"small",variant:e.role===C?"filled":"outlined",color:j(C)})},C))})]})}const Bc=[{id:"tritone",name:"Tri-tone",frequency:1318,type:"sine",duration:400,category:"classic",frequencies:[1318,1568,1175]},{id:"rebound",name:"Rebound",frequency:800,type:"triangle",duration:350,category:"classic"},{id:"chime",name:"Chime",frequency:1e3,type:"sine",duration:500,category:"classic",frequencies:[1e3,1200,1400]},{id:"boop",name:"Boop",frequency:600,type:"sine",duration:150,category:"classic"},{id:"breeze",name:"Breeze",frequency:400,type:"triangle",duration:600,category:"classic",frequencies:[400,500,600,500]},{id:"pong",name:"Pong",frequency:1100,type:"square",duration:200,category:"classic"},{id:"glass",name:"Glass",frequency:1800,type:"sine",duration:300,category:"classic",frequencies:[1800,1600,1400]},{id:"funk",name:"Funk",frequency:220,type:"sawtooth",duration:400,category:"classic"}],Oc=[{id:"c4",name:"C Note",frequency:261.63,type:"sine",duration:300,category:"musical"},{id:"d4",name:"D Note",frequency:293.66,type:"sine",duration:300,category:"musical"},{id:"e4",name:"E Note",frequency:329.63,type:"sine",duration:300,category:"musical"},{id:"f4",name:"F Note",frequency:349.23,type:"sine",duration:300,category:"musical"},{id:"g4",name:"G Note",frequency:392,type:"sine",duration:300,category:"musical"},{id:"ascending",name:"Ascending",frequency:261.63,type:"triangle",duration:800,category:"musical",frequencies:[261.63,293.66,329.63,349.23]},{id:"descending",name:"Descending",frequency:523.25,type:"triangle",duration:800,category:"musical",frequencies:[523.25,466.16,415.3,369.99]},{id:"chord",name:"Major Chord",frequency:261.63,type:"sine",duration:600,category:"musical",frequencies:[261.63,329.63,392]},{id:"arpeggio",name:"Arpeggio",frequency:261.63,type:"triangle",duration:1e3,category:"musical",frequencies:[261.63,329.63,392,523.25]}],Fc=[{id:"bell",name:"Bell",frequency:800,type:"sine",duration:200,category:"notification"},{id:"ding",name:"Ding",frequency:1200,type:"square",duration:150,category:"notification"},{id:"chirp",name:"Chirp",frequency:1500,type:"sine",duration:80,category:"notification"},{id:"beep",name:"Beep",frequency:600,type:"sine",duration:100,category:"notification"},{id:"tick",name:"Tick",frequency:2e3,type:"square",duration:50,category:"notification"},{id:"ping",name:"Ping",frequency:1800,type:"triangle",duration:120,category:"notification"},{id:"bubble",name:"Bubble",frequency:800,type:"sine",duration:200,category:"notification",frequencies:[800,1200]},{id:"pop",name:"Pop",frequency:1e3,type:"square",duration:80,category:"notification"}],Vc=[{id:"buzz",name:"Buzz",frequency:400,type:"sawtooth",duration:250,category:"game"},{id:"whoosh",name:"Whoosh",frequency:200,type:"sawtooth",duration:500,category:"game",frequencies:[200,150,100]},{id:"bloop",name:"Bloop",frequency:300,type:"sine",duration:400,category:"game",frequencies:[300,400,350]},{id:"zap",name:"Zap",frequency:1500,type:"square",duration:120,category:"game",frequencies:[1500,1e3,500]},{id:"bounce",name:"Bounce",frequency:500,type:"triangle",duration:300,category:"game",frequencies:[500,700,600,800]},{id:"powerup",name:"Power Up",frequency:440,type:"square",duration:600,category:"game",frequencies:[440,523,659,784]},{id:"coin",name:"Coin",frequency:1046,type:"square",duration:300,category:"game",frequencies:[1046,1318]},{id:"fanfare",name:"Fanfare",frequency:523,type:"triangle",duration:1200,category:"game",frequencies:[523,659,784,1046]}],Ng=[{id:"classic",name:"Classic System Alerts",sounds:Bc},{id:"musical",name:"Musical Notes & Melodies",sounds:Oc},{id:"notification",name:"Notification Alerts",sounds:Fc},{id:"game",name:"Game & Action Sounds",sounds:Vc}],Ni=[...Bc,...Oc,...Fc,...Vc];async function zc(e){try{if(!e||!e.frequency||!e.type||!e.duration)return!1;const t=window.AudioContext||window.webkitAudioContext;if(!t)return!1;const n=new t;if(e.frequencies&&e.frequencies.length>1)return Bg(n,e);const s=n.createOscillator(),r=n.createGain();return s.connect(r),r.connect(n.destination),s.frequency.value=e.frequency,s.type=e.type,r.gain.setValueAtTime?(r.gain.setValueAtTime(.3,n.currentTime),r.gain.exponentialRampToValueAtTime(.01,n.currentTime+e.duration/1e3)):r.gain.value=.3,s.start(),s.stop(n.currentTime+e.duration/1e3),setTimeout(()=>{n.close()},e.duration+100),!0}catch(t){return console.warn("Sound playback failed:",t),!1}}async function Bg(e,t){try{const n=t.frequencies,s=t.duration/n.length,r=e.createGain();return r.connect(e.destination),r.gain.setValueAtTime?r.gain.setValueAtTime(.3,e.currentTime):r.gain.value=.3,n.forEach((o,a)=>{const l=e.createOscillator(),c=e.createGain();l.connect(c),c.connect(r),l.frequency.value=o,l.type=t.type;const u=e.currentTime+a*s/1e3,h=u+s/1e3;c.gain.setValueAtTime?(c.gain.setValueAtTime(1,u),c.gain.exponentialRampToValueAtTime(.01,h)):c.gain.value=1,l.start(u),l.stop(h)}),setTimeout(()=>{e.close()},t.duration+100),!0}catch(n){return console.warn("Melody playback failed:",n),!1}}function Yn(){return Ni[Math.floor(Math.random()*Ni.length)]}function Uc(e){return e&&Ni.find(t=>t.id===e)||null}function Og({selectedSoundId:e,onSoundChange:t,label:n="Turn Sound"}){const s=async()=>{if(!e)return;const o=Uc(e);if(o)try{await zc(o)||console.error("Failed to play sound")}catch(a){console.error("Failed to play sound:",a)}},r=o=>{t(o.target.value)};return i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1,py:1},children:[i.jsxs(re,{fullWidth:!0,size:"small",children:[i.jsx(ue,{id:"sound-select-label",children:n}),i.jsxs(oe,{labelId:"sound-select-label",value:e||"",label:n,onChange:r,children:[i.jsx(W,{value:"",children:i.jsxs(A,{display:"flex",alignItems:"center",gap:1,children:[i.jsx(wm,{fontSize:"small"}),"No sound"]})}),Ng.map(o=>[i.jsx(Fh,{sx:{fontWeight:"bold"},children:o.name},`header-${o.id}`),...o.sounds.map(a=>i.jsx(W,{value:a.id,sx:{pl:3},children:a.name},a.id))])]})]}),i.jsx(ve,{title:"Play sample",children:i.jsx(Z,{onClick:s,color:"primary",disabled:!e,size:"small",children:i.jsx(Un,{})})})]})}function Fg({open:e,player:t,existingPlayers:n,onSubmit:s,onCancel:r}){const{t:o}=F(),[a,l]=p.useState({name:"",role:"vers",sound:Yn().id}),[c,u]=p.useState({}),[h,d]=p.useState(!1);p.useEffect(()=>{l(t?{name:t.name,role:t.role,sound:t.sound||Yn().id}:{name:"",role:"vers",sound:Yn().id}),u({})},[t,e]);const f=p.useCallback(()=>{const j={},C=a.name.trim();return C?C.length<2?j.name=o("localPlayers.form.errors.nameTooShort"):C.length>20?j.name=o("localPlayers.form.errors.nameTooLong"):n.some(T=>T.id!==(t==null?void 0:t.id)&&T.name.toLowerCase()===C.toLowerCase())&&(j.name=o("localPlayers.form.errors.nameDuplicate")):j.name=o("localPlayers.form.errors.nameRequired"),(!a.role||!["dom","sub","vers"].includes(a.role))&&(j.role=o("localPlayers.form.errors.roleRequired")),u(j),Object.keys(j).length===0},[a,n,t,o]),g=p.useCallback(j=>{const C=j.target.value;l(S=>({...S,name:C})),c.name&&u(S=>({...S,name:void 0}))},[c.name]),m=p.useCallback(j=>{const C=j.target.value;l(S=>({...S,role:C})),c.role&&u(S=>({...S,role:void 0}))},[c.role]),y=p.useCallback(j=>{l(C=>({...C,sound:j}))},[]),b=p.useCallback(async()=>{if(f()){d(!0);try{const j={name:a.name.trim(),role:a.role,sound:a.sound};await s(j)}catch(j){console.error("Error submitting player form:",j)}finally{d(!1)}}},[a,f,s]),v=p.useCallback(()=>{l({name:"",role:"vers",sound:Yn().id}),u({}),r()},[r]),_=p.useCallback(j=>j.split(" ").map(C=>C.charAt(0)).join("").toUpperCase().slice(0,2)||"P",[]),x=j=>{switch(j){case"dom":return"primary";case"sub":return"secondary";case"vers":return"default";default:return"default"}},w=!!t;return i.jsxs(je,{open:e,onClose:v,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[i.jsx(Ce,{children:o(w?"localPlayers.form.editPlayerTitle":"localPlayers.form.addPlayerTitle")}),i.jsxs(_e,{children:[i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2,mb:3,p:2,bgcolor:"action.hover",borderRadius:1},children:[i.jsx(vr,{sx:{bgcolor:"primary.main",width:56,height:56,fontSize:"1.5rem",fontWeight:"bold"},children:_(a.name||"P")}),i.jsxs(A,{sx:{direction:"row"},children:[i.jsx(P,{variant:"h6",children:a.name||o("localPlayers.form.previewName")}),i.jsx(A,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:i.jsx(te,{label:o(`roles.${a.role}`),size:"small",color:x(a.role),variant:"outlined"})})]})]}),i.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:3},children:[i.jsx(J,{label:o("localPlayers.form.nameLabel"),value:a.name,onChange:g,error:!!c.name,helperText:c.name||o("localPlayers.form.nameHelper"),placeholder:o("localPlayers.form.namePlaceholder"),fullWidth:!0,autoFocus:!w,inputProps:{maxLength:20}}),i.jsxs(re,{fullWidth:!0,error:!!c.role,children:[i.jsx(ue,{children:o("localPlayers.form.roleLabel")}),i.jsxs(oe,{value:a.role,onChange:m,label:o("localPlayers.form.roleLabel"),children:[i.jsx(W,{value:"dom",children:i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.jsx(te,{label:o("roles.dom"),size:"small",color:"primary",variant:"outlined"}),i.jsx(P,{variant:"body2",color:"text.secondary",children:o("localPlayers.form.roleDescriptions.dom")})]})}),i.jsx(W,{value:"sub",children:i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.jsx(te,{label:o("roles.sub"),size:"small",color:"secondary",variant:"outlined"}),i.jsx(P,{variant:"body2",color:"text.secondary",children:o("localPlayers.form.roleDescriptions.sub")})]})}),i.jsx(W,{value:"vers",children:i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.jsx(te,{label:o("roles.vers"),size:"small",color:"default",variant:"outlined"}),i.jsx(P,{variant:"body2",color:"text.secondary",children:o("localPlayers.form.roleDescriptions.vers")})]})})]}),c.role&&i.jsx(P,{variant:"caption",color:"error",sx:{mt:1,ml:1.5},children:c.role})]}),i.jsx(Og,{selectedSoundId:a.sound,onSoundChange:y,label:o("localPlayers.form.soundLabel","Turn Sound")}),i.jsx(fe,{severity:"info",sx:{mt:1},children:i.jsx(P,{variant:"body2",children:o("localPlayers.form.helpText")})})]})]}),i.jsxs(Lt,{sx:{p:3,pt:1},children:[i.jsx(z,{onClick:v,disabled:h,children:o("cancel")}),i.jsx(z,{onClick:b,variant:"contained",disabled:h||!a.name.trim(),children:o(h?"localPlayers.form.saving":w?"localPlayers.form.saveChanges":"localPlayers.form.addPlayer")})]})]})}function Gc({roomId:e,isPrivateRoom:t,onComplete:n,onCancel:s,initialPlayers:r=[],initialSettings:o}){const{t:a}=F();console.debug("Setting up local players for room:",e);const[l,c]=p.useState(r),[u,h]=p.useState(!1),[d,f]=p.useState(null),[g,m]=p.useState(!1),[y,b]=p.useState(!1),[v,_]=p.useState(null),[x]=p.useState(o||{showTurnTransitions:!0,enableTurnSounds:!0,showPlayerAvatars:!0}),w=p.useCallback(()=>{const O=l.length>=2&&l.length<=4,M=l.every(G=>G.name.trim().length>0),$=new Set(l.map(G=>G.name.toLowerCase())).size===l.length,B=O&&M&&$;return h(B),l.length<2?f(a("localPlayers.errors.minimumPlayers")):l.length>4?f(a("localPlayers.errors.maximumPlayers")):f(M?$?null:a("localPlayers.errors.duplicateNames"):a("localPlayers.errors.emptyNames")),B},[l,a]);p.useEffect(()=>{r.length>0&&c(r)},[]),p.useEffect(()=>{w()},[w]);const j=p.useCallback(()=>`local_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,[]),C=p.useCallback(()=>a("localPlayers.defaultPlayerName",{number:l.length+1}),[l.length,a]),S=p.useCallback(()=>{l.length>=4||(_(null),b(!0))},[l.length]),T=p.useCallback(O=>{c(M=>M.filter(B=>B.id!==O).map((B,G)=>({...B,order:G,isActive:G===0})))},[]),L=p.useCallback((O,M)=>{c($=>$.map(B=>B.id===O?{...B,...M}:B))},[]),k=p.useCallback((O,M)=>{L(O,{role:M})},[L]),I=p.useCallback(O=>{_(O),b(!0)},[]),N=p.useCallback(async O=>{if(v)L(v.id,O);else{const M={id:j(),name:O.name||C(),role:O.role||"vers",order:l.length,isActive:l.length===0,deviceId:"current_device",location:0,isFinished:!1,sound:O.sound};c($=>[...$,M])}b(!1),_(null)},[v,L,j,C,l.length]),D=p.useCallback(()=>{b(!1),_(null)},[]),R=p.useCallback(async()=>{if(w()){m(!0),f(null);try{await n(l,x)}catch(O){f(O instanceof Error?O.message:a("localPlayers.errors.sessionCreation"))}finally{m(!1)}}},[l,x,w,n,a]),V=p.useCallback(()=>{s()},[s]);return t?i.jsxs(le,{children:[i.jsx(ys,{title:i.jsx(P,{variant:"h5",component:"h2",children:i.jsx(E,{i18nKey:"localPlayers.setupTitle"})}),subheader:i.jsx(P,{variant:"body2",color:"text.secondary",children:i.jsx(E,{i18nKey:"localPlayers.setupSubtitle"})})}),i.jsxs(he,{children:[d&&i.jsx(fe,{severity:"error",sx:{mb:2},children:d}),i.jsxs(A,{sx:{mb:3},children:[i.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[i.jsx(P,{variant:"h6",children:i.jsx(E,{i18nKey:"localPlayers.playersTitle"})}),i.jsx(P,{variant:"body2",color:"text.secondary",children:a("localPlayers.playersCount",{count:l.length})})]}),l.length===0?i.jsxs(A,{sx:{textAlign:"center",py:4,border:"2px dashed",borderColor:"divider",borderRadius:1,bgcolor:"action.hover"},children:[i.jsx(P,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:i.jsx(E,{i18nKey:"localPlayers.noPlayersYet"})}),i.jsx(z,{variant:"contained",startIcon:i.jsx(ws,{}),onClick:S,children:i.jsx(E,{i18nKey:"localPlayers.addFirstPlayer"})})]}):i.jsxs(i.Fragment,{children:[i.jsx(A,{sx:{display:"flex",flexDirection:"column",gap:2},children:l.map((O,M)=>i.jsx(Dg,{player:O,index:M,isActive:O.isActive,canEdit:!0,canDelete:l.length>1,onEdit:I,onDelete:T,onRoleChange:k},O.id))}),l.length<4&&i.jsx(A,{sx:{display:"flex",justifyContent:"center",mt:2},children:i.jsx(ql,{size:"small",color:"primary",onClick:S,"aria-label":"Add player",children:i.jsx(ws,{})})})]})]}),i.jsxs(A,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[i.jsx(z,{variant:"outlined",onClick:V,disabled:g,children:i.jsx(E,{i18nKey:"cancel"})}),i.jsx(z,{variant:"contained",onClick:R,disabled:!u||g,children:g?i.jsx(E,{i18nKey:"localPlayers.creatingSession"}):i.jsx(E,{i18nKey:"localPlayers.startSession"})})]})]}),i.jsx(Fg,{open:y,player:v,existingPlayers:l,onSubmit:N,onCancel:D})]}):i.jsx(le,{children:i.jsx(he,{children:i.jsx(fe,{severity:"warning",children:i.jsx(P,{children:i.jsx(E,{i18nKey:"localPlayers.privateRoomRequired"})})})})})}function Vg({roomId:e="PRIVATE",isPrivateRoom:t=!0}){const{t:n}=F(),{localPlayers:s,hasLocalPlayers:r,session:o,sessionSettings:a,clearLocalSession:l,updateSettings:c,createLocalSession:u}=rn(),[h,d]=p.useState(!1),[f,g]=p.useState(null),m=p.useCallback(()=>{d(!0),g(null)},[]),y=p.useCallback(()=>{d(!1),g(null)},[]),b=p.useCallback(async(x,w)=>{try{await u(e,x,w),d(!1),g(null)}catch(j){g(j instanceof Error?j.message:"Failed to save local player configuration")}},[e,u]),v=p.useCallback(async()=>{try{await l(),g(null)}catch(x){g(x instanceof Error?x.message:"Failed to clear local session")}},[l]),_=p.useCallback(async(x,w)=>{if(a)try{const j={...a,[x]:w};await c(j),g(null)}catch(j){g(j instanceof Error?j.message:"Failed to update settings")}},[a,c]);return h?i.jsxs(A,{children:[f&&i.jsx(fe,{severity:"error",sx:{mb:2},children:f}),i.jsx(Gc,{roomId:e,isPrivateRoom:t,onComplete:b,onCancel:y,initialPlayers:s,initialSettings:a})]}):i.jsxs(A,{children:[f&&i.jsx(fe,{severity:"error",sx:{mb:2},children:f}),r?i.jsxs(A,{children:[i.jsxs(A,{sx:{mb:3},children:[i.jsx(A,{sx:{display:"flex",flexDirection:"column",gap:1,mb:2},children:s.map(x=>i.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:1,borderRadius:1,bgcolor:x.isActive?"primary.50":"background.default",border:x.isActive?"1px solid":"1px solid transparent",borderColor:x.isActive?"primary.main":"transparent"},children:[i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2},children:[i.jsxs(P,{variant:"body2",color:"text.secondary",children:["#",x.order+1]}),i.jsx(P,{variant:"body1",fontWeight:x.isActive?"bold":"normal",children:x.name}),i.jsx(te,{label:n(`roles.${x.role}`),size:"small",variant:"outlined"})]}),x.isActive&&i.jsx(te,{label:n("localPlayerSettings.players.currentTurn"),color:"primary",size:"small"})]},x.id))}),i.jsxs(A,{sx:{display:"flex",gap:1},children:[i.jsx(z,{variant:"outlined",startIcon:i.jsx(Ns,{}),onClick:m,size:"small",children:i.jsx(E,{i18nKey:"localPlayerSettings.session.editButton"})}),i.jsx(z,{variant:"outlined",color:"error",startIcon:i.jsx(dc,{}),onClick:v,size:"small",children:i.jsx(E,{i18nKey:"localPlayerSettings.session.clearButton"})})]})]}),(o==null?void 0:o.settings)&&i.jsxs(A,{sx:{mt:3,p:2,borderRadius:1,bgcolor:"action.hover"},children:[i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[i.jsx(Bs,{sx:{color:"text.secondary"}}),i.jsx(P,{variant:"subtitle1",component:"h4",children:i.jsx(E,{i18nKey:"localPlayerSettings.settings.title"})})]}),i.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[i.jsx(Cn,{control:i.jsx(st,{checked:o.settings.showTurnTransitions,onChange:x=>_("showTurnTransitions",x.target.checked)}),label:n("localPlayerSettings.settings.showTurnTransitions")}),i.jsx(Cn,{control:i.jsx(st,{checked:o.settings.enableTurnSounds,onChange:x=>_("enableTurnSounds",x.target.checked)}),label:n("localPlayerSettings.settings.playTurnSounds")})]})]})]}):i.jsxs(A,{sx:{textAlign:"center",py:2},children:[i.jsx(hc,{sx:{fontSize:48,color:"text.secondary",mb:2}}),i.jsx(P,{variant:"body1",color:"text.secondary",paragraph:!0,children:i.jsx(E,{i18nKey:"localPlayerSettings.noPlayers.description"})}),i.jsx(z,{variant:"contained",startIcon:i.jsx(Un,{}),onClick:m,size:"large",children:i.jsx(E,{i18nKey:"localPlayerSettings.noPlayers.setupButton"})})]})]})}function zg({formData:e,setFormData:t}){const{t:n}=F();return i.jsxs(A,{sx:{p:2},children:[i.jsx(le,{variant:"outlined",sx:{mb:3},children:i.jsxs(he,{children:[i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[i.jsx(jm,{sx:{color:"primary.main"}}),i.jsx(P,{variant:"h6",component:"h3",children:n("roomType")})]}),i.jsx(Rg,{formData:e,setFormData:t})]})}),!Q(e.room)&&i.jsxs(i.Fragment,{children:[i.jsx(le,{variant:"outlined",sx:{mb:3},children:i.jsxs(he,{children:[i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[i.jsx(hc,{sx:{color:"primary.main"}}),i.jsx(P,{variant:"h6",component:"h3",children:n("localPlayerSettings.title")})]}),i.jsx(Vg,{roomId:e.room,isPrivateRoom:!Q(e.room)})]})}),i.jsx(le,{variant:"outlined",sx:{mb:3},children:i.jsxs(he,{children:[i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[i.jsx(Pr,{sx:{color:"primary.main"}}),i.jsx(P,{variant:"h6",component:"h3",children:n("gameConfiguration")})]}),i.jsx(A,{sx:{mb:3},children:i.jsx(Lg,{formData:e,setFormData:t})}),i.jsx(A,{sx:{p:2,borderRadius:1,bgcolor:"action.hover"},children:i.jsx(Mg,{formData:e,setFormData:t})})]})}),i.jsx(le,{variant:"outlined",sx:{mb:3},children:i.jsxs(he,{children:[i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[i.jsx(_m,{sx:{color:"primary.main"}}),i.jsx(P,{variant:"h6",component:"h3",children:n("visualSettings")})]}),i.jsx(Ig,{formData:e,setFormData:t})]})})]})]})}function xn({children:e,value:t,index:n,style:s,...r}){return i.jsx("div",{role:"tabpanel",hidden:t!==n,id:`simple-tabpanel-${n}`,"aria-labelledby":`simple-tab-${n}`,style:{height:"100%",overflow:"hidden"},...r,children:t===n&&i.jsx(A,{sx:{p:3,height:"100%",overflow:"auto",WebkitOverflowScrolling:"touch",...s},children:e})})}function Br(e={},t={}){const[n]=Me(),s={...e,...n,selectedActions:(n==null?void 0:n.selectedActions)||{},finishRange:(n==null?void 0:n.finishRange)||[30,70],...t},[r,o]=p.useState(s),{messages:a}=Mt(),[l,c]=p.useState(!1);return p.useEffect(()=>{const u=Yt(a,"room");if(u!=null&&u.settings)try{const h=JSON.parse(u.settings);o(d=>l?d.selectedActions&&Object.keys(d.selectedActions).length>0?{...d,...h,selectedActions:d.selectedActions}:{...d,...h}:(c(!0),{...d,...h}))}catch(h){console.error("Error parsing message settings:",h)}else l||c(!0)},[a,l]),[r,o]}const Wc=({levels:e})=>!!(e!=null&&e.length)&&e.some(t=>t>0);function Ug(e){return Object.values(e).some(Wc)}function Gg(e,t){const n=e.selectedActions||{};return Object.entries(n).reduce((s,[r,o])=>{var a;if(r in t){const l=(a=o==null?void 0:o.variation)!=null&&a.startsWith("append")?"withAppend":"withoutAppend";s[l][r]=o}return s},{withAppend:{},withoutAppend:{}})}function Wg(e){return Object.keys(e).length>0&&Object.values(e).some(Wc)}function Kg(e,t){const{withAppend:n,withoutAppend:s}=Gg(e,t);return Ug(s)?Q(e.room)&&!Se(e.gameMode)?"privateRequired":null:Wg(n)?"appendWithAction":"pickSomething"}function Or({closeDialog:e,initialTab:t=0,onOpenSetupWizard:n}){const{user:s}=De(),{t:r}=F(),[o,a]=Me(),[l,c]=p.useState(t),[u,h]=p.useState(null),[d,f]=p.useState(!1),[g,m]=Br(),y=Mr(),{isLoading:b,actionsList:v}=zs(g==null?void 0:g.gameMode,!0),_=(S,T)=>{c(T)},x=()=>a({...o,boardUpdated:!0}),w=p.useCallback(async S=>{S.preventDefault();const{displayName:T,...L}=g,k=Kg(L,v);return k?(h(r(k)),null):(await y(g,v),typeof e=="function"&&e(),null)},[g,v,r,h,y,e]),j=p.useCallback(S=>{m(T=>({...T,displayName:S.target.value}))},[m]),C=p.useCallback(S=>{S.key==="Enter"&&(m(T=>({...T,displayName:S.target.value})),w(S))},[w,m]);return!g.room||b?i.jsxs(A,{children:[i.jsxs(P,{variant:"h2",children:[i.jsx(E,{i18nKey:"loading"}),"..."]}),i.jsx(P,{variant:"body1",children:i.jsx(E,{i18nKey:"clearStorage"})})]}):i.jsxs(A,{component:"form",method:"post",onSubmit:w,className:"settings-box",children:[i.jsx(J,{fullWidth:!0,id:"displayName",label:r("displayName"),defaultValue:(s==null?void 0:s.displayName)||g.displayName||"",required:!0,autoFocus:!0,onBlur:j,onKeyDown:C,margin:"normal"}),i.jsx(A,{sx:{borderBottom:1,borderColor:"divider"},children:i.jsxs(xr,{value:l,onChange:_,"aria-label":r("gameSettings"),centered:!0,children:[i.jsx(kt,{label:r("gameboard"),...yn(0)}),i.jsx(kt,{label:r("room"),...yn(1)}),i.jsx(kt,{label:r("application"),...yn(2)})]})}),i.jsx(xn,{value:l,index:0,style:{p:0},children:i.jsx(sg,{formData:g,setFormData:m,actionsList:v})}),i.jsx(xn,{value:l,index:1,style:{p:0,pt:1},children:i.jsx(zg,{formData:g,setFormData:m})}),i.jsx(xn,{value:l,index:2,style:{p:0,pt:1},children:i.jsx(Zp,{formData:g,setFormData:m,boardUpdated:x})}),i.jsxs("div",{className:"flex-buttons",children:[i.jsxs("div",{className:"left-buttons",children:[n&&i.jsx(z,{variant:"outlined",type:"button",onClick:n,children:i.jsx(E,{i18nKey:"setupWizard.title"})}),l===0&&i.jsx(z,{variant:"outlined",type:"button",onClick:()=>f(!0),children:i.jsx(E,{i18nKey:"customTilesLabel",children:"Game Tiles"})})]}),i.jsx(z,{variant:"contained",type:"submit",children:i.jsx(E,{i18nKey:"update"})})]}),d&&i.jsx(Nc,{open:d,setOpen:f,boardUpdated:x,actionsList:v}),i.jsx(gt,{open:!!u,close:()=>h(null),children:u})]})}function qg({open:e,close:t,isMobile:n=!1}){const s=Ie(),r=n||s,[o]=Ms();return o.get("importBoard")?null:i.jsxs(je,{fullScreen:r,open:e,maxWidth:"md",children:[i.jsxs(Ce,{children:[i.jsx(E,{i18nKey:"gameSettingsHeading"}),typeof t=="function"&&i.jsx(Qe,{close:t})]}),i.jsx(_e,{children:i.jsx(Or,{closeDialog:typeof t=="function"?t:void 0,initialTab:2})})]})}const Hg=(e,t)=>{const{gameMode:n,isNaked:s}=e,r=Se(n);return r&&["foreplay","sex"].includes(t.type)||!r&&s&&["solo","foreplay"].includes(t.type)||!r&&!s&&["solo","sex"].includes(t.type)},Yg=e=>{const t={...e},n=e.selectedActions||{},s={};return Object.entries(n).forEach(([r,o])=>{Hg(e,o)||(s[r]=o)}),t.selectedActions=s,t},Kc=(e,t,n)=>{const s=e.selectedActions||{};return Object.entries(s).map(([r,o])=>{const a=t.find(l=>l.value===r);return o.type!==n||!a?null:r}).filter(r=>!!r)},Xg=(e,t,n)=>{const s={...e},r={...s.selectedActions};return Object.keys(r).forEach(o=>{r[o].type===t&&!n.includes(o)&&delete r[o]}),s.selectedActions=r,s},qc=(e,t,n)=>{n(s=>{const r=Xg(s,t,e),o={...r.selectedActions};return e.forEach(a=>{if(o[a])return;let l={type:t,levels:[1]};t==="consumption"&&(l={...l,variation:r.isAppend?"appendMost":"standalone"}),o[a]=l}),{...r,selectedActions:o}})},Hc=(e,t,n,s,r=null)=>{s(o=>{const a={...o.selectedActions||{}};return e.length===0?delete a[t]:a[t]={...a[t]||{},type:n,levels:e,...!!r&&{variation:r}},{...o,selectedActions:a}})},Jg=e=>!!(e&&Object.keys(e).some(t=>{const n=e[t];return(n==null?void 0:n.levels)&&n.levels.length>0&&(n==null?void 0:n.variation)!=="appendMost"}));function Zg(e,t){const{isMigrationInProgress:n,currentLanguageMigrated:s}=oc();return p.useMemo(()=>{if(t)return{isBroken:!1,hasNoActions:!1};if(n)return{isBroken:!1,hasNoActions:!1};if(!s)return{isBroken:!1,hasNoActions:!1};const r=!e||Object.keys(e).length===0;return{isBroken:r,hasNoActions:r}},[e,t,n,s])}function Et({children:e,justifyContent:t="space-evenly"}){return i.jsx(A,{sx:{mt:3,display:"flex",flexDirection:"row",justifyContent:t,alignItems:"center"},children:e})}function Qg({title:e,description:t,showNavigation:n=!0}){const{t:s}=F(),{wipeAllData:r}=Vs(),[o,a]=p.useState(!1),l=async()=>{a(!0);try{await r()}catch(c){a(!1)}};return i.jsxs(A,{children:[i.jsxs(A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:300,gap:3},children:[i.jsxs(fe,{severity:"error",sx:{maxWidth:500},children:[i.jsx(Vh,{children:e||s("noActionsAvailable")}),t||s("noActionsAvailableDescription")]}),i.jsx(P,{variant:"body2",color:"text.secondary",sx:{textAlign:"center"},children:s("errorPersistsCheckBack")}),i.jsx(z,{variant:"contained",onClick:l,disabled:o,startIcon:o?i.jsx(Ee,{size:20}):i.jsx(Sm,{}),size:"large",children:s("resetApp")})]}),n&&i.jsx(A,{sx:{mt:4},children:i.jsxs(Et,{children:[i.jsx(z,{disabled:!0,children:i.jsx(E,{i18nKey:"previous"})}),i.jsx(z,{variant:"contained",disabled:!0,size:"large",children:i.jsx(E,{i18nKey:"next"})})]})})]})}function Yc(){return i.jsxs(P,{variant:"h6",sx:{mt:2},children:[i.jsx(E,{i18nKey:"setIntensityLevel"}),i.jsx(ve,{title:i.jsx(P,{variant:"body1",children:i.jsx(E,{i18nKey:"intensityTooltip"})}),arrow:!0,sx:{ml:1},children:i.jsx(Ze,{sx:{ml:.5,fontSize:15}})})]})}function Xc({onChange:e,values:t,options:n,label:s}){const r=p.useCallback(a=>{var l;return(l=n==null?void 0:n.find(c=>c.value===a))==null?void 0:l.label},[n]),o=p.useCallback(a=>i.jsx(A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a==null?void 0:a.map(l=>i.jsx(te,{label:r(l)},l))}),[r]);return i.jsxs(re,{fullWidth:!0,children:[i.jsx(ue,{id:`${s}-label`,children:s}),i.jsx(oe,{labelId:`${s}-label`,id:`${s}`,multiple:!0,value:t,onChange:e,fullWidth:!0,input:i.jsx(zh,{label:s}),renderValue:o,children:n==null?void 0:n.map(({label:a,value:l})=>i.jsxs(W,{value:l,children:[i.jsx(Kl,{checked:t.includes(l)}),i.jsx(Ae,{primary:a})]},l))})]})}const ey=4,ty=e=>Se(e==null?void 0:e.gameMode)?"solo":e.isNaked?"sex":"foreplay";function ny({formData:e,setFormData:t,options:n,actionsList:s}){const r=ty(e),o=n(r),l=Kc(e,o,r)||[],c=u=>{const{value:h}=u.target,d=typeof h=="string"?h.split(","):h;d.length<=ey&&qc(d,r,t)};return i.jsxs(i.Fragment,{children:[i.jsx(P,{variant:"h6",sx:{my:2},children:i.jsx(E,{i18nKey:"pickActions"})}),i.jsx(Xc,{onChange:c,values:l,options:o,label:Y("actionsLabel")}),l.length>0&&i.jsxs(i.Fragment,{children:[i.jsx(Yc,{}),l.map(u=>{var h,d;const f=s[u],g=f!=null&&f.intensities?Object.keys(f.intensities).map(Number).filter(y=>y>0).sort((y,b)=>y-b):[1,2,3,4],m=((d=(h=e.selectedActions)==null?void 0:h[u])==null?void 0:d.levels)||[];return i.jsx(Rr,{actionName:u,actionLabel:(f==null?void 0:f.label)||u,selectedLevels:m,availableLevels:g,intensityNames:(f==null?void 0:f.intensities)||{},onChange:y=>Hc(y,u,r,t)},u)})]})]})}const sy=2;function iy({formData:e,setFormData:t,options:n,actionsList:s}){const r="consumption",o=n(r),l=Kc(e,o,r)||[],c=h=>{const{value:d}=h.target,f=typeof d=="string"?d.split(","):d;f.length<=sy&&qc(f,r,t)},u=(h,d)=>{const f=h.target.checked?"appendMost":"standalone",g=h.target.checked,m={...e.selectedActions};d.forEach(b=>{m[b]&&(m[b]={...m[b],variation:f})});const y={...e,isAppend:g,selectedActions:m};t(y)};return i.jsxs(i.Fragment,{children:[i.jsx(P,{variant:"h6",sx:{my:2},children:i.jsx(E,{i18nKey:"pickConsumptions"})}),i.jsx(Xc,{onChange:c,values:l,options:o,label:Y("consumables")}),!!l.length&&i.jsxs(i.Fragment,{children:[i.jsx(Yc,{}),l.map(h=>{var d,f;const g=s[h],m=g!=null&&g.intensities?Object.keys(g.intensities).map(Number).filter(b=>b>0).sort((b,v)=>b-v):[1,2,3,4],y=((f=(d=e.selectedActions)==null?void 0:d[h])==null?void 0:f.levels)||[];return i.jsx(Rr,{actionName:h,actionLabel:(g==null?void 0:g.label)||h,selectedLevels:y,availableLevels:m,intensityNames:(g==null?void 0:g.intensities)||{},onChange:b=>Hc(b,h,r,t,e.isAppend?"appendMost":"standalone")},h)}),i.jsx(P,{variant:"h6",sx:{mt:2},children:i.jsx(E,{i18nKey:"standaloneOrCombine"})}),i.jsx(Ic,{trueCondition:e.isAppend,onChange:h=>u(h,l),yesLabel:"combineWithActions"})]})]})}function ry({gameMode:e,onPresetSelect:t,selectedPreset:n,actionsList:s,showTitle:r=!0}){const{t:o}=F(),a={solo:[{id:"popperbating",name:o("presetPopperbating"),actions:["bating"],consumptions:["poppers"],intensities:{bating:2,poppers:1}},{id:"smoking-tits",name:o("presetSmokingTits"),actions:["titTorture"],consumptions:["vaping"],intensities:{titTorture:2,vaping:1}},{id:"exploration-solo",name:o("presetExplorationSolo"),actions:["throatTraining","buttPlay","titTorture","ballBusting"],consumptions:[],intensities:{throatTraining:1,buttPlay:1,titTorture:1,ballBusting:1}},{id:"ball-busting",name:o("presetBallBusting"),actions:["ballBusting","bating"],consumptions:["poppers"],intensities:{ballBusting:2,bating:2}}],foreplay:[{id:"romantic-start",name:o("presetRomanticStart"),actions:["kissing","stripping","confessions"],consumptions:["alcohol"],intensities:{kissing:2,stripping:1,confessions:1,alcohol:1}},{id:"degrading",name:o("presetDegrading"),actions:["humiliation","footPlay","confessions"],consumptions:["poppers"],intensities:{humiliation:2,footPlay:2,confessions:3,poppers:2}},{id:"body-worship",name:o("presetBodyWorship"),actions:["bodyWorship","kissing","footPlay"],consumptions:[],intensities:{bodyWorship:2,kissing:1,footPlay:2}},{id:"control-breath",name:o("presetControlBreath"),actions:["breathPlay","bondage","humiliation"],consumptions:["poppers"],intensities:{breathPlay:2,bondage:2,humiliation:1,poppers:1}}],sex:[{id:"gentle-sex",name:o("presetGentleSex"),actions:["throatTraining","bating","buttPlay"],consumptions:["alcohol"],intensities:{throatTraining:1,bating:1,buttPlay:1,alcohol:1}},{id:"fisting",name:o("presetFisting"),actions:["buttPlay"],consumptions:["poppers"],intensities:{buttPlay:4,poppers:4}},{id:"bdsm",name:o("presetBdsm"),actions:["pissPlay","throatTraining","spanking","titTorture"],consumptions:[],intensities:{pissPlay:2,throatTraining:2,spanking:2,titTorture:2}},{id:"breath-control",name:o("presetBreathControl"),actions:["bating"],consumptions:["gasMask"],intensities:{bating:2,gasMask:2}}]},l=a[e]||a.solo,c=u=>{t(u)};return i.jsxs(A,{children:[r&&i.jsx(P,{variant:"h6",gutterBottom:!0,children:o("quickStart")}),i.jsx(q,{container:!0,spacing:2,children:l.map(u=>i.jsx(q,{size:{xs:12,sm:6,lg:3},children:i.jsx(le,{sx:{cursor:"pointer",border:n===u.id?2:1,borderColor:n===u.id?"primary.main":"divider",backgroundColor:n===u.id?"primary.dark":"background.paper",transition:"all 0.2s ease-in-out",height:"100%",boxShadow:1,"&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:3,backgroundColor:n===u.id?"primary.dark":"action.hover"}},onClick:()=>c(u),children:i.jsxs(he,{sx:{p:2.5},children:[i.jsx(P,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:u.name}),i.jsxs(A,{children:[u.actions.map((h,d)=>{var f;return i.jsx(te,{label:((f=s[h])==null?void 0:f.label)||h,size:"small",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:"primary.main",color:"primary.main","&:hover":{backgroundColor:"primary.50"}}},`action-${d}`)}),u.consumptions.map((h,d)=>{var f;return i.jsx(te,{label:((f=s[h])==null?void 0:f.label)||h,size:"small",color:"secondary",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:"secondary.main",color:"secondary.main","&:hover":{backgroundColor:"secondary.50"}}},`consumption-${d}`)})]})]})})},u.id))})]})}function oy({formData:e,setFormData:t,nextStep:n,prevStep:s,actionsList:r,isActionsLoading:o=!1,isMigrationInProgress:a=!1}){const{t:l}=F(),{isBroken:c}=Zg(r,o),[u,h]=p.useState(""),[d,f]=p.useState(!1),[g,m]=p.useState(!0);function y(S){return Object.keys(r).filter(T=>{var L;return((L=r[T])==null?void 0:L.type)===S})}p.useEffect(()=>{const S=Yg(e);t(S)},[]),p.useEffect(()=>{e.selectedActions&&Object.keys(e.selectedActions).length>0&&(f(!0),m(!1))},[]);const b=S=>y(S).map(T=>{var L;return{value:T,label:(L=r[T])==null?void 0:L.label}});let v;e.gameMode==="online"?v="solo":e.gameMode==="local"&&!e.isNaked?v="foreplay":v="sex";const _=(S,T,L,k)=>{S.forEach(I=>{var N;if(r[I]){const D=((N=L.intensities)==null?void 0:N[I])||T,V=Object.keys(r[I].intensities||{}).filter(O=>O!=="None").length;k[I]={type:r[I].type,levels:Array.from({length:Math.min(D,V)},(O,M)=>M+1)}}})},x=S=>{h(S.id);const T={};_(S.actions,2,S,T),_(S.consumptions,1,S,T),t({...e,selectedActions:T}),m(!1),f(!0)},w=(S,T)=>{m(T),T&&f(!1)},j=(S,T)=>{f(T),T&&m(!1)},C=!Jg(e.selectedActions);return o?i.jsxs(A,{children:[i.jsxs(A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:300,gap:2},children:[i.jsx(Ee,{size:48}),i.jsx(P,{variant:"h6",color:"text.secondary",children:l(a?"migratingDefaultActions":"loadingAvailableActions")})]}),i.jsx(A,{sx:{mt:4},children:i.jsxs(Et,{children:[i.jsx(z,{disabled:!0,children:i.jsx(E,{i18nKey:"previous"})}),i.jsx(z,{variant:"contained",disabled:!0,size:"large",children:i.jsx(E,{i18nKey:"next"})})]})})]}):c?i.jsx(Qg,{}):i.jsxs(A,{children:[i.jsxs(fs,{expanded:g,onChange:w,sx:{backgroundColor:"background.default",borderTop:1,borderBottom:1,borderColor:"divider",borderLeft:"none",borderRight:"none",borderRadius:0,"&:before":{display:"none"},boxShadow:"none"},children:[i.jsx(ps,{expandIcon:i.jsx(Pn,{}),"aria-controls":"quickstart-content",id:"quickstart-header",sx:{backgroundColor:"background.default"},children:i.jsxs(be,{direction:"row",alignItems:"center",spacing:1,children:[i.jsx(Un,{}),i.jsx(P,{variant:"h6",children:l("quickStart")})]})}),i.jsx(ms,{sx:{pb:1},children:i.jsx(ry,{gameMode:v,onPresetSelect:x,selectedPreset:u,actionsList:r,showTitle:!1})})]}),i.jsxs(fs,{expanded:d,onChange:j,sx:{backgroundColor:"background.default",borderTop:g?"none":1,borderBottom:1,borderColor:"divider",borderLeft:"none",borderRight:"none",borderRadius:0,marginTop:g?-1:0,"&:before":{display:"none"},boxShadow:"none"},children:[i.jsx(ps,{expandIcon:i.jsx(Pn,{}),"aria-controls":"customization-content",id:"customization-header",sx:{backgroundColor:"background.default"},children:i.jsxs(be,{direction:"row",alignItems:"center",spacing:1,children:[i.jsx(Pr,{}),i.jsx(P,{variant:"h6",children:l("customizeActions")})]})}),i.jsxs(ms,{children:[i.jsx(P,{variant:"body2",color:"text.secondary",sx:{mb:2},children:l("customizeActionsDesc")}),i.jsx(ny,{formData:e,setFormData:t,options:b,actionsList:r}),i.jsx(ce,{sx:{my:3}}),i.jsx(iy,{formData:e,setFormData:t,options:b,actionsList:r})]})]}),i.jsx(A,{sx:{mt:4},children:i.jsxs(Et,{children:[i.jsx(z,{onClick:()=>s(Q(e.room)?3:1),children:i.jsx(E,{i18nKey:"previous"})}),i.jsx(z,{variant:"contained",disabled:C,onClick:n,size:"large",children:i.jsx(E,{i18nKey:"next"})})]})})]})}function ay({currentStep:e,isPublicRoom:t,onStepClick:n}){const{t:s}=F(),r=et(),o=gr(r.breakpoints.down("md")),a=t?[{label:String(s("roomSelection","Room Selection")),wizardStep:1},{label:String(s("actionsSelection","Actions Selection")),wizardStep:4},{label:String(s("finishSetup","Finish Setup")),wizardStep:5}]:[{label:String(s("roomSelection","Room Selection")),wizardStep:1},{label:String(s("localPlayersStep.title","Local Players")),wizardStep:2},{label:String(s("gameModeSelection","Game Mode Selection")),wizardStep:3},{label:String(s("actionsSelection","Actions Selection")),wizardStep:4},{label:String(s("finishSetup","Finish Setup")),wizardStep:5}],l=a.findIndex(u=>u.wizardStep===e),c=u=>{if(n){const h=a[u].wizardStep;n(h)}};return i.jsx(Uh,{activeStep:l,alternativeLabel:!o,orientation:"horizontal",sx:{...o&&{"& .MuiStepLabel-label":{display:"none"}}},children:a.map((u,h)=>i.jsx(Gh,{children:i.jsx(Wh,{onClick:()=>c(h),sx:{cursor:n?"pointer":"default","&:hover":n?{"& .MuiStepLabel-label":{color:"primary.main"}}:{}},children:o?null:u.label})},h))})}function ly({formData:e,setFormData:t,prevStep:n,actionsList:s,close:r}){const o=[100,100],a=[0,0],[l,c]=p.useState(Ho((e==null?void 0:e.finishRange)||[],a)),[u,h]=p.useState(!1),d=Mr(),{t:f}=F(),{id:g}=Le();p.useEffect(()=>{let b={...e,boardUpdated:!0};(!l||!Ho(e.finishRange||[],o))&&(b.finishRange=o),t(b)},[]);const m=async()=>{var b;h(!0);try{await d(e,s);const v=g!==void 0&&(g==null?void 0:g.toUpperCase())!==((b=e.room)==null?void 0:b.toUpperCase());typeof r=="function"&&(v?(Mo.flushSync(()=>{r()}),await new Promise(_=>requestAnimationFrame(()=>requestAnimationFrame(_)))):r())}catch(v){console.error("Error submitting settings:",v),typeof r=="function"&&Mo.flushSync(()=>{r()})}finally{h(!1)}},y=[{id:"noOrgasm",title:"noOrgasm",description:f("noOrgasmDesc"),isSelected:!l},{id:"yesOrgasm",title:"yesOrgasm",description:f("yesOrgasmDesc"),isSelected:l}];return i.jsxs(A,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[i.jsx(P,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:i.jsx(E,{i18nKey:"WillYouOrgasm"})}),i.jsx(q,{container:!0,spacing:2,sx:{mb:4},children:y.map(b=>i.jsx(q,{size:{xs:12,sm:6},children:i.jsx(le,{sx:{cursor:"pointer",border:b.isSelected?"3px solid":"1px solid",borderColor:b.isSelected?"primary.main":"divider",backgroundColor:b.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%",transform:b.isSelected?"scale(1.02)":"scale(1)","&:hover":{borderColor:"primary.main",transform:"scale(1.02)",boxShadow:2}},onClick:()=>{const v=b.id==="yesOrgasm";t({...e,finishRange:v?a:o}),c(v)},children:i.jsx(he,{sx:{p:3},children:i.jsxs(be,{spacing:1,alignItems:"center",textAlign:"center",children:[i.jsx(P,{variant:"h6",sx:{fontWeight:600},children:f(b.title)}),i.jsx(P,{variant:"body2",color:"text.secondary",children:b.description}),b.isSelected&&i.jsx(te,{label:f("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},b.id))}),i.jsx(A,{sx:{flexGrow:1}}),i.jsxs(Et,{children:[i.jsx(z,{onClick:n,disabled:u,children:i.jsx(E,{i18nKey:"previous"})}),i.jsx(z,{variant:"contained",onClick:m,disabled:u,startIcon:u?i.jsx(Ee,{size:20}):null,size:"large",sx:{px:4},children:i.jsx(E,{i18nKey:"buildGame"})})]})]})}function cy({formData:e,setFormData:t,nextStep:n,prevStep:s}){const{t:r}=F(),o=!!e.hasLocalPlayers;p.useEffect(()=>{o&&t(d=>({...d,gameMode:"local",roomRealtime:!1}))},[o,t]);const[a,l]=p.useState(!Se(e==null?void 0:e.gameMode)&&!o);p.useEffect(()=>{l(!Se(e==null?void 0:e.gameMode)&&!o)},[e==null?void 0:e.gameMode,o]);const c=[{id:"local",title:"yesInteracting",description:r("physicalInteractionDesc"),isSelected:!Se(e==null?void 0:e.gameMode)},{id:"online",title:"noInteracting",description:r("soloOnlinePlayDesc"),isSelected:Se(e==null?void 0:e.gameMode)}],u=[{value:"dom",label:"Dominant",description:r("dominantRoleDesc")},{value:"vers",label:"Switch",description:r("switchRoleDesc")},{value:"sub",label:"Submissive",description:r("submissiveRoleDesc")}],h=[{id:"clothed",title:"noNaked",description:r("foreplayClothedDesc"),isSelected:!e.isNaked},{id:"naked",title:"yesNaked",description:r("intimateNudityDesc"),isSelected:e.isNaked}];return i.jsxs(A,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[!o&&i.jsxs(i.Fragment,{children:[i.jsx(P,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:i.jsx(E,{i18nKey:"playingWithPeople"})}),i.jsx(q,{container:!0,spacing:2,sx:{mb:3},children:c.map(d=>i.jsx(q,{size:{xs:12,sm:6},children:i.jsx(le,{role:"button",tabIndex:0,sx:{cursor:"pointer",border:d.isSelected?"3px solid":"1px solid",borderColor:d.isSelected?"primary.main":"divider",backgroundColor:d.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>t({...e,gameMode:d.id==="local"?"local":"online",roomRealtime:d.id!=="local"}),onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),t({...e,gameMode:d.id==="local"?"local":"online",roomRealtime:d.id!=="local"}))},children:i.jsx(he,{sx:{p:3},children:i.jsxs(be,{spacing:1,alignItems:"center",textAlign:"center",children:[i.jsx(P,{variant:"h6",sx:{fontWeight:600},children:r(d.title)}),i.jsx(P,{variant:"body2",color:"text.secondary",children:d.description}),d.isSelected&&i.jsx(te,{label:r("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},d.id))})]}),o&&i.jsx(P,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:i.jsx(E,{i18nKey:"gameModeSelection"})}),a&&i.jsxs(A,{sx:{mb:3},children:[i.jsx(P,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:i.jsx(E,{i18nKey:"yourRole"})}),i.jsx(q,{container:!0,spacing:2,sx:{mb:3},children:u.map(d=>i.jsx(q,{size:{xs:12,sm:4},children:i.jsx(le,{role:"button",tabIndex:0,sx:{cursor:"pointer",border:e.role===d.value?"2px solid":"1px solid",borderColor:e.role===d.value?"primary.main":"divider",backgroundColor:e.role===d.value?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>t({...e,role:d.value}),onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),t({...e,role:d.value}))},children:i.jsx(he,{sx:{p:2.5},children:i.jsxs(be,{spacing:1,alignItems:"center",textAlign:"center",children:[i.jsx(P,{variant:"subtitle1",sx:{fontWeight:600},children:r(d.value)}),i.jsx(P,{variant:"body2",color:"text.secondary",children:d.description}),e.role===d.value&&i.jsx(te,{label:r("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},d.value))})]}),!Se(e==null?void 0:e.gameMode)&&i.jsxs(A,{sx:{mb:3},children:[i.jsx(P,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:i.jsx(E,{i18nKey:"areYouNaked"})}),i.jsx(q,{container:!0,spacing:2,children:h.map(d=>i.jsx(q,{size:{xs:12,sm:6},children:i.jsx(le,{role:"button",tabIndex:0,sx:{cursor:"pointer",border:d.isSelected?"2px solid":"1px solid",borderColor:d.isSelected?"primary.main":"divider",backgroundColor:d.isSelected?"primary.50":"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:()=>t({...e,isNaked:d.id==="naked"}),onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),t({...e,isNaked:d.id==="naked"}))},children:i.jsx(he,{sx:{p:3},children:i.jsxs(be,{spacing:1,alignItems:"center",textAlign:"center",children:[i.jsx(P,{variant:"h6",sx:{fontWeight:600},children:r(d.title)}),i.jsx(P,{variant:"body2",color:"text.secondary",children:d.description}),d.isSelected&&i.jsx(te,{label:r("selected"),color:"primary",size:"small",sx:{mt:1}})]})})})},d.id))})]}),i.jsx(A,{sx:{flexGrow:1}}),i.jsxs(Et,{children:[i.jsx(z,{onClick:s,children:i.jsx(E,{i18nKey:"previous"})}),i.jsx(z,{variant:"contained",onClick:n,children:i.jsx(E,{i18nKey:"next"})})]})]})}function uy({formData:e,setFormData:t,nextStep:n,prevStep:s}){const{t:r}=F(),{hasLocalPlayers:o,clearLocalSession:a}=rn(),[l,c]=p.useState(!1),[u,h]=p.useState(null),d=e.room!=="PUBLIC",f=p.useCallback(()=>{c(!0),h(null)},[]),g=p.useCallback(()=>{o&&a(),t(b=>({...b,hasLocalPlayers:!1,localPlayersData:void 0,localPlayerSessionSettings:void 0,gameMode:b.gameMode==="local"?"online":b.gameMode})),n()},[o,a,n,t]),m=p.useCallback(async(b,v)=>{try{t({...e,localPlayersData:b,localPlayerSessionSettings:v,hasLocalPlayers:!0}),c(!1),n()}catch(_){h(_ instanceof Error?_.message:"Failed to save local player configuration")}},[e,t,n]),y=p.useCallback(()=>{c(!1),h(null)},[]);return p.useEffect(()=>{if(!d){const b=setTimeout(()=>{n()},100);return()=>clearTimeout(b)}},[d,n]),d?l?i.jsx(br,{in:!0,children:i.jsxs(A,{children:[u&&i.jsx(fe,{severity:"error",sx:{mb:2},children:u}),i.jsx(Gc,{roomId:e.room||"PRIVATE",isPrivateRoom:d,onComplete:m,onCancel:y,initialPlayers:e.localPlayersData,initialSettings:e.localPlayerSessionSettings})]})}):i.jsxs(A,{sx:{minHeight:"200px",display:"flex",flexDirection:"column"},children:[i.jsx(P,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:i.jsx(E,{i18nKey:"localPlayersStep.title"})}),i.jsx(P,{variant:"body1",color:"text.secondary",sx:{mb:3},children:i.jsx(E,{i18nKey:"localPlayersStep.subtitle"})}),i.jsxs(q,{container:!0,spacing:2,sx:{mb:3},children:[i.jsx(q,{size:{xs:12,sm:6},children:i.jsx(le,{sx:{cursor:"pointer",border:"1px solid",borderColor:"divider",backgroundColor:"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:f,children:i.jsx(he,{sx:{p:3},children:i.jsxs(be,{spacing:1,alignItems:"center",textAlign:"center",children:[i.jsx(P,{variant:"h6",sx:{fontWeight:600},children:i.jsx(E,{i18nKey:"localPlayersStep.setupOption.title"})}),i.jsx(P,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"pre-line",textAlign:"left",width:"100%",lineHeight:1.8,mb:2},children:i.jsx(E,{i18nKey:"localPlayersStep.setupOption.description"})}),i.jsx(z,{variant:"outlined",fullWidth:!0,size:"large",sx:{mt:2},"data-testid":"localPlayersStep.setupOption.button",onClick:f,children:r("localPlayersStep.setupOption.button")})]})})})}),i.jsx(q,{size:{xs:12,sm:6},children:i.jsx(le,{sx:{cursor:"pointer",border:"1px solid",borderColor:"divider",backgroundColor:"background.paper",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:2}},onClick:g,children:i.jsx(he,{sx:{p:3},children:i.jsxs(be,{spacing:1,alignItems:"center",textAlign:"center",children:[i.jsx(P,{variant:"h6",sx:{fontWeight:600},children:i.jsx(E,{i18nKey:"localPlayersStep.skipOption.title"})}),i.jsx(P,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"pre-line",textAlign:"left",width:"100%",lineHeight:1.8,mb:2},children:i.jsx(E,{i18nKey:"localPlayersStep.skipOption.description"})}),i.jsx(z,{variant:"outlined",fullWidth:!0,size:"large",sx:{mt:2},"data-testid":"localPlayersStep.skipOption.button",onClick:g,children:r("localPlayersStep.skipOption.button")})]})})})})]}),o&&i.jsx(fe,{severity:"info",sx:{mb:3},children:i.jsx(P,{variant:"body2",children:i.jsx(E,{i18nKey:"localPlayersStep.currentStatus.hasPlayers"})})}),i.jsx(A,{sx:{flexGrow:1}}),i.jsxs(Et,{children:[i.jsx(z,{onClick:s,children:i.jsx(E,{i18nKey:"previous"})}),i.jsx(z,{variant:"contained",onClick:g,children:i.jsx(E,{i18nKey:"skip"})})]})]}):i.jsx(A,{sx:{minHeight:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:i.jsx(P,{variant:"h6",color:"text.secondary",children:r("localPlayersStep.publicRoomMessage","Local players are not available for public rooms. Continuing...")})})}function ta({isPublic:e,onClick:t,isSelected:n}){const{t:s}=F();return i.jsx(le,{sx:{cursor:"pointer",border:n?"3px solid":"1px solid",borderColor:n?"primary.main":"grey.300",backgroundColor:n?"primary.50":"background.paper",transform:n?"scale(1.02)":"scale(1)",transition:"all 0.2s ease-in-out","&:hover":{borderColor:"primary.main",boxShadow:n?4:2,transform:"scale(1.02)"}},onClick:t,children:i.jsx(he,{sx:{p:3},children:i.jsxs(be,{direction:"row",spacing:3,alignItems:"center",children:[i.jsx(A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,borderRadius:"50%",backgroundColor:n?"primary.main":"primary.50",color:n?"primary.contrastText":"primary.main",transition:"all 0.2s ease-in-out"},children:e?i.jsx(km,{sx:{fontSize:28},"aria-label":"Public"}):i.jsx(Cm,{sx:{fontSize:28},"aria-label":"Private"})}),i.jsxs(be,{spacing:.5,flex:1,children:[i.jsxs(be,{direction:"row",alignItems:"center",spacing:1,children:[i.jsx(P,{variant:"h6",component:"h3",sx:{fontWeight:600},children:i.jsx(E,{i18nKey:e?"public":"private"})}),n&&i.jsx(te,{label:s("selected"),size:"small",color:"primary",sx:{fontSize:"0.75rem",fontWeight:500,height:20}})]}),i.jsx(P,{variant:"body1",color:"text.secondary",sx:{fontSize:"0.95rem"},children:i.jsx(E,{i18nKey:e?"publicRoomBenefit":"privateRoomBenefit"})})]})]})})})}function dy({formData:e,setFormData:t,nextStep:n}){var s;const{t:r}=F(),{id:o}=Le(),[a,l]=p.useState(!Q(e.room||o)),[c,u]=p.useState(((s=e.room)==null?void 0:s.toUpperCase())||"");p.useEffect(()=>{const w=e.room||o,j=!Q(w);l(j),u((w==null?void 0:w.toUpperCase())||"")},[o,e.room,a]);const h=async w=>{try{const j=Os(),C=Xt(j,`rooms/${w}/uids`);return(await mc(C)).exists()}catch(j){return!1}},d=p.useCallback(async()=>{const w=fc("123456789ABCDEFGHJKLMNPQRSTUVWXYZ",5);let j,C=0;const S=10;do if(j=w(),C++,C>=S)break;while(await h(j));return j},[]),f=p.useCallback(()=>{t({...e,room:"PUBLIC",gameMode:"online",roomRealtime:!0}),l(!1)},[e,t]),g=p.useCallback(async()=>{const w=await d();t({...e,room:w,gameMode:"online",roomRealtime:!1}),u(w.toUpperCase()),l(!0)},[e,t,d]),m=p.useCallback(w=>{t({...e,room:w,boardUpdated:!0})},[e,t]),y=p.useCallback(w=>{const j=w.target.value.toUpperCase();u(j)},[]),b=p.useCallback(()=>{m(c)},[m,c]),v=p.useCallback(w=>{w.key==="Enter"&&m(c)},[m,c]),_=Q(e.room||o);function x(){n(_?3:1)}return i.jsxs(A,{sx:{m:1},children:[i.jsx(P,{variant:"h5",gutterBottom:!0,textAlign:"center",children:i.jsx(E,{i18nKey:"chooseRoomType"})}),i.jsx(P,{variant:"body1",color:"text.secondary",textAlign:"center",sx:{mb:3},children:i.jsx(E,{i18nKey:"roomTypeDescription"})}),i.jsxs(be,{spacing:2,sx:{mb:3},children:[i.jsx(ta,{isPublic:!0,onClick:f,isSelected:_}),i.jsx(ta,{isPublic:!1,onClick:g,isSelected:!_})]}),a&&i.jsxs(A,{sx:{p:3,borderRadius:2,backgroundColor:"primary.50",mb:2},children:[i.jsx(P,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:r("privateRoomCode")}),i.jsx(J,{fullWidth:!0,id:"privateRoom",value:c,onBlur:b,onKeyDown:v,onChange:y,inputProps:{style:{textTransform:"uppercase",fontFamily:"monospace",fontSize:"1.25rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.2em"}},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"background.paper","& fieldset":{borderColor:"divider",borderWidth:2},"&:hover fieldset":{borderColor:"primary.main"},"&.Mui-focused fieldset":{borderColor:"primary.main",borderWidth:2}}}}),i.jsx(P,{variant:"body2",color:"text.secondary",sx:{mt:1.5,textAlign:"center"},children:r("privateRoomCodeHelp")})]}),i.jsx(Et,{children:i.jsx(z,{variant:"contained",onClick:x,size:"large",children:i.jsx(E,{i18nKey:"next"})})})]})}function hy({close:e}){const{id:t}=Le(),[n,s]=p.useState(1),{isMigrationInProgress:r,currentLanguageMigrated:o}=oc(),[a,l]=p.useState(!1),c={room:t||"PUBLIC"},[u,h]=Br({gameMode:"online",roomRealtime:!0,actions:[],consumption:[],role:"sub",boardUpdated:!1,room:t||"PUBLIC",selectedActions:{}},c);p.useEffect(()=>{!r&&o&&l(j=>!j)},[r,o]);const{actionsList:d,isLoading:f}=zs(u.gameMode,!0,a),g=f||r,m=Q(u.room);p.useEffect(()=>{m&&(n===2||n===3)&&s(4)},[n,m]);const y=j=>{if(!Number.isInteger(j))return s(n+1);s(n+(j||1))},b=j=>{m&&(j===2||j===3)||s(j)},v=j=>{if(!Number.isInteger(j))return s(n-1);s(n-(j||1))},_=()=>s(0),x=()=>{Q(u.room)||u.gameMode==="online"?s(4):s(1)},w=()=>{const j=Q(u.room);switch(n){case 1:return i.jsx(dy,{formData:u,setFormData:h,nextStep:y});case 2:return j?null:i.jsx(uy,{formData:u,setFormData:h,nextStep:y,prevStep:v});case 3:return j?null:i.jsx(cy,{formData:u,setFormData:h,nextStep:y,prevStep:v});case 4:return i.jsx(oy,{formData:u,setFormData:h,nextStep:y,prevStep:v,actionsList:d,isActionsLoading:g,isMigrationInProgress:r});case 5:return i.jsx(ly,{formData:u,setFormData:h,prevStep:v,actionsList:d,close:e});default:return null}};return n===0?i.jsx(Or,{closeDialog:e,onOpenSetupWizard:x}):i.jsxs(A,{children:[i.jsx(A,{sx:{width:"100%",mt:2,mb:4},children:i.jsx(ay,{currentStep:n,isPublicRoom:m,onStepClick:b})}),w(),i.jsx(ce,{sx:{mt:3}}),i.jsx(z,{onClick:_,children:i.jsx(E,{i18nKey:"advancedSetup"})})]})}function Jc({open:e,close:t=null}){const n=Ie(),[s]=Ms();return s.get("importBoard")?null:i.jsxs(je,{fullScreen:n,open:e,maxWidth:"md",children:[i.jsxs(Ce,{children:[i.jsx(E,{i18nKey:"gameSettingsHeading"}),typeof t=="function"&&i.jsx(Qe,{close:t})]}),i.jsx(_e,{children:i.jsx(hy,{close:typeof t=="function"?t:void 0})})]})}function fy({open:e,close:t,setAlert:n,board:s}){const{t:r}=F(),[o,a]=p.useState(""),[l,c]=p.useState(s.title||"");function u(m){try{return l.length?m.map((y,b)=>{const[v,..._]=y.split(`
`).filter(w=>w);if(v===void 0)throw n({message:r("importNoEmpty")});if(!/^\[.+\]$/.test(v))throw n({message:r("importInvalidTitle",{entry:b+1})});if(!_.length)throw n({message:r("importMissingDescription",{entry:b+1})});return{title:v==null?void 0:v.replace(/\[|\]/g,""),description:_.join(`
`)}}):(n({message:r("importTitleRequired")}),null)}catch(y){return null}}const h=async()=>{const m=o.split(/~+/).filter(b=>b),y=u(m);if(!y)return null;try{if(JSON.stringify(s.tiles)===JSON.stringify(y))return n({message:r("importNoChange")}),null}catch(b){return n({message:r("error"),type:"error"}),null}return No({...s,title:l,tiles:y}),n({message:r("saved"),type:"success"}),t(),null},d=()=>{var m;const y=(m=s==null?void 0:s.tiles)==null?void 0:m.map(b=>{if(!b)return"";const v=b.title||"",_=b.description||"";return`[${v}]
${_}`}).filter(Boolean);a((y==null?void 0:y.join(`
~~
`))||"")},f=m=>{c(m.target.value)},g=async m=>{if(!m.target.value.length)return n({message:r("importTitleRequired")}),null;No({...s,title:m.target.value})};return p.useEffect(()=>{e&&d()},[e]),p.useEffect(()=>{c(s.title||"")},[s.title]),i.jsxs(i.Fragment,{children:[i.jsx(J,{fullWidth:!0,label:r("title"),value:l,onChange:f,onBlur:g}),i.jsx(J,{sx:{mt:2},multiline:!0,fullWidth:!0,value:o,onChange:m=>a(m.target.value),InputProps:{endAdornment:i.jsxs("div",{style:{display:"flex",flexDirection:"column",position:"sticky",top:0},children:[i.jsx(ve,{title:r("save"),children:i.jsx(Z,{size:"small",onClick:h,"aria-label":r("save"),children:i.jsx(Tm,{color:"success"})})}),i.jsx(Mn,{text:o}),i.jsx(Mn,{text:`${window.location.href}?importBoard=${s.id}`,copiedText:r("copiedLink"),icon:i.jsx(js,{}),tooltip:r("copyShareLink")})]}),sx:{alignItems:"flex-start"}}})]})}function my({open:e,close:t,isMobile:n}){var s;const r=Je(Gf),[o,a]=p.useState(null),[l,c]=p.useState(0),[u,h]=p.useState(0),d=Me()[0],{user:f}=De();if(!r)return null;const g=S=>{if(!S||!S.length)return null;const T=S[S.length-1];return T!=null&&T.description?T.description.match(/\d+%/g):null},m=S=>{a(S)};async function y({title:S,tiles:T}){const L=T.map(({title:D})=>`* ${D} 
`);L.pop(),L.shift();let k=`### ${Y("activated")}: ${S}
`;k+=`---
`,k+=[...new Set(L)].join(" "),k+=`---
`;const I=g(T);I&&I.length===3&&(k+=`* ${Y("finishSlider")} ${I[0]}  | ${I[1]} | ${I[2]}`);const N=await Ql({title:S,gameBoard:JSON.stringify(T),settings:JSON.stringify(d)});N!=null&&N.id&&await Pt({room:(d==null?void 0:d.room)||"PUBLIC",user:f,text:k,type:"settings",gameBoardId:N.id,boardSize:T.length,gameMode:d==null?void 0:d.gameMode})}const b=async()=>{const S=await Rs({isActive:0})||0;h(S)},v=S=>{zf(S.id),y(S),a({message:Y("boardEnabled"),type:"success"})},_=S=>{S!==0&&c(S)},x=()=>{typeof l=="number"&&Uf(l),c(0)},w=S=>(T,L)=>{h(L?S:0)},j=S=>!S.tiles||S.tiles.length!==((d==null?void 0:d.roomTileCount)||40),C=S=>j(S)?Y("boardWrongSize",{size:(d==null?void 0:d.roomTileCount)||40}):S.isActive?Y("boardActive"):Y("enableBoard");return i.jsxs(i.Fragment,{children:[i.jsxs(je,{fullScreen:n,open:e,onClose:t,PaperProps:{sx:{maxHeight:"100%",height:"100%"}},children:[i.jsxs(Ce,{children:[i.jsx(E,{i18nKey:"manageGameBoards"}),i.jsx(Qe,{close:t})]}),i.jsxs(_e,{style:{overflowY:"scroll"},children:[i.jsxs(A,{sx:{mb:1},children:[i.jsx(z,{variant:"outlined",onClick:b,endIcon:i.jsx(Am,{}),sx:{float:"right"},children:i.jsx(E,{i18nKey:"add"})}),i.jsx(P,{children:i.jsx(E,{i18nKey:"gameBoardDescription"})})]}),r.map(S=>{var T;return i.jsxs(Jt,{expanded:u===S.id,onChange:w(S.id||0),children:[i.jsxs(Qt,{children:[i.jsxs(A,{children:[i.jsx(P,{variant:"body1",children:S.title}),i.jsx(P,{variant:"body2",children:Y("tilesCount",{count:((T=S.tiles)==null?void 0:T.length)||0})})]}),i.jsxs(A,{style:{marginLeft:"auto"},justifyContent:"flex-end",children:[i.jsx(ve,{title:C(S),children:i.jsx("div",{style:{display:"inline-block"},children:i.jsx(st,{checked:!!S.isActive,disabled:!!S.isActive||j(S),onChange:()=>v(S),size:"small"})})}),i.jsx(ve,{title:Y("delete"),children:i.jsx("span",{style:{display:"inline-block"},children:i.jsx(Z,{onClick:()=>_(S.id||0),size:"small",component:"span",children:i.jsx(sn,{color:"error"})})})})]})]}),i.jsx(Zt,{children:i.jsx(fy,{open:e,close:()=>w(S.id||0)(null,!1),setAlert:m,board:S})})]},S.id)})]})]}),i.jsx(gt,{open:!!(o!=null&&o.message),type:(o==null?void 0:o.type)||"error",close:()=>a(null),children:o==null?void 0:o.message}),i.jsxs(je,{open:!!l,onClose:()=>c(0),children:[i.jsxs(Ce,{children:[Y("deleteBoard"),i.jsx(Qe,{close:()=>c(0)})]}),i.jsx(_e,{children:i.jsx(P,{variant:"body1",children:Y("confirmDeleteBoard",{title:(s=r.find(S=>S.id===l))==null?void 0:s.title})})}),i.jsxs(Lt,{children:[i.jsx(z,{onClick:()=>c(0),children:Y("cancel")}),i.jsx(z,{onClick:x,children:Y("delete")})]})]})]})}function py({open:e,close:t=null}){const[n]=Br(),{isLoading:s,actionsList:r}=zs(n==null?void 0:n.gameMode);return s?null:i.jsx(Nc,{setOpen:t||(()=>{}),boardUpdated:()=>null,actionsList:r,open:e})}function gy(){const{id:e}=Le(),{user:t,wipeAllData:n,isAnonymous:s}=Vs(),r=Ie(),{i18n:o}=F(),[a,l]=p.useState(!1),c=p.useCallback(M=>l(M),[]),u=Me()[0],[h,d]=p.useState({settings:!1,gameBoard:!1,about:!1,schedule:!1,customTiles:!1,linkAccount:!1,appSettings:!1,languageChange:!1}),f=p.useCallback((M,$)=>d(B=>({...B,[M]:$})),[]),g=p.useCallback(async()=>{await n(),c(!1)},[n,c]),m=M=>window.open(M,"_blank","noreferrer"),y=p.useMemo(()=>i.jsx(Kh,{children:i.jsx("path",{d:"M18.942 5.556a16.299 16.299 0 0 0-4.126-1.297c-.178.321-.385.754-.529 1.097a15.175 15.175 0 0 0-4.573 0 11.583 11.583 0 0 0-.535-1.097 16.274 16.274 0 0 0-4.129 1.3c-2.611 3.946-3.319 7.794-2.965 11.587a16.494 16.494 0 0 0 5.061 2.593 12.65 12.65 0 0 0 1.084-1.785 10.689 10.689 0 0 1-1.707-.831c.143-.106.283-.217.418-.331 3.291 1.539 6.866 1.539 10.118 0 .137.114.277.225.418.331-.541.326-1.114.606-1.71.832a12.52 12.52 0 0 0 1.084 1.785 16.46 16.46 0 0 0 5.064-2.595c.415-4.396-.709-8.209-2.973-11.589zM8.678 14.813c-.988 0-1.798-.922-1.798-2.045s.793-2.047 1.798-2.047 1.815.922 1.798 2.047c.001 1.123-.793 2.045-1.798 2.045zm6.644 0c-.988 0-1.798-.922-1.798-2.045s.793-2.047 1.798-2.047 1.815.922 1.798 2.047c0 1.123-.793 2.045-1.798 2.045z"})}),[]),{setLocale:b,updateSettings:v}=ac(),[_,x]=p.useState(!1),[w,j]=p.useState(null),C=Mr(),{actionsList:S}=zs(u==null?void 0:u.gameMode),T=p.useCallback(async M=>{const $=M.target.value,B=o.resolvedLanguage||"en";if(B!==$){x(!0);try{await o.changeLanguage($),b($),await new Promise(G=>{const U=()=>{o.off("languageChanged",U),G(void 0)};o.on("languageChanged",U),setTimeout(()=>{o.off("languageChanged",U),G(void 0)},500)}),j({from:B,to:$}),f("languageChange",!0)}catch(G){console.error("Error changing language:",G),await o.changeLanguage($),b($),await new Promise(U=>{const H=()=>{o.off("languageChanged",H),U(void 0)};o.on("languageChanged",H),setTimeout(()=>{o.off("languageChanged",H),U(void 0)},500)}),j({from:B,to:$}),f("languageChange",!0)}finally{x(!1)}}},[o,b,f]),L=p.useCallback(async M=>{if(M&&S)try{await C({...u,boardUpdated:!0},S)}catch($){console.error("Error rebuilding board:",$),v({boardUpdated:!0})}j(null)},[C,u,S,v]),k=p.useCallback(async()=>{await L(!0)},[L]),I=p.useCallback(async()=>{await L(!1)},[L]),N=p.useCallback(()=>{j(null),f("languageChange",!1)},[f]),D=p.useMemo(()=>Object.entries(In).map(([M,$])=>i.jsx(W,{value:M,children:$.label},M)),[]),V=p.useMemo(()=>{const M=[{key:"gameBoard",title:i.jsx(E,{i18nKey:"gameBoards"}),icon:i.jsx(Im,{}),onClick:()=>f("gameBoard",!0)},{key:"customTiles",title:i.jsx(E,{i18nKey:"customTilesLabel"}),icon:i.jsx(Lm,{}),onClick:()=>f("customTiles",!0)},{key:"cast",title:i.jsx(E,{i18nKey:"tvMode"}),icon:i.jsx(Mm,{}),onClick:()=>m(`/${e==null?void 0:e.toUpperCase()}/cast`)},{key:"schedule",title:i.jsx(E,{i18nKey:"schedule"}),icon:i.jsx(Ds,{}),onClick:()=>f("schedule",!0)},{key:"discord",title:"Discord",icon:y,onClick:()=>m("https://discord.gg/mSPBE2hFef")},{key:"about",title:i.jsx(E,{i18nKey:"about"}),icon:i.jsx(Rm,{}),onClick:()=>f("about",!0)}];return t&&(M.unshift({key:"appSettings",title:i.jsx(E,{i18nKey:"appSettings"}),icon:i.jsx(Pr,{}),onClick:()=>f("appSettings",!0)}),M.unshift({key:"settings",title:i.jsx(E,{i18nKey:u.advancedSettings?"settings":"setupWizard.title"}),icon:i.jsx(Bs,{}),onClick:()=>f("settings",!0)}),s&&M.push({key:"linkAccount",title:i.jsx(E,{i18nKey:"linkAccount"}),icon:i.jsx(uc,{}),onClick:()=>f("linkAccount",!0)}),M.push({key:"resetApp",title:i.jsx(E,{i18nKey:"resetApp"}),icon:i.jsx(Pm,{}),onClick:()=>g()})),M},[t,e,s,u.advancedSettings,y,g,f]).map(({key:M,title:$,icon:B,onClick:G})=>i.jsx(bs,{disablePadding:!0,onClick:G,children:i.jsxs(qh,{children:[i.jsx(We,{children:B}),i.jsx(Ae,{primary:$})]})},M)),O=(M,$,B={})=>i.jsx(M,{open:h[$],close:()=>f($.toString(),!1),isMobile:r,...B});return i.jsxs(i.Fragment,{children:[i.jsx(Z,{onClick:()=>c(!0),"aria-label":"open menu",children:i.jsx(Em,{})}),i.jsx(Hh,{anchor:"right",open:a,onClose:()=>c(!1),children:i.jsxs(A,{role:"presentation",onClick:()=>c(!1),sx:{width:250,display:"flex",flexDirection:"column",height:"100%"},children:[i.jsx(xs,{sx:{flexGrow:1},children:V}),i.jsx(A,{sx:{borderTop:"1px solid rgba(0, 0, 0, 0.12)",p:2},children:i.jsxs(re,{fullWidth:!0,size:"small",sx:{maxWidth:200},children:[i.jsxs(ue,{id:"drawer-language-label",sx:{display:"flex",alignItems:"center","& .MuiInputLabel-root":{fontSize:"0.875rem"}},children:[i.jsx(An,{sx:{mr:.5,fontSize:"1rem"}}),i.jsx(E,{i18nKey:"language"})]}),i.jsx(oe,{labelId:"drawer-language-label",id:"drawer-language-select",value:o.resolvedLanguage||"en",disabled:_,label:i.jsxs(i.Fragment,{children:[i.jsx(An,{sx:{fontSize:"1rem"}}),i.jsx(E,{i18nKey:"language"})]}),onChange:T,size:"small",MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},children:D})]})})]})}),h.settings&&O(Jc,"settings"),h.appSettings&&O(qg,"appSettings"),h.about&&i.jsx(yc,{open:h.about,close:()=>f("about",!1),children:i.jsx(bc,{})}),h.gameBoard&&O(my,"gameBoard"),h.schedule&&O(_c,"schedule"),h.customTiles&&O(py,"customTiles"),h.linkAccount&&O(xc,"linkAccount"),w&&i.jsx(pp,{open:h.languageChange,onClose:N,onRebuildBoard:k,onKeepBoard:I,fromLanguage:w.from,toLanguage:w.to})]})}function yy(e,t,n){const s=e.charAt(0)==="#"?e.substring(1,7):e,r=parseInt(s.substring(0,2),16),o=parseInt(s.substring(2,4),16),a=parseInt(s.substring(4,6),16);return r*.299+o*.587+a*.114>186?n:t}function xy(e){let t=0,n;for(n=0;n<e.length;n+=1)t=e.charCodeAt(n)+((t<<5)-t);let s="#";for(n=0;n<3;n+=1){const r=t>>n*8&255;s+=`00${r.toString(16)}`.slice(-2)}return s}function by(e,t,n){var s,r,o,a;const l=xy(t),c=n==="small"?18:24;return{sx:{bgcolor:l,width:c,height:c,fontSize:n==="small"?10:12,color:yy(l,"#FFFFFF","#000000")},children:`${((s=e==null?void 0:e.split(" ")[0])==null?void 0:s[0])||""}${(a=(o=(r=e==null?void 0:e.split(" "))==null?void 0:r[1])==null?void 0:o[0])!=null?a:""}`}}function vy({uid:e,displayName:t,size:n}){const s=p.useMemo(()=>by(t,e,n),[t,e,n]);return i.jsx(ve,{title:t,children:i.jsx(vr,{...s,className:"player-online"})})}const Gs=p.memo(vy);function wy(e){const t=Kf(e,"actions","DESC");return[...new Map(t.map(n=>[n.uid,n])).values()]}function Fr(){const{user:e}=De(),{messages:t,isLoading:n}=Mt(),{onlineUsers:s}=Wf();return p.useMemo(()=>{if(n||!e)return[];const o=wy(t);return Object.values(s).map(a=>{var l,c,u;const h=(l=o.find(y=>y.uid===a.uid))==null?void 0:l.text,d=/(?:#)[\d]*(?=:)/gs;let f=0;if(h&&h.match(d)){const y=h.match(d);y&&y[0]&&(f=Number(y[0].replace("#","")))}const g=f>0?f-1:f,m=!!(h!=null&&h.includes(Y("finish")));return{displayName:a.displayName||"Unknown",uid:a.uid,isSelf:a.uid===e.uid,location:((c=a.gameState)==null?void 0:c.location)||g,isFinished:((u=a.gameState)==null?void 0:u.isFinished)||m,status:a.status||"away",lastActivity:a.lastSeen||new Date(0)}}).sort((a,l)=>a.isSelf?-1:l.isSelf?1:a.status==="active"&&l.status!=="active"?-1:l.status==="active"&&a.status!=="active"?1:a.displayName.localeCompare(l.displayName))},[e,s,t,n])}function Zc(){const e=Fr(),{localPlayers:t,hasLocalPlayers:n,isLocalPlayerRoom:s}=rn();return p.useMemo(()=>{const o=[],a=e.map(l=>({...l,isLocal:!1}));return o.push(...a),n&&s?t.map(c=>({displayName:c.name,uid:`local-${c.id}`,isSelf:c.isActive,location:c.location,isFinished:c.isFinished,status:"active",lastActivity:new Date,isLocal:!0,localId:c.id,role:c.role,order:c.order})).sort((c,u)=>c.order-u.order):o},[e,t,n,s])}function Bi(e){return e.isLocal===!0}function jy({isOpen:e,onClose:t,playerList:n,anchorEl:s}){const{t:r}=F(),o=p.useRef(null);return p.useEffect(()=>{e&&o.current&&o.current.focus()},[e]),i.jsx(Hl,{open:e,anchorEl:s,onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},sx:{zIndex:1300},slotProps:{paper:{sx:{borderRadius:2,boxShadow:3,p:{xs:1.5,sm:2},backgroundColor:"background.paper"}}},disableRestoreFocus:!0,disableEnforceFocus:!0,children:i.jsxs(A,{ref:o,role:"dialog","aria-label":r("online"),"aria-modal":"true",tabIndex:-1,onKeyDown:a=>{a.key==="Escape"&&t()},children:[i.jsxs(P,{variant:"subtitle2",sx:{mb:1.5,color:"text.secondary",fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:.5},children:[n.some(a=>"isLocal"in a&&Bi(a))?r("players"):r("online")," ","(",n.length,")"]}),i.jsx(A,{sx:{display:"flex",flexDirection:"column",gap:{xs:1,sm:1.5},alignItems:"flex-start"},children:n.map(a=>{const l="isLocal"in a&&a.isLocal,c=n.some(u=>"isLocal"in u&&Bi(u));return i.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:{xs:.75,sm:1},width:"auto"},children:[i.jsx(Gs,{uid:a.uid,displayName:a.displayName,size:"medium"}),i.jsxs(A,{sx:{display:"flex",flexDirection:"column",gap:.25,minWidth:0},children:[i.jsxs(P,{variant:"body2",sx:{fontSize:{xs:"0.8125rem",sm:"0.875rem"},color:a.isSelf?"primary.main":"text.primary",fontWeight:a.isSelf?600:400,whiteSpace:"nowrap"},children:[a.displayName,a.isSelf&&i.jsxs(P,{component:"span",sx:{ml:.5,fontSize:{xs:"0.7rem",sm:"0.75rem"},color:"text.secondary"},children:["(",r("you"),")"]})]}),l&&!c&&i.jsx(te,{label:r("localPlayer"),size:"small",color:"secondary",variant:"outlined",sx:{fontSize:"0.625rem",height:"16px",alignSelf:"flex-start"}})]})]},a.uid)})})]})})}const Qc=p.forwardRef(({playerList:e,onClick:t,innerRef:n,...s},r)=>{const o=r||n;return t?i.jsxs(Yh,{...s,ref:o,onClick:t,sx:{display:"flex",alignItems:"center",borderRadius:1,px:.5,py:.25,minWidth:44,minHeight:44,color:"text.primary",fontSize:"inherit",fontWeight:500,"&:hover":{backgroundColor:"action.hover"},"&:focus":{backgroundColor:"action.focus"}},children:[i.jsx(zo,{color:"success",sx:{fontSize:8,marginRight:"0.2rem"}}),e.length]}):i.jsxs("div",{...s,ref:o,style:{display:"flex",alignItems:"center",color:"var(--mui-palette-text-primary)",fontWeight:500},children:[i.jsx(zo,{color:"success",sx:{fontSize:8,marginRight:"0.2rem"}}),e.length]})});Qc.displayName="PlayersOnline";function as({room:e,playerList:t=[]}){const{t:n}=F(),[s,r]=p.useState(!1),[o,a]=p.useState(!1),[l,c]=p.useState(!1),{schedule:u}=Zl(),h=Ie(),d=p.useRef(null),f=()=>{r(!0),c(!0)},g=()=>{a(!o)},m=()=>{a(!1)};return i.jsx(Yl,{position:"fixed",children:i.jsxs(Xh,{disableGutters:!0,variant:"dense",component:"nav",className:"nav",children:[i.jsxs("div",{className:"site-name",children:[i.jsx(A,{component:"img",sx:{height:32},alt:"Blitzed Out Logo",src:ep}),i.jsx("h1",{className:"gradient-text",children:"Blitzed Out"})]}),i.jsx("div",{children:i.jsxs("div",{className:"nav-room-name",children:[i.jsx("h2",{children:Q(e)||e===void 0?n("public"):e}),i.jsx(Qc,{playerList:t,onClick:g,ref:d,"aria-label":n("online"),"aria-expanded":o,"aria-haspopup":"dialog"}),i.jsx(Z,{onClick:f,"aria-label":"schedule game",sx:{ml:2},children:i.jsx(Jh,{color:"primary",badgeContent:l?null:u.length,children:i.jsx(Ds,{})})}),s&&i.jsx(yr,{children:i.jsx(_c,{open:s,close:()=>r(!1),isMobile:h})}),t.length>0&&i.jsx(jy,{isOpen:o,onClose:m,playerList:t,anchorEl:d.current})]})}),i.jsxs("div",{className:"menu-drawer",children:[i.jsx(sp,{size:"medium","aria-label":"Toggle between light and dark theme"}),i.jsx(tp,{}),i.jsx(gy,{})]})]})})}function _y(){var e;const{i18n:t,t:n}=F(),{login:s,user:r,error:o}=De(),[a,l]=p.useState(!1),[c,u]=p.useState("login"),[h,d]=p.useState(!1),[f,g]=p.useState(!1),[m,y]=p.useState(null),b=()=>{u("login"),l(!0)},v=()=>{u("register"),l(!0)},_=Le(),[x]=Ms(),w=!!x.get("importBoard"),j=(e=_.id)!=null?e:"PUBLIC",C=Fr(),[S,T]=p.useState((r==null?void 0:r.displayName)||""),[L,k]=Me(),I=p.useCallback(async O=>{O.preventDefault();try{g(!0),y(null),await k({...L,displayName:S,room:j}),await s(S)}catch(M){const $=M instanceof Error?M.message:"Unknown error occurred";qf("unauthenticated_app_submit",M,{authentication:{step:"unauthenticated_app_submit",displayName:S,room:j}}),y($);const B=navigator.userAgent.toLowerCase(),G=B.includes("firefox"),U=B.includes("mobile")||B.includes("fennec")||B.includes("fxios")||B.includes("android")||B.includes("iphone");G&&U&&y(`${$}. If you're using a mobile browser, try refreshing the page or temporarily disabling uBlock Origin.`)}finally{g(!1)}},[S,s,j,L,k]),N=p.useCallback(async O=>{O.key==="Enter"&&await I(O)},[I]),D=t.resolvedLanguage||"en",R=p.useCallback(async O=>{const M=O.target.value;d(!0);try{await t.changeLanguage(M)}catch($){console.error("Error changing language:",$),await t.changeLanguage(M)}finally{d(!1)}},[t]),V=p.useMemo(()=>Object.entries(In).map(([O,M])=>i.jsx(W,{value:O,children:M.label},O)),[]);return i.jsxs(i.Fragment,{children:[i.jsx(as,{room:j,playerList:C}),i.jsxs("main",{className:"unauthenticated-container gradient-background-vibrant",children:[i.jsx(Zh,{maxWidth:"lg",sx:{pt:8},component:"section",children:i.jsxs(q,{container:!0,spacing:4,justifyContent:"center",alignItems:"stretch",children:[i.jsx(q,{size:{xs:12,md:6,lg:4},children:i.jsx(le,{className:"unauthenticated-card main-setup-card",children:i.jsxs(he,{children:[i.jsx("h1",{className:"setup",children:i.jsx(E,{i18nKey:"setup"})}),i.jsx(P,{className:"setup-subtitle",variant:"body1",children:i.jsx(E,{i18nKey:"setupSubtitle"})}),i.jsxs(A,{component:"form",method:"post",onSubmit:I,className:"settings-box",children:[i.jsx(J,{fullWidth:!0,id:"displayName",label:n("displayName"),value:S,onChange:O=>T(O.target.value),required:!0,autoFocus:!0,onKeyDown:O=>N(O),margin:"normal"}),(m||o)&&i.jsx(A,{sx:{mt:2,p:2,borderRadius:1,backgroundColor:"error.main",color:"error.contrastText"},children:i.jsxs(P,{variant:"body2",children:[i.jsx("strong",{children:"Error:"})," ",m||o]})}),i.jsx(z,{variant:"contained",type:"submit",fullWidth:!0,className:"jump-in-button",size:"large",disabled:f,startIcon:f?i.jsx(Ee,{size:20}):i.jsx($m,{}),sx:{mt:2,py:1.25,fontSize:"1.1rem",fontWeight:600,touchAction:"manipulation",cursor:f?"default":"pointer",userSelect:"none","&:focus":{outline:"2px solid",outlineColor:"primary.main",outlineOffset:"2px"}},onClick:async O=>{await I(O)},children:f?i.jsx(E,{i18nKey:"loadingEllipsis"}):w?i.jsx(E,{i18nKey:"import"}):i.jsx(E,{i18nKey:"anonymousLogin"})}),i.jsx(ce,{sx:{my:3},children:i.jsx(P,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.9rem"},children:i.jsx(E,{i18nKey:"or"})})}),i.jsxs(A,{className:"auth-button-container",children:[i.jsx(z,{variant:"outlined",startIcon:i.jsx(Dm,{}),onClick:b,size:"medium",children:i.jsx(E,{i18nKey:"signIn"})}),i.jsx(z,{variant:"outlined",onClick:v,size:"medium",children:i.jsx(E,{i18nKey:"createAccount"})})]})]})]})})}),i.jsx(q,{size:{md:12,lg:8},children:i.jsx(le,{className:"unauthenticated-card",children:i.jsx(he,{children:i.jsx(bc,{})})})})]})}),i.jsx("footer",{className:"footer-language-container",children:i.jsxs(A,{className:"footer-language-selector",children:[i.jsx(An,{sx:{fontSize:"1rem",color:"rgba(255, 255, 255, 0.5)"}}),i.jsx(re,{size:"small",sx:{minWidth:120},children:i.jsx(oe,{value:D,disabled:h,onChange:R,size:"small",variant:"standard",sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem","& .MuiSelect-icon":{color:"rgba(255, 255, 255, 0.5)"},"&:before":{borderBottomColor:"rgba(255, 255, 255, 0.3)"},"&:hover:before":{borderBottomColor:"rgba(255, 255, 255, 0.5)"}},endAdornment:h&&i.jsx(Ee,{size:14}),children:V})})]})})]}),i.jsx(xc,{open:a,close:()=>l(!1),initialView:c})]})}function Sy(e){let t="";for(const s of String(e)){const r=s.codePointAt(0);r>=0&&r<=31||r===127||r>=128&&r<=159||r===8232||r===8233||(t+=s)}return`url("${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}")`}const na=e=>e&&/\.(jpe?g|png|webp|bmp|svg|gif|avif|tiff?|heic|heif|jfif)(\?.*)?$/i.test(e)?"image":"video";function ky({url:e}){const[t,n]=p.useState(na(e)),[s,r]=p.useState(e);if(p.useEffect(()=>{r(e),n(na(e))},[e]),!s)return null;const o=()=>{var l,c;const u=(l=s!=null?s:e)!=null?l:"";let h=!1;try{const g=new URL(u);h=g.host==="imgur.com"||g.host==="i.imgur.com"}catch(g){h=!1}if(h){const g=(c=u.match(/(?:i\.)?imgur\.com\/([a-zA-Z0-9]+)(?:\.[a-z]+)?/))==null?void 0:c[1];if(g){const m=`https://i.imgur.com/${g}.jpg`;r(m),n("image");return}}const f=`${u.replace(/\.(mp4|webm|ogg|mov)(\?.*)?$/i,"")}.jpg`;r(f),n("image")},a=()=>{var l,c;const u=(l=s!=null?s:e)!=null?l:"";let h=!1;try{const d=new URL(u);h=d.host==="imgur.com"||d.host==="i.imgur.com"}catch(d){h=!1}if(h){const d=(c=u.match(/(?:i\.)?imgur\.com\/([a-zA-Z0-9]+)(?:\.[a-z]+)?/))==null?void 0:c[1];if(d){const f=["jpg","png","gif","jpeg","webp"],g=s==null?void 0:s.split(".").pop(),y=f.indexOf(g||"")+1;if(y<f.length){const b=f[y],v=`https://i.imgur.com/${d}.${b}`;r(v)}}}else{const d=["jpg","png","gif","jpeg","webp"],f=s==null?void 0:s.split(".").pop(),m=d.indexOf(f||"")+1;if(m<d.length&&s){const y=d[m],v=`${s.replace(/\.[^.]+(\?.*)?$/,"")}.${y}`;r(v)}}};return t==="video"?i.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,src:s||void 0,className:"video-background",onError:o,preload:"auto",crossOrigin:"anonymous",controls:!0}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"image-background",style:{backgroundImage:s?Sy(s):void 0,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100%",height:"100%",position:"absolute",top:0,left:0}}),i.jsx("img",{src:s||void 0,onError:a,style:{display:"none"},alt:""})]})}function Cy({images:e,className:t,zoomDuration:n=3e3,zoomScale:s=1.4}){const{t:r}=F(),[o,a]=p.useState(0),[l,c]=p.useState(0),[u,h]=p.useState(new Set),[d,f]=p.useState(new Set),[g,m]=p.useState(!1),y=p.useRef(null),b=p.useRef(new Map);p.useEffect(()=>{m(!1),h(new Set),f(new Set),b.current.clear(),a(0),c(0)},[e]),p.useEffect(()=>{if(e.length===0)return;const w=C=>new Promise(S=>{if(b.current.has(C)||d.has(C)){S();return}const T=new Image;T.onload=()=>{b.current.set(C,T),h(L=>{const k=new Set(L).add(C);return!g&&C===e[0]&&m(!0),k}),S()},T.onerror=()=>{f(L=>new Set(L).add(C)),S()},T.src=C});(async()=>{const C=Math.min(5,e.length),S=[];for(let T=0;T<C;T++){const L=(o+T)%e.length;S.push(w(e[L]))}await Promise.all(S)})()},[e,o,d,g]),p.useEffect(()=>{if(e.length===0||e.length===1)return;const w=()=>{y.current=window.setInterval(()=>{a(C=>(C+1)%e.length),c(C=>C+1)},n)},j=window.setTimeout(w,2e3);return()=>{window.clearTimeout(j),y.current&&(window.clearInterval(y.current),y.current=null)}},[e.length,n]),p.useEffect(()=>()=>{y.current&&(window.clearInterval(y.current),y.current=null)},[]);const v=e[o]||"",_=u.has(v)||b.current.has(v),x=d.has(v);return p.useEffect(()=>{if(x&&e.length>1&&!e.every(j=>d.has(j))){const j=(o+1)%e.length;a(j),c(C=>C+1)}},[x,o,e.length,e,d]),e.length===0?null:i.jsxs("div",{className:En("image-slideshow-container",t),"aria-hidden":!0,children:[i.jsx("div",{className:"image-slideshow-fallback"}),!g&&e.length>0&&i.jsx("div",{className:"loading-message",children:r("loadingImages")}),_&&!x&&i.jsx("div",{className:"image-slideshow-slide",style:{backgroundImage:`url(${v})`,animationDuration:`${n}ms`,"--zoom-scale":s}},l)]})}function ii(e){return e.replace(/&amp;/g,"&")}const eu=["r.jina.ai","api.allorigins.win/get?url=","corsproxy.io/?"],Ty=(e,t=0)=>{const n=eu[t];if(n==="api.allorigins.win/get?url=")return`https://${n}${encodeURIComponent(e)}`;if(n==="corsproxy.io/?")return`https://${n}${encodeURIComponent(e)}`;const s=e.replace(/^https?:\/\//,""),r=e.startsWith("https://")?"https":"http";return`https://${n}/${r}://${s}`};async function Ay(e,t,n){var s,r,o,a,l,c,u,h,d,f,g;const m=new Set;let y=null;const b=[x=>`https://www.reddit.com/r/${e}/top.json?limit=100&t=year&raw_json=1${x?`&after=${x}`:""}`,x=>`https://www.reddit.com/r/${e}/hot.json?limit=100&raw_json=1${x?`&after=${x}`:""}`],v=async x=>{try{const w=await fetch(x,{signal:n,credentials:"omit",mode:"cors",headers:{"User-Agent":"BlitzedOut/1.0",Accept:"application/json, text/plain, */*","Accept-Language":"en-US,en;q=0.9"}});if(w.ok){const j=await w.text();try{return JSON.parse(j)}catch(C){const S=j.indexOf("{"),T=j.lastIndexOf("}");if(S!==-1&&T!==-1&&T>S)try{return JSON.parse(j.slice(S,T+1))}catch(L){return null}return null}}}catch(w){if(w instanceof DOMException&&w.name==="AbortError")throw w}for(let w=0;w<eu.length;w++)try{const j=await fetch(Ty(x,w),{signal:n,credentials:"omit",mode:"cors",headers:{"User-Agent":"BlitzedOut/1.0",Accept:"application/json, text/plain, */*"}});if(!j.ok)continue;const C=await j.text();let S;try{const T=JSON.parse(C);S=T.contents?JSON.parse(T.contents):T}catch(T){const L=C.indexOf("{"),k=C.lastIndexOf("}");if(L!==-1&&k!==-1&&k>L)try{S=JSON.parse(C.slice(L,k+1))}catch(I){continue}else continue}if(S)return S}catch(j){if(j instanceof DOMException&&j.name==="AbortError")throw j;continue}return null};let _=0;for(;m.size<t&&_<b.length;){y=null;for(let x=0;x<5&&m.size<t;x+=1){const w=b[_](y),j=await v(w);if(!j)break;const C=(r=(s=j==null?void 0:j.data)==null?void 0:s.children)!=null?r:[];y=(a=(o=j==null?void 0:j.data)==null?void 0:o.after)!=null?a:null;for(const S of C){const T=S==null?void 0:S.data;if(!T)continue;const L=T.url_overridden_by_dest,k=T.post_hint;if(T.is_gallery&&T.media_metadata&&T.gallery_data){const N=T.gallery_data.items||[];for(const D of N){const R=T.media_metadata[D.media_id],V=((l=R==null?void 0:R.s)==null?void 0:l.u)||((c=R==null?void 0:R.s)==null?void 0:c.gif)||((u=R==null?void 0:R.s)==null?void 0:u.mp4);if(typeof V=="string"){const O=V.startsWith("http")?V:`https:${V}`;/\.(jpe?g|png|gif|webp)(\?.*)?$/i.test(O)&&m.add(ii(O))}}continue}if(k==="image"&&typeof L=="string"&&/\.(jpe?g|png|gif|webp)(\?.*)?$/i.test(L)){m.add(ii(L));continue}const I=(g=(f=(d=(h=T.preview)==null?void 0:h.images)==null?void 0:d[0])==null?void 0:f.source)==null?void 0:g.url;if(I){const N=I.startsWith("http")?I:`https:${I}`;m.add(ii(N))}}if(!y)break}_+=1}return Array.from(m).slice(0,t)}async function Py(e,t){const n=e.maxImages||150;return{images:await Ay(e.subreddit,n,t),source:`r/${e.subreddit}`}}function tu(e){try{const t=new URL(e);return/(^|\.)reddit\.com$/i.test(t.hostname)&&/\/r\//i.test(t.pathname)}catch(t){return!1}}function Ey(e){var t;try{const s=new URL(e).pathname.match(/\/r\/([^/]+)/i);return(t=s==null?void 0:s[1])!=null?t:null}catch(n){return null}}const Iy=3e5,sa=new Map,ri=new Map;async function Ly(e,t){const n=JSON.stringify(e),s=Date.now(),r=sa.get(n);if(r&&s-r.fetchedAt<Iy)return r.result;const o=ri.get(n);if(o)try{return await o}catch(l){}const a=Py(e,t).then(l=>(sa.set(n,{fetchedAt:Date.now(),result:l}),l)).finally(()=>{ri.delete(n)});return ri.set(n,a),a}function My(e){const{t}=F(),[n,s]=p.useState([]),[r,o]=p.useState(!1),[a,l]=p.useState(null),[c,u]=p.useState(null),h=p.useRef(null),d=p.useRef(null),f=p.useRef(null);return p.useEffect(()=>{if(h.current&&h.current.abort(),d.current&&(clearTimeout(d.current),d.current=null),f.current&&(clearTimeout(f.current),f.current=null),s([]),l(null),u(null),!e||!tu(e)){o(!1);return}const g=Ey(e);if(!g){l("invalidRedditUrl"),o(!1);return}const m={subreddit:g,maxImages:150};o(!0);const y=new AbortController;h.current=y;const b=async(v=0)=>{try{const _=await Ly(m,y.signal);if(y.signal.aborted)return;s(_.images),u(_.source),l(null),o(!1)}catch(_){if(y.signal.aborted)return;if(v<2){const w=Math.pow(2,v)*1e3;f.current=setTimeout(()=>{y.signal.aborted||b(v+1)},w);return}l("redditBlocked"),s([]),u(null),o(!1)}};return d.current=setTimeout(b,300),()=>{y.abort(),d.current&&(clearTimeout(d.current),d.current=null),f.current&&(clearTimeout(f.current),f.current=null)}},[e]),p.useEffect(()=>()=>{h.current&&h.current.abort(),d.current&&(clearTimeout(d.current),d.current=null),f.current&&(clearTimeout(f.current),f.current=null)},[]),{images:n,isLoading:r,error:a?t(a):null,source:c}}function Ry({url:e}){const{t}=F(),n=et(),{images:s,isLoading:r,error:o}=My(e);return r?i.jsxs("div",{className:"slideshow-container slideshow-loading","aria-hidden":!0,children:[i.jsx("div",{className:"image-slideshow-fallback"}),i.jsx("div",{className:"loading-message",children:t("loadingRedditImages")})]}):o?i.jsxs("div",{className:"slideshow-container slideshow-error","aria-hidden":!0,children:[i.jsx("div",{className:"image-slideshow-fallback"}),i.jsxs("div",{className:"error-message",style:{position:"absolute",bottom:"20px",right:"20px",background:Ue(n.palette.background.paper,.7),color:n.palette.text.primary,padding:"12px 16px",borderRadius:"8px",fontSize:"14px",maxWidth:"300px",zIndex:1e3},children:[i.jsx("strong",{children:t("redditBackgroundNote")}),i.jsx("br",{}),t("redditBlocked")]})]}):s.length===0?i.jsx("div",{className:"slideshow-container slideshow-empty","aria-hidden":!0,children:i.jsx("div",{className:"image-slideshow-fallback"})}):i.jsx(Cy,{images:s})}function Oi({url:e=null,isVideo:t=null}){const n=e&&/\.(mp4|webm|ogg|mov|gif)(\?.*)?$/i.test(e),s=e?tu(e):!1,r=e==="color"||e==="gray"||(e==null?void 0:e.includes("/color"))||(e==null?void 0:e.includes("/gray")),o=e&&!r&&(t||!t&&e),a=!t&&s&&e;return i.jsxs(A,{className:En("main-container",!o&&"default-background"),role:"presentation",sx:{backgroundImage:!t&&e&&!r&&!s?`url(${e})`:"none"},children:[t&&!s&&(n?i.jsx(ky,{url:e}):i.jsx("iframe",{src:e||void 0,title:"video",width:"100%",height:"100%",allow:"autoplay; fullscreen; encrypted-media; picture-in-picture",sandbox:"allow-same-origin allow-scripts allow-presentation",style:{border:"none"}})),a?i.jsx(Ry,{url:e}):null]})}const oi=()=>{const e=document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||null},$y=()=>{const e=document;return!!(e.fullscreenEnabled||e.webkitFullscreenEnabled||e.mozFullScreenEnabled||e.msFullscreenEnabled)},Dy=async e=>{const t=e;if(t.requestFullscreen)return t.requestFullscreen();if(t.webkitRequestFullscreen)return t.webkitRequestFullscreen();if(t.mozRequestFullScreen)return t.mozRequestFullScreen();if(t.msRequestFullscreen)return t.msRequestFullscreen();throw new Error("Fullscreen API is not supported on this device/browser")},Ny=async()=>{const e=document;if(e.exitFullscreen)return e.exitFullscreen();if(e.webkitExitFullscreen)return e.webkitExitFullscreen();if(e.mozCancelFullScreen)return e.mozCancelFullScreen();if(e.msExitFullscreen)return e.msExitFullscreen();throw new Error("Exit fullscreen is not supported on this device/browser")},By=()=>"onfullscreenchange"in document?"fullscreenchange":"onwebkitfullscreenchange"in document?"webkitfullscreenchange":"onmozfullscreenchange"in document?"mozfullscreenchange":"onMSFullscreenChange"in document?"MSFullscreenChange":"fullscreenchange";function Oy(){const e=$y(),[t,n]=p.useState(()=>e?oi()!=null:!1);p.useEffect(()=>{if(!e){n(!1);return}const r=()=>{n(oi()!=null)},o=By();return document.addEventListener(o,r),()=>{document.removeEventListener(o,r)}},[e]);const s=p.useCallback(()=>{if(!e){console.warn("Fullscreen API is not supported on this device/browser (likely iOS Safari)");return}oi()==null?Dy(document.documentElement).catch(o=>{console.error("Error attempting to enable fullscreen:",o),navigator.userAgent.includes("Safari")&&navigator.userAgent.includes("Mobile")&&console.warn("Note: iOS Safari does not support the Fullscreen API")}):Ny().catch(o=>{console.error("Error attempting to exit fullscreen:",o)})},[e]);return{isFullscreen:t,toggleFullscreen:s,isSupported:e}}function Fy(e){const t=/vimeo\.com\/(\d+)/,n=e.match(t);return`https://player.vimeo.com/video/${n?n[1]:""}?autoplay=1&loop=1&autostart=true`}function Vy(e){const t=/(?:youtube\.com\/(?:[^/]+\/.+\/|(?:v|e(?:mbed)?)\/|[^#]*[?&]v=|youtu\.be\/)([^"&?/ ]{11})|^(?:[^"&?/ ]{11})$)/,n=e.match(t);return`https://www.youtube.com/embed/${n?n[1]:""}?autoplay=1&loop=1&autostart=true&mute=1&playsinline=1&controls=0&disablekb=1&fs=0&modestbranding=1&rel=0&iv_load_policy=3`}function zy(e){const t=/drive\.google\.com\/file\/d\/([^/]+)/,n=e.match(t);return`https://drive.google.com/file/d/${n?n[1]:""}/preview?loop=1`}function Uy(e){const t=/dropbox\.com\/s\/([^/]+)/,n=e.match(t);return`https://www.dropbox.com/s/${n?n[1]:""}?raw=1`}function Gy(e){return`https://pornhub.com/embed/${new URL(e).searchParams.get("viewkey")||""}?autoplay=1&loop=1&autostart=true&playsinline=1`}function Wy(e){const t=e.split("-");return`https://xhamster.com/xembed.php?video=${t[t.length-1]}?autoplay=1&loop=1&autostart=true&playsinline=1`}function Ky(e){const t=/media1?\.tenor\.com\/(?:m\/)?([a-zA-Z0-9_-]+)\/[^/]*\.(mp4|gif|webp|webm)/,n=e.match(t);if(n){const o=n[2].toLowerCase();return{url:e,isVideo:["mp4","webm"].includes(o)}}const s=/tenor\.com\/view\/[^/]*-(\d+)/,r=e.match(s);return r?{url:`https://tenor.com/embed/${r[1]}`,isVideo:!0}:{url:e,isVideo:!1}}function qy(e){const t=/giphy\.com\/gifs\/[^/]*-([a-zA-Z0-9]+)/,n=e.match(t);return`https://media.giphy.com/media/${n?n[1]:""}/giphy.gif`}function Hy(e){return/\d+\.media\.tumblr\.com\/.*\.(gif|mp4|webm)(\?.*)?$/i.test(e),e}function Yy(e){const t=/(?:gfycat\.com|redgifs\.com)\/(?:watch\/)?([a-zA-Z0-9]+)/,n=e.match(t),s=n?n[1]:"";return pe(e,["redgifs.com"])?`https://files.redgifs.com/${s}.mp4`:`https://giant.gfycat.com/${s}.mp4`}function Xy(e){const t=/redtube\.com\/(\d+)/,n=e.match(t);return`https://embed.redtube.com/?id=${n?n[1]:""}&autoplay=true&auto_play=1&playsinline=1&controls=1`}function Jy(e){const t=/youporn\.com\/watch\/(\d+)/,n=e.match(t);return`https://www.youporn.com/embed/${n?n[1]:""}?autoplay=1&playsinline=1`}function Zy(e){const t=/tube8\.com\/[^/]+\/[^/]+\/(\d+)/,n=e.match(t);return`https://www.tube8.com/embed/${n?n[1]:""}?autoplay=1&playsinline=1`}function Qy(e){return`https://twitframe.com/show?url=${encodeURIComponent(e)}`}function ex(e){try{const a=new URL(e);if((a.host==="discordapp.net"||a.host.endsWith(".discordapp.net"))&&a.pathname.startsWith("/external/")&&(a.pathname.includes("/https/i.imgur.com/")||a.pathname.includes("/https/imgur.com/")))return e}catch(a){console.debug("URL parsing failed for Discord proxy check:",a)}try{const a=new URL(e);if(a.host==="i.imgur.com"&&(a.search||a.pathname.match(/\.[a-zA-Z0-9]+$/)))return e}catch(a){console.debug("URL parsing failed for direct link check:",a)}let t="",n=!1;try{const a=new URL(e);n=a.host==="imgur.com"||a.host==="i.imgur.com"}catch(a){return console.debug("URL parsing failed for Imgur processing:",a),""}if(!n)return"";if(e.includes("/gallery/")){const a=e.match(/imgur\.com\/gallery\/[^#]*#([a-zA-Z0-9]+)/);if(a)t=a[1];else{const l=e.match(/imgur\.com\/gallery\/.*-([a-zA-Z0-9]+)/);if(l)t=l[1];else return console.debug("Could not extract image ID from gallery URL, returning original:",e),e}}else{const a=/imgur\.com\/([a-zA-Z0-9]+)(?:\.(mp4|mov|avi|webm|mkv|flv|wmv|jpg|jpeg|png|gif|gifv|webp|bmp|tiff|svg))?|images-ext-\d+\.discordapp\.net\/external\/[^/]+\/https\/i\.imgur\.com\/([a-zA-Z0-9]+)\.(mp4|mov|avi|webm|mkv|flv|wmv|jpg|jpeg|png|gif|gifv|webp|bmp|tiff|svg)/,l=e.match(a);t=l?l[1]||l[3]:""}if(!t)return"";const s=e.match(/\.([a-zA-Z0-9]+)(?:\?.*)?$/);let r="jpg";if(s&&s[1]){let a=s[1].toLowerCase();const l={gifv:"mp4"};l[a]&&(a=l[a]),["jpg","jpeg","png","gif","webp","mp4","mov","avi","webm","mkv","flv","wmv","bmp","tiff","svg"].includes(a)&&(r=a)}return`https://i.imgur.com/${t}.${r}`}function Fi(e){return/\.(mp4|webm|ogg|mov)(\?.*)?$/.test(e)}function tx(e){return pe(e,["media.discordapp.net","cdn.discordapp.com"])&&!Fi(e)}function pe(e,t){try{const n=new URL(e);return t.some(s=>n.host===s||n.host.endsWith("."+s))}catch(n){return console.debug("URL parsing failed in isValidHost, rejecting for security:",n),!1}}function nu(e){let t=null,n=!0;if(!e)return{url:"",isVideo:!1};switch(!0){case pe(e,["vimeo.com"]):t=Fy(e);break;case pe(e,["youtube.com","youtu.be"]):t=Vy(e);break;case pe(e,["drive.google.com"]):t=zy(e);break;case pe(e,["pornhub.com"]):t=Gy(e);break;case pe(e,["xhamster.com"]):t=Wy(e);break;case pe(e,["dropbox.com"]):t=Uy(e);break;case pe(e,["imgur.com","i.imgur.com"]):t=ex(e);break;case pe(e,["tenor.com"]):{const s=Ky(e);t=s.url,n=s.isVideo;break}case pe(e,["giphy.com"]):t=qy(e),n=!0;break;case(pe(e,["tumblr.com","media.tumblr.com"])||/\d+\.media\.tumblr\.com/.test(e)):t=Hy(e),n=t?Fi(t):!1;break;case pe(e,["gfycat.com","redgifs.com"]):t=Yy(e),n=!0;break;case pe(e,["redtube.com"]):t=Xy(e);break;case pe(e,["youporn.com"]):t=Jy(e);break;case pe(e,["tube8.com"]):t=Zy(e);break;case pe(e,["twitter.com","x.com"]):t=Qy(e),n=!1;break;case pe(e,["thisvid.com"]):t=e;break;case pe(e,["boyfriendtv.com"]):t=e;break;case tx(e):t=e,n=!1;break;case Fi(e):t=e;break;default:t=ap(e),n=!1;break}return{url:t,isVideo:n}}function nx(e,t){const{background:n,backgroundURL:s,roomBackgroundURL:r}=e;let o=null;return n?n==="custom"?o=s||null:n==="useRoomBackground"?!Q(t)&&r?o=r:o="color":o=n:o="color",o||(o="color"),o==="color"||o==="gray"?{url:o,isVideo:!1}:nu(o)}function sx(e){const t=Yt(e,"room");let n=!1,s="";if(t){let r,o;try{const c=JSON.parse(t.settings||"{}");r=c.roomBackground,o=c.roomBackgroundURL}catch(c){}let a=null;r==="custom"&&o?a=o:r&&r!=="useAppBackground"?a=r:o&&(a=o);const l=nu(a);n=!!l.isVideo,l.url&&(s=l.url)}return["color","gray"].some(r=>s.includes(r))&&(s=""),{isVideo:n,url:s}}function ix(e){return{uid:e.uid,displayName:e.displayName,isSelf:e.isSelf,isFinished:e.isFinished}}function su(e){const[t,n]=p.useState(null),s=Zc(),r=p.useMemo(()=>s.map(a=>`${a.uid}-${a.displayName}-${a.isFinished}-${a.isSelf}`).join("|"),[s]),o=p.useMemo(()=>e?`${e.uid}-${e.displayName||""}`:null,[e]);return p.useEffect(()=>{if(!e){n(null);return}if(s.length<=1){n(null);return}const a=s.filter(d=>!d.isFinished);if(a.length<=1){n(null);return}let l=-1;l=a.findIndex(d=>d.uid===e.uid),l===-1&&(l=a.findIndex(d=>d.displayName===e.displayName)),l===-1&&(l=0);const c=(l+1)%a.length,u=a[c],h=ix(u);n(h)},[o,r]),t}const rx="actions",ox=e=>{var t,n;const{text:s,displayName:r}=e;if(!r)return{};const o=s==null?void 0:s.split(`
`),[a,l]=(o==null?void 0:o.slice(1))||[],c=(t=a==null?void 0:a.split(":")[1])==null?void 0:t.trim(),u=(n=l==null?void 0:l.split(":")[1])==null?void 0:n.trim();return{displayName:r,type:c,activity:u}};function ax(){const{id:e}=Le(),[t,n]=p.useState(""),[s,r]=p.useState(!1),[o,a]=p.useState(!1),[l,c]=p.useState(!1),{messages:u,isLoading:h}=Mt(),{isVideo:d,url:f}=sx(u),g=Yt(u,rx),m=su(g),{isFullscreen:y,toggleFullscreen:b,isSupported:v}=Oy();p.useEffect(()=>{Fs().currentUser||Hf("Cast Viewer").catch(S=>{console.error("Anonymous login failed:",S)})},[e]),p.useEffect(()=>{if(!d||!f)return;const C=()=>{const L=document.querySelectorAll("video"),k=document.querySelectorAll("iframe");L.forEach(I=>{I.paused&&(I.muted=!0,I.play().catch(()=>{c(!0)}))}),k.forEach(I=>{if(I.src)try{const N=new URL(I.src,window.location.origin),D=N.searchParams;let R=!1;D.get("autoplay")!=="1"&&(D.set("autoplay","1"),R=!0),D.get("mute")!=="1"&&(D.set("mute","1"),R=!0),R&&(N.search=D.toString(),I.src=N.toString())}catch(N){if(!I.src.includes("autoplay=1")){const D=I.src.includes("?")?"&":"?";I.src+=`${D}autoplay=1&mute=1`}}})},S=setTimeout(C,500),T=setTimeout(C,2e3);return()=>{clearTimeout(S),clearTimeout(T)}},[d,f,u.length]),p.useEffect(()=>{var C,S;const T=(S=(C=window.cast)==null?void 0:C.framework)==null?void 0:S.CastReceiverContext,L=navigator.userAgent,k=L.includes("CrKey")||L.includes("TV"),I=window.self!==window.top,N=T||k||window.location.search.includes("chromecast")||window.location.search.includes("receiver");return N&&(document.body.classList.add("cast-receiver-mode"),document.body.classList.remove("theme-light"),a(!0)),I&&document.body.classList.add("in-iframe"),()=>{N&&document.body.classList.remove("cast-receiver-mode"),I&&document.body.classList.remove("in-iframe")}},[]),p.useEffect(()=>{if(h)return;const C=u[u.length-1];(C==null?void 0:C.type)==="settings"&&(r(!0),n(`${C.displayName} ${Y("changedSettings")}`))},[u,h]);const _=()=>{document.querySelectorAll("video").forEach(S=>{S.paused&&S.play().catch(console.error)}),c(!1)};if(!g)return i.jsxs(A,{className:"flex-column cast-main-container",style:{backgroundImage:!d&&f?`url(${f})`:"none"},children:[!!f&&i.jsx(Oi,{url:f,isVideo:d}),l&&i.jsx(A,{onClick:_,className:"user-interaction-overlay",children:"Click to enable autoplay"}),i.jsx(q,{container:!0,spacing:0,direction:"column",alignItems:"center",justifyContent:"center",className:"cast-container cast-grid-container",children:i.jsx(q,{container:!0,justifyContent:"center",children:i.jsxs("div",{className:"action-box-large responsive-cast-box",children:[i.jsxs(P,{variant:"h2",className:"cast-title",children:["blitzedout.com/",e]}),h?i.jsx(P,{variant:"h4",className:"cast-loading-text",children:"Connecting to game..."}):i.jsx(P,{variant:"h4",className:"cast-ready-text",children:"Ready for game to start"})]})})})]});const{displayName:x,type:w,activity:j}=ox(g);return i.jsxs(A,{className:"flex-column cast-main-container",onClick:l?_:void 0,style:{backgroundImage:!d&&f?`url(${f})`:"none",cursor:l?"pointer":"default"},children:[!!f&&i.jsx(Oi,{url:f,isVideo:d}),i.jsxs(A,{display:"flex",justifyContent:"space-between",className:"cast-header-bar",children:[i.jsx(A,{flex:"1",children:!o&&!y&&v&&i.jsx(z,{variant:"text",onClick:b,className:"cast-fullscreen-button",children:Y("fullscreen")})}),i.jsx(A,{textAlign:"center",flex:"1",children:!!(m!=null&&m.displayName)&&i.jsx(P,{variant:"h4",className:"cast-next-player",children:i.jsx(E,{i18nKey:"nextPlayersTurn",values:{player:m.displayName}})})},m==null?void 0:m.displayName),i.jsx(A,{flex:"1",textAlign:"right",className:"text-stroke",children:j&&i.jsxs(P,{variant:"h4",className:"cast-room-url",children:["blitzedout.com/",e]})})]}),i.jsx(q,{container:!0,spacing:0,direction:"column",alignItems:"center",justifyContent:"center",className:"cast-container cast-grid-container-adjusted",children:i.jsx(q,{container:!0,justifyContent:"center",children:j?i.jsxs(q,{size:12,className:"action-box-responsive responsive-cast-box",children:[i.jsx(P,{variant:"h3",className:"cast-type-text",children:`${w} ${Y("for")} ${x}`}),i.jsx(A,{className:"cast-divider",children:i.jsx(ce,{})}),i.jsx(P,{variant:"h1",className:"cast-activity-text",children:j})]}):i.jsx("div",{className:"action-box-responsive responsive-cast-box",children:i.jsxs(P,{variant:"h1",className:"cast-room-main",children:["blitzedout.com/",e]})})})},u.length),i.jsx(gt,{open:!!s,close:()=>r(!1),hideCloseButton:!0,children:i.jsx(P,{variant:"h5",className:"cast-alert-text",children:t})})]})}/*! Capacitor: https://capacitorjs.com/ - MIT License */var en;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(en||(en={}));class Kt extends Error{constructor(t,n,s){super(t),this.message=t,this.code=n,this.data=s}}const lx=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},cx=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},s=n.Plugins=n.Plugins||{},r=()=>t!==null?t.name:lx(e),o=()=>r()!=="web",a=d=>{const f=u.get(d);return!!(f!=null&&f.platforms.has(r())||l(d))},l=d=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(g=>g.name===d)},c=d=>e.console.error(d),u=new Map,h=(d,f={})=>{const g=u.get(d);if(g)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),g.proxy;const m=r(),y=l(d);let b;const v=async()=>(!b&&m in f?b=typeof f[m]=="function"?b=await f[m]():b=f[m]:t!==null&&!b&&"web"in f&&(b=typeof f.web=="function"?b=await f.web():b=f.web),b),_=(T,L)=>{var k,I;if(y){const N=y==null?void 0:y.methods.find(D=>L===D.name);if(N)return N.rtype==="promise"?D=>n.nativePromise(d,L.toString(),D):(D,R)=>n.nativeCallback(d,L.toString(),D,R);if(T)return(k=T[L])===null||k===void 0?void 0:k.bind(T)}else{if(T)return(I=T[L])===null||I===void 0?void 0:I.bind(T);throw new Kt(`"${d}" plugin is not implemented on ${m}`,en.Unimplemented)}},x=T=>{let L;const k=(...I)=>{const N=v().then(D=>{const R=_(D,T);if(R){const V=R(...I);return L=V==null?void 0:V.remove,V}else throw new Kt(`"${d}.${T}()" is not implemented on ${m}`,en.Unimplemented)});return T==="addListener"&&(N.remove=async()=>L()),N};return k.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(k,"name",{value:T,writable:!1,configurable:!1}),k},w=x("addListener"),j=x("removeListener"),C=(T,L)=>{const k=w({eventName:T},L),I=async()=>{const D=await k;j({eventName:T,callbackId:D},L)},N=new Promise(D=>k.then(()=>D({remove:I})));return N.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await I()},N},S=new Proxy({},{get(T,L){switch(L){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?C:w;case"removeListener":return j;default:return x(L)}}});return s[d]=S,u.set(d,{name:d,proxy:S,platforms:new Set([...Object.keys(f),...y?[m]:[]])}),S};return n.convertFileSrc||(n.convertFileSrc=d=>d),n.getPlatform=r,n.handleError=c,n.isNativePlatform=o,n.isPluginAvailable=a,n.registerPlugin=h,n.Exception=Kt,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},ux=e=>e.Capacitor=cx(e),Vi=ux(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{}),Vr=Vi.registerPlugin;class zr{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let s=!1;this.listeners[t]||(this.listeners[t]=[],s=!0),this.listeners[t].push(n);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),s&&this.sendRetainedArgumentsForEvent(t);const a=async()=>this.removeListener(t,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,s){const r=this.listeners[t];if(!r){if(s){let o=this.retainedEventArguments[t];o||(o=[]),o.push(n),this.retainedEventArguments[t]=o}return}r.forEach(o=>o(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(t="not implemented"){return new Vi.Exception(t,en.Unimplemented)}unavailable(t="not available"){return new Vi.Exception(t,en.Unavailable)}async removeListener(t,n){const s=this.listeners[t];if(!s)return;const r=s.indexOf(n);this.listeners[t].splice(r,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(s=>{this.notifyListeners(t,s)}))}}const ia=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ra=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class dx extends zr{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(s=>{if(s.length<=0)return;let[r,o]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=ra(r).trim(),o=ra(o).trim(),n[r]=o}),n}async setCookie(t){try{const n=ia(t.key),s=ia(t.value),r=`; expires=${(t.expires||"").replace("expires=","")}`,o=(t.path||"/").replace("path=",""),a=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${s||""}${r}; path=${o}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Vr("CapacitorCookies",{web:()=>new dx});const hx=async e=>new Promise((t,n)=>{const s=new FileReader;s.onload=()=>{const r=s.result;t(r.indexOf(",")>=0?r.split(",")[1]:r)},s.onerror=r=>n(r),s.readAsDataURL(e)}),fx=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(r=>r.toLocaleLowerCase()).reduce((r,o,a)=>(r[o]=e[t[a]],r),{})},mx=(e,t=!0)=>e?Object.entries(e).reduce((s,r)=>{const[o,a]=r;let l,c;return Array.isArray(a)?(c="",a.forEach(u=>{l=t?encodeURIComponent(u):u,c+=`${o}=${l}&`}),c.slice(0,-1)):(l=t?encodeURIComponent(a):a,c=`${o}=${l}`),`${s}&${c}`},"").substr(1):null,px=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=fx(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(r.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[a,l]of Object.entries(e.data||{}))o.set(a,l);n.body=o.toString()}else if(r.includes("multipart/form-data")||e.data instanceof FormData){const o=new FormData;if(e.data instanceof FormData)e.data.forEach((l,c)=>{o.append(c,l)});else for(const l of Object.keys(e.data))o.append(l,e.data[l]);n.body=o;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(r.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class gx extends zr{async request(t){const n=px(t,t.webFetchExtra),s=mx(t.params,t.shouldEncodeUrlParams),r=s?`${t.url}?${s}`:t.url,o=await fetch(r,n),a=o.headers.get("content-type")||"";let{responseType:l="text"}=o.ok?t:{};a.includes("application/json")&&(l="json");let c,u;switch(l){case"arraybuffer":case"blob":u=await o.blob(),c=await hx(u);break;case"json":c=await o.json();break;case"document":case"text":default:c=await o.text()}const h={};return o.headers.forEach((d,f)=>{h[f]=d}),{data:c,headers:h,status:o.status,url:o.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Vr("CapacitorHttp",{web:()=>new gx});var Bt;(function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"})(Bt||(Bt={}));var bn;(function(e){e.Rear="REAR",e.Front="FRONT"})(bn||(bn={}));var zi;(function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"})(zi||(zi={}));class yx extends zr{async getPhoto(t){return new Promise(async(n,s)=>{if(t.webUseInput||t.source===Bt.Photos)this.fileInputExperience(t,n,s);else if(t.source===Bt.Prompt){let r=document.querySelector("pwa-action-sheet");r||(r=document.createElement("pwa-action-sheet"),document.body.appendChild(r)),r.header=t.promptLabelHeader||"Photo",r.cancelable=!1,r.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],r.addEventListener("onSelection",async o=>{o.detail===0?this.fileInputExperience(t,n,s):this.cameraExperience(t,n,s)})}else this.cameraExperience(t,n,s)})}async pickImages(t){return new Promise(async(n,s)=>{this.multipleFileInputExperience(n,s)})}async cameraExperience(t,n,s){if(customElements.get("pwa-camera-modal")){const r=document.createElement("pwa-camera-modal");r.facingMode=t.direction===bn.Front?"user":"environment",document.body.appendChild(r);try{await r.componentOnReady(),r.addEventListener("onPhoto",async o=>{const a=o.detail;a===null?s(new Kt("User cancelled photos app")):a instanceof Error?s(a):n(await this._getCameraPhoto(a,t)),r.dismiss(),document.body.removeChild(r)}),r.present()}catch(o){this.fileInputExperience(t,n,s)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(t,n,s)}fileInputExperience(t,n,s){let r=document.querySelector("#_capacitor-camera-input");const o=()=>{var a;(a=r.parentNode)===null||a===void 0||a.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input",r.type="file",r.hidden=!0,document.body.appendChild(r),r.addEventListener("change",a=>{const l=r.files[0];let c="jpeg";if(l.type==="image/png"?c="png":l.type==="image/gif"&&(c="gif"),t.resultType==="dataUrl"||t.resultType==="base64"){const u=new FileReader;u.addEventListener("load",()=>{if(t.resultType==="dataUrl")n({dataUrl:u.result,format:c});else if(t.resultType==="base64"){const h=u.result.split(",")[1];n({base64String:h,format:c})}o()}),u.readAsDataURL(l)}else n({webPath:URL.createObjectURL(l),format:c}),o()}),r.addEventListener("cancel",a=>{s(new Kt("User cancelled photos app")),o()})),r.accept="image/*",r.capture=!0,t.source===Bt.Photos||t.source===Bt.Prompt?r.removeAttribute("capture"):t.direction===bn.Front?r.capture="user":t.direction===bn.Rear&&(r.capture="environment"),r.click()}multipleFileInputExperience(t,n){let s=document.querySelector("#_capacitor-camera-input-multiple");const r=()=>{var o;(o=s.parentNode)===null||o===void 0||o.removeChild(s)};s||(s=document.createElement("input"),s.id="_capacitor-camera-input-multiple",s.type="file",s.hidden=!0,s.multiple=!0,document.body.appendChild(s),s.addEventListener("change",o=>{const a=[];for(let l=0;l<s.files.length;l++){const c=s.files[l];let u="jpeg";c.type==="image/png"?u="png":c.type==="image/gif"&&(u="gif"),a.push({webPath:URL.createObjectURL(c),format:u})}t({photos:a}),r()}),s.addEventListener("cancel",o=>{n(new Kt("User cancelled photos app")),r()})),s.accept="image/*",s.click()}_getCameraPhoto(t,n){return new Promise((s,r)=>{const o=new FileReader,a=t.type.split("/")[1];n.resultType==="uri"?s({webPath:URL.createObjectURL(t),format:a,saved:!1}):(o.readAsDataURL(t),o.onloadend=()=>{const l=o.result;n.resultType==="dataUrl"?s({dataUrl:l,format:a,saved:!1}):s({base64String:l.split(",")[1],format:a,saved:!1})},o.onerror=l=>{r(l)})})}async checkPermissions(){if(typeof navigator=="undefined"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch(t){throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const xx=Vr("Camera",{web:()=>new yx}),bx=e=>{const t=e.length-22;return 4*Math.ceil(t/3)*.5624896334383812/1e6};function vx({room:e,isTransparent:t}){const{user:n}=De(),[s,r]=p.useState(""),[o,a]=p.useState(""),{t:l}=F(),c=d=>{r(d.target.value)},u=d=>{d.preventDefault(),Pt({room:e,user:n,text:s,type:"chat"}),r("")},h=async()=>{let d="";try{d=await xx.getPhoto({quality:90,allowEditing:!0,resultType:zi.Base64})}catch(f){return console.warn("Failed to take photo:",!1,f),""}return d.base64String&&bx(d.base64String)>5?a("File too large! Max size is 5MB. If you need to send a larger file, please use a link from another site."):Pt({room:e,user:n,type:"media",image:d})};return i.jsxs(i.Fragment,{children:[i.jsx("form",{onSubmit:u,className:`message-input-container ${t?"transparent":""}`,children:i.jsx(J,{multiline:!0,placeholder:l("messageInput"),fullWidth:!0,value:s,onChange:c,onKeyDown:d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),u(d))},required:!0,inputProps:{minLength:1},InputProps:{startAdornment:i.jsx(pn,{position:"start",children:i.jsx(Z,{type:"button",color:"primary",onClick:h,children:i.jsx(Bm,{})})}),endAdornment:i.jsx(pn,{position:"end",children:i.jsx(Z,{type:"submit",color:"primary",disabled:s.length<1,children:i.jsx(Nm,{})})})},helperText:i.jsx(E,{i18nKey:"markdown"})})}),i.jsx(gt,{open:!!o,close:()=>a(""),children:o})]})}function Ur(e,t=!0){const[n,s]=p.useState(e),[r,o]=p.useState(t),a=p.useCallback(()=>o(l=>!l),[]);return p.useEffect(()=>{if(n===-1&&s(0),n<=0||r)return;const l=setInterval(()=>{s(c=>c-1)},1e3);return()=>clearInterval(l)},[n,r]),{timeLeft:n,setTimeLeft:s,togglePause:a,isPaused:r}}function iu({textString:e,preventParentClose:t,noPadding:n=!1}){const[s,r]=p.useState(!1),o=Ie(),[a,l]=e.split(" ");let c=parseInt(a,10);(Number.isNaN(c)||c<0)&&(c=0);const{timeLeft:u,setTimeLeft:h,togglePause:d,isPaused:f}=Ur(c,!0);p.useEffect(()=>d(),[d]);const g=()=>{t(),r(!0),h(c),f&&d()};p.useEffect(()=>{s&&u<=0&&r(!1)},[s,u]);const m=()=>r(!1);return i.jsxs(i.Fragment,{children:[i.jsx(z,{onClick:g,sx:{p:n?0:1},color:"secondary",children:e}),i.jsxs(je,{open:s,onClose:m,fullScreen:o,maxWidth:"xs","aria-labelledby":"countdown-dialog-title",children:[i.jsx(Ce,{id:"countdown-dialog-title",sx:{pr:6},children:i.jsx(Qe,{close:m})}),i.jsx(_e,{children:i.jsxs(A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:2,py:1},children:[i.jsxs(A,{sx:{position:"relative",display:"inline-flex"},children:[i.jsx(Ee,{variant:"determinate",value:Math.max(0,Math.min(100,u/c*100)),size:96,thickness:4,color:"primary",sx:{"& .MuiCircularProgress-circle":{transition:"stroke-dashoffset 1000ms linear"}}}),i.jsx(A,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(P,{variant:"h3","aria-live":"polite",children:u})})]}),i.jsx(P,{variant:"body2",color:"text.secondary",children:l}),i.jsxs(A,{sx:{display:"flex",gap:1},children:[i.jsx(Z,{onClick:d,color:"primary","aria-label":f?"resume countdown":"pause countdown",children:f?i.jsx(Un,{}):i.jsx(Om,{})}),i.jsx(Z,{onClick:()=>h(c),color:"primary","aria-label":"restart countdown",children:i.jsx(Fm,{})})]})]})})]})]})}function ai({children:e,title:t,onClick:n,disabled:s}){return i.jsx(q,{size:{xs:12,sm:6},container:!0,children:i.jsx(le,{sx:{width:"100%"},children:i.jsx(Qh,{sx:{height:"100%",display:"inline-flex",alignItems:"flex-start",justifyContent:"flex-start"},onClick:n,disabled:s,children:i.jsxs(he,{sx:{width:"100%",color:s?"gray":"white"},children:[i.jsx(P,{variant:"h5",children:t}),i.jsx(ce,{sx:{mb:2}}),e]})})})})}function wx(){const{t:e}=F(),{id:t}=Le(),{user:n}=De();return p.useCallback(async()=>{const r=`${e("restartingGame")}
#1: ${e("start")}
${e("action")}: ${e("start")}`;await Pt({room:t,user:n,text:r,type:"actions"})},[t,n,e])}function ru({isOpen:e=!1,close:t}){const{t:n}=F(),[s,r]=p.useState(!1),o=wx(),a=Ie(),l=Lr(),[c]=Me(),u=p.useCallback(()=>{o(),t()},[o,t]),h=p.useCallback(async()=>{await l({...c,boardUpdated:!0}),o(),t()},[l,c,o,t]),d=p.useCallback(()=>{r(!0),t()},[t]),f=p.useCallback(()=>{r(!1),o()},[o]);return i.jsxs(i.Fragment,{children:[i.jsx(je,{open:e,onClose:t,fullScreen:a,"aria-labelledby":"modal-game-over",children:i.jsxs(_e,{children:[i.jsx(P,{variant:"h4",textAlign:"center",sx:{mb:2,px:2},children:i.jsx(E,{i18nKey:"gameOverPlayAgain"})}),i.jsx(Qe,{close:t}),i.jsxs(q,{container:!0,spacing:2,alignItems:"stretch",children:[i.jsx(ai,{title:n("sameBoard"),onClick:u,children:i.jsx(E,{i18nKey:"sameBoardDescription"})}),i.jsx(ai,{title:n("rebuildBoard"),onClick:h,children:i.jsx(E,{i18nKey:"rebuildBoardDescription"})}),i.jsx(ai,{title:n("changeSettings"),onClick:d,children:i.jsx(E,{i18nKey:"changeSettingsDescription"})})]})]})}),!!s&&i.jsxs(je,{fullScreen:a,open:s,maxWidth:"md",children:[i.jsxs(Ce,{children:[i.jsx(E,{i18nKey:"gameSettingsHeading"}),i.jsx(Qe,{close:f})]}),i.jsx(_e,{children:i.jsx(Or,{closeDialog:f})})]})]})}function jx({open:e,text:t="",displayName:n="",handleClose:s,stopAutoClose:r=()=>null,nextPlayer:o=null,isMyMessage:a=!1}){const{t:l}=F(),c=Ie(),[u,h]=p.useState(!1),d=t==null?void 0:t.match(/#\d*:.*(?=\n)/gs),f=vc(t)||"",g=wc(t,l("seconds")),m=20,{timeLeft:y,togglePause:b}=Ur(m,!1),[v,_]=p.useState(!0),x=o==null?void 0:o.displayName,w=p.useCallback(()=>{b(),r(),_(!1)},[b,r,_]),j=p.useCallback(()=>{w(),h(!0)},[w]),C=p.useCallback(()=>{h(!1)},[]);return i.jsxs("div",{children:[i.jsxs(je,{open:e,onClose:s,fullScreen:c,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"transition-dialog-title","aria-describedby":"transition-dialog-description",children:[i.jsxs(Ce,{id:"transition-dialog-title",sx:{pr:6},children:[`${d} ${l("for")} ${n}`,i.jsx(Qe,{close:s})]}),i.jsx(A,{sx:{px:3},children:i.jsx(ef,{variant:"determinate",value:Math.max(0,Math.min(100,y/m*100)),sx:{height:4,borderRadius:2,mb:1,"& .MuiLinearProgress-bar":{transition:"transform 1000ms linear"}},"aria-label":l("autoCloseProgress")})}),i.jsxs(_e,{children:[i.jsx(P,{id:"transition-dialog-description",variant:"h4",sx:{mt:1,mb:1},children:f}),i.jsx(P,{variant:"caption",display:"block",sx:{mb:2},children:v?i.jsx(E,{i18nKey:"autoCloseModal",values:{timeLeft:y}}):i.jsx(E,{i18nKey:"autoCloseStopped"})}),(g==null?void 0:g.length)&&i.jsxs(A,{sx:{display:"flex",flexWrap:"wrap",gap:1,alignItems:"center"},children:[i.jsx(E,{i18nKey:"timers"}),g.map(S=>i.jsx(iu,{textString:S,preventParentClose:w},S))]}),!!o&&i.jsxs(A,{textAlign:"center",children:[i.jsx(ce,{sx:{my:2}}),i.jsx(P,{variant:"body1",children:o.isSelf?i.jsx(E,{i18nKey:"yourTurn"}):i.jsx(E,{i18nKey:"nextPlayersTurn",values:{player:x}})})]}),!!a&&t.includes(l("finish"))&&i.jsxs(A,{textAlign:"center",children:[i.jsx(ce,{sx:{my:2}}),i.jsx(z,{onClick:j,children:i.jsx(P,{children:l("playAgain")})})]})]})]}),i.jsx(ru,{isOpen:u,close:C})]})}const _x="/audio/roll-dice-DysgIh_A.mp3",Sx="/audio/message-CBVROrdp.mp3";function Ss(){return Ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ss.apply(null,arguments)}function kx(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function Cx(e){p.useEffect(e,[])}var Tx=["id","volume","playbackRate","soundEnabled","interrupt","onload"];function oa(e,t){var n={},s=n.volume,r=s===void 0?1:s,o=n.playbackRate,a=o===void 0?1:o,l=n.soundEnabled,c=l===void 0?!0:l,u=n.interrupt,h=u===void 0?!1:u,d=n.onload,f=kx(n,Tx),g=Fe.useRef(null),m=Fe.useRef(!1),y=Fe.useState(null),b=y[0],v=y[1],_=Fe.useState(null),x=_[0],w=_[1],j=function(){typeof d=="function"&&d.call(this),m.current&&v(this.duration()*1e3),w(this)};Cx(function(){return ht(()=>import("../js/chunk-CCm1Ib7k.js").then(function(k){return k.h}),__vite__mapDeps([5,2,1,3,0,4])).then(function(k){if(!m.current){var I;g.current=(I=k.Howl)!==null&&I!==void 0?I:k.default.Howl,m.current=!0,new g.current(Ss({src:Array.isArray(e)?e:[e],volume:r,rate:a,onload:j},f))}}),function(){m.current=!1}}),Fe.useEffect(function(){g.current&&x&&w(new g.current(Ss({src:Array.isArray(e)?e:[e],volume:r,onload:j},f)))},[JSON.stringify(e)]),Fe.useEffect(function(){x&&(x.volume(r),f.sprite||x.rate(a))},[x,r,a]);var C=Fe.useCallback(function(k){typeof k=="undefined"&&(k={}),!(!x||!c&&!k.forceSoundEnabled)&&(h&&x.stop(),k.playbackRate&&x.rate(k.playbackRate),x.play(k.id))},[x,c,h]),S=Fe.useCallback(function(k){x&&x.stop(k)},[x]),T=Fe.useCallback(function(k){x&&x.pause(k)},[x]),L=[C,{sound:x,stop:S,pause:T,duration:b}];return L}async function Ax(e,t){try{await Ln.speak(e,t,-2)}catch(n){console.error("TTS failed:",n)}}mt.extend(Hm);const ou=e=>{switch(e){case"zh":return"zh-cn";case"es":return"es";case"fr":return"fr";case"hi":return"hi";default:return"en"}},Px=e=>{const t=ou(e);mt.locale(t)},Ex=(e,t)=>{const n=ou(t);return mt(e).locale(n)};function Ix(){const{i18n:e}=F(),{user:t}=De(),{messages:n}=Mt(),[s,r]=p.useState(!1),[o]=oa(_x),[a]=oa(Sx),[l]=Me(),{playerDialog:c,othersDialog:u,mySound:h,otherSound:d,chatSound:f,readRoll:g,voicePreference:m}=l||{},y=p.useMemo(()=>[...n].pop(),[n]),b=p.useCallback(async T=>{if(T)try{await Ax(T,m)}catch(L){console.error("Failed to speak text:",L)}},[m]),v=p.useMemo(()=>{if(!(y!=null&&y.timestamp))return!1;const T=Tr(y.timestamp);return T?mt(T).diff(mt(),"seconds")>=-2:!1},[y]),_=p.useMemo(()=>(y==null?void 0:y.uid)===(t==null?void 0:t.uid),[y,t]),x=!!(c&&_),w=!!(u&&!_),j=(_&&h||!_&&d)&&(y==null?void 0:y.type)==="actions",C=_&&g&&(y==null?void 0:y.type)==="actions",S=f&&(y==null?void 0:y.type)==="chat";return p.useEffect(()=>{if(Px(e.resolvedLanguage||e.language),v&&(y==null?void 0:y.type)==="actions"&&(x||w)&&r(y),v&&y){if(j&&o(),C){const T=vc(y==null?void 0:y.text);b(T)}S&&a()}},[e.resolvedLanguage,e.language,y,_,x,w,j,C,S,o,a,b,v]),{message:s,setMessage:r,isMyMessage:!!_}}const Lx=()=>{const{t:e}=F(),{message:t,setMessage:n,isMyMessage:s}=Ix(),r=su(t),o=p.useRef(void 0);p.useEffect(()=>(t&&(o.current=setTimeout(()=>n(!1),21e3)),()=>{o.current&&clearTimeout(o.current)}),[t,n]);const a=p.useCallback(()=>{o.current&&clearTimeout(o.current),n(!1)},[n]),l=p.useCallback(()=>{o.current&&clearTimeout(o.current)},[]);return!t||typeof t!="object"||!t.text||t.text.includes(e("start"))?null:i.jsx(jx,{text:t==null?void 0:t.text,displayName:t==null?void 0:t.displayName,open:!0,handleClose:a,stopAutoClose:l,nextPlayer:r,isMyMessage:s})},Mx=({selectedRoll:e,handleMenuItemClick:t})=>{const[n,s]=p.useState(!1),r=p.useRef(null),o=()=>{s(c=>!c)},a=c=>{var u;c.target instanceof Node&&((u=r.current)!=null&&u.contains(c.target))||s(!1)},l=new Map;return l.set("restart",Y("restart")).set("manual",Y("manual")).set("30",Y("auto30")).set("60",Y("auto60")).set("90",Y("auto90")).set("custom",Y("setTimer")),i.jsxs(i.Fragment,{children:[i.jsx(z,{size:"small","aria-controls":n?"split-button-menu":void 0,"aria-expanded":n?"true":void 0,"aria-label":"select roll options","aria-haspopup":"menu",onClick:o,ref:r,children:i.jsx(Vm,{})}),i.jsx(tf,{sx:{zIndex:1},open:n,anchorEl:r.current,transition:!0,disablePortal:!0,placement:"top-end",children:({TransitionProps:c})=>i.jsx(nf,{...c,style:{transformOrigin:"right bottom"},children:i.jsx(Gl,{children:i.jsx(sf,{onClickAway:a,children:i.jsx(rf,{id:"split-button-menu",autoFocusItem:!0,children:Array.from(l).map(([u,h])=>i.jsx(W,{selected:u===e,onClick:()=>t(u),children:h},u))})})})})})]})},$t=10,Rx=({isOpen:e,onClose:t,onSubmit:n})=>{const{t:s}=F(),r=Ie(),[o,a]=p.useState(30),[l,c]=p.useState(!1),[u,h]=p.useState(!1),[d,f]=p.useState(20),[g,m]=p.useState(60),y={"& input[type=number]":{MozAppearance:"textfield"},"& input[type=number]::-webkit-outer-spin-button, & input[type=number]::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0}},b=x=>({input:{endAdornment:x,inputProps:{inputMode:"numeric",pattern:"[0-9]*"}}}),v=()=>{if(u){let x=Number.parseInt(String(d),10),w=Number.parseInt(String(g),10);Number.isNaN(x)?(x=l?1:$t,f(x)):!l&&x<$t&&(x=$t),Number.isNaN(w)||w<x?(w=x,m(w)):w===0&&(w=180,m(w)),l&&(x*=60,w*=60);const j=Math.floor(Math.random()*(w-x+1))+x;n(j,{isRange:!0,min:x,max:w})}else{let x=Number.parseInt(String(o),10);Number.isNaN(x)?(x=l?1:$t,a(x)):l?x*=60:x<$t&&(x=$t),n(x,{isRange:!1})}t()},_=()=>{a(x=>{const w=Number.parseFloat(String(x));return Number.isNaN(w)||w<=0?x:l?(w*60).toString():(w/60).toString()}),f(x=>{const w=Number.parseFloat(String(x));return Number.isNaN(w)||w<=0?x:l?(w*60).toString():(w/60).toString()}),m(x=>{const w=Number.parseFloat(String(x));return Number.isNaN(w)||w<=0?x:l?(w*60).toString():(w/60).toString()}),c(x=>!x)};return i.jsxs(je,{open:e,onClose:t,fullScreen:r,maxWidth:"xs","aria-labelledby":"custom-timer-dialog-title",children:[i.jsx(Ce,{id:"custom-timer-dialog-title",children:s("setTimer")}),i.jsxs(_e,{children:[i.jsx(A,{sx:{mb:2},children:i.jsx(Cn,{control:i.jsx(st,{checked:u,onChange:x=>h(x.target.checked)}),label:s("useRandomRange")})}),u?i.jsxs(A,{children:[i.jsx(P,{variant:"subtitle2",children:s("randomTimerRange")}),i.jsxs(A,{sx:{display:"flex",gap:2,my:2},children:[i.jsx(J,{label:s("minValue"),type:"number",value:d,onChange:x=>{const w=parseInt(x.target.value,10);f(w)},fullWidth:!0,sx:y,slotProps:b(i.jsx(pn,{position:"end",children:s(l?"minutes":"seconds")}))}),i.jsx(P,{variant:"body1",sx:{alignSelf:"center"},children:"-"}),i.jsx(J,{label:s("maxValue"),type:"number",value:g,onChange:x=>{const w=parseInt(x.target.value,10);m(Math.max(Number(d),w))},fullWidth:!0,sx:y,slotProps:b(i.jsx(pn,{position:"end",children:s(l?"minutes":"seconds")}))})]}),i.jsxs(z,{onClick:_,variant:"outlined",size:"small",children:[s(l?"minutes":"seconds"),i.jsx(Uo,{sx:{ml:1}})]})]}):i.jsx(J,{autoFocus:!0,type:"number",value:o,onChange:x=>a(x.target.value),fullWidth:!0,sx:y,slotProps:b(i.jsx(pn,{position:"end",children:i.jsxs(z,{onClick:_,variant:"text",children:[s(l?"minutes":"seconds"),i.jsx(Uo,{sx:{ml:1}})]})}))})]}),i.jsxs(Lt,{sx:{p:2,gap:1},children:[i.jsx(z,{onClick:t,variant:"outlined",fullWidth:r,children:s("cancel")}),i.jsx(z,{onClick:v,variant:"contained",autoFocus:!0,fullWidth:r,children:s("set")})]})]})},Gr=p.createContext({});function Gn(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const Wr=typeof window!="undefined",Kr=Wr?p.useLayoutEffect:p.useEffect,Ws=p.createContext(null);function qr(e,t){e.indexOf(t)===-1&&e.push(t)}function Hr(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const rt=(e,t,n)=>n>t?t:n<e?e:n;let Yr=()=>{};const ot={},au=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function lu(e){return typeof e=="object"&&e!==null}const cu=e=>/^0[^.\s]+$/u.test(e);function Xr(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ve=e=>e,$x=(e,t)=>n=>t(e(n)),Wn=(...e)=>e.reduce($x),Rn=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s};class Jr{constructor(){this.subscriptions=[]}add(t){return qr(this.subscriptions,t),()=>Hr(this.subscriptions,t)}notify(t,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,n,s);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const He=e=>e*1e3,Ye=e=>e/1e3;function uu(e,t){return t?e*(1e3/t):0}const du=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Dx=1e-7,Nx=12;function Bx(e,t,n,s,r){let o,a,l=0;do a=t+(n-t)/2,o=du(a,s,r)-e,o>0?n=a:t=a;while(Math.abs(o)>Dx&&++l<Nx);return a}function Kn(e,t,n,s){if(e===t&&n===s)return Ve;const r=o=>Bx(o,0,1,e,n);return o=>o===0||o===1?o:du(r(o),t,s)}const hu=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,fu=e=>t=>1-e(1-t),mu=Kn(.33,1.53,.69,.99),Zr=fu(mu),pu=hu(Zr),gu=e=>(e*=2)<1?.5*Zr(e):.5*(2-Math.pow(2,-10*(e-1))),Qr=e=>1-Math.sin(Math.acos(e)),yu=fu(Qr),xu=hu(Qr),Ox=Kn(.42,0,1,1),Fx=Kn(0,0,.58,1),bu=Kn(.42,0,.58,1),Vx=e=>Array.isArray(e)&&typeof e[0]!="number",vu=e=>Array.isArray(e)&&typeof e[0]=="number",zx={linear:Ve,easeIn:Ox,easeInOut:bu,easeOut:Fx,circIn:Qr,circInOut:xu,circOut:yu,backIn:Zr,backInOut:pu,backOut:mu,anticipate:gu},Ux=e=>typeof e=="string",aa=e=>{if(vu(e)){Yr(e.length===4);const[t,n,s,r]=e;return Kn(t,n,s,r)}else if(Ux(e))return zx[e];return e},Xn=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Gx(e,t){let n=new Set,s=new Set,r=!1,o=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(h){a.has(h)&&(u.schedule(h),e()),h(l)}const u={schedule:(h,d=!1,f=!1)=>{const m=f&&r?n:s;return d&&a.add(h),m.has(h)||m.add(h),h},cancel:h=>{s.delete(h),a.delete(h)},process:h=>{if(l=h,r){o=!0;return}r=!0,[n,s]=[s,n],n.forEach(c),n.clear(),r=!1,o&&(o=!1,u.process(h))}};return u}const Wx=40;function wu(e,t){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=Xn.reduce((x,w)=>(x[w]=Gx(o),x),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:h,update:d,preRender:f,render:g,postRender:m}=a,y=()=>{const x=ot.useManualTiming?r.timestamp:performance.now();n=!1,ot.useManualTiming||(r.delta=s?1e3/60:Math.max(Math.min(x-r.timestamp,Wx),1)),r.timestamp=x,r.isProcessing=!0,l.process(r),c.process(r),u.process(r),h.process(r),d.process(r),f.process(r),g.process(r),m.process(r),r.isProcessing=!1,n&&t&&(s=!1,e(y))},b=()=>{n=!0,s=!0,r.isProcessing||e(y)};return{schedule:Xn.reduce((x,w)=>{const j=a[w];return x[w]=(C,S=!1,T=!1)=>(n||b(),j.schedule(C,S,T)),x},{}),cancel:x=>{for(let w=0;w<Xn.length;w++)a[Xn[w]].cancel(x)},state:r,steps:a}}const{schedule:ee,cancel:at,state:xe,steps:li}=wu(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:Ve,!0);let ls;function Kx(){ls=void 0}const Pe={now:()=>(ls===void 0&&Pe.set(xe.isProcessing||ot.useManualTiming?xe.timestamp:performance.now()),ls),set:e=>{ls=e,queueMicrotask(Kx)}},ju=e=>t=>typeof t=="string"&&t.startsWith(e),eo=ju("--"),qx=ju("var(--"),to=e=>qx(e)?Hx.test(e.split("/*")[0].trim()):!1,Hx=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,on={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},$n={...on,transform:e=>rt(0,1,e)},Jn={...on,default:1},vn=e=>Math.round(e*1e5)/1e5,no=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Yx(e){return e==null}const Xx=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,so=(e,t)=>n=>!!(typeof n=="string"&&Xx.test(n)&&n.startsWith(e)||t&&!Yx(n)&&Object.prototype.hasOwnProperty.call(n,t)),_u=(e,t,n)=>s=>{if(typeof s!="string")return s;const[r,o,a,l]=s.match(no);return{[e]:parseFloat(r),[t]:parseFloat(o),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},Jx=e=>rt(0,255,e),ci={...on,transform:e=>Math.round(Jx(e))},_t={test:so("rgb","red"),parse:_u("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+ci.transform(e)+", "+ci.transform(t)+", "+ci.transform(n)+", "+vn($n.transform(s))+")"};function Zx(e){let t="",n="",s="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,s+=s,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const Ui={test:so("#"),parse:Zx,transform:_t.transform},qn=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),dt=qn("deg"),Xe=qn("%"),K=qn("px"),Qx=qn("vh"),eb=qn("vw"),la={...Xe,parse:e=>Xe.parse(e)/100,transform:e=>Xe.transform(e*100)},Ot={test:so("hsl","hue"),parse:_u("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+Xe.transform(vn(t))+", "+Xe.transform(vn(n))+", "+vn($n.transform(s))+")"},de={test:e=>_t.test(e)||Ui.test(e)||Ot.test(e),parse:e=>_t.test(e)?_t.parse(e):Ot.test(e)?Ot.parse(e):Ui.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?_t.transform(e):Ot.transform(e),getAnimatableNone:e=>{const t=de.parse(e);return t.alpha=0,de.transform(t)}},tb=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function nb(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(no))==null?void 0:t.length)||0)+(((n=e.match(tb))==null?void 0:n.length)||0)>0}const Su="number",ku="color",sb="var",ib="var(",ca="${}",rb=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Dn(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},r=[];let o=0;const l=t.replace(rb,c=>(de.test(c)?(s.color.push(o),r.push(ku),n.push(de.parse(c))):c.startsWith(ib)?(s.var.push(o),r.push(sb),n.push(c)):(s.number.push(o),r.push(Su),n.push(parseFloat(c))),++o,ca)).split(ca);return{values:n,split:l,indexes:s,types:r}}function Cu(e){return Dn(e).values}function Tu(e){const{split:t,types:n}=Dn(e),s=t.length;return r=>{let o="";for(let a=0;a<s;a++)if(o+=t[a],r[a]!==void 0){const l=n[a];l===Su?o+=vn(r[a]):l===ku?o+=de.transform(r[a]):o+=r[a]}return o}}const ob=e=>typeof e=="number"?0:de.test(e)?de.getAnimatableNone(e):e;function ab(e){const t=Cu(e);return Tu(e)(t.map(ob))}const pt={test:nb,parse:Cu,createTransformer:Tu,getAnimatableNone:ab};function ui(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function lb({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let r=0,o=0,a=0;if(!t)r=o=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;r=ui(c,l,e+1/3),o=ui(c,l,e),a=ui(c,l,e-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:s}}function ks(e,t){return n=>n>0?t:e}const ne=(e,t,n)=>e+(t-e)*n,di=(e,t,n)=>{const s=e*e,r=n*(t*t-s)+s;return r<0?0:Math.sqrt(r)},cb=[Ui,_t,Ot],ub=e=>cb.find(t=>t.test(e));function ua(e){const t=ub(e);if(!t)return!1;let n=t.parse(e);return t===Ot&&(n=lb(n)),n}const da=(e,t)=>{const n=ua(e),s=ua(t);if(!n||!s)return ks(e,t);const r={...n};return o=>(r.red=di(n.red,s.red,o),r.green=di(n.green,s.green,o),r.blue=di(n.blue,s.blue,o),r.alpha=ne(n.alpha,s.alpha,o),_t.transform(r))},Gi=new Set(["none","hidden"]);function db(e,t){return Gi.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function hb(e,t){return n=>ne(e,t,n)}function io(e){return typeof e=="number"?hb:typeof e=="string"?to(e)?ks:de.test(e)?da:pb:Array.isArray(e)?Au:typeof e=="object"?de.test(e)?da:fb:ks}function Au(e,t){const n=[...e],s=n.length,r=e.map((o,a)=>io(o)(o,t[a]));return o=>{for(let a=0;a<s;a++)n[a]=r[a](o);return n}}function fb(e,t){const n={...e,...t},s={};for(const r in n)e[r]!==void 0&&t[r]!==void 0&&(s[r]=io(e[r])(e[r],t[r]));return r=>{for(const o in s)n[o]=s[o](r);return n}}function mb(e,t){var r;const n=[],s={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const a=t.types[o],l=e.indexes[a][s[a]],c=(r=e.values[l])!=null?r:0;n[o]=c,s[a]++}return n}const pb=(e,t)=>{const n=pt.createTransformer(t),s=Dn(e),r=Dn(t);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?Gi.has(e)&&!r.values.length||Gi.has(t)&&!s.values.length?db(e,t):Wn(Au(mb(s,r),r.values),n):ks(e,t)};function Pu(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?ne(e,t,n):io(e)(e,t)}const gb=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>ee.update(t,n),stop:()=>at(t),now:()=>xe.isProcessing?xe.timestamp:Pe.now()}},Eu=(e,t,n=10)=>{let s="";const r=Math.max(Math.round(t/n),2);for(let o=0;o<r;o++)s+=Math.round(e(o/(r-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Cs=2e4;function ro(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<Cs;)t+=n,s=e.next(t);return t>=Cs?1/0:t}function yb(e,t=100,n){const s=n({...e,keyframes:[0,t]}),r=Math.min(ro(s),Cs);return{type:"keyframes",ease:o=>s.next(r*o).value/t,duration:Ye(r)}}const xb=5;function Iu(e,t,n){const s=Math.max(t-xb,0);return uu(n-e(s),t-s)}const ie={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},hi=.001;function bb({duration:e=ie.duration,bounce:t=ie.bounce,velocity:n=ie.velocity,mass:s=ie.mass}){let r,o,a=1-t;a=rt(ie.minDamping,ie.maxDamping,a),e=rt(ie.minDuration,ie.maxDuration,Ye(e)),a<1?(r=u=>{const h=u*a,d=h*e,f=h-n,g=Wi(u,a),m=Math.exp(-d);return hi-f/g*m},o=u=>{const d=u*a*e,f=d*n+n,g=Math.pow(a,2)*Math.pow(u,2)*e,m=Math.exp(-d),y=Wi(Math.pow(u,2),a);return(-r(u)+hi>0?-1:1)*((f-g)*m)/y}):(r=u=>{const h=Math.exp(-u*e),d=(u-n)*e+1;return-hi+h*d},o=u=>{const h=Math.exp(-u*e),d=(n-u)*(e*e);return h*d});const l=5/e,c=wb(r,o,l);if(e=He(e),isNaN(c))return{stiffness:ie.stiffness,damping:ie.damping,duration:e};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:a*2*Math.sqrt(s*u),duration:e}}}const vb=12;function wb(e,t,n){let s=n;for(let r=1;r<vb;r++)s=s-e(s)/t(s);return s}function Wi(e,t){return e*Math.sqrt(1-t*t)}const jb=["duration","bounce"],_b=["stiffness","damping","mass"];function ha(e,t){return t.some(n=>e[n]!==void 0)}function Sb(e){let t={velocity:ie.velocity,stiffness:ie.stiffness,damping:ie.damping,mass:ie.mass,isResolvedFromDuration:!1,...e};if(!ha(e,_b)&&ha(e,jb))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(n*1.2),r=s*s,o=2*rt(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:ie.mass,stiffness:r,damping:o}}else{const n=bb(e);t={...t,...n,mass:ie.mass},t.isResolvedFromDuration=!0}return t}function Ts(e=ie.visualDuration,t=ie.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:r}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:o},{stiffness:c,damping:u,mass:h,duration:d,velocity:f,isResolvedFromDuration:g}=Sb({...n,velocity:-Ye(n.velocity||0)}),m=f||0,y=u/(2*Math.sqrt(c*h)),b=a-o,v=Ye(Math.sqrt(c/h)),_=Math.abs(b)<5;s||(s=_?ie.restSpeed.granular:ie.restSpeed.default),r||(r=_?ie.restDelta.granular:ie.restDelta.default);let x;if(y<1){const j=Wi(v,y);x=C=>{const S=Math.exp(-y*v*C);return a-S*((m+y*v*b)/j*Math.sin(j*C)+b*Math.cos(j*C))}}else if(y===1)x=j=>a-Math.exp(-v*j)*(b+(m+v*b)*j);else{const j=v*Math.sqrt(y*y-1);x=C=>{const S=Math.exp(-y*v*C),T=Math.min(j*C,300);return a-S*((m+y*v*b)*Math.sinh(T)+j*b*Math.cosh(T))/j}}const w={calculatedDuration:g&&d||null,next:j=>{const C=x(j);if(g)l.done=j>=d;else{let S=j===0?m:0;y<1&&(S=j===0?He(m):Iu(x,j,C));const T=Math.abs(S)<=s,L=Math.abs(a-C)<=r;l.done=T&&L}return l.value=l.done?a:C,l},toString:()=>{const j=Math.min(ro(w),Cs),C=Eu(S=>w.next(j*S).value,j,30);return j+"ms "+C},toTransition:()=>{}};return w}Ts.applyToOptions=e=>{const t=yb(e,100,Ts);return e.ease=t.ease,e.duration=He(t.duration),e.type="keyframes",e};function Ki({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:h}){const d=e[0],f={done:!1,value:d},g=T=>l!==void 0&&T<l||c!==void 0&&T>c,m=T=>l===void 0?c:c===void 0||Math.abs(l-T)<Math.abs(c-T)?l:c;let y=n*t;const b=d+y,v=a===void 0?b:a(b);v!==b&&(y=v-d);const _=T=>-y*Math.exp(-T/s),x=T=>v+_(T),w=T=>{const L=_(T),k=x(T);f.done=Math.abs(L)<=u,f.value=f.done?v:k};let j,C;const S=T=>{g(f.value)&&(j=T,C=Ts({keyframes:[f.value,m(f.value)],velocity:Iu(x,T,f.value),damping:r,stiffness:o,restDelta:u,restSpeed:h}))};return S(0),{calculatedDuration:null,next:T=>{let L=!1;return!C&&j===void 0&&(L=!0,w(T),S(T)),j!==void 0&&T>=j?C.next(T-j):(!L&&w(T),f)}}}function kb(e,t,n){const s=[],r=n||ot.mix||Pu,o=e.length-1;for(let a=0;a<o;a++){let l=r(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||Ve:t;l=Wn(c,l)}s.push(l)}return s}function Lu(e,t,{clamp:n=!0,ease:s,mixer:r}={}){const o=e.length;if(Yr(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=kb(t,s,r),c=l.length,u=h=>{if(a&&h<e[0])return t[0];let d=0;if(c>1)for(;d<e.length-2&&!(h<e[d+1]);d++);const f=Rn(e[d],e[d+1],h);return l[d](f)};return n?h=>u(rt(e[0],e[o-1],h)):u}function Cb(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const r=Rn(0,t,s);e.push(ne(n,1,r))}}function Tb(e){const t=[0];return Cb(t,e.length-1),t}function Ab(e,t){return e.map(n=>n*t)}function Pb(e,t){return e.map(()=>t||bu).splice(0,e.length-1)}function wn({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const r=Vx(s)?s.map(aa):aa(s),o={done:!1,value:t[0]},a=Ab(n&&n.length===t.length?n:Tb(t),e),l=Lu(a,t,{ease:Array.isArray(r)?r:Pb(t,r)});return{calculatedDuration:e,next:c=>(o.value=l(c),o.done=c>=e,o)}}const Eb=e=>e!==null;function oo(e,{repeat:t,repeatType:n="loop"},s,r=1){const o=e.filter(Eb),l=r<0||t&&n!=="loop"&&t%2===1?0:o.length-1;return!l||s===void 0?o[l]:s}const Ib={decay:Ki,inertia:Ki,tween:wn,keyframes:wn,spring:Ts};function Mu(e){typeof e.type=="string"&&(e.type=Ib[e.type])}class ao{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const Lb=e=>e/100;class lo extends ao{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,r;const{motionValue:n}=this.options;n&&n.updatedAt!==Pe.now()&&this.tick(Pe.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(s=this.options).onStop)==null||r.call(s))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Mu(t);const{type:n=wn,repeat:s=0,repeatDelay:r=0,repeatType:o,velocity:a=0}=t;let{keyframes:l}=t;const c=n||wn;c!==wn&&typeof l[0]!="number"&&(this.mixKeyframes=Wn(Lb,Pu(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});o==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=ro(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+r,this.totalDuration=this.resolvedDuration*(s+1)-r,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:s,totalDuration:r,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return s.next(0);const{delay:u=0,keyframes:h,repeat:d,repeatType:f,repeatDelay:g,type:m,onUpdate:y,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-r/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?v<0:v>r;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let x=this.currentTime,w=s;if(d){const T=Math.min(this.currentTime,r)/l;let L=Math.floor(T),k=T%1;!k&&T>=1&&(k=1),k===1&&L--,L=Math.min(L,d+1),!!(L%2)&&(f==="reverse"?(k=1-k,g&&(k-=g/l)):f==="mirror"&&(w=a)),x=rt(0,1,k)*l}const j=_?{done:!1,value:h[0]}:w.next(x);o&&(j.value=o(j.value));let{done:C}=j;!_&&c!==null&&(C=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return S&&m!==Ki&&(j.value=oo(h,this.options,b,this.speed)),y&&y(j.value),S&&this.finish(),j}then(t,n){return this.finished.then(t,n)}get duration(){return Ye(this.calculatedDuration)}get time(){return Ye(this.currentTime)}set time(t){var n;t=He(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Pe.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Ye(this.currentTime))}play(){var r,o;if(this.isStopped)return;const{driver:t=gb,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(o=(r=this.options).onPlay)==null||o.call(r);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n!=null?n:s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Pe.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function Mb(e){var t;for(let n=1;n<e.length;n++)(t=e[n])!=null||(e[n]=e[n-1])}const St=e=>e*180/Math.PI,qi=e=>{const t=St(Math.atan2(e[1],e[0]));return Hi(t)},Rb={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:qi,rotateZ:qi,skewX:e=>St(Math.atan(e[1])),skewY:e=>St(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Hi=e=>(e=e%360,e<0&&(e+=360),e),fa=qi,ma=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),pa=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),$b={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ma,scaleY:pa,scale:e=>(ma(e)+pa(e))/2,rotateX:e=>Hi(St(Math.atan2(e[6],e[5]))),rotateY:e=>Hi(St(Math.atan2(-e[2],e[0]))),rotateZ:fa,rotate:fa,skewX:e=>St(Math.atan(e[4])),skewY:e=>St(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Yi(e){return e.includes("scale")?1:0}function Xi(e,t){if(!e||e==="none")return Yi(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,r;if(n)s=$b,r=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=Rb,r=l}if(!r)return Yi(t);const o=s[t],a=r[1].split(",").map(Nb);return typeof o=="function"?o(a):a[o]}const Db=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Xi(n,t)};function Nb(e){return parseFloat(e.trim())}const an=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ln=new Set(an),ga=e=>e===on||e===K,Bb=new Set(["x","y","z"]),Ob=an.filter(e=>!Bb.has(e));function Fb(e){const t=[];return Ob.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const Ct={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Xi(t,"x"),y:(e,{transform:t})=>Xi(t,"y")};Ct.translateX=Ct.x;Ct.translateY=Ct.y;const Tt=new Set;let Ji=!1,Zi=!1,Qi=!1;function Ru(){if(Zi){const e=Array.from(Tt).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const r=Fb(s);r.length&&(n.set(s,r),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const r=n.get(s);r&&r.forEach(([o,a])=>{var l;(l=s.getValue(o))==null||l.set(a)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Zi=!1,Ji=!1,Tt.forEach(e=>e.complete(Qi)),Tt.clear()}function $u(){Tt.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Zi=!0)})}function Vb(){Qi=!0,$u(),Ru(),Qi=!1}class co{constructor(t,n,s,r,o,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=r,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Tt.add(this),Ji||(Ji=!0,ee.read($u),ee.resolveKeyframes(Ru))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:r}=this;if(t[0]===null){const o=r==null?void 0:r.get(),a=t[t.length-1];if(o!==void 0)t[0]=o;else if(s&&n){const l=s.readValue(n,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),r&&o===void 0&&r.set(t[0])}Mb(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Tt.delete(this)}cancel(){this.state==="scheduled"&&(Tt.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const zb=e=>e.startsWith("--");function Ub(e,t,n){zb(t)?e.style.setProperty(t,n):e.style[t]=n}const Gb=Xr(()=>window.ScrollTimeline!==void 0),Wb={};function Kb(e,t){const n=Xr(e);return()=>{var s;return(s=Wb[t])!=null?s:n()}}const Du=Kb(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),fn=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,ya={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fn([0,.65,.55,1]),circOut:fn([.55,0,1,.45]),backIn:fn([.31,.01,.66,-.59]),backOut:fn([.33,1.53,.69,.99])};function Nu(e,t){if(e)return typeof e=="function"?Du()?Eu(e,t):"ease-out":vu(e)?fn(e):Array.isArray(e)?e.map(n=>Nu(n,t)||ya.easeOut):ya[e]}function qb(e,t,n,{delay:s=0,duration:r=300,repeat:o=0,repeatType:a="loop",ease:l="easeOut",times:c}={},u=void 0){const h={[t]:n};c&&(h.offset=c);const d=Nu(l,r);Array.isArray(d)&&(h.easing=d);const f={delay:s,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),e.animate(h,f)}function Bu(e){return typeof e=="function"&&"applyToOptions"in e}function Hb({type:e,...t}){var n,s;return Bu(e)&&Du()?e.applyToOptions(t):((n=t.duration)!=null||(t.duration=300),(s=t.ease)!=null||(t.ease="easeOut"),t)}class Yb extends ao{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:s,keyframes:r,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!o,this.allowFlatten=a,this.options=t,Yr(typeof t.type!="string");const u=Hb(t);this.animation=qb(n,s,r,u,o),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const h=oo(r,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):Ub(n,s,h),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch(t){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,s;const t=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return Ye(Number(t))}get time(){return Ye(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=He(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&Gb()?(this.animation.timeline=t,Ve):n(this)}}const Ou={anticipate:gu,backInOut:pu,circInOut:xu};function Xb(e){return e in Ou}function Jb(e){typeof e.ease=="string"&&Xb(e.ease)&&(e.ease=Ou[e.ease])}const xa=10;class Zb extends Yb{constructor(t){Jb(t),Mu(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){var u;const{motionValue:n,onUpdate:s,onComplete:r,element:o,...a}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new lo({...a,autoplay:!1}),c=He((u=this.finishedTime)!=null?u:this.time);n.setWithVelocity(l.sample(c-xa).value,l.sample(c).value,xa),l.stop()}}const ba=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(pt.test(e)||e==="0")&&!e.startsWith("url("));function Qb(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function ev(e,t,n,s){const r=e[0];if(r===null)return!1;if(t==="display"||t==="visibility")return!0;const o=e[e.length-1],a=ba(r,t),l=ba(o,t);return!a||!l?!1:Qb(e)||(n==="spring"||Bu(n))&&s}function er(e){e.duration=0,e.type}const tv=new Set(["opacity","clipPath","filter","transform"]),nv=Xr(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function sv(e){var h;const{motionValue:t,name:n,repeatDelay:s,repeatType:r,damping:o,type:a}=e;if(!(((h=t==null?void 0:t.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return nv()&&n&&tv.has(n)&&(n!=="transform"||!u)&&!c&&!s&&r!=="mirror"&&o!==0&&a!=="inertia"}const iv=40;class rv extends ao{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",keyframes:l,name:c,motionValue:u,element:h,...d}){var m;super(),this.stop=()=>{var y,b;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Pe.now();const f={autoplay:t,delay:n,type:s,repeat:r,repeatDelay:o,repeatType:a,name:c,motionValue:u,element:h,...d},g=(h==null?void 0:h.KeyframeResolver)||co;this.keyframeResolver=new g(l,(y,b,v)=>this.onKeyframesResolved(y,b,f,!v),c,u,h),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(t,n,s,r){this.keyframeResolver=void 0;const{name:o,type:a,velocity:l,delay:c,isHandoff:u,onUpdate:h}=s;this.resolvedAt=Pe.now(),ev(t,o,a,l)||((ot.instantAnimations||!c)&&(h==null||h(oo(t,s,n))),t[0]=t[t.length-1],er(s),s.repeat=0);const f={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>iv?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:t},g=!u&&sv(f)?new Zb({...f,element:f.motionValue.owner.current}):new lo(f);g.finished.then(()=>this.notifyFinished()).catch(Ve),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),Vb()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const ov=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function av(e){const t=ov.exec(e);if(!t)return[,];const[,n,s,r]=t;return[`--${n!=null?n:s}`,r]}function Fu(e,t,n=1){const[s,r]=av(e);if(!s)return;const o=window.getComputedStyle(t).getPropertyValue(s);if(o){const a=o.trim();return au(a)?parseFloat(a):a}return to(r)?Fu(r,t,n+1):r}function uo(e,t){var n,s;return(s=(n=e==null?void 0:e[t])!=null?n:e==null?void 0:e.default)!=null?s:e}const Vu=new Set(["width","height","top","left","right","bottom",...an]),lv={test:e=>e==="auto",parse:e=>e},zu=e=>t=>t.test(e),Uu=[on,K,Xe,dt,eb,Qx,lv],va=e=>Uu.find(zu(e));function cv(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||cu(e):!0}const uv=new Set(["brightness","contrast","saturate","opacity"]);function dv(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(no)||[];if(!s)return e;const r=n.replace(s,"");let o=uv.has(t)?1:0;return s!==n&&(o*=100),t+"("+o+r+")"}const hv=/\b([a-z-]*)\(.*?\)/gu,tr={...pt,getAnimatableNone:e=>{const t=e.match(hv);return t?t.map(dv).join(" "):e}},wa={...on,transform:Math.round},fv={rotate:dt,rotateX:dt,rotateY:dt,rotateZ:dt,scale:Jn,scaleX:Jn,scaleY:Jn,scaleZ:Jn,skew:dt,skewX:dt,skewY:dt,distance:K,translateX:K,translateY:K,translateZ:K,x:K,y:K,z:K,perspective:K,transformPerspective:K,opacity:$n,originX:la,originY:la,originZ:K},ho={borderWidth:K,borderTopWidth:K,borderRightWidth:K,borderBottomWidth:K,borderLeftWidth:K,borderRadius:K,radius:K,borderTopLeftRadius:K,borderTopRightRadius:K,borderBottomRightRadius:K,borderBottomLeftRadius:K,width:K,maxWidth:K,height:K,maxHeight:K,top:K,right:K,bottom:K,left:K,padding:K,paddingTop:K,paddingRight:K,paddingBottom:K,paddingLeft:K,margin:K,marginTop:K,marginRight:K,marginBottom:K,marginLeft:K,backgroundPositionX:K,backgroundPositionY:K,...fv,zIndex:wa,fillOpacity:$n,strokeOpacity:$n,numOctaves:wa},mv={...ho,color:de,backgroundColor:de,outlineColor:de,fill:de,stroke:de,borderColor:de,borderTopColor:de,borderRightColor:de,borderBottomColor:de,borderLeftColor:de,filter:tr,WebkitFilter:tr},Gu=e=>mv[e];function Wu(e,t){let n=Gu(e);return n!==tr&&(n=pt),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const pv=new Set(["auto","none","0"]);function gv(e,t,n){let s=0,r;for(;s<e.length&&!r;){const o=e[s];typeof o=="string"&&!pv.has(o)&&Dn(o).values.length&&(r=e[s]),s++}if(r&&n)for(const o of t)e[o]=Wu(n,r)}class yv extends co{constructor(t,n,s,r,o){super(t,n,s,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),to(u))){const h=Fu(u,n.current);h!==void 0&&(t[c]=h),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Vu.has(s)||t.length!==2)return;const[r,o]=t,a=va(r),l=va(o);if(a!==l)if(ga(a)&&ga(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else Ct[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let r=0;r<t.length;r++)(t[r]===null||cv(t[r]))&&s.push(r);s.length&&gv(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ct[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&t.getValue(s,r).jump(r,!1)}measureEndState(){var l;const{element:t,name:n,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const r=t.getValue(n);r&&r.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Ct[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function xv(e,t,n){var s;if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const o=(s=n==null?void 0:n[e])!=null?s:r.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}const Ku=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function qu(e){return lu(e)&&"offsetHeight"in e}const ja=30,bv=e=>!isNaN(parseFloat(e)),jn={current:void 0};class vv{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var o;const r=Pe.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Pe.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=bv(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Jr);const s=this.events[t].add(n);return t==="change"?()=>{s(),ee.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return jn.current&&jn.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=Pe.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>ja)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ja);return uu(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function It(e,t){return new vv(e,t)}const{schedule:fo}=wu(queueMicrotask,!1),ze={x:!1,y:!1};function Hu(){return ze.x||ze.y}function wv(e){return e==="x"||e==="y"?ze[e]?null:(ze[e]=!0,()=>{ze[e]=!1}):ze.x||ze.y?null:(ze.x=ze.y=!0,()=>{ze.x=ze.y=!1})}function Yu(e,t){const n=xv(e),s=new AbortController,r={passive:!0,...t,signal:s.signal};return[n,r,()=>s.abort()]}function _a(e){return!(e.pointerType==="touch"||Hu())}function jv(e,t,n={}){const[s,r,o]=Yu(e,n),a=l=>{if(!_a(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const h=d=>{_a(d)&&(u(d),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,r)};return s.forEach(l=>{l.addEventListener("pointerenter",a,r)}),o}const Xu=(e,t)=>t?e===t?!0:Xu(e,t.parentElement):!1,mo=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,_v=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Sv(e){return _v.has(e.tagName)||e.tabIndex!==-1}const cs=new WeakSet;function Sa(e){return t=>{t.key==="Enter"&&e(t)}}function fi(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const kv=(e,t)=>{const n=e.currentTarget;if(!n)return;const s=Sa(()=>{if(cs.has(n))return;fi(n,"down");const r=Sa(()=>{fi(n,"up")}),o=()=>fi(n,"cancel");n.addEventListener("keyup",r,t),n.addEventListener("blur",o,t)});n.addEventListener("keydown",s,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),t)};function ka(e){return mo(e)&&!Hu()}function Cv(e,t,n={}){const[s,r,o]=Yu(e,n),a=l=>{const c=l.currentTarget;if(!ka(l))return;cs.add(c);const u=t(c,l),h=(g,m)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),cs.has(c)&&cs.delete(c),ka(g)&&typeof u=="function"&&u(g,{success:m})},d=g=>{h(g,c===window||c===document||n.useGlobalTarget||Xu(c,g.target))},f=g=>{h(g,!1)};window.addEventListener("pointerup",d,r),window.addEventListener("pointercancel",f,r)};return s.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,r),qu(l)&&(l.addEventListener("focus",u=>kv(u,r)),!Sv(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),o}function Ju(e){return lu(e)&&"ownerSVGElement"in e}function Tv(e){return Ju(e)&&e.tagName==="svg"}function Av(...e){const t=!Array.isArray(e[0]),n=t?0:-1,s=e[0+n],r=e[1+n],o=e[2+n],a=e[3+n],l=Lu(r,o,a);return t?l(s):l}const we=e=>!!(e&&e.getVelocity),Pv=[...Uu,de,pt],Ev=e=>Pv.find(zu(e)),Ks=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Iv extends p.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=n.offsetParent,r=qu(s)&&s.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=r-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Lv({children:e,isPresent:t,anchorX:n,root:s}){const r=p.useId(),o=p.useRef(null),a=p.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=p.useContext(Ks);return p.useInsertionEffect(()=>{const{width:c,height:u,top:h,left:d,right:f}=a.current;if(t||!o.current||!c||!u)return;const g=n==="left"?`left: ${d}`:`right: ${f}`;o.current.dataset.motionPopId=r;const m=document.createElement("style");l&&(m.nonce=l);const y=s!=null?s:document.head;return y.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${g}px !important;
            top: ${h}px !important;
          }
        `),()=>{y.contains(m)&&y.removeChild(m)}},[t]),i.jsx(Iv,{isPresent:t,childRef:o,sizeRef:a,children:p.cloneElement(e,{ref:o})})}const Mv=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:o,mode:a,anchorX:l,root:c})=>{const u=Gn(Rv),h=p.useId();let d=!0,f=p.useMemo(()=>(d=!1,{id:h,initial:t,isPresent:n,custom:r,onExitComplete:g=>{u.set(g,!0);for(const m of u.values())if(!m)return;s&&s()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[n,u,s]);return o&&d&&(f={...f}),p.useMemo(()=>{u.forEach((g,m)=>u.set(m,!1))},[n]),p.useEffect(()=>{!n&&!u.size&&s&&s()},[n]),a==="popLayout"&&(e=i.jsx(Lv,{isPresent:n,anchorX:l,root:c,children:e})),i.jsx(Ws.Provider,{value:f,children:e})};function Rv(){return new Map}function Zu(e=!0){const t=p.useContext(Ws);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:r}=t,o=p.useId();p.useEffect(()=>{if(e)return r(o)},[e]);const a=p.useCallback(()=>e&&s&&s(o),[o,s,e]);return!n&&s?[!1,a]:[!0]}const Zn=e=>e.key||"";function Ca(e){const t=[];return p.Children.forEach(e,n=>{p.isValidElement(n)&&t.push(n)}),t}const Qu=({children:e,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:o="sync",propagate:a=!1,anchorX:l="left",root:c})=>{const[u,h]=Zu(a),d=p.useMemo(()=>Ca(e),[e]),f=a&&!u?[]:d.map(Zn),g=p.useRef(!0),m=p.useRef(d),y=Gn(()=>new Map),[b,v]=p.useState(d),[_,x]=p.useState(d);Kr(()=>{g.current=!1,m.current=d;for(let C=0;C<_.length;C++){const S=Zn(_[C]);f.includes(S)?y.delete(S):y.get(S)!==!0&&y.set(S,!1)}},[_,f.length,f.join("-")]);const w=[];if(d!==b){let C=[...d];for(let S=0;S<_.length;S++){const T=_[S],L=Zn(T);f.includes(L)||(C.splice(S,0,T),w.push(T))}return o==="wait"&&w.length&&(C=w),x(Ca(C)),v(d),null}const{forceRender:j}=p.useContext(Gr);return i.jsx(i.Fragment,{children:_.map(C=>{const S=Zn(C),T=a&&!u?!1:d===_||f.includes(S),L=()=>{if(y.has(S))y.set(S,!0);else return;let k=!0;y.forEach(I=>{I||(k=!1)}),k&&(j==null||j(),x(m.current),a&&(h==null||h()),s&&s())};return i.jsx(Mv,{isPresent:T,initial:!g.current||n?void 0:!1,custom:t,presenceAffectsLayout:r,mode:o,root:c,onExitComplete:T?void 0:L,anchorX:l,children:C},S)})})},ed=p.createContext({strict:!1}),Ta={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},tn={};for(const e in Ta)tn[e]={isEnabled:t=>Ta[e].some(n=>!!t[n])};function $v(e){for(const t in e)tn[t]={...tn[t],...e[t]}}const Dv=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function As(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Dv.has(e)}let td=e=>!As(e);function Nv(e){typeof e=="function"&&(td=t=>t.startsWith("on")?!As(t):e(t))}try{Nv(require("@emotion/is-prop-valid").default)}catch(e){}function Bv(e,t,n){const s={};for(const r in e)r==="values"&&typeof e.values=="object"||(td(r)||n===!0&&As(r)||!t&&!As(r)||e.draggable&&r.startsWith("onDrag"))&&(s[r]=e[r]);return s}const qs=p.createContext({});function Hs(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Nn(e){return typeof e=="string"||Array.isArray(e)}const po=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],go=["initial",...po];function Ys(e){return Hs(e.animate)||go.some(t=>Nn(e[t]))}function nd(e){return!!(Ys(e)||e.variants)}function Ov(e,t){if(Ys(e)){const{initial:n,animate:s}=e;return{initial:n===!1||Nn(n)?n:void 0,animate:Nn(s)?s:void 0}}return e.inherit!==!1?t:{}}function Fv(e){const{initial:t,animate:n}=Ov(e,p.useContext(qs));return p.useMemo(()=>({initial:t,animate:n}),[Aa(t),Aa(n)])}function Aa(e){return Array.isArray(e)?e.join(" "):e}const Bn={};function Vv(e){for(const t in e)Bn[t]=e[t],eo(t)&&(Bn[t].isCSSVariable=!0)}function sd(e,{layout:t,layoutId:n}){return ln.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Bn[e]||e==="opacity")}const zv={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Uv=an.length;function Gv(e,t,n){let s="",r=!0;for(let o=0;o<Uv;o++){const a=an[o],l=e[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=Ku(l,ho[a]);if(!c){r=!1;const h=zv[a]||a;s+=`${h}(${u}) `}n&&(t[a]=u)}}return s=s.trim(),n?s=n(t,r?"":s):r&&(s="none"),s}function yo(e,t,n){const{style:s,vars:r,transformOrigin:o}=e;let a=!1,l=!1;for(const c in t){const u=t[c];if(ln.has(c)){a=!0;continue}else if(eo(c)){r[c]=u;continue}else{const h=Ku(u,ho[c]);c.startsWith("origin")?(l=!0,o[c]=h):s[c]=h}}if(t.transform||(a||n?s.transform=Gv(t,e.transform,n):s.transform&&(s.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:h=0}=o;s.transformOrigin=`${c} ${u} ${h}`}}const xo=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function id(e,t,n){for(const s in t)!we(t[s])&&!sd(s,n)&&(e[s]=t[s])}function Wv({transformTemplate:e},t){return p.useMemo(()=>{const n=xo();return yo(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Kv(e,t){const n=e.style||{},s={};return id(s,n,e),Object.assign(s,Wv(e,t)),s}function qv(e,t){const n={},s=Kv(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const Hv={offset:"stroke-dashoffset",array:"stroke-dasharray"},Yv={offset:"strokeDashoffset",array:"strokeDasharray"};function Xv(e,t,n=1,s=0,r=!0){e.pathLength=1;const o=r?Hv:Yv;e[o.offset]=K.transform(-s);const a=K.transform(t),l=K.transform(n);e[o.array]=`${a} ${l}`}function rd(e,{attrX:t,attrY:n,attrScale:s,pathLength:r,pathSpacing:o=1,pathOffset:a=0,...l},c,u,h){var g,m;if(yo(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:d,style:f}=e;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=(g=d.transformOrigin)!=null?g:"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(m=h==null?void 0:h.transformBox)!=null?m:"fill-box",delete d.transformBox),t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),s!==void 0&&(d.scale=s),r!==void 0&&Xv(d,r,o,a,!1)}const od=()=>({...xo(),attrs:{}}),ad=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Jv(e,t,n,s){const r=p.useMemo(()=>{const o=od();return rd(o,t,ad(s),e.transformTemplate,e.style),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};id(o,e.style,e),r.style={...o,...r.style}}return r}const Zv=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bo(e){return typeof e!="string"||e.includes("-")?!1:!!(Zv.indexOf(e)>-1||/[A-Z]/u.test(e))}function Qv(e,t,n,{latestValues:s},r,o=!1){const l=(bo(e)?Jv:qv)(t,s,r,e),c=Bv(t,typeof e=="string",o),u=e!==p.Fragment?{...c,...l,ref:n}:{},{children:h}=t,d=p.useMemo(()=>we(h)?h.get():h,[h]);return p.createElement(e,{...u,children:d})}function Pa(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function vo(e,t,n,s){if(typeof t=="function"){const[r,o]=Pa(s);t=t(n!==void 0?n:e.custom,r,o)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[r,o]=Pa(s);t=t(n!==void 0?n:e.custom,r,o)}return t}function us(e){return we(e)?e.get():e}function e0({scrapeMotionValuesFromProps:e,createRenderState:t},n,s,r){return{latestValues:t0(n,s,r,e),renderState:t()}}function t0(e,t,n,s){const r={},o=s(e,{});for(const f in o)r[f]=us(o[f]);let{initial:a,animate:l}=e;const c=Ys(e),u=nd(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const d=h?l:a;if(d&&typeof d!="boolean"&&!Hs(d)){const f=Array.isArray(d)?d:[d];for(let g=0;g<f.length;g++){const m=vo(e,f[g]);if(m){const{transitionEnd:y,transition:b,...v}=m;for(const _ in v){let x=v[_];if(Array.isArray(x)){const w=h?x.length-1:0;x=x[w]}x!==null&&(r[_]=x)}for(const _ in y)r[_]=y[_]}}}return r}const ld=e=>(t,n)=>{const s=p.useContext(qs),r=p.useContext(Ws),o=()=>e0(e,t,s,r);return n?o():Gn(o)};function wo(e,t,n){var o;const{style:s}=e,r={};for(const a in s)(we(s[a])||t.style&&we(t.style[a])||sd(a,e)||((o=n==null?void 0:n.getValue(a))==null?void 0:o.liveStyle)!==void 0)&&(r[a]=s[a]);return r}const n0=ld({scrapeMotionValuesFromProps:wo,createRenderState:xo});function cd(e,t,n){const s=wo(e,t,n);for(const r in e)if(we(e[r])||we(t[r])){const o=an.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[o]=e[r]}return s}const s0=ld({scrapeMotionValuesFromProps:cd,createRenderState:od}),i0=Symbol.for("motionComponentSymbol");function Ft(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function r0(e,t,n){return p.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):Ft(n)&&(n.current=s))},[t])}const jo=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),o0="framerAppearId",ud="data-"+jo(o0),dd=p.createContext({});function a0(e,t,n,s,r){var y,b;const{visualElement:o}=p.useContext(qs),a=p.useContext(ed),l=p.useContext(Ws),c=p.useContext(Ks).reducedMotion,u=p.useRef(null);s=s||a.renderer,!u.current&&s&&(u.current=s(e,{visualState:t,parent:o,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=u.current,d=p.useContext(dd);h&&!h.projection&&r&&(h.type==="html"||h.type==="svg")&&l0(u.current,n,r,d);const f=p.useRef(!1);p.useInsertionEffect(()=>{h&&f.current&&h.update(n,l)});const g=n[ud],m=p.useRef(!!g&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,g))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,g)));return Kr(()=>{h&&(f.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),m.current&&h.animationState&&h.animationState.animateChanges())}),p.useEffect(()=>{h&&(!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,g)}),m.current=!1),h.enteringChildren=void 0)}),h}function l0(e,t,n,s){const{layoutId:r,layout:o,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:hd(e.parent)),e.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!a||l&&Ft(l),visualElement:e,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,crossfade:h,layoutScroll:c,layoutRoot:u})}function hd(e){if(e)return e.options.allowProjection!==!1?e.projection:hd(e.parent)}function mi(e,{forwardMotionProps:t=!1}={},n,s){var l,c;n&&$v(n);const r=bo(e)?s0:n0;function o(u,h){let d;const f={...p.useContext(Ks),...u,layoutId:c0(u)},{isStatic:g}=f,m=Fv(u),y=r(u,g);if(!g&&Wr){u0();const b=d0(f);d=b.MeasureLayout,m.visualElement=a0(e,y,f,s,b.ProjectionNode)}return i.jsxs(qs.Provider,{value:m,children:[d&&m.visualElement?i.jsx(d,{visualElement:m.visualElement,...f}):null,Qv(e,u,r0(y,m.visualElement,h),y,g,t)]})}o.displayName=`motion.${typeof e=="string"?e:`create(${(c=(l=e.displayName)!=null?l:e.name)!=null?c:""})`}`;const a=p.forwardRef(o);return a[i0]=e,a}function c0({layoutId:e}){const t=p.useContext(Gr).id;return t&&e!==void 0?t+"-"+e:e}function u0(e,t){p.useContext(ed).strict}function d0(e){const{drag:t,layout:n}=tn;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function h0(e,t){if(typeof Proxy=="undefined")return mi;const n=new Map,s=(o,a)=>mi(o,a,e,t),r=(o,a)=>s(o,a);return new Proxy(r,{get:(o,a)=>a==="create"?s:(n.has(a)||n.set(a,mi(a,void 0,e,t)),n.get(a))})}function fd({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function f0({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function m0(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function pi(e){return e===void 0||e===1}function nr({scale:e,scaleX:t,scaleY:n}){return!pi(e)||!pi(t)||!pi(n)}function jt(e){return nr(e)||md(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function md(e){return Ea(e.x)||Ea(e.y)}function Ea(e){return e&&e!=="0%"}function Ps(e,t,n){const s=e-n,r=t*s;return n+r}function Ia(e,t,n,s,r){return r!==void 0&&(e=Ps(e,r,s)),Ps(e,n,s)+t}function sr(e,t=0,n=1,s,r){e.min=Ia(e.min,t,n,s,r),e.max=Ia(e.max,t,n,s,r)}function pd(e,{x:t,y:n}){sr(e.x,t.translate,t.scale,t.originPoint),sr(e.y,n.translate,n.scale,n.originPoint)}const La=.999999999999,Ma=1.0000000000001;function p0(e,t,n,s=!1){const r=n.length;if(!r)return;t.x=t.y=1;let o,a;for(let l=0;l<r;l++){o=n[l],a=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&zt(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,pd(e,a)),s&&jt(o.latestValues)&&zt(e,o.latestValues))}t.x<Ma&&t.x>La&&(t.x=1),t.y<Ma&&t.y>La&&(t.y=1)}function Vt(e,t){e.min=e.min+t,e.max=e.max+t}function Ra(e,t,n,s,r=.5){const o=ne(e.min,e.max,r);sr(e,t,n,o,s)}function zt(e,t){Ra(e.x,t.x,t.scaleX,t.scale,t.originX),Ra(e.y,t.y,t.scaleY,t.scale,t.originY)}function gd(e,t){return fd(m0(e.getBoundingClientRect(),t))}function g0(e,t,n){const s=gd(e,n),{scroll:r}=t;return r&&(Vt(s.x,r.offset.x),Vt(s.y,r.offset.y)),s}const $a=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ut=()=>({x:$a(),y:$a()}),Da=()=>({min:0,max:0}),ae=()=>({x:Da(),y:Da()}),ir={current:null},yd={current:!1};function y0(){if(yd.current=!0,!!Wr)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ir.current=e.matches;e.addEventListener("change",t),t()}else ir.current=!1}const x0=new WeakMap;function b0(e,t,n){for(const s in t){const r=t[s],o=n[s];if(we(r))e.addValue(s,r);else if(we(o))e.addValue(s,It(r,{owner:e}));else if(o!==r)if(e.hasValue(s)){const a=e.getValue(s);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=e.getStaticValue(s);e.addValue(s,It(a!==void 0?a:r,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const Na=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class v0{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=co,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Pe.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,ee.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=Ys(n),this.isVariantNode=nd(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const g=d[f];c[f]!==void 0&&we(g)&&g.set(c[f])}}mount(t){var n;this.current=t,x0.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),yd.current||y0(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ir.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),at(this.notifyUpdate),at(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(t){var n;this.children.add(t),(n=this.enteringChildren)!=null||(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=ln.has(t);s&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&ee.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{r(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in tn){const n=tn[t];if(!n)continue;const{isEnabled:s,Feature:r}=n;if(!this.features[t]&&r&&s(this.props)&&(this.features[t]=new r(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ae()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Na.length;s++){const r=Na[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,a=t[o];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=b0(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=It(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){var r;let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!=null?r:this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(au(s)||cu(s))?s=parseFloat(s):!Ev(s)&&pt.test(n)&&(s=Wu(t,n)),this.setBaseTarget(t,we(s)?s.get():s)),we(s)?s.get():s}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var o;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const a=vo(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);a&&(s=a[t])}if(n&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!we(r)?r:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Jr),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){fo.render(this.render)}}class xd extends v0{constructor(){super(...arguments),this.KeyframeResolver=yv}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;we(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function bd(e,{style:t,vars:n},s,r){const o=e.style;let a;for(a in t)o[a]=t[a];r==null||r.applyProjectionStyles(o,s);for(a in n)o.setProperty(a,n[a])}function w0(e){return window.getComputedStyle(e)}class j0 extends xd{constructor(){super(...arguments),this.type="html",this.renderInstance=bd}readValueFromInstance(t,n){var s;if(ln.has(n))return(s=this.projection)!=null&&s.isProjecting?Yi(n):Db(t,n);{const r=w0(t),o=(eo(n)?r.getPropertyValue(n):r[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:n}){return gd(t,n)}build(t,n,s){yo(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return wo(t,n,s)}}const vd=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _0(e,t,n,s){bd(e,t,void 0,s);for(const r in t.attrs)e.setAttribute(vd.has(r)?r:jo(r),t.attrs[r])}class S0 extends xd{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ae}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ln.has(n)){const s=Gu(n);return s&&s.default||0}return n=vd.has(n)?n:jo(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return cd(t,n,s)}build(t,n,s){rd(t,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(t,n,s,r){_0(t,n,s,r)}mount(t){this.isSVGTag=ad(t.tagName),super.mount(t)}}const k0=(e,t)=>bo(e)?new S0(t):new j0(t,{allowProjection:e!==p.Fragment});function qt(e,t,n){const s=e.getProps();return vo(s,t,n!==void 0?n:s.custom,e)}const rr=e=>Array.isArray(e);function C0(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,It(n))}function T0(e){return rr(e)?e[e.length-1]||0:e}function A0(e,t){const n=qt(e,t);let{transitionEnd:s={},transition:r={},...o}=n||{};o={...o,...s};for(const a in o){const l=T0(o[a]);C0(e,a,l)}}function P0(e){return!!(we(e)&&e.add)}function or(e,t){const n=e.getValue("willChange");if(P0(n))return n.add(t);if(!n&&ot.WillChange){const s=new ot.WillChange("auto");e.addValue("willChange",s),s.add(t)}}function wd(e){return e.props[ud]}const E0=e=>e!==null;function I0(e,{repeat:t,repeatType:n="loop"},s){const r=e.filter(E0),o=t&&n!=="loop"&&t%2===1?0:r.length-1;return r[o]}const L0={type:"spring",stiffness:500,damping:25,restSpeed:10},M0=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),R0={type:"keyframes",duration:.8},$0={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},D0=(e,{keyframes:t})=>t.length>2?R0:ln.has(e)?e.startsWith("scale")?M0(t[1]):L0:$0;function N0({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:u,...h}){return!!Object.keys(h).length}const _o=(e,t,n,s={},r,o)=>a=>{const l=uo(s,e)||{},c=l.delay||s.delay||0;let{elapsed:u=0}=s;u=u-He(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:o?void 0:r};N0(l)||Object.assign(h,D0(e,h)),h.duration&&(h.duration=He(h.duration)),h.repeatDelay&&(h.repeatDelay=He(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(er(h),h.delay===0&&(d=!0)),(ot.instantAnimations||ot.skipAnimations)&&(d=!0,er(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,d&&!o&&t.get()!==void 0){const f=I0(h.keyframes,l);if(f!==void 0){ee.update(()=>{h.onUpdate(f),h.onComplete()});return}}return l.isSync?new lo(h):new rv(h)};function B0({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function jd(e,t,{delay:n=0,transitionOverride:s,type:r}={}){var h;let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=t;s&&(o=s);const c=[],u=r&&e.animationState&&e.animationState.getState()[r];for(const d in l){const f=e.getValue(d,(h=e.latestValues[d])!=null?h:null),g=l[d];if(g===void 0||u&&B0(u,d))continue;const m={delay:n,...uo(o||{},d)},y=f.get();if(y!==void 0&&!f.isAnimating&&!Array.isArray(g)&&g===y&&!m.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const _=wd(e);if(_){const x=window.MotionHandoffAnimation(_,d,ee);x!==null&&(m.startTime=x,b=!0)}}or(e,d),f.start(_o(d,f,g,e.shouldReduceMotion&&Vu.has(d)?{type:!1}:m,e,b));const v=f.animation;v&&c.push(v)}return a&&Promise.all(c).then(()=>{ee.update(()=>{a&&A0(e,a)})}),c}function _d(e,t,n,s=0,r=1){const o=Array.from(e).sort((u,h)=>u.sortNodePosition(h)).indexOf(t),a=e.size,l=(a-1)*s;return typeof n=="function"?n(o,a):r===1?o*s:l-o*s}function ar(e,t,n={}){var c;const s=qt(e,t,n.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:r=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const o=s?()=>Promise.all(jd(e,s,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:f}=r;return O0(e,t,u,h,d,f,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[u,h]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function O0(e,t,n=0,s=0,r=0,o=1,a){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(ar(c,t,{...a,delay:n+(typeof s=="function"?0:s)+_d(e.variantChildren,c,s,r,o)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function F0(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const r=t.map(o=>ar(e,o,n));s=Promise.all(r)}else if(typeof t=="string")s=ar(e,t,n);else{const r=typeof t=="function"?qt(e,t,n.custom):t;s=Promise.all(jd(e,r,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}function Sd(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}const V0=go.length;function kd(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?kd(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<V0;n++){const s=go[n],r=e.props[s];(Nn(r)||r===!1)&&(t[s]=r)}return t}const z0=[...po].reverse(),U0=po.length;function G0(e){return t=>Promise.all(t.map(({animation:n,options:s})=>F0(e,n,s)))}function W0(e){let t=G0(e),n=Ba(),s=!0;const r=c=>(u,h)=>{var f;const d=qt(e,h,c==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:g,transitionEnd:m,...y}=d;u={...u,...y,...m}}return u};function o(c){t=c(e)}function a(c){const{props:u}=e,h=kd(e.parent)||{},d=[],f=new Set;let g={},m=1/0;for(let b=0;b<U0;b++){const v=z0[b],_=n[v],x=u[v]!==void 0?u[v]:h[v],w=Nn(x),j=v===c?_.isActive:null;j===!1&&(m=b);let C=x===h[v]&&x!==u[v]&&w;if(C&&s&&e.manuallyAnimateOnMount&&(C=!1),_.protectedKeys={...g},!_.isActive&&j===null||!x&&!_.prevProp||Hs(x)||typeof x=="boolean")continue;const S=K0(_.prevProp,x);let T=S||v===c&&_.isActive&&!C&&w||b>m&&w,L=!1;const k=Array.isArray(x)?x:[x];let I=k.reduce(r(v),{});j===!1&&(I={});const{prevResolvedValues:N={}}=_,D={...N,...I},R=M=>{T=!0,f.has(M)&&(L=!0,f.delete(M)),_.needsAnimating[M]=!0;const $=e.getValue(M);$&&($.liveStyle=!1)};for(const M in D){const $=I[M],B=N[M];if(g.hasOwnProperty(M))continue;let G=!1;rr($)&&rr(B)?G=!Sd($,B):G=$!==B,G?$!=null?R(M):f.add(M):$!==void 0&&f.has(M)?R(M):_.protectedKeys[M]=!0}_.prevProp=x,_.prevResolvedValues=I,_.isActive&&(g={...g,...I}),s&&e.blockInitialAnimation&&(T=!1);const V=C&&S;T&&(!V||L)&&d.push(...k.map(M=>{const $={type:v};if(typeof M=="string"&&s&&!V&&e.manuallyAnimateOnMount&&e.parent){const{parent:B}=e,G=qt(B,M);if(B.enteringChildren&&G){const{delayChildren:U}=G.transition||{};$.delay=_d(B.enteringChildren,e,U)}}return{animation:M,options:$}}))}if(f.size){const b={};if(typeof u.initial!="boolean"){const v=qt(e,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(b.transition=v.transition)}f.forEach(v=>{const _=e.getBaseTarget(v),x=e.getValue(v);x&&(x.liveStyle=!0),b[v]=_!=null?_:null}),d.push({animation:b})}let y=!!d.length;return s&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),s=!1,y?t(d):Promise.resolve()}function l(c,u){var d;if(n[c].isActive===u)return Promise.resolve();(d=e.variantChildren)==null||d.forEach(f=>{var g;return(g=f.animationState)==null?void 0:g.setActive(c,u)}),n[c].isActive=u;const h=a(c);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>n,reset:()=>{n=Ba(),s=!0}}}function K0(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Sd(t,e):!1}function bt(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ba(){return{animate:bt(!0),whileInView:bt(),whileHover:bt(),whileTap:bt(),whileDrag:bt(),whileFocus:bt(),exit:bt()}}class yt{constructor(t){this.isMounted=!1,this.node=t}update(){}}class q0 extends yt{constructor(t){super(t),t.animationState||(t.animationState=W0(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Hs(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let H0=0;class Y0 extends yt{constructor(){super(...arguments),this.id=H0++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const r=this.node.animationState.setActive("exit",!t);n&&!t&&r.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const X0={animation:{Feature:q0},exit:{Feature:Y0}};function On(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function Hn(e){return{point:{x:e.pageX,y:e.pageY}}}const J0=e=>t=>mo(t)&&e(t,Hn(t));function _n(e,t,n,s){return On(e,t,J0(n),s)}const Cd=1e-4,Z0=1-Cd,Q0=1+Cd,Td=.01,ew=0-Td,tw=0+Td;function ke(e){return e.max-e.min}function nw(e,t,n){return Math.abs(e-t)<=n}function Oa(e,t,n,s=.5){e.origin=s,e.originPoint=ne(t.min,t.max,e.origin),e.scale=ke(n)/ke(t),e.translate=ne(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Z0&&e.scale<=Q0||isNaN(e.scale))&&(e.scale=1),(e.translate>=ew&&e.translate<=tw||isNaN(e.translate))&&(e.translate=0)}function Sn(e,t,n,s){Oa(e.x,t.x,n.x,s?s.originX:void 0),Oa(e.y,t.y,n.y,s?s.originY:void 0)}function Fa(e,t,n){e.min=n.min+t.min,e.max=e.min+ke(t)}function sw(e,t,n){Fa(e.x,t.x,n.x),Fa(e.y,t.y,n.y)}function Va(e,t,n){e.min=t.min-n.min,e.max=e.min+ke(t)}function kn(e,t,n){Va(e.x,t.x,n.x),Va(e.y,t.y,n.y)}function Oe(e){return[e("x"),e("y")]}const Ad=({current:e})=>e?e.ownerDocument.defaultView:null,za=(e,t)=>Math.abs(e-t);function iw(e,t){const n=za(e.x,t.x),s=za(e.y,t.y);return Math.sqrt(n**2+s**2)}class Pd{constructor(t,n,{transformPagePoint:s,contextWindow:r=window,dragSnapToOrigin:o=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=yi(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,m=iw(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!m)return;const{point:y}=f,{timestamp:b}=xe;this.history.push({...y,timestamp:b});const{onStart:v,onMove:_}=this.handlers;g||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,f)},this.handlePointerMove=(f,g)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=gi(g,this.transformPagePoint),ee.update(this.updatePoint,!0)},this.handlePointerUp=(f,g)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=yi(f.type==="pointercancel"?this.lastMoveEventInfo:gi(g,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,v),y&&y(f,v)},!mo(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=a,this.contextWindow=r||window;const l=Hn(t),c=gi(l,this.transformPagePoint),{point:u}=c,{timestamp:h}=xe;this.history=[{...u,timestamp:h}];const{onSessionStart:d}=n;d&&d(t,yi(c,this.history)),this.removeListeners=Wn(_n(this.contextWindow,"pointermove",this.handlePointerMove),_n(this.contextWindow,"pointerup",this.handlePointerUp),_n(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),at(this.updatePoint)}}function gi(e,t){return t?{point:t(e.point)}:e}function Ua(e,t){return{x:e.x-t.x,y:e.y-t.y}}function yi({point:e},t){return{point:e,delta:Ua(e,Ed(t)),offset:Ua(e,rw(t)),velocity:ow(t,.1)}}function rw(e){return e[0]}function Ed(e){return e[e.length-1]}function ow(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const r=Ed(e);for(;n>=0&&(s=e[n],!(r.timestamp-s.timestamp>He(t)));)n--;if(!s)return{x:0,y:0};const o=Ye(r.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-s.x)/o,y:(r.y-s.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function aw(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?ne(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?ne(n,e,s.max):Math.min(e,n)),e}function Ga(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function lw(e,{top:t,left:n,bottom:s,right:r}){return{x:Ga(e.x,n,r),y:Ga(e.y,t,s)}}function Wa(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function cw(e,t){return{x:Wa(e.x,t.x),y:Wa(e.y,t.y)}}function uw(e,t){let n=.5;const s=ke(e),r=ke(t);return r>s?n=Rn(t.min,t.max-s,e.min):s>r&&(n=Rn(e.min,e.max-r,t.min)),rt(0,1,n)}function dw(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const lr=.35;function hw(e=lr){return e===!1?e=0:e===!0&&(e=lr),{x:Ka(e,"left","right"),y:Ka(e,"top","bottom")}}function Ka(e,t,n){return{min:qa(e,t),max:qa(e,n)}}function qa(e,t){return typeof e=="number"?e:e[t]||0}const fw=new WeakMap;class mw{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ae(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Hn(d).point)},a=(d,f)=>{const{drag:g,dragPropagation:m,onDragStart:y}=this.getProps();if(g&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wv(g),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Oe(v=>{let _=this.getAxisMotionValue(v).get()||0;if(Xe.test(_)){const{projection:x}=this.visualElement;if(x&&x.layout){const w=x.layout.layoutBox[v];w&&(_=ke(w)*(parseFloat(_)/100))}}this.originPoint[v]=_}),y&&ee.postRender(()=>y(d,f)),or(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:g,dragDirectionLock:m,onDirectionLock:y,onDrag:b}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:v}=f;if(m&&this.currentDirection===null){this.currentDirection=pw(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),b&&b(d,f)},c=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Oe(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Pd(t,{onSessionStart:o,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:s,contextWindow:Ad(this.visualElement)})}stop(t,n){const s=t||this.latestPointerEvent,r=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!r||!s)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&ee.postRender(()=>l(s,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:r}=this.getProps();if(!s||!Qn(t,r,this.currentDirection))return;const o=this.getAxisMotionValue(t);let a=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(a=aw(a,this.constraints[t],this.elastic[t])),o.set(a)}resolveConstraints(){var o;const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,r=this.constraints;t&&Ft(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=lw(s.layoutBox,t):this.constraints=!1,this.elastic=hw(n),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Oe(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=dw(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Ft(t))return!1;const s=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=g0(s,r.root,this.visualElement.getTransformPagePoint());let a=cw(r.layout.layoutBox,o);if(n){const l=n(f0(a));this.hasMutatedConstraints=!!l,l&&(a=fd(l))}return a}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Oe(h=>{if(!Qn(h,n,this.currentDirection))return;let d=c&&c[h]||{};a&&(d={min:0,max:0});const f=r?200:1e6,g=r?40:1e7,m={type:"inertia",velocity:s?t[h]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...o,...d};return this.startAxisValueAnimation(h,m)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return or(this.visualElement,t),s.start(_o(t,s,0,n,this.visualElement,!1))}stopAnimation(){Oe(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Oe(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Oe(n=>{const{drag:s}=this.getProps();if(!Qn(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:l}=r.layout.layoutBox[n];o.set(t[n]-ne(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Ft(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Oe(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();r[a]=uw({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Oe(a=>{if(!Qn(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(ne(c,u,r[a]))})}addListeners(){if(!this.visualElement.current)return;fw.set(this.visualElement,this);const t=this.visualElement.current,n=_n(t,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();Ft(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),ee.read(s);const a=On(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Oe(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=c[h].translate,d.set(d.get()+c[h].translate))}),this.visualElement.render())}));return()=>{a(),n(),o(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=lr,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function Qn(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function pw(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class gw extends yt{constructor(t){super(t),this.removeGroupControls=Ve,this.removeListeners=Ve,this.controls=new mw(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ve}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ha=e=>(t,n)=>{e&&ee.postRender(()=>e(t,n))};class yw extends yt{constructor(){super(...arguments),this.removePointerDownListener=Ve}onPointerDown(t){this.session=new Pd(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ad(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:Ha(t),onStart:Ha(n),onMove:s,onEnd:(o,a)=>{delete this.session,r&&ee.postRender(()=>r(o,a))}}}mount(){this.removePointerDownListener=_n(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ds={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ya(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const un={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(K.test(e))e=parseFloat(e);else return e;const n=Ya(e,t.target.x),s=Ya(e,t.target.y);return`${n}% ${s}%`}},xw={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,r=pt.parse(e);if(r.length>5)return s;const o=pt.createTransformer(e),a=typeof r[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;r[0+a]/=l,r[1+a]/=c;const u=ne(l,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=u),typeof r[3+a]=="number"&&(r[3+a]/=u),o(r)}};let xi=!1;class bw extends p.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:o}=t;Vv(vw),o&&(n.group&&n.group.add(o),s&&s.register&&r&&s.register(o),xi&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),ds.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:r,isPresent:o}=this.props,{projection:a}=s;return a&&(a.isPresent=o,xi=!0,r||t.layoutDependency!==n||n===void 0||t.isPresent!==o?a.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?a.promote():a.relegate()||ee.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),fo.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=t;xi=!0,r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Id(e){const[t,n]=Zu(),s=p.useContext(Gr);return i.jsx(bw,{...e,layoutGroup:s,switchLayoutGroup:p.useContext(dd),isPresent:t,safeToRemove:n})}const vw={borderRadius:{...un,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:un,borderTopRightRadius:un,borderBottomLeftRadius:un,borderBottomRightRadius:un,boxShadow:xw};function ww(e,t,n){const s=we(e)?e:It(e);return s.start(_o("",s,t,n)),s.animation}const jw=(e,t)=>e.depth-t.depth;class _w{constructor(){this.children=[],this.isDirty=!1}add(t){qr(this.children,t),this.isDirty=!0}remove(t){Hr(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(jw),this.isDirty=!1,this.children.forEach(t)}}function Sw(e,t){const n=Pe.now(),s=({timestamp:r})=>{const o=r-n;o>=t&&(at(s),e(o-t))};return ee.setup(s,!0),()=>at(s)}const Ld=["TopLeft","TopRight","BottomLeft","BottomRight"],kw=Ld.length,Xa=e=>typeof e=="string"?parseFloat(e):e,Ja=e=>typeof e=="number"||K.test(e);function Cw(e,t,n,s,r,o){var a,l,c,u;r?(e.opacity=ne(0,(a=n.opacity)!=null?a:1,Tw(s)),e.opacityExit=ne((l=t.opacity)!=null?l:1,0,Aw(s))):o&&(e.opacity=ne((c=t.opacity)!=null?c:1,(u=n.opacity)!=null?u:1,s));for(let h=0;h<kw;h++){const d=`border${Ld[h]}Radius`;let f=Za(t,d),g=Za(n,d);if(f===void 0&&g===void 0)continue;f||(f=0),g||(g=0),f===0||g===0||Ja(f)===Ja(g)?(e[d]=Math.max(ne(Xa(f),Xa(g),s),0),(Xe.test(g)||Xe.test(f))&&(e[d]+="%")):e[d]=g}(t.rotate||n.rotate)&&(e.rotate=ne(t.rotate||0,n.rotate||0,s))}function Za(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Tw=Md(0,.5,yu),Aw=Md(.5,.95,Ve);function Md(e,t,n){return s=>s<e?0:s>t?1:n(Rn(e,t,s))}function Qa(e,t){e.min=t.min,e.max=t.max}function Be(e,t){Qa(e.x,t.x),Qa(e.y,t.y)}function el(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function tl(e,t,n,s,r){return e-=t,e=Ps(e,1/n,s),r!==void 0&&(e=Ps(e,1/r,s)),e}function Pw(e,t=0,n=1,s=.5,r,o=e,a=e){if(Xe.test(t)&&(t=parseFloat(t),t=ne(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=ne(o.min,o.max,s);e===o&&(l-=t),e.min=tl(e.min,t,n,l,r),e.max=tl(e.max,t,n,l,r)}function nl(e,t,[n,s,r],o,a){Pw(e,t[n],t[s],t[r],t.scale,o,a)}const Ew=["x","scaleX","originX"],Iw=["y","scaleY","originY"];function sl(e,t,n,s){nl(e.x,t,Ew,n?n.x:void 0,s?s.x:void 0),nl(e.y,t,Iw,n?n.y:void 0,s?s.y:void 0)}function il(e){return e.translate===0&&e.scale===1}function Rd(e){return il(e.x)&&il(e.y)}function rl(e,t){return e.min===t.min&&e.max===t.max}function Lw(e,t){return rl(e.x,t.x)&&rl(e.y,t.y)}function ol(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function $d(e,t){return ol(e.x,t.x)&&ol(e.y,t.y)}function al(e){return ke(e.x)/ke(e.y)}function ll(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Mw{constructor(){this.members=[]}add(t){qr(this.members,t),t.scheduleRender()}remove(t){if(Hr(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(r=>t===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Rw(e,t,n){let s="";const r=e.x.translate/t.x,o=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((r||o||a)&&(s=`translate3d(${r}px, ${o}px, ${a}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:h,rotateX:d,rotateY:f,skewX:g,skewY:m}=n;u&&(s=`perspective(${u}px) ${s}`),h&&(s+=`rotate(${h}deg) `),d&&(s+=`rotateX(${d}deg) `),f&&(s+=`rotateY(${f}deg) `),g&&(s+=`skewX(${g}deg) `),m&&(s+=`skewY(${m}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const bi=["","X","Y","Z"],$w=1e3;let Dw=0;function vi(e,t,n,s){const{latestValues:r}=t;r[e]&&(n[e]=r[e],t.setStaticValue(e,0),s&&(s[e]=0))}function Dd(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=wd(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ee,!(r||o))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&Dd(s)}function Nd({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(a={},l=t==null?void 0:t()){this.id=Dw++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Ow),this.nodes.forEach(Uw),this.nodes.forEach(Gw),this.nodes.forEach(Fw)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new _w)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Jr),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=Ju(a)&&!Tv(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let h,d=0;const f=()=>this.root.updateBlockedByResize=!1;ee.read(()=>{d=window.innerWidth}),e(a,()=>{const g=window.innerWidth;g!==d&&(d=g,this.root.updateBlockedByResize=!0,h&&h(),h=Sw(f,250),ds.hasAnimatedSinceResize&&(ds.hasAnimatedSinceResize=!1,this.nodes.forEach(dl)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||Yw,{onLayoutAnimationStart:y,onLayoutAnimationComplete:b}=u.getProps(),v=!this.targetLayout||!$d(this.targetLayout,g),_=!d&&f;if(this.options.layoutRoot||this.resumeFrom||_||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...uo(m,"layout"),onPlay:y,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(h,_)}else d||dl(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),at(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ww),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Dd(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(cl);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ul);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(zw),this.nodes.forEach(Nw),this.nodes.forEach(Bw)):this.nodes.forEach(ul),this.clearAllSnapshots();const l=Pe.now();xe.delta=rt(0,1e3/60,l-xe.timestamp),xe.timestamp=l,xe.isProcessing=!0,li.update.process(xe),li.preRender.process(xe),li.render.process(xe),xe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fo.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Vw),this.sharedNodes.forEach(Kw)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ee.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ee.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ke(this.snapshot.measuredBox.x)&&!ke(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ae(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Rd(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;a&&this.instance&&(l||jt(this.latestValues)||h)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),Xw(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return ae();const l=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(Jw))){const{scroll:h}=this.root;h&&(Vt(l.x,h.offset.x),Vt(l.y,h.offset.y))}return l}removeElementScroll(a){var c;const l=ae();if(Be(l,a),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:d,options:f}=h;h!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Be(l,a),Vt(l.x,d.offset.x),Vt(l.y,d.offset.y))}return l}applyTransform(a,l=!1){const c=ae();Be(c,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&zt(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),jt(h.latestValues)&&zt(c,h.latestValues)}return jt(this.latestValues)&&zt(c,this.latestValues),c}removeTransform(a){const l=ae();Be(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!jt(u.latestValues))continue;nr(u.latestValues)&&u.updateSnapshot();const h=ae(),d=u.measurePageBox();Be(h,d),sl(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return jt(this.latestValues)&&sl(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var f;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=xe.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ae(),this.relativeTargetOrigin=ae(),kn(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Be(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ae(),this.targetWithTransforms=ae()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),sw(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Be(this.target,this.layout.layoutBox),pd(this.target,this.targetDelta)):Be(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ae(),this.relativeTargetOrigin=ae(),kn(this.relativeTargetOrigin,this.target,g.target),Be(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||nr(this.parent.latestValues)||md(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===xe.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Be(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;p0(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ae());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(el(this.prevProjectionDelta.x,this.projectionDelta.x),el(this.prevProjectionDelta.y,this.projectionDelta.y)),Sn(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!ll(this.projectionDelta.x,this.prevProjectionDelta.x)||!ll(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ut(),this.projectionDelta=Ut(),this.projectionDeltaWithTransform=Ut()}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},d=Ut();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=ae(),g=c?c.source:void 0,m=this.layout?this.layout.source:void 0,y=g!==m,b=this.getStack(),v=!b||b.members.length<=1,_=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(Hw));this.animationProgress=0;let x;this.mixTargetDelta=w=>{const j=w/1e3;hl(d.x,a.x,j),hl(d.y,a.y,j),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(kn(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qw(this.relativeTarget,this.relativeTargetOrigin,f,j),x&&Lw(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=ae()),Be(x,this.relativeTarget)),y&&(this.animationValues=h,Cw(h,u,this.latestValues,j,_,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(at(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ee.update(()=>{ds.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=It(0)),this.currentAnimation=ww(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),a.onUpdate&&a.onUpdate(h)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($w),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:h}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&Bd(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ae();const d=ke(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+d;const f=ke(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}Be(l,c),zt(l,h),Sn(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Mw),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&vi("z",a,u,this.animationValues);for(let h=0;h<bi.length;h++)vi(`rotate${bi[h]}`,a,u,this.animationValues),vi(`skew${bi[h]}`,a,u,this.animationValues);a.render();for(const h in u)a.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);a.scheduleRender()}applyProjectionStyles(a,l){var m,y;if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=us(l==null?void 0:l.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=us(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!jt(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const h=u.animationValues||u.latestValues;this.applyTransformsToTarget();let d=Rw(this.projectionDeltaWithTransform,this.treeScale,h);c&&(d=c(h,d)),a.transform=d;const{x:f,y:g}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${g.origin*100}% 0`,u.animationValues?a.opacity=u===this?(y=(m=h.opacity)!=null?m:this.latestValues.opacity)!=null?y:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:a.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const b in Bn){if(h[b]===void 0)continue;const{correct:v,applyTo:_,isCSSVariable:x}=Bn[b],w=d==="none"?h[b]:v(h[b],u);if(_){const j=_.length;for(let C=0;C<j;C++)a[_[C]]=w}else x?this.options.visualElement.renderState.vars[b]=w:a[b]=w}this.options.layoutId&&(a.pointerEvents=u===this?us(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(cl),this.root.sharedNodes.clear()}}}function Nw(e){e.updateLayout()}function Bw(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=e.layout,{animationType:o}=e.options,a=t.source!==e.layout.source;o==="size"?Oe(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],g=ke(f);f.min=s[d].min,f.max=f.min+g}):Bd(o,t.layoutBox,s)&&Oe(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],g=ke(s[d]);f.max=f.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+g)});const l=Ut();Sn(l,s,t.layoutBox);const c=Ut();a?Sn(c,e.applyTransform(r,!0),t.measuredBox):Sn(c,s,t.layoutBox);const u=!Rd(l);let h=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:g}=d;if(f&&g){const m=ae();kn(m,t.layoutBox,f.layoutBox);const y=ae();kn(y,s,g.layoutBox),$d(m,y)||(h=!0),d.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=m,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function Ow(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Fw(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Vw(e){e.clearSnapshot()}function cl(e){e.clearMeasurements()}function ul(e){e.isLayoutDirty=!1}function zw(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function dl(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Uw(e){e.resolveTargetDelta()}function Gw(e){e.calcProjection()}function Ww(e){e.resetSkewAndRotation()}function Kw(e){e.removeLeadSnapshot()}function hl(e,t,n){e.translate=ne(t.translate,0,n),e.scale=ne(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function fl(e,t,n,s){e.min=ne(t.min,n.min,s),e.max=ne(t.max,n.max,s)}function qw(e,t,n,s){fl(e.x,t.x,n.x,s),fl(e.y,t.y,n.y,s)}function Hw(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Yw={duration:.45,ease:[.4,0,.1,1]},ml=e=>typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),pl=ml("applewebkit/")&&!ml("chrome/")?Math.round:Ve;function gl(e){e.min=pl(e.min),e.max=pl(e.max)}function Xw(e){gl(e.x),gl(e.y)}function Bd(e,t,n){return e==="position"||e==="preserve-aspect"&&!nw(al(t),al(n),.2)}function Jw(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const Zw=Nd({attachResizeListener:(e,t)=>On(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),wi={current:void 0},Od=Nd({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!wi.current){const e=new Zw({});e.mount(window),e.setOptions({layoutScroll:!0}),wi.current=e}return wi.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Qw={pan:{Feature:yw},drag:{Feature:gw,ProjectionNode:Od,MeasureLayout:Id}};function yl(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=s[r];o&&ee.postRender(()=>o(t,Hn(t)))}class ej extends yt{mount(){const{current:t}=this.node;t&&(this.unmount=jv(t,(n,s)=>(yl(this.node,s,"Start"),r=>yl(this.node,r,"End"))))}unmount(){}}class tj extends yt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(n){t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wn(On(this.node.current,"focus",()=>this.onFocus()),On(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function xl(e,t,n){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=s[r];o&&ee.postRender(()=>o(t,Hn(t)))}class nj extends yt{mount(){const{current:t}=this.node;t&&(this.unmount=Cv(t,(n,s)=>(xl(this.node,s,"Start"),(r,{success:o})=>xl(this.node,r,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const cr=new WeakMap,ji=new WeakMap,sj=e=>{const t=cr.get(e.target);t&&t(e)},ij=e=>{e.forEach(sj)};function rj({root:e,...t}){const n=e||document;ji.has(n)||ji.set(n,{});const s=ji.get(n),r=JSON.stringify(t);return s[r]||(s[r]=new IntersectionObserver(ij,{root:e,...t})),s[r]}function oj(e,t,n){const s=rj(t);return cr.set(e,n),s.observe(e),()=>{cr.delete(e),s.unobserve(e)}}const aj={some:0,all:1};class lj extends yt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:o}=t,a={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:aj[r]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(c)};return oj(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(cj(t,n))&&this.startObserver()}unmount(){}}function cj({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const uj={inView:{Feature:lj},tap:{Feature:nj},focus:{Feature:tj},hover:{Feature:ej}},dj={layout:{ProjectionNode:Od,MeasureLayout:Id}},hj={...X0,...uj,...Qw,...dj},Gt=h0(hj,k0);function ur(e){const t=Gn(()=>It(e)),{isStatic:n}=p.useContext(Ks);if(n){const[,s]=p.useState(e);p.useEffect(()=>t.on("change",s),[])}return t}function Fd(e,t){const n=ur(t()),s=()=>n.set(t());return s(),Kr(()=>{const r=()=>ee.preRender(s,!1,!0),o=e.map(a=>a.on("change",r));return()=>{o.forEach(a=>a()),at(s)}}),n}function fj(e){jn.current=[],e();const t=Fd(jn.current,e);return jn.current=void 0,t}function mj(e,t,n,s){if(typeof e=="function")return fj(e);const r=typeof t=="function"?t:Av(t,n,s);return Array.isArray(e)?bl(e,r):bl([e],([o])=>r(o))}function bl(e,t){const n=Gn(()=>[]);return Fd(e,()=>{n.length=0;const s=e.length;for(let r=0;r<s;r++)n[r]=e[r].get();return t(n)})}const pj=({children:e,className:t})=>{const n=et(),s=gr(n.breakpoints.down("md")),{settings:r,updateSettings:o}=ac(),[a,l]=p.useState(!1),[c,u]=p.useState(!1),h=p.useRef(null),[d,f]=p.useState({x:0,y:0,width:0,height:0}),g=!r.hasSeenRollButton&&!c;p.useEffect(()=>{if(g&&h.current){const y=()=>{const b=h.current.getBoundingClientRect();f({x:b.left,y:b.top,width:b.width,height:b.height})};return y(),window.addEventListener("resize",y),window.addEventListener("scroll",y),()=>{window.removeEventListener("resize",y),window.removeEventListener("scroll",y)}}},[g]),p.useEffect(()=>{if(g){const y=setTimeout(()=>{l(!0)},1500);return()=>{clearTimeout(y)}}},[g]);const m=()=>{r.hasSeenRollButton||(u(!0),l(!1),o({hasSeenRollButton:!0}))};return g?i.jsxs(i.Fragment,{children:[i.jsx(Qu,{children:g&&i.jsx(yr,{children:i.jsx(Gt.div,{initial:{opacity:1,background:`radial-gradient(
                  circle at ${d.x+d.width/2}px ${d.y+d.height/2}px,
                  transparent 0px,
                  transparent ${Math.max(d.width,d.height)*(s?5.5:11.25)}px,
                  rgba(0, 0, 0, 0.2) ${Math.max(d.width,d.height)*(s?6.5:13.5)}px,
                  rgba(0, 0, 0, 0.5) ${Math.max(d.width,d.height)*(s?8:16.5)}px,
                  rgba(0, 0, 0, 0.7) ${Math.max(d.width,d.height)*(s?10:21)}px,
                  rgba(0, 0, 0, 0.8) 100%
                )`},animate:a?{opacity:1,background:`radial-gradient(
                  circle at ${d.x+d.width/2}px ${d.y+d.height/2}px,
                  transparent 0px,
                  transparent ${Math.max(d.width,d.height)*(s?.55:1.125)}px,
                  rgba(0, 0, 0, 0.2) ${Math.max(d.width,d.height)*(s?.65:1.35)}px,
                  rgba(0, 0, 0, 0.5) ${Math.max(d.width,d.height)*(s?.8:1.65)}px,
                  rgba(0, 0, 0, 0.7) ${Math.max(d.width,d.height)*(s?1:2.1)}px,
                  rgba(0, 0, 0, 0.8) 100%
                )`}:{},exit:{opacity:0},transition:{duration:1.8,ease:[.25,.46,.45,.94]},onClick:m,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998,cursor:"pointer",pointerEvents:a?"auto":"none"}})})}),i.jsx(Gt.div,{ref:h,className:t,onClick:m,animate:{scale:[1,1.05,1],boxShadow:["0 0 0 0 rgba(25, 118, 210, 0.8), 0 0 40px rgba(25, 118, 210, 0.6), 0 0 80px rgba(25, 118, 210, 0.4), 0 0 120px rgba(25, 118, 210, 0.2)","0 0 0 12px rgba(25, 118, 210, 0), 0 0 60px rgba(25, 118, 210, 0.8), 0 0 120px rgba(25, 118, 210, 0.6), 0 0 180px rgba(25, 118, 210, 0.3)","0 0 0 0 rgba(25, 118, 210, 0), 0 0 40px rgba(25, 118, 210, 0.6), 0 0 80px rgba(25, 118, 210, 0.4), 0 0 120px rgba(25, 118, 210, 0.2)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},whileHover:{scale:1.02,transition:{duration:.2}},style:{borderRadius:4,position:"relative",zIndex:9999},children:e})]}):i.jsx("div",{className:t,children:e})};function gj(e){return/^-?\d+$/.test(String(e))}function _i(e,t,n){let s=0;for(let r=0;r<Number(e);r+=1)s+=Math.floor(Math.random()*Number(t))+1;n(s)}const yj=p.memo(function({setRollValue:t,dice:n,isEndOfBoard:s}){const{t:r}=F(),[o,a]=p.useState(!1),[l,c]=p.useState("manual"),[u,h]=p.useState(0),[d,f]=p.useState(r("roll")),{timeLeft:g,setTimeLeft:m,togglePause:y,isPaused:b}=Ur(u),[v,_]=p.useState(!1),[x,w]=p.useState({isRange:!1,min:30,max:120}),j=p.useCallback(N=>{t(N)},[t]),[C,S]=n.split("d"),T=()=>{if(l==="manual"){_i(C,S,j),a(!0),setTimeout(()=>a(!1),4e3);return}b&&g===u&&_i(C,S,j),y()},L=p.useCallback(N=>{if(N==="restart"){j(-1);return}if(c(String(N)),N==="custom"){_(!0);return}if(gj(N)){b||y();const D=Number(N);h(D),m(D)}},[b,m,y,j]),k=()=>{_(!1)},I=(N,D={isRange:!1})=>{b||y(),h(N),m(N),w({...x,...D}),c("custom"),_(!1)};return p.useEffect(()=>{s&&y()},[s,y]),p.useEffect(()=>{if(o)f(r("wait"));else if(l==="manual")f(r("roll"));else if(b)f(`${r("play")} (${g})`);else if(g>0)f(`${r("pause")} (${g})`);else if(g===0&&!b&&l!=="manual"){_i(C,S,j);let N;if(x.isRange){const{min:D,max:R}=x;N=Math.floor(Math.random()*(R-D+1))+D}else N=u;h(N),m(N),f(`${r("pause")} (${N})`)}},[o,l,g,b,u,x,r,C,S,j,m]),i.jsxs(i.Fragment,{children:[i.jsx(pj,{className:"dice-roller",children:i.jsxs(of,{variant:"contained",children:[i.jsxs(z,{"aria-label":r("roll"),onClick:T,disabled:o,size:"large",children:[i.jsx(zm,{sx:{mr:1}}),d]}),i.jsx(Mx,{selectedRoll:l,handleMenuItemClick:L})]})}),i.jsx(Rx,{isOpen:v,onClose:k,onSubmit:I})]})});function xj({playerName:e,show:t,onComplete:n,duration:s=3e3}){const r=et();return p.useEffect(()=>{if(t){const o=setTimeout(n,s);return()=>clearTimeout(o)}},[t,s,n]),i.jsx(br,{in:t,timeout:300,children:i.jsx(A,{sx:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:r.zIndex.modal-1,bgcolor:"rgba(0, 0, 0, 0.8)",borderRadius:2,p:3,textAlign:"center"},children:i.jsxs(P,{variant:"h5",sx:{color:"white",fontWeight:600},children:[e,"'s Turn"]})})})}const{t:Wt}=At;function vl(e){return e.replace(/(?:^|\.\s|!\s)(\w)/g,t=>t.toUpperCase())}function wl(e,t,n){if(!e||e.length===0)return Wt("anotherPlayer");const s=e.filter(o=>n&&o.name===n?!1:t==="sub"?o.role==="sub"||o.role==="vers":t==="dom"?o.role==="dom"||o.role==="vers":!1);if(s.length===0)return Wt("anotherPlayer");const r=Math.floor(Math.random()*s.length);return s[r].name}function bj(e,t,n){const s=Math.random(),r=e.includes("{dom}")&&e.includes("{sub}"),o=t==="vers";function a(l){if(l==="{player}")return!0;const c=l==="{dom}"||l==="{sub}";if(!o&&l===`{${t}}`||!r&&o&&c)return!0;if(r&&o){const u=l==="{dom}"&&s<.5,h=l==="{sub}"&&s>=.5;return u||h}return!1}return e.replace(/{(player|dom|sub)}/g,l=>a(l)?n:l)}function Vd(e,t,n,s,r){let o=e;if(r)return o=o.replace(/{player}/g,Wt("theCurrentPlayer")),o=o.replace(/{dom}/g,Wt("aDominant")),o=o.replace(/{sub}/g,Wt("aSubmissive")),vl(o);if(s&&s.length>0)o=o.replace(/{player}/g,n),t==="dom"&&o.includes("{dom}")?o=o.replace(/{dom}/,n):t==="sub"&&o.includes("{sub}")?o=o.replace(/{sub}/,n):t==="vers"&&(o.includes("{dom}")&&o.includes("{sub}")?Math.random()<.5&&o.includes("{dom}")?o=o.replace(/{dom}/,n):o.includes("{sub}")&&(o=o.replace(/{sub}/,n)):o.includes("{dom}")?o=o.replace(/{dom}/,n):o.includes("{sub}")&&(o=o.replace(/{sub}/,n))),o=o.replace(/{dom}/g,()=>wl(s,"dom",n)),o=o.replace(/{sub}/g,()=>wl(s,"sub",n));else{if(o=bj(e,t,n),!o.includes(n)&&t!=="vers"&&(o.includes("{dom}")||o.includes("{sub}"))){const l=new RegExp(`\\{${t}\\}`);o.match(l)?o=o.replace(l,n):o=o.replace(/{(dom|sub)}/,n)}o=o.replace(/{(dom|sub)}/g,Wt("anotherPlayer"))}return vl(o)}function vj(e){var t;const n=e.filter(o=>o).map(o=>o.split(": ")),s=[];n.forEach((o,a)=>{if(Number(o[1])===0)return;const l=Array(Number(o[1])).fill(a);s.push(...l)});const r=s[Math.floor(Math.random()*s.length)];return((t=n.map(([o])=>o)[r])==null?void 0:t.replace(/(\r\n|\n|\r)/gm,""))||""}function wj(e,t,n,s){if(!e)return"";const r=e.split("%");return r.length<=1?Vd(e,t||"",n||"",s,!1):vj(r)}function jj(e,t,n=[]){const{user:s}=De(),{t:r}=F(),[o]=Me(),a=Fr(),{currentPlayer:l,hasLocalPlayers:c,isLocalPlayerRoom:u,advanceToNextPlayer:h,session:d}=rn(),f=n.length,g=(w,j=0)=>({id:j,title:w.title||"",description:w.description,index:j,players:[],current:null,isTransparent:!1,className:""}),[m,y]=p.useState(n[0]?g(n[0],0):g({title:"",description:""},0)),b=f-1,v=p.useRef(0),_=p.useCallback(async(w,j,C,S)=>{if(!w){console.error("Tile not found at location:",C);return}let T="";const L=c&&u,k=L&&l?l.name:(s==null?void 0:s.displayName)||"",I=L&&l?l.role:o.role||"sub",N=wj(w.description||"",I,k,L&&d?d.players:void 0);j!==-1&&(T+=`${r("roll")}: ${j}
`),T+=`#${C+1}: ${w.title||r("unknownTile")}
`,T+=`${r("action")}: ${N}`;const D={room:e,user:L&&l?{...s,displayName:l.name}:s,text:S?S+T:T,type:"actions"};try{await Pt(D)||console.error("Failed to send message - no result returned")}catch(R){console.error("Failed to send message:",R)}L&&j!==-1&&setTimeout(()=>{h()},100)},[e,s,r,o.role,c,u,l,h,d]),x=p.useCallback(w=>{var j;if(typeof w!="number"||isNaN(w))return console.warn("Invalid rollNumber detected, ignoring move:",w),{newLocation:0};if(w===-1)return{preMessage:`${r("restartingGame")}
`,newLocation:0};const C=c&&u;let S=0;if(C&&l?S=typeof l.location=="number"?l.location:0:S=((j=a.find(L=>L.isSelf))==null?void 0:j.location)||0,(typeof S!="number"||isNaN(S))&&(console.warn("Invalid currentLocation detected, defaulting to 0:",S),S=0),S===b)return{preMessage:`${r("alreadyFinished")}
`,newLocation:w};const T=w+S;return T>=b?{newLocation:b}:{newLocation:T}},[r,a,b,c,u,l]);return p.useEffect(()=>{let w;Array.isArray(t.value)?w=t.value[0]:w=t.value;const j=t.time;if(typeof w!="number"||isNaN(w)||w===0||j<=v.current){(typeof w!="number"||isNaN(w))&&console.warn("Invalid rollNumber in useEffect:",w,"rollValue:",t);return}v.current=j;const{preMessage:C,newLocation:S}=x(w);if(typeof S!="number"||isNaN(S)){console.error("Invalid newLocation calculated:",S,"rollNumber:",w);return}if(S>=0&&S<n.length&&n[S]){if(y(g(n[S],S)),c&&u&&l&&d){const L=S===n.length-1;wt.updatePlayerPosition(d.id,l.id,S,L).catch(k=>{console.error("Failed to update local player position:",k)})}_(n[S],w,S,C).catch(L=>{console.error("Failed to send roll message:",L)})}else console.error(`Invalid location or missing tile: ${S}, gameBoard length: ${n.length}, tile exists:`,!!n[S])},[t,n,_,x,c,u,l,d]),{tile:m,playerList:a}}async function _j({newRoom:e,oldRoom:t,newDisplayName:n,removeOnDisconnect:s=!0}){const o=Fs().currentUser;if(!o){console.warn("Cannot set presence: user not authenticated");return}const a=Os();try{const l=(t||"").toUpperCase(),c=(e||"").toUpperCase();if(t&&l!==c){const d=Xt(a,`users/${o.uid}`);await pc(d)}const u=Xt(a,`users/${o.uid}`),h={displayName:n||"Unknown",isAnonymous:o.isAnonymous,room:c,joinedAt:Date.now(),lastSeen:Date.now()};await gc(u,h),s&&Ym(u).remove()}catch(l){console.error("Error setting user presence:",l)}}async function jl(){const t=Fs().currentUser;if(!t)return;const n=Os(),s=Xt(n,`users/${t.uid}`);try{const r=Xt(n,`users/${t.uid}`),o=await mc(r);if(o.exists()){const l={...o.val(),lastSeen:Date.now()};await gc(s,l)}else console.warn("No existing user data found, skipping heartbeat update")}catch(r){console.error("Error updating presence heartbeat:",r)}}async function _l(){const t=Fs().currentUser;if(!t)return;const n=Os(),s=Xt(n,`users/${t.uid}`);try{await pc(s)}catch(r){console.error("Error removing user presence:",r)}}function Sl(){const e=setInterval(()=>{jl()},6e4);return jl(),()=>{clearInterval(e)}}function Sj(e,t){const{user:{displayName:n}}=De(),[s,r]=p.useState(null),[o,a]=p.useState(n||"");p.useEffect(()=>{let l=null;return s!==e||n!==o?(_j({newRoom:e,oldRoom:s,newDisplayName:n||"",removeOnDisconnect:(e==null?void 0:e.toUpperCase())==="PUBLIC"}).then(()=>{e&&(l=Sl())}).catch(c=>{console.error("Failed to set presence:",c)}),r(e),a(n||"")):e&&!l&&(l=Sl()),()=>{l&&l()}},[e,n,s,o,t]),p.useEffect(()=>{const l=()=>{_l()};return window.addEventListener("beforeunload",l),()=>{window.removeEventListener("beforeunload",l),_l()}},[])}function kj(e,t){const n=p.useRef(void 0);return p.useCallback((...s)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>e(...s),t)},[e,t])}function Cj(e,t){const{i18n:s,t:r}=F(),{user:o}=De(),[a,l]=Me(),c=Je(()=>Sr(a==null?void 0:a.gameMode)),{messages:u,isLoading:h}=Mt(),[d,f]=p.useState("1d6"),[g,m]=p.useState(""),y=Lr(),b=p.useRef(!1),v=p.useRef(!0),_=p.useCallback(async(j,C=null)=>{if(!b.current){b.current=!0;try{const{gameMode:S,newBoard:T}=await y(j),L={formData:{...a,...j},user:o,customTiles:c,actionsList:await gn(s.resolvedLanguage,S||"online"),tiles:T,title:r("settingsGenerated")};C&&(L.reason=r("rebuiltBoard",{messageUser:C})),await Ir(L)}finally{setTimeout(()=>{b.current=!1},500)}}},[a,o,c,s.resolvedLanguage,r,y]),x=p.useCallback(async()=>{(a==null?void 0:a.room)!==e&&(await l({...a,room:e}),await _({...a,roomUpdated:!0,room:e}))},[a,e,l,_]),w=kj(x,200);return p.useEffect(()=>{if(!(h||!u.length))try{const j=Yt(u,"room");if(j){const C=JSON.parse(j.settings),{roomDice:S,roomBackgroundURL:T,roomTileCount:L}=C;let k="1d6";!Q(e)&&S&&(k=S),f(k),m(T||"");const I=Tr(j.timestamp),D=(I?Date.now()-I.getTime():1/0)<300*1e3;j.uid!==(o==null?void 0:o.uid)&&L&&(t==null?void 0:t.length)&&L!==(t==null?void 0:t.length)&&D&&!b.current&&_(C,j.displayName)}}catch(j){console.error("Error processing room message:",j)}},[u,h,e,o,t,_]),p.useEffect(()=>{var j,C;if(!h)try{const S=Yt(u,"room");if(S||!Q(e)&&!S||Q(e)&&!Se((a==null?void 0:a.gameMode)||""))return;if(v.current){v.current=!1,(j=a==null?void 0:a.roomBackgroundURL)!=null&&j.length&&m(a.roomBackgroundURL);return}const T=e!==(a==null?void 0:a.room),L=a&&typeof a.room!="undefined",k=t==null?void 0:t.length,I=!b.current;if(L&&T&&k&&I){w();return}(C=a==null?void 0:a.roomBackgroundURL)!=null&&C.length&&m(a.roomBackgroundURL)}catch(S){console.error("Error in room change effect:",S)}},[e,a,t,u,h,w]),{roller:d,roomBgUrl:g}}function Tj(e,t){const[n,s]=p.useState(null),[r,o]=p.useState(!1),[a,l]=Ms(),c=a.get("importBoard"),{t:u}=F(),h=p.useCallback(()=>{s(null)},[]),d=p.useCallback(m=>{try{const y=JSON.parse(m);return Array.isArray(y)?y:null}catch(y){return console.warn("Failed to parse game board JSON:",!1,y),null}},[]),f=p.useCallback(m=>{try{return m?JSON.parse(m):{}}catch(y){return console.warn("Failed to parse settings JSON:",!1,y),{}}},[]),g=p.useCallback(async()=>{if(l({}),!!c){o(!0);try{const m=await Yf(c);if(!(m!=null&&m.gameBoard)){s(u("failedBoardImport"));return}const y=d(m.gameBoard);if(!y){s(u("failedBoardImport"));return}const b=(m==null?void 0:m.title)!==u("settingsGenerated")?m.title:u("importedBoard");Rs({...m,title:b,tiles:y,isActive:1});const v=f(m==null?void 0:m.settings),x=new URL(window.location.href).pathname.split("/").pop()||"",w={...e,...v};x.toUpperCase()==="PUBLIC"&&v.gameMode==="local"&&(w.gameMode="online"),t(w),n!==u("updated")&&s(u("updated"))}finally{o(!1)}}},[c,d,f,e,t,u,n,l]);return p.useEffect(()=>{c&&g()},[c,g]),[n,h,r||!!c]}function Aj({tab1:e,tab2:t}){const[n,s]=p.useState(0),{t:r}=F(),o=(a,l)=>{s(l)};return i.jsxs(i.Fragment,{children:[i.jsx(Yl,{position:"fixed",sx:{top:"auto",bottom:0},children:i.jsxs(xr,{value:n,onChange:o,indicatorColor:"secondary",variant:"fullWidth",children:[i.jsx(kt,{label:r("game"),...yn(0)}),i.jsx(kt,{label:r("messages"),...yn(1)})]})}),i.jsxs(A,{sx:{paddingTop:"4rem",paddingBottom:"48px",height:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(xn,{value:n,index:0,style:{flex:1,overflow:"hidden",p:0},children:e}),i.jsx(xn,{value:n,index:1,style:{flex:1,overflow:"hidden",p:1},children:t})]})]})}function Pj(e,t,n,s){if(!e&&t===40)return!0;if(!n)return!1;const{roomTileCount:r}=n;return t!==r?!1:t===s}function Ej(e,t,n){const{id:s}=Le(),[r,o]=p.useState(!1),{i18n:a}=F(),[l]=Me(),c=Je(()=>Sr(l==null?void 0:l.gameMode)),u=Je($s),h=p.useCallback(async()=>{var d;if(!l||n||r||!((d=u==null?void 0:u.tiles)!=null&&d.length)||s===void 0)return;const f=!Q(s||""),g={...l,room:s},m=Yt(t,"room");f&&!m&&await Sc(g,e),o(!0);const y=Pj(f,u.tiles.length,m,l.roomTileCount);if(!Xf(t,v=>v.type==="settings"&&v.uid===e.uid)&&y){const v=await gn(a.resolvedLanguage,l.gameMode);await Ir({formData:g,user:e,customTiles:c,actionsList:v,tiles:u.tiles,title:u.title})}},[u,c,a.resolvedLanguage,n,t,s,l,r,e]);p.useEffect(()=>{h()},[h])}const Ij=45,Lj=6;function Mj(e,t,n){return e!=="settings"&&e!=="room"||typeof t!="string"?null:e==="settings"?n("updatedGameSettings"):e==="room"?n("updatedRoomSettings"):null}function Rj(e,t){if(!(t!=null&&t.trim())||!(e!=null&&e.trim()))return!1;const n=`${e} ${t}`;return n.length>Ij?!0:n.split(/\s+/).length>Lj}function $j({text:e}){const{t}=F();return p.useMemo(()=>{const s=wc(e,t("seconds"));let r=e;return s==null||s.forEach(o=>{o&&(r=Ro(r,o,(a,l)=>i.jsx(iu,{textString:o,preventParentClose:()=>null,noPadding:!0},a+l)))}),Ro(r,`
`,(o,a)=>i.jsx("br",{},`br${a}`))},[e,t])}const Dj=p.memo($j);function Nj({room:e,id:t}){return i.jsx(ve,{title:i.jsx(E,{i18nKey:"delete"}),children:i.jsx(Z,{onClick:()=>Jf(e,t),"aria-label":"delete",size:"small",sx:{p:.5,ml:1,opacity:.6,transition:"all 0.2s ease","&:hover":{opacity:1,color:"error.main",backgroundColor:"rgba(255, 82, 82, 0.1)",transform:"scale(1.1)"}},children:i.jsx(sn,{fontSize:"small"})})})}const kl={100:"ðŸ’¯",1234:"ðŸ”¢",grinning:"ðŸ˜€",smiley:"ðŸ˜ƒ",smile:"ðŸ˜„",grin:"ðŸ˜",laughing:"ðŸ˜†",satisfied:"ðŸ˜†",sweat_smile:"ðŸ˜…",rofl:"ðŸ¤£",joy:"ðŸ˜‚",slightly_smiling_face:"ðŸ™‚",upside_down_face:"ðŸ™ƒ",melting_face:"ðŸ« ",wink:"ðŸ˜‰",blush:"ðŸ˜Š",innocent:"ðŸ˜‡",smiling_face_with_three_hearts:"ðŸ¥°",heart_eyes:"ðŸ˜",star_struck:"ðŸ¤©",kissing_heart:"ðŸ˜˜",kissing:"ðŸ˜—",relaxed:"â˜ºï¸",kissing_closed_eyes:"ðŸ˜š",kissing_smiling_eyes:"ðŸ˜™",smiling_face_with_tear:"ðŸ¥²",yum:"ðŸ˜‹",stuck_out_tongue:"ðŸ˜›",stuck_out_tongue_winking_eye:"ðŸ˜œ",zany_face:"ðŸ¤ª",stuck_out_tongue_closed_eyes:"ðŸ˜",money_mouth_face:"ðŸ¤‘",hugs:"ðŸ¤—",hand_over_mouth:"ðŸ¤­",face_with_open_eyes_and_hand_over_mouth:"ðŸ«¢",face_with_peeking_eye:"ðŸ«£",shushing_face:"ðŸ¤«",thinking:"ðŸ¤”",saluting_face:"ðŸ«¡",zipper_mouth_face:"ðŸ¤",raised_eyebrow:"ðŸ¤¨",neutral_face:"ðŸ˜",expressionless:"ðŸ˜‘",no_mouth:"ðŸ˜¶",dotted_line_face:"ðŸ«¥",face_in_clouds:"ðŸ˜¶â€ðŸŒ«ï¸",smirk:"ðŸ˜",unamused:"ðŸ˜’",roll_eyes:"ðŸ™„",grimacing:"ðŸ˜¬",face_exhaling:"ðŸ˜®â€ðŸ’¨",lying_face:"ðŸ¤¥",shaking_face:"ðŸ«¨",relieved:"ðŸ˜Œ",pensive:"ðŸ˜”",sleepy:"ðŸ˜ª",drooling_face:"ðŸ¤¤",sleeping:"ðŸ˜´",mask:"ðŸ˜·",face_with_thermometer:"ðŸ¤’",face_with_head_bandage:"ðŸ¤•",nauseated_face:"ðŸ¤¢",vomiting_face:"ðŸ¤®",sneezing_face:"ðŸ¤§",hot_face:"ðŸ¥µ",cold_face:"ðŸ¥¶",woozy_face:"ðŸ¥´",dizzy_face:"ðŸ˜µ",face_with_spiral_eyes:"ðŸ˜µâ€ðŸ’«",exploding_head:"ðŸ¤¯",cowboy_hat_face:"ðŸ¤ ",partying_face:"ðŸ¥³",disguised_face:"ðŸ¥¸",sunglasses:"ðŸ˜Ž",nerd_face:"ðŸ¤“",monocle_face:"ðŸ§",confused:"ðŸ˜•",face_with_diagonal_mouth:"ðŸ«¤",worried:"ðŸ˜Ÿ",slightly_frowning_face:"ðŸ™",frowning_face:"â˜¹ï¸",open_mouth:"ðŸ˜®",hushed:"ðŸ˜¯",astonished:"ðŸ˜²",flushed:"ðŸ˜³",pleading_face:"ðŸ¥º",face_holding_back_tears:"ðŸ¥¹",frowning:"ðŸ˜¦",anguished:"ðŸ˜§",fearful:"ðŸ˜¨",cold_sweat:"ðŸ˜°",disappointed_relieved:"ðŸ˜¥",cry:"ðŸ˜¢",sob:"ðŸ˜­",scream:"ðŸ˜±",confounded:"ðŸ˜–",persevere:"ðŸ˜£",disappointed:"ðŸ˜ž",sweat:"ðŸ˜“",weary:"ðŸ˜©",tired_face:"ðŸ˜«",yawning_face:"ðŸ¥±",triumph:"ðŸ˜¤",rage:"ðŸ˜¡",pout:"ðŸ˜¡",angry:"ðŸ˜ ",cursing_face:"ðŸ¤¬",smiling_imp:"ðŸ˜ˆ",imp:"ðŸ‘¿",skull:"ðŸ’€",skull_and_crossbones:"â˜ ï¸",hankey:"ðŸ’©",poop:"ðŸ’©",shit:"ðŸ’©",clown_face:"ðŸ¤¡",japanese_ogre:"ðŸ‘¹",japanese_goblin:"ðŸ‘º",ghost:"ðŸ‘»",alien:"ðŸ‘½",space_invader:"ðŸ‘¾",robot:"ðŸ¤–",smiley_cat:"ðŸ˜º",smile_cat:"ðŸ˜¸",joy_cat:"ðŸ˜¹",heart_eyes_cat:"ðŸ˜»",smirk_cat:"ðŸ˜¼",kissing_cat:"ðŸ˜½",scream_cat:"ðŸ™€",crying_cat_face:"ðŸ˜¿",pouting_cat:"ðŸ˜¾",see_no_evil:"ðŸ™ˆ",hear_no_evil:"ðŸ™‰",speak_no_evil:"ðŸ™Š",love_letter:"ðŸ’Œ",cupid:"ðŸ’˜",gift_heart:"ðŸ’",sparkling_heart:"ðŸ’–",heartpulse:"ðŸ’—",heartbeat:"ðŸ’“",revolving_hearts:"ðŸ’ž",two_hearts:"ðŸ’•",heart_decoration:"ðŸ’Ÿ",heavy_heart_exclamation:"â£ï¸",broken_heart:"ðŸ’”",heart_on_fire:"â¤ï¸â€ðŸ”¥",mending_heart:"â¤ï¸â€ðŸ©¹",heart:"â¤ï¸",pink_heart:"ðŸ©·",orange_heart:"ðŸ§¡",yellow_heart:"ðŸ’›",green_heart:"ðŸ’š",blue_heart:"ðŸ’™",light_blue_heart:"ðŸ©µ",purple_heart:"ðŸ’œ",brown_heart:"ðŸ¤Ž",black_heart:"ðŸ–¤",grey_heart:"ðŸ©¶",white_heart:"ðŸ¤",kiss:"ðŸ’‹",anger:"ðŸ’¢",boom:"ðŸ’¥",collision:"ðŸ’¥",dizzy:"ðŸ’«",sweat_drops:"ðŸ’¦",dash:"ðŸ’¨",hole:"ðŸ•³ï¸",speech_balloon:"ðŸ’¬",eye_speech_bubble:"ðŸ‘ï¸â€ðŸ—¨ï¸",left_speech_bubble:"ðŸ—¨ï¸",right_anger_bubble:"ðŸ—¯ï¸",thought_balloon:"ðŸ’­",zzz:"ðŸ’¤",wave:"ðŸ‘‹",raised_back_of_hand:"ðŸ¤š",raised_hand_with_fingers_splayed:"ðŸ–ï¸",hand:"âœ‹",raised_hand:"âœ‹",vulcan_salute:"ðŸ––",rightwards_hand:"ðŸ«±",leftwards_hand:"ðŸ«²",palm_down_hand:"ðŸ«³",palm_up_hand:"ðŸ«´",leftwards_pushing_hand:"ðŸ«·",rightwards_pushing_hand:"ðŸ«¸",ok_hand:"ðŸ‘Œ",pinched_fingers:"ðŸ¤Œ",pinching_hand:"ðŸ¤",v:"âœŒï¸",crossed_fingers:"ðŸ¤ž",hand_with_index_finger_and_thumb_crossed:"ðŸ«°",love_you_gesture:"ðŸ¤Ÿ",metal:"ðŸ¤˜",call_me_hand:"ðŸ¤™",point_left:"ðŸ‘ˆ",point_right:"ðŸ‘‰",point_up_2:"ðŸ‘†",middle_finger:"ðŸ–•",fu:"ðŸ–•",point_down:"ðŸ‘‡",point_up:"â˜ï¸",index_pointing_at_the_viewer:"ðŸ«µ","+1":"ðŸ‘",thumbsup:"ðŸ‘","-1":"ðŸ‘Ž",thumbsdown:"ðŸ‘Ž",fist_raised:"âœŠ",fist:"âœŠ",fist_oncoming:"ðŸ‘Š",facepunch:"ðŸ‘Š",punch:"ðŸ‘Š",fist_left:"ðŸ¤›",fist_right:"ðŸ¤œ",clap:"ðŸ‘",raised_hands:"ðŸ™Œ",heart_hands:"ðŸ«¶",open_hands:"ðŸ‘",palms_up_together:"ðŸ¤²",handshake:"ðŸ¤",pray:"ðŸ™",writing_hand:"âœï¸",nail_care:"ðŸ’…",selfie:"ðŸ¤³",muscle:"ðŸ’ª",mechanical_arm:"ðŸ¦¾",mechanical_leg:"ðŸ¦¿",leg:"ðŸ¦µ",foot:"ðŸ¦¶",ear:"ðŸ‘‚",ear_with_hearing_aid:"ðŸ¦»",nose:"ðŸ‘ƒ",brain:"ðŸ§ ",anatomical_heart:"ðŸ«€",lungs:"ðŸ«",tooth:"ðŸ¦·",bone:"ðŸ¦´",eyes:"ðŸ‘€",eye:"ðŸ‘ï¸",tongue:"ðŸ‘…",lips:"ðŸ‘„",biting_lip:"ðŸ«¦",baby:"ðŸ‘¶",child:"ðŸ§’",boy:"ðŸ‘¦",girl:"ðŸ‘§",adult:"ðŸ§‘",blond_haired_person:"ðŸ‘±",man:"ðŸ‘¨",bearded_person:"ðŸ§”",man_beard:"ðŸ§”â€â™‚ï¸",woman_beard:"ðŸ§”â€â™€ï¸",red_haired_man:"ðŸ‘¨â€ðŸ¦°",curly_haired_man:"ðŸ‘¨â€ðŸ¦±",white_haired_man:"ðŸ‘¨â€ðŸ¦³",bald_man:"ðŸ‘¨â€ðŸ¦²",woman:"ðŸ‘©",red_haired_woman:"ðŸ‘©â€ðŸ¦°",person_red_hair:"ðŸ§‘â€ðŸ¦°",curly_haired_woman:"ðŸ‘©â€ðŸ¦±",person_curly_hair:"ðŸ§‘â€ðŸ¦±",white_haired_woman:"ðŸ‘©â€ðŸ¦³",person_white_hair:"ðŸ§‘â€ðŸ¦³",bald_woman:"ðŸ‘©â€ðŸ¦²",person_bald:"ðŸ§‘â€ðŸ¦²",blond_haired_woman:"ðŸ‘±â€â™€ï¸",blonde_woman:"ðŸ‘±â€â™€ï¸",blond_haired_man:"ðŸ‘±â€â™‚ï¸",older_adult:"ðŸ§“",older_man:"ðŸ‘´",older_woman:"ðŸ‘µ",frowning_person:"ðŸ™",frowning_man:"ðŸ™â€â™‚ï¸",frowning_woman:"ðŸ™â€â™€ï¸",pouting_face:"ðŸ™Ž",pouting_man:"ðŸ™Žâ€â™‚ï¸",pouting_woman:"ðŸ™Žâ€â™€ï¸",no_good:"ðŸ™…",no_good_man:"ðŸ™…â€â™‚ï¸",ng_man:"ðŸ™…â€â™‚ï¸",no_good_woman:"ðŸ™…â€â™€ï¸",ng_woman:"ðŸ™…â€â™€ï¸",ok_person:"ðŸ™†",ok_man:"ðŸ™†â€â™‚ï¸",ok_woman:"ðŸ™†â€â™€ï¸",tipping_hand_person:"ðŸ’",information_desk_person:"ðŸ’",tipping_hand_man:"ðŸ’â€â™‚ï¸",sassy_man:"ðŸ’â€â™‚ï¸",tipping_hand_woman:"ðŸ’â€â™€ï¸",sassy_woman:"ðŸ’â€â™€ï¸",raising_hand:"ðŸ™‹",raising_hand_man:"ðŸ™‹â€â™‚ï¸",raising_hand_woman:"ðŸ™‹â€â™€ï¸",deaf_person:"ðŸ§",deaf_man:"ðŸ§â€â™‚ï¸",deaf_woman:"ðŸ§â€â™€ï¸",bow:"ðŸ™‡",bowing_man:"ðŸ™‡â€â™‚ï¸",bowing_woman:"ðŸ™‡â€â™€ï¸",facepalm:"ðŸ¤¦",man_facepalming:"ðŸ¤¦â€â™‚ï¸",woman_facepalming:"ðŸ¤¦â€â™€ï¸",shrug:"ðŸ¤·",man_shrugging:"ðŸ¤·â€â™‚ï¸",woman_shrugging:"ðŸ¤·â€â™€ï¸",health_worker:"ðŸ§‘â€âš•ï¸",man_health_worker:"ðŸ‘¨â€âš•ï¸",woman_health_worker:"ðŸ‘©â€âš•ï¸",student:"ðŸ§‘â€ðŸŽ“",man_student:"ðŸ‘¨â€ðŸŽ“",woman_student:"ðŸ‘©â€ðŸŽ“",teacher:"ðŸ§‘â€ðŸ«",man_teacher:"ðŸ‘¨â€ðŸ«",woman_teacher:"ðŸ‘©â€ðŸ«",judge:"ðŸ§‘â€âš–ï¸",man_judge:"ðŸ‘¨â€âš–ï¸",woman_judge:"ðŸ‘©â€âš–ï¸",farmer:"ðŸ§‘â€ðŸŒ¾",man_farmer:"ðŸ‘¨â€ðŸŒ¾",woman_farmer:"ðŸ‘©â€ðŸŒ¾",cook:"ðŸ§‘â€ðŸ³",man_cook:"ðŸ‘¨â€ðŸ³",woman_cook:"ðŸ‘©â€ðŸ³",mechanic:"ðŸ§‘â€ðŸ”§",man_mechanic:"ðŸ‘¨â€ðŸ”§",woman_mechanic:"ðŸ‘©â€ðŸ”§",factory_worker:"ðŸ§‘â€ðŸ­",man_factory_worker:"ðŸ‘¨â€ðŸ­",woman_factory_worker:"ðŸ‘©â€ðŸ­",office_worker:"ðŸ§‘â€ðŸ’¼",man_office_worker:"ðŸ‘¨â€ðŸ’¼",woman_office_worker:"ðŸ‘©â€ðŸ’¼",scientist:"ðŸ§‘â€ðŸ”¬",man_scientist:"ðŸ‘¨â€ðŸ”¬",woman_scientist:"ðŸ‘©â€ðŸ”¬",technologist:"ðŸ§‘â€ðŸ’»",man_technologist:"ðŸ‘¨â€ðŸ’»",woman_technologist:"ðŸ‘©â€ðŸ’»",singer:"ðŸ§‘â€ðŸŽ¤",man_singer:"ðŸ‘¨â€ðŸŽ¤",woman_singer:"ðŸ‘©â€ðŸŽ¤",artist:"ðŸ§‘â€ðŸŽ¨",man_artist:"ðŸ‘¨â€ðŸŽ¨",woman_artist:"ðŸ‘©â€ðŸŽ¨",pilot:"ðŸ§‘â€âœˆï¸",man_pilot:"ðŸ‘¨â€âœˆï¸",woman_pilot:"ðŸ‘©â€âœˆï¸",astronaut:"ðŸ§‘â€ðŸš€",man_astronaut:"ðŸ‘¨â€ðŸš€",woman_astronaut:"ðŸ‘©â€ðŸš€",firefighter:"ðŸ§‘â€ðŸš’",man_firefighter:"ðŸ‘¨â€ðŸš’",woman_firefighter:"ðŸ‘©â€ðŸš’",police_officer:"ðŸ‘®",cop:"ðŸ‘®",policeman:"ðŸ‘®â€â™‚ï¸",policewoman:"ðŸ‘®â€â™€ï¸",detective:"ðŸ•µï¸",male_detective:"ðŸ•µï¸â€â™‚ï¸",female_detective:"ðŸ•µï¸â€â™€ï¸",guard:"ðŸ’‚",guardsman:"ðŸ’‚â€â™‚ï¸",guardswoman:"ðŸ’‚â€â™€ï¸",ninja:"ðŸ¥·",construction_worker:"ðŸ‘·",construction_worker_man:"ðŸ‘·â€â™‚ï¸",construction_worker_woman:"ðŸ‘·â€â™€ï¸",person_with_crown:"ðŸ«…",prince:"ðŸ¤´",princess:"ðŸ‘¸",person_with_turban:"ðŸ‘³",man_with_turban:"ðŸ‘³â€â™‚ï¸",woman_with_turban:"ðŸ‘³â€â™€ï¸",man_with_gua_pi_mao:"ðŸ‘²",woman_with_headscarf:"ðŸ§•",person_in_tuxedo:"ðŸ¤µ",man_in_tuxedo:"ðŸ¤µâ€â™‚ï¸",woman_in_tuxedo:"ðŸ¤µâ€â™€ï¸",person_with_veil:"ðŸ‘°",man_with_veil:"ðŸ‘°â€â™‚ï¸",woman_with_veil:"ðŸ‘°â€â™€ï¸",bride_with_veil:"ðŸ‘°â€â™€ï¸",pregnant_woman:"ðŸ¤°",pregnant_man:"ðŸ«ƒ",pregnant_person:"ðŸ«„",breast_feeding:"ðŸ¤±",woman_feeding_baby:"ðŸ‘©â€ðŸ¼",man_feeding_baby:"ðŸ‘¨â€ðŸ¼",person_feeding_baby:"ðŸ§‘â€ðŸ¼",angel:"ðŸ‘¼",santa:"ðŸŽ…",mrs_claus:"ðŸ¤¶",mx_claus:"ðŸ§‘â€ðŸŽ„",superhero:"ðŸ¦¸",superhero_man:"ðŸ¦¸â€â™‚ï¸",superhero_woman:"ðŸ¦¸â€â™€ï¸",supervillain:"ðŸ¦¹",supervillain_man:"ðŸ¦¹â€â™‚ï¸",supervillain_woman:"ðŸ¦¹â€â™€ï¸",mage:"ðŸ§™",mage_man:"ðŸ§™â€â™‚ï¸",mage_woman:"ðŸ§™â€â™€ï¸",fairy:"ðŸ§š",fairy_man:"ðŸ§šâ€â™‚ï¸",fairy_woman:"ðŸ§šâ€â™€ï¸",vampire:"ðŸ§›",vampire_man:"ðŸ§›â€â™‚ï¸",vampire_woman:"ðŸ§›â€â™€ï¸",merperson:"ðŸ§œ",merman:"ðŸ§œâ€â™‚ï¸",mermaid:"ðŸ§œâ€â™€ï¸",elf:"ðŸ§",elf_man:"ðŸ§â€â™‚ï¸",elf_woman:"ðŸ§â€â™€ï¸",genie:"ðŸ§ž",genie_man:"ðŸ§žâ€â™‚ï¸",genie_woman:"ðŸ§žâ€â™€ï¸",zombie:"ðŸ§Ÿ",zombie_man:"ðŸ§Ÿâ€â™‚ï¸",zombie_woman:"ðŸ§Ÿâ€â™€ï¸",troll:"ðŸ§Œ",massage:"ðŸ’†",massage_man:"ðŸ’†â€â™‚ï¸",massage_woman:"ðŸ’†â€â™€ï¸",haircut:"ðŸ’‡",haircut_man:"ðŸ’‡â€â™‚ï¸",haircut_woman:"ðŸ’‡â€â™€ï¸",walking:"ðŸš¶",walking_man:"ðŸš¶â€â™‚ï¸",walking_woman:"ðŸš¶â€â™€ï¸",standing_person:"ðŸ§",standing_man:"ðŸ§â€â™‚ï¸",standing_woman:"ðŸ§â€â™€ï¸",kneeling_person:"ðŸ§Ž",kneeling_man:"ðŸ§Žâ€â™‚ï¸",kneeling_woman:"ðŸ§Žâ€â™€ï¸",person_with_probing_cane:"ðŸ§‘â€ðŸ¦¯",man_with_probing_cane:"ðŸ‘¨â€ðŸ¦¯",woman_with_probing_cane:"ðŸ‘©â€ðŸ¦¯",person_in_motorized_wheelchair:"ðŸ§‘â€ðŸ¦¼",man_in_motorized_wheelchair:"ðŸ‘¨â€ðŸ¦¼",woman_in_motorized_wheelchair:"ðŸ‘©â€ðŸ¦¼",person_in_manual_wheelchair:"ðŸ§‘â€ðŸ¦½",man_in_manual_wheelchair:"ðŸ‘¨â€ðŸ¦½",woman_in_manual_wheelchair:"ðŸ‘©â€ðŸ¦½",runner:"ðŸƒ",running:"ðŸƒ",running_man:"ðŸƒâ€â™‚ï¸",running_woman:"ðŸƒâ€â™€ï¸",woman_dancing:"ðŸ’ƒ",dancer:"ðŸ’ƒ",man_dancing:"ðŸ•º",business_suit_levitating:"ðŸ•´ï¸",dancers:"ðŸ‘¯",dancing_men:"ðŸ‘¯â€â™‚ï¸",dancing_women:"ðŸ‘¯â€â™€ï¸",sauna_person:"ðŸ§–",sauna_man:"ðŸ§–â€â™‚ï¸",sauna_woman:"ðŸ§–â€â™€ï¸",climbing:"ðŸ§—",climbing_man:"ðŸ§—â€â™‚ï¸",climbing_woman:"ðŸ§—â€â™€ï¸",person_fencing:"ðŸ¤º",horse_racing:"ðŸ‡",skier:"â›·ï¸",snowboarder:"ðŸ‚",golfing:"ðŸŒï¸",golfing_man:"ðŸŒï¸â€â™‚ï¸",golfing_woman:"ðŸŒï¸â€â™€ï¸",surfer:"ðŸ„",surfing_man:"ðŸ„â€â™‚ï¸",surfing_woman:"ðŸ„â€â™€ï¸",rowboat:"ðŸš£",rowing_man:"ðŸš£â€â™‚ï¸",rowing_woman:"ðŸš£â€â™€ï¸",swimmer:"ðŸŠ",swimming_man:"ðŸŠâ€â™‚ï¸",swimming_woman:"ðŸŠâ€â™€ï¸",bouncing_ball_person:"â›¹ï¸",bouncing_ball_man:"â›¹ï¸â€â™‚ï¸",basketball_man:"â›¹ï¸â€â™‚ï¸",bouncing_ball_woman:"â›¹ï¸â€â™€ï¸",basketball_woman:"â›¹ï¸â€â™€ï¸",weight_lifting:"ðŸ‹ï¸",weight_lifting_man:"ðŸ‹ï¸â€â™‚ï¸",weight_lifting_woman:"ðŸ‹ï¸â€â™€ï¸",bicyclist:"ðŸš´",biking_man:"ðŸš´â€â™‚ï¸",biking_woman:"ðŸš´â€â™€ï¸",mountain_bicyclist:"ðŸšµ",mountain_biking_man:"ðŸšµâ€â™‚ï¸",mountain_biking_woman:"ðŸšµâ€â™€ï¸",cartwheeling:"ðŸ¤¸",man_cartwheeling:"ðŸ¤¸â€â™‚ï¸",woman_cartwheeling:"ðŸ¤¸â€â™€ï¸",wrestling:"ðŸ¤¼",men_wrestling:"ðŸ¤¼â€â™‚ï¸",women_wrestling:"ðŸ¤¼â€â™€ï¸",water_polo:"ðŸ¤½",man_playing_water_polo:"ðŸ¤½â€â™‚ï¸",woman_playing_water_polo:"ðŸ¤½â€â™€ï¸",handball_person:"ðŸ¤¾",man_playing_handball:"ðŸ¤¾â€â™‚ï¸",woman_playing_handball:"ðŸ¤¾â€â™€ï¸",juggling_person:"ðŸ¤¹",man_juggling:"ðŸ¤¹â€â™‚ï¸",woman_juggling:"ðŸ¤¹â€â™€ï¸",lotus_position:"ðŸ§˜",lotus_position_man:"ðŸ§˜â€â™‚ï¸",lotus_position_woman:"ðŸ§˜â€â™€ï¸",bath:"ðŸ›€",sleeping_bed:"ðŸ›Œ",people_holding_hands:"ðŸ§‘â€ðŸ¤â€ðŸ§‘",two_women_holding_hands:"ðŸ‘­",couple:"ðŸ‘«",two_men_holding_hands:"ðŸ‘¬",couplekiss:"ðŸ’",couplekiss_man_woman:"ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨",couplekiss_man_man:"ðŸ‘¨â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨",couplekiss_woman_woman:"ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘©",couple_with_heart:"ðŸ’‘",couple_with_heart_woman_man:"ðŸ‘©â€â¤ï¸â€ðŸ‘¨",couple_with_heart_man_man:"ðŸ‘¨â€â¤ï¸â€ðŸ‘¨",couple_with_heart_woman_woman:"ðŸ‘©â€â¤ï¸â€ðŸ‘©",family:"ðŸ‘ª",family_man_woman_boy:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘¦",family_man_woman_girl:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§",family_man_woman_girl_boy:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦",family_man_woman_boy_boy:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦",family_man_woman_girl_girl:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘§",family_man_man_boy:"ðŸ‘¨â€ðŸ‘¨â€ðŸ‘¦",family_man_man_girl:"ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§",family_man_man_girl_boy:"ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§â€ðŸ‘¦",family_man_man_boy_boy:"ðŸ‘¨â€ðŸ‘¨â€ðŸ‘¦â€ðŸ‘¦",family_man_man_girl_girl:"ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§â€ðŸ‘§",family_woman_woman_boy:"ðŸ‘©â€ðŸ‘©â€ðŸ‘¦",family_woman_woman_girl:"ðŸ‘©â€ðŸ‘©â€ðŸ‘§",family_woman_woman_girl_boy:"ðŸ‘©â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦",family_woman_woman_boy_boy:"ðŸ‘©â€ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦",family_woman_woman_girl_girl:"ðŸ‘©â€ðŸ‘©â€ðŸ‘§â€ðŸ‘§",family_man_boy:"ðŸ‘¨â€ðŸ‘¦",family_man_boy_boy:"ðŸ‘¨â€ðŸ‘¦â€ðŸ‘¦",family_man_girl:"ðŸ‘¨â€ðŸ‘§",family_man_girl_boy:"ðŸ‘¨â€ðŸ‘§â€ðŸ‘¦",family_man_girl_girl:"ðŸ‘¨â€ðŸ‘§â€ðŸ‘§",family_woman_boy:"ðŸ‘©â€ðŸ‘¦",family_woman_boy_boy:"ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦",family_woman_girl:"ðŸ‘©â€ðŸ‘§",family_woman_girl_boy:"ðŸ‘©â€ðŸ‘§â€ðŸ‘¦",family_woman_girl_girl:"ðŸ‘©â€ðŸ‘§â€ðŸ‘§",speaking_head:"ðŸ—£ï¸",bust_in_silhouette:"ðŸ‘¤",busts_in_silhouette:"ðŸ‘¥",people_hugging:"ðŸ«‚",footprints:"ðŸ‘£",monkey_face:"ðŸµ",monkey:"ðŸ’",gorilla:"ðŸ¦",orangutan:"ðŸ¦§",dog:"ðŸ¶",dog2:"ðŸ•",guide_dog:"ðŸ¦®",service_dog:"ðŸ•â€ðŸ¦º",poodle:"ðŸ©",wolf:"ðŸº",fox_face:"ðŸ¦Š",raccoon:"ðŸ¦",cat:"ðŸ±",cat2:"ðŸˆ",black_cat:"ðŸˆâ€â¬›",lion:"ðŸ¦",tiger:"ðŸ¯",tiger2:"ðŸ…",leopard:"ðŸ†",horse:"ðŸ´",moose:"ðŸ«Ž",donkey:"ðŸ«",racehorse:"ðŸŽ",unicorn:"ðŸ¦„",zebra:"ðŸ¦“",deer:"ðŸ¦Œ",bison:"ðŸ¦¬",cow:"ðŸ®",ox:"ðŸ‚",water_buffalo:"ðŸƒ",cow2:"ðŸ„",pig:"ðŸ·",pig2:"ðŸ–",boar:"ðŸ—",pig_nose:"ðŸ½",ram:"ðŸ",sheep:"ðŸ‘",goat:"ðŸ",dromedary_camel:"ðŸª",camel:"ðŸ«",llama:"ðŸ¦™",giraffe:"ðŸ¦’",elephant:"ðŸ˜",mammoth:"ðŸ¦£",rhinoceros:"ðŸ¦",hippopotamus:"ðŸ¦›",mouse:"ðŸ­",mouse2:"ðŸ",rat:"ðŸ€",hamster:"ðŸ¹",rabbit:"ðŸ°",rabbit2:"ðŸ‡",chipmunk:"ðŸ¿ï¸",beaver:"ðŸ¦«",hedgehog:"ðŸ¦”",bat:"ðŸ¦‡",bear:"ðŸ»",polar_bear:"ðŸ»â€â„ï¸",koala:"ðŸ¨",panda_face:"ðŸ¼",sloth:"ðŸ¦¥",otter:"ðŸ¦¦",skunk:"ðŸ¦¨",kangaroo:"ðŸ¦˜",badger:"ðŸ¦¡",feet:"ðŸ¾",paw_prints:"ðŸ¾",turkey:"ðŸ¦ƒ",chicken:"ðŸ”",rooster:"ðŸ“",hatching_chick:"ðŸ£",baby_chick:"ðŸ¤",hatched_chick:"ðŸ¥",bird:"ðŸ¦",penguin:"ðŸ§",dove:"ðŸ•Šï¸",eagle:"ðŸ¦…",duck:"ðŸ¦†",swan:"ðŸ¦¢",owl:"ðŸ¦‰",dodo:"ðŸ¦¤",feather:"ðŸª¶",flamingo:"ðŸ¦©",peacock:"ðŸ¦š",parrot:"ðŸ¦œ",wing:"ðŸª½",black_bird:"ðŸ¦â€â¬›",goose:"ðŸª¿",frog:"ðŸ¸",crocodile:"ðŸŠ",turtle:"ðŸ¢",lizard:"ðŸ¦Ž",snake:"ðŸ",dragon_face:"ðŸ²",dragon:"ðŸ‰",sauropod:"ðŸ¦•","t-rex":"ðŸ¦–",whale:"ðŸ³",whale2:"ðŸ‹",dolphin:"ðŸ¬",flipper:"ðŸ¬",seal:"ðŸ¦­",fish:"ðŸŸ",tropical_fish:"ðŸ ",blowfish:"ðŸ¡",shark:"ðŸ¦ˆ",octopus:"ðŸ™",shell:"ðŸš",coral:"ðŸª¸",jellyfish:"ðŸª¼",snail:"ðŸŒ",butterfly:"ðŸ¦‹",bug:"ðŸ›",ant:"ðŸœ",bee:"ðŸ",honeybee:"ðŸ",beetle:"ðŸª²",lady_beetle:"ðŸž",cricket:"ðŸ¦—",cockroach:"ðŸª³",spider:"ðŸ•·ï¸",spider_web:"ðŸ•¸ï¸",scorpion:"ðŸ¦‚",mosquito:"ðŸ¦Ÿ",fly:"ðŸª°",worm:"ðŸª±",microbe:"ðŸ¦ ",bouquet:"ðŸ’",cherry_blossom:"ðŸŒ¸",white_flower:"ðŸ’®",lotus:"ðŸª·",rosette:"ðŸµï¸",rose:"ðŸŒ¹",wilted_flower:"ðŸ¥€",hibiscus:"ðŸŒº",sunflower:"ðŸŒ»",blossom:"ðŸŒ¼",tulip:"ðŸŒ·",hyacinth:"ðŸª»",seedling:"ðŸŒ±",potted_plant:"ðŸª´",evergreen_tree:"ðŸŒ²",deciduous_tree:"ðŸŒ³",palm_tree:"ðŸŒ´",cactus:"ðŸŒµ",ear_of_rice:"ðŸŒ¾",herb:"ðŸŒ¿",shamrock:"â˜˜ï¸",four_leaf_clover:"ðŸ€",maple_leaf:"ðŸ",fallen_leaf:"ðŸ‚",leaves:"ðŸƒ",empty_nest:"ðŸª¹",nest_with_eggs:"ðŸªº",mushroom:"ðŸ„",grapes:"ðŸ‡",melon:"ðŸˆ",watermelon:"ðŸ‰",tangerine:"ðŸŠ",orange:"ðŸŠ",mandarin:"ðŸŠ",lemon:"ðŸ‹",banana:"ðŸŒ",pineapple:"ðŸ",mango:"ðŸ¥­",apple:"ðŸŽ",green_apple:"ðŸ",pear:"ðŸ",peach:"ðŸ‘",cherries:"ðŸ’",strawberry:"ðŸ“",blueberries:"ðŸ«",kiwi_fruit:"ðŸ¥",tomato:"ðŸ…",olive:"ðŸ«’",coconut:"ðŸ¥¥",avocado:"ðŸ¥‘",eggplant:"ðŸ†",potato:"ðŸ¥”",carrot:"ðŸ¥•",corn:"ðŸŒ½",hot_pepper:"ðŸŒ¶ï¸",bell_pepper:"ðŸ«‘",cucumber:"ðŸ¥’",leafy_green:"ðŸ¥¬",broccoli:"ðŸ¥¦",garlic:"ðŸ§„",onion:"ðŸ§…",peanuts:"ðŸ¥œ",beans:"ðŸ«˜",chestnut:"ðŸŒ°",ginger_root:"ðŸ«š",pea_pod:"ðŸ«›",bread:"ðŸž",croissant:"ðŸ¥",baguette_bread:"ðŸ¥–",flatbread:"ðŸ«“",pretzel:"ðŸ¥¨",bagel:"ðŸ¥¯",pancakes:"ðŸ¥ž",waffle:"ðŸ§‡",cheese:"ðŸ§€",meat_on_bone:"ðŸ–",poultry_leg:"ðŸ—",cut_of_meat:"ðŸ¥©",bacon:"ðŸ¥“",hamburger:"ðŸ”",fries:"ðŸŸ",pizza:"ðŸ•",hotdog:"ðŸŒ­",sandwich:"ðŸ¥ª",taco:"ðŸŒ®",burrito:"ðŸŒ¯",tamale:"ðŸ«”",stuffed_flatbread:"ðŸ¥™",falafel:"ðŸ§†",egg:"ðŸ¥š",fried_egg:"ðŸ³",shallow_pan_of_food:"ðŸ¥˜",stew:"ðŸ²",fondue:"ðŸ«•",bowl_with_spoon:"ðŸ¥£",green_salad:"ðŸ¥—",popcorn:"ðŸ¿",butter:"ðŸ§ˆ",salt:"ðŸ§‚",canned_food:"ðŸ¥«",bento:"ðŸ±",rice_cracker:"ðŸ˜",rice_ball:"ðŸ™",rice:"ðŸš",curry:"ðŸ›",ramen:"ðŸœ",spaghetti:"ðŸ",sweet_potato:"ðŸ ",oden:"ðŸ¢",sushi:"ðŸ£",fried_shrimp:"ðŸ¤",fish_cake:"ðŸ¥",moon_cake:"ðŸ¥®",dango:"ðŸ¡",dumpling:"ðŸ¥Ÿ",fortune_cookie:"ðŸ¥ ",takeout_box:"ðŸ¥¡",crab:"ðŸ¦€",lobster:"ðŸ¦ž",shrimp:"ðŸ¦",squid:"ðŸ¦‘",oyster:"ðŸ¦ª",icecream:"ðŸ¦",shaved_ice:"ðŸ§",ice_cream:"ðŸ¨",doughnut:"ðŸ©",cookie:"ðŸª",birthday:"ðŸŽ‚",cake:"ðŸ°",cupcake:"ðŸ§",pie:"ðŸ¥§",chocolate_bar:"ðŸ«",candy:"ðŸ¬",lollipop:"ðŸ­",custard:"ðŸ®",honey_pot:"ðŸ¯",baby_bottle:"ðŸ¼",milk_glass:"ðŸ¥›",coffee:"â˜•",teapot:"ðŸ«–",tea:"ðŸµ",sake:"ðŸ¶",champagne:"ðŸ¾",wine_glass:"ðŸ·",cocktail:"ðŸ¸",tropical_drink:"ðŸ¹",beer:"ðŸº",beers:"ðŸ»",clinking_glasses:"ðŸ¥‚",tumbler_glass:"ðŸ¥ƒ",pouring_liquid:"ðŸ«—",cup_with_straw:"ðŸ¥¤",bubble_tea:"ðŸ§‹",beverage_box:"ðŸ§ƒ",mate:"ðŸ§‰",ice_cube:"ðŸ§Š",chopsticks:"ðŸ¥¢",plate_with_cutlery:"ðŸ½ï¸",fork_and_knife:"ðŸ´",spoon:"ðŸ¥„",hocho:"ðŸ”ª",knife:"ðŸ”ª",jar:"ðŸ«™",amphora:"ðŸº",earth_africa:"ðŸŒ",earth_americas:"ðŸŒŽ",earth_asia:"ðŸŒ",globe_with_meridians:"ðŸŒ",world_map:"ðŸ—ºï¸",japan:"ðŸ—¾",compass:"ðŸ§­",mountain_snow:"ðŸ”ï¸",mountain:"â›°ï¸",volcano:"ðŸŒ‹",mount_fuji:"ðŸ—»",camping:"ðŸ•ï¸",beach_umbrella:"ðŸ–ï¸",desert:"ðŸœï¸",desert_island:"ðŸï¸",national_park:"ðŸžï¸",stadium:"ðŸŸï¸",classical_building:"ðŸ›ï¸",building_construction:"ðŸ—ï¸",bricks:"ðŸ§±",rock:"ðŸª¨",wood:"ðŸªµ",hut:"ðŸ›–",houses:"ðŸ˜ï¸",derelict_house:"ðŸšï¸",house:"ðŸ ",house_with_garden:"ðŸ¡",office:"ðŸ¢",post_office:"ðŸ£",european_post_office:"ðŸ¤",hospital:"ðŸ¥",bank:"ðŸ¦",hotel:"ðŸ¨",love_hotel:"ðŸ©",convenience_store:"ðŸª",school:"ðŸ«",department_store:"ðŸ¬",factory:"ðŸ­",japanese_castle:"ðŸ¯",european_castle:"ðŸ°",wedding:"ðŸ’’",tokyo_tower:"ðŸ—¼",statue_of_liberty:"ðŸ—½",church:"â›ª",mosque:"ðŸ•Œ",hindu_temple:"ðŸ›•",synagogue:"ðŸ•",shinto_shrine:"â›©ï¸",kaaba:"ðŸ•‹",fountain:"â›²",tent:"â›º",foggy:"ðŸŒ",night_with_stars:"ðŸŒƒ",cityscape:"ðŸ™ï¸",sunrise_over_mountains:"ðŸŒ„",sunrise:"ðŸŒ…",city_sunset:"ðŸŒ†",city_sunrise:"ðŸŒ‡",bridge_at_night:"ðŸŒ‰",hotsprings:"â™¨ï¸",carousel_horse:"ðŸŽ ",playground_slide:"ðŸ›",ferris_wheel:"ðŸŽ¡",roller_coaster:"ðŸŽ¢",barber:"ðŸ’ˆ",circus_tent:"ðŸŽª",steam_locomotive:"ðŸš‚",railway_car:"ðŸšƒ",bullettrain_side:"ðŸš„",bullettrain_front:"ðŸš…",train2:"ðŸš†",metro:"ðŸš‡",light_rail:"ðŸšˆ",station:"ðŸš‰",tram:"ðŸšŠ",monorail:"ðŸš",mountain_railway:"ðŸšž",train:"ðŸš‹",bus:"ðŸšŒ",oncoming_bus:"ðŸš",trolleybus:"ðŸšŽ",minibus:"ðŸš",ambulance:"ðŸš‘",fire_engine:"ðŸš’",police_car:"ðŸš“",oncoming_police_car:"ðŸš”",taxi:"ðŸš•",oncoming_taxi:"ðŸš–",car:"ðŸš—",red_car:"ðŸš—",oncoming_automobile:"ðŸš˜",blue_car:"ðŸš™",pickup_truck:"ðŸ›»",truck:"ðŸšš",articulated_lorry:"ðŸš›",tractor:"ðŸšœ",racing_car:"ðŸŽï¸",motorcycle:"ðŸï¸",motor_scooter:"ðŸ›µ",manual_wheelchair:"ðŸ¦½",motorized_wheelchair:"ðŸ¦¼",auto_rickshaw:"ðŸ›º",bike:"ðŸš²",kick_scooter:"ðŸ›´",skateboard:"ðŸ›¹",roller_skate:"ðŸ›¼",busstop:"ðŸš",motorway:"ðŸ›£ï¸",railway_track:"ðŸ›¤ï¸",oil_drum:"ðŸ›¢ï¸",fuelpump:"â›½",wheel:"ðŸ›ž",rotating_light:"ðŸš¨",traffic_light:"ðŸš¥",vertical_traffic_light:"ðŸš¦",stop_sign:"ðŸ›‘",construction:"ðŸš§",anchor:"âš“",ring_buoy:"ðŸ›Ÿ",boat:"â›µ",sailboat:"â›µ",canoe:"ðŸ›¶",speedboat:"ðŸš¤",passenger_ship:"ðŸ›³ï¸",ferry:"â›´ï¸",motor_boat:"ðŸ›¥ï¸",ship:"ðŸš¢",airplane:"âœˆï¸",small_airplane:"ðŸ›©ï¸",flight_departure:"ðŸ›«",flight_arrival:"ðŸ›¬",parachute:"ðŸª‚",seat:"ðŸ’º",helicopter:"ðŸš",suspension_railway:"ðŸšŸ",mountain_cableway:"ðŸš ",aerial_tramway:"ðŸš¡",artificial_satellite:"ðŸ›°ï¸",rocket:"ðŸš€",flying_saucer:"ðŸ›¸",bellhop_bell:"ðŸ›Žï¸",luggage:"ðŸ§³",hourglass:"âŒ›",hourglass_flowing_sand:"â³",watch:"âŒš",alarm_clock:"â°",stopwatch:"â±ï¸",timer_clock:"â²ï¸",mantelpiece_clock:"ðŸ•°ï¸",clock12:"ðŸ•›",clock1230:"ðŸ•§",clock1:"ðŸ•",clock130:"ðŸ•œ",clock2:"ðŸ•‘",clock230:"ðŸ•",clock3:"ðŸ•’",clock330:"ðŸ•ž",clock4:"ðŸ•“",clock430:"ðŸ•Ÿ",clock5:"ðŸ•”",clock530:"ðŸ• ",clock6:"ðŸ••",clock630:"ðŸ•¡",clock7:"ðŸ•–",clock730:"ðŸ•¢",clock8:"ðŸ•—",clock830:"ðŸ•£",clock9:"ðŸ•˜",clock930:"ðŸ•¤",clock10:"ðŸ•™",clock1030:"ðŸ•¥",clock11:"ðŸ•š",clock1130:"ðŸ•¦",new_moon:"ðŸŒ‘",waxing_crescent_moon:"ðŸŒ’",first_quarter_moon:"ðŸŒ“",moon:"ðŸŒ”",waxing_gibbous_moon:"ðŸŒ”",full_moon:"ðŸŒ•",waning_gibbous_moon:"ðŸŒ–",last_quarter_moon:"ðŸŒ—",waning_crescent_moon:"ðŸŒ˜",crescent_moon:"ðŸŒ™",new_moon_with_face:"ðŸŒš",first_quarter_moon_with_face:"ðŸŒ›",last_quarter_moon_with_face:"ðŸŒœ",thermometer:"ðŸŒ¡ï¸",sunny:"â˜€ï¸",full_moon_with_face:"ðŸŒ",sun_with_face:"ðŸŒž",ringed_planet:"ðŸª",star:"â­",star2:"ðŸŒŸ",stars:"ðŸŒ ",milky_way:"ðŸŒŒ",cloud:"â˜ï¸",partly_sunny:"â›…",cloud_with_lightning_and_rain:"â›ˆï¸",sun_behind_small_cloud:"ðŸŒ¤ï¸",sun_behind_large_cloud:"ðŸŒ¥ï¸",sun_behind_rain_cloud:"ðŸŒ¦ï¸",cloud_with_rain:"ðŸŒ§ï¸",cloud_with_snow:"ðŸŒ¨ï¸",cloud_with_lightning:"ðŸŒ©ï¸",tornado:"ðŸŒªï¸",fog:"ðŸŒ«ï¸",wind_face:"ðŸŒ¬ï¸",cyclone:"ðŸŒ€",rainbow:"ðŸŒˆ",closed_umbrella:"ðŸŒ‚",open_umbrella:"â˜‚ï¸",umbrella:"â˜”",parasol_on_ground:"â›±ï¸",zap:"âš¡",snowflake:"â„ï¸",snowman_with_snow:"â˜ƒï¸",snowman:"â›„",comet:"â˜„ï¸",fire:"ðŸ”¥",droplet:"ðŸ’§",ocean:"ðŸŒŠ",jack_o_lantern:"ðŸŽƒ",christmas_tree:"ðŸŽ„",fireworks:"ðŸŽ†",sparkler:"ðŸŽ‡",firecracker:"ðŸ§¨",sparkles:"âœ¨",balloon:"ðŸŽˆ",tada:"ðŸŽ‰",confetti_ball:"ðŸŽŠ",tanabata_tree:"ðŸŽ‹",bamboo:"ðŸŽ",dolls:"ðŸŽŽ",flags:"ðŸŽ",wind_chime:"ðŸŽ",rice_scene:"ðŸŽ‘",red_envelope:"ðŸ§§",ribbon:"ðŸŽ€",gift:"ðŸŽ",reminder_ribbon:"ðŸŽ—ï¸",tickets:"ðŸŽŸï¸",ticket:"ðŸŽ«",medal_military:"ðŸŽ–ï¸",trophy:"ðŸ†",medal_sports:"ðŸ…","1st_place_medal":"ðŸ¥‡","2nd_place_medal":"ðŸ¥ˆ","3rd_place_medal":"ðŸ¥‰",soccer:"âš½",baseball:"âš¾",softball:"ðŸ¥Ž",basketball:"ðŸ€",volleyball:"ðŸ",football:"ðŸˆ",rugby_football:"ðŸ‰",tennis:"ðŸŽ¾",flying_disc:"ðŸ¥",bowling:"ðŸŽ³",cricket_game:"ðŸ",field_hockey:"ðŸ‘",ice_hockey:"ðŸ’",lacrosse:"ðŸ¥",ping_pong:"ðŸ“",badminton:"ðŸ¸",boxing_glove:"ðŸ¥Š",martial_arts_uniform:"ðŸ¥‹",goal_net:"ðŸ¥…",golf:"â›³",ice_skate:"â›¸ï¸",fishing_pole_and_fish:"ðŸŽ£",diving_mask:"ðŸ¤¿",running_shirt_with_sash:"ðŸŽ½",ski:"ðŸŽ¿",sled:"ðŸ›·",curling_stone:"ðŸ¥Œ",dart:"ðŸŽ¯",yo_yo:"ðŸª€",kite:"ðŸª",gun:"ðŸ”«","8ball":"ðŸŽ±",crystal_ball:"ðŸ”®",magic_wand:"ðŸª„",video_game:"ðŸŽ®",joystick:"ðŸ•¹ï¸",slot_machine:"ðŸŽ°",game_die:"ðŸŽ²",jigsaw:"ðŸ§©",teddy_bear:"ðŸ§¸",pinata:"ðŸª…",mirror_ball:"ðŸª©",nesting_dolls:"ðŸª†",spades:"â™ ï¸",hearts:"â™¥ï¸",diamonds:"â™¦ï¸",clubs:"â™£ï¸",chess_pawn:"â™Ÿï¸",black_joker:"ðŸƒ",mahjong:"ðŸ€„",flower_playing_cards:"ðŸŽ´",performing_arts:"ðŸŽ­",framed_picture:"ðŸ–¼ï¸",art:"ðŸŽ¨",thread:"ðŸ§µ",sewing_needle:"ðŸª¡",yarn:"ðŸ§¶",knot:"ðŸª¢",eyeglasses:"ðŸ‘“",dark_sunglasses:"ðŸ•¶ï¸",goggles:"ðŸ¥½",lab_coat:"ðŸ¥¼",safety_vest:"ðŸ¦º",necktie:"ðŸ‘”",shirt:"ðŸ‘•",tshirt:"ðŸ‘•",jeans:"ðŸ‘–",scarf:"ðŸ§£",gloves:"ðŸ§¤",coat:"ðŸ§¥",socks:"ðŸ§¦",dress:"ðŸ‘—",kimono:"ðŸ‘˜",sari:"ðŸ¥»",one_piece_swimsuit:"ðŸ©±",swim_brief:"ðŸ©²",shorts:"ðŸ©³",bikini:"ðŸ‘™",womans_clothes:"ðŸ‘š",folding_hand_fan:"ðŸª­",purse:"ðŸ‘›",handbag:"ðŸ‘œ",pouch:"ðŸ‘",shopping:"ðŸ›ï¸",school_satchel:"ðŸŽ’",thong_sandal:"ðŸ©´",mans_shoe:"ðŸ‘ž",shoe:"ðŸ‘ž",athletic_shoe:"ðŸ‘Ÿ",hiking_boot:"ðŸ¥¾",flat_shoe:"ðŸ¥¿",high_heel:"ðŸ‘ ",sandal:"ðŸ‘¡",ballet_shoes:"ðŸ©°",boot:"ðŸ‘¢",hair_pick:"ðŸª®",crown:"ðŸ‘‘",womans_hat:"ðŸ‘’",tophat:"ðŸŽ©",mortar_board:"ðŸŽ“",billed_cap:"ðŸ§¢",military_helmet:"ðŸª–",rescue_worker_helmet:"â›‘ï¸",prayer_beads:"ðŸ“¿",lipstick:"ðŸ’„",ring:"ðŸ’",gem:"ðŸ’Ž",mute:"ðŸ”‡",speaker:"ðŸ”ˆ",sound:"ðŸ”‰",loud_sound:"ðŸ”Š",loudspeaker:"ðŸ“¢",mega:"ðŸ“£",postal_horn:"ðŸ“¯",bell:"ðŸ””",no_bell:"ðŸ”•",musical_score:"ðŸŽ¼",musical_note:"ðŸŽµ",notes:"ðŸŽ¶",studio_microphone:"ðŸŽ™ï¸",level_slider:"ðŸŽšï¸",control_knobs:"ðŸŽ›ï¸",microphone:"ðŸŽ¤",headphones:"ðŸŽ§",radio:"ðŸ“»",saxophone:"ðŸŽ·",accordion:"ðŸª—",guitar:"ðŸŽ¸",musical_keyboard:"ðŸŽ¹",trumpet:"ðŸŽº",violin:"ðŸŽ»",banjo:"ðŸª•",drum:"ðŸ¥",long_drum:"ðŸª˜",maracas:"ðŸª‡",flute:"ðŸªˆ",iphone:"ðŸ“±",calling:"ðŸ“²",phone:"â˜Žï¸",telephone:"â˜Žï¸",telephone_receiver:"ðŸ“ž",pager:"ðŸ“Ÿ",fax:"ðŸ“ ",battery:"ðŸ”‹",low_battery:"ðŸª«",electric_plug:"ðŸ”Œ",computer:"ðŸ’»",desktop_computer:"ðŸ–¥ï¸",printer:"ðŸ–¨ï¸",keyboard:"âŒ¨ï¸",computer_mouse:"ðŸ–±ï¸",trackball:"ðŸ–²ï¸",minidisc:"ðŸ’½",floppy_disk:"ðŸ’¾",cd:"ðŸ’¿",dvd:"ðŸ“€",abacus:"ðŸ§®",movie_camera:"ðŸŽ¥",film_strip:"ðŸŽžï¸",film_projector:"ðŸ“½ï¸",clapper:"ðŸŽ¬",tv:"ðŸ“º",camera:"ðŸ“·",camera_flash:"ðŸ“¸",video_camera:"ðŸ“¹",vhs:"ðŸ“¼",mag:"ðŸ”",mag_right:"ðŸ”Ž",candle:"ðŸ•¯ï¸",bulb:"ðŸ’¡",flashlight:"ðŸ”¦",izakaya_lantern:"ðŸ®",lantern:"ðŸ®",diya_lamp:"ðŸª”",notebook_with_decorative_cover:"ðŸ“”",closed_book:"ðŸ“•",book:"ðŸ“–",open_book:"ðŸ“–",green_book:"ðŸ“—",blue_book:"ðŸ“˜",orange_book:"ðŸ“™",books:"ðŸ“š",notebook:"ðŸ““",ledger:"ðŸ“’",page_with_curl:"ðŸ“ƒ",scroll:"ðŸ“œ",page_facing_up:"ðŸ“„",newspaper:"ðŸ“°",newspaper_roll:"ðŸ—žï¸",bookmark_tabs:"ðŸ“‘",bookmark:"ðŸ”–",label:"ðŸ·ï¸",moneybag:"ðŸ’°",coin:"ðŸª™",yen:"ðŸ’´",dollar:"ðŸ’µ",euro:"ðŸ’¶",pound:"ðŸ’·",money_with_wings:"ðŸ’¸",credit_card:"ðŸ’³",receipt:"ðŸ§¾",chart:"ðŸ’¹",envelope:"âœ‰ï¸",email:"ðŸ“§","e-mail":"ðŸ“§",incoming_envelope:"ðŸ“¨",envelope_with_arrow:"ðŸ“©",outbox_tray:"ðŸ“¤",inbox_tray:"ðŸ“¥",package:"ðŸ“¦",mailbox:"ðŸ“«",mailbox_closed:"ðŸ“ª",mailbox_with_mail:"ðŸ“¬",mailbox_with_no_mail:"ðŸ“­",postbox:"ðŸ“®",ballot_box:"ðŸ—³ï¸",pencil2:"âœï¸",black_nib:"âœ’ï¸",fountain_pen:"ðŸ–‹ï¸",pen:"ðŸ–Šï¸",paintbrush:"ðŸ–Œï¸",crayon:"ðŸ–ï¸",memo:"ðŸ“",pencil:"ðŸ“",briefcase:"ðŸ’¼",file_folder:"ðŸ“",open_file_folder:"ðŸ“‚",card_index_dividers:"ðŸ—‚ï¸",date:"ðŸ“…",calendar:"ðŸ“†",spiral_notepad:"ðŸ—’ï¸",spiral_calendar:"ðŸ—“ï¸",card_index:"ðŸ“‡",chart_with_upwards_trend:"ðŸ“ˆ",chart_with_downwards_trend:"ðŸ“‰",bar_chart:"ðŸ“Š",clipboard:"ðŸ“‹",pushpin:"ðŸ“Œ",round_pushpin:"ðŸ“",paperclip:"ðŸ“Ž",paperclips:"ðŸ–‡ï¸",straight_ruler:"ðŸ“",triangular_ruler:"ðŸ“",scissors:"âœ‚ï¸",card_file_box:"ðŸ—ƒï¸",file_cabinet:"ðŸ—„ï¸",wastebasket:"ðŸ—‘ï¸",lock:"ðŸ”’",unlock:"ðŸ”“",lock_with_ink_pen:"ðŸ”",closed_lock_with_key:"ðŸ”",key:"ðŸ”‘",old_key:"ðŸ—ï¸",hammer:"ðŸ”¨",axe:"ðŸª“",pick:"â›ï¸",hammer_and_pick:"âš’ï¸",hammer_and_wrench:"ðŸ› ï¸",dagger:"ðŸ—¡ï¸",crossed_swords:"âš”ï¸",bomb:"ðŸ’£",boomerang:"ðŸªƒ",bow_and_arrow:"ðŸ¹",shield:"ðŸ›¡ï¸",carpentry_saw:"ðŸªš",wrench:"ðŸ”§",screwdriver:"ðŸª›",nut_and_bolt:"ðŸ”©",gear:"âš™ï¸",clamp:"ðŸ—œï¸",balance_scale:"âš–ï¸",probing_cane:"ðŸ¦¯",link:"ðŸ”—",chains:"â›“ï¸",hook:"ðŸª",toolbox:"ðŸ§°",magnet:"ðŸ§²",ladder:"ðŸªœ",alembic:"âš—ï¸",test_tube:"ðŸ§ª",petri_dish:"ðŸ§«",dna:"ðŸ§¬",microscope:"ðŸ”¬",telescope:"ðŸ”­",satellite:"ðŸ“¡",syringe:"ðŸ’‰",drop_of_blood:"ðŸ©¸",pill:"ðŸ’Š",adhesive_bandage:"ðŸ©¹",crutch:"ðŸ©¼",stethoscope:"ðŸ©º",x_ray:"ðŸ©»",door:"ðŸšª",elevator:"ðŸ›—",mirror:"ðŸªž",window:"ðŸªŸ",bed:"ðŸ›ï¸",couch_and_lamp:"ðŸ›‹ï¸",chair:"ðŸª‘",toilet:"ðŸš½",plunger:"ðŸª ",shower:"ðŸš¿",bathtub:"ðŸ›",mouse_trap:"ðŸª¤",razor:"ðŸª’",lotion_bottle:"ðŸ§´",safety_pin:"ðŸ§·",broom:"ðŸ§¹",basket:"ðŸ§º",roll_of_paper:"ðŸ§»",bucket:"ðŸª£",soap:"ðŸ§¼",bubbles:"ðŸ«§",toothbrush:"ðŸª¥",sponge:"ðŸ§½",fire_extinguisher:"ðŸ§¯",shopping_cart:"ðŸ›’",smoking:"ðŸš¬",coffin:"âš°ï¸",headstone:"ðŸª¦",funeral_urn:"âš±ï¸",nazar_amulet:"ðŸ§¿",hamsa:"ðŸª¬",moyai:"ðŸ—¿",placard:"ðŸª§",identification_card:"ðŸªª",atm:"ðŸ§",put_litter_in_its_place:"ðŸš®",potable_water:"ðŸš°",wheelchair:"â™¿",mens:"ðŸš¹",womens:"ðŸšº",restroom:"ðŸš»",baby_symbol:"ðŸš¼",wc:"ðŸš¾",passport_control:"ðŸ›‚",customs:"ðŸ›ƒ",baggage_claim:"ðŸ›„",left_luggage:"ðŸ›…",warning:"âš ï¸",children_crossing:"ðŸš¸",no_entry:"â›”",no_entry_sign:"ðŸš«",no_bicycles:"ðŸš³",no_smoking:"ðŸš­",do_not_litter:"ðŸš¯","non-potable_water":"ðŸš±",no_pedestrians:"ðŸš·",no_mobile_phones:"ðŸ“µ",underage:"ðŸ”ž",radioactive:"â˜¢ï¸",biohazard:"â˜£ï¸",arrow_up:"â¬†ï¸",arrow_upper_right:"â†—ï¸",arrow_right:"âž¡ï¸",arrow_lower_right:"â†˜ï¸",arrow_down:"â¬‡ï¸",arrow_lower_left:"â†™ï¸",arrow_left:"â¬…ï¸",arrow_upper_left:"â†–ï¸",arrow_up_down:"â†•ï¸",left_right_arrow:"â†”ï¸",leftwards_arrow_with_hook:"â†©ï¸",arrow_right_hook:"â†ªï¸",arrow_heading_up:"â¤´ï¸",arrow_heading_down:"â¤µï¸",arrows_clockwise:"ðŸ”ƒ",arrows_counterclockwise:"ðŸ”„",back:"ðŸ”™",end:"ðŸ”š",on:"ðŸ”›",soon:"ðŸ”œ",top:"ðŸ”",place_of_worship:"ðŸ›",atom_symbol:"âš›ï¸",om:"ðŸ•‰ï¸",star_of_david:"âœ¡ï¸",wheel_of_dharma:"â˜¸ï¸",yin_yang:"â˜¯ï¸",latin_cross:"âœï¸",orthodox_cross:"â˜¦ï¸",star_and_crescent:"â˜ªï¸",peace_symbol:"â˜®ï¸",menorah:"ðŸ•Ž",six_pointed_star:"ðŸ”¯",khanda:"ðŸª¯",aries:"â™ˆ",taurus:"â™‰",gemini:"â™Š",cancer:"â™‹",leo:"â™Œ",virgo:"â™",libra:"â™Ž",scorpius:"â™",sagittarius:"â™",capricorn:"â™‘",aquarius:"â™’",pisces:"â™“",ophiuchus:"â›Ž",twisted_rightwards_arrows:"ðŸ”€",repeat:"ðŸ”",repeat_one:"ðŸ”‚",arrow_forward:"â–¶ï¸",fast_forward:"â©",next_track_button:"â­ï¸",play_or_pause_button:"â¯ï¸",arrow_backward:"â—€ï¸",rewind:"âª",previous_track_button:"â®ï¸",arrow_up_small:"ðŸ”¼",arrow_double_up:"â«",arrow_down_small:"ðŸ”½",arrow_double_down:"â¬",pause_button:"â¸ï¸",stop_button:"â¹ï¸",record_button:"âºï¸",eject_button:"âï¸",cinema:"ðŸŽ¦",low_brightness:"ðŸ”…",high_brightness:"ðŸ”†",signal_strength:"ðŸ“¶",wireless:"ðŸ›œ",vibration_mode:"ðŸ“³",mobile_phone_off:"ðŸ“´",female_sign:"â™€ï¸",male_sign:"â™‚ï¸",transgender_symbol:"âš§ï¸",heavy_multiplication_x:"âœ–ï¸",heavy_plus_sign:"âž•",heavy_minus_sign:"âž–",heavy_division_sign:"âž—",heavy_equals_sign:"ðŸŸ°",infinity:"â™¾ï¸",bangbang:"â€¼ï¸",interrobang:"â‰ï¸",question:"â“",grey_question:"â”",grey_exclamation:"â•",exclamation:"â—",heavy_exclamation_mark:"â—",wavy_dash:"ã€°ï¸",currency_exchange:"ðŸ’±",heavy_dollar_sign:"ðŸ’²",medical_symbol:"âš•ï¸",recycle:"â™»ï¸",fleur_de_lis:"âšœï¸",trident:"ðŸ”±",name_badge:"ðŸ“›",beginner:"ðŸ”°",o:"â­•",white_check_mark:"âœ…",ballot_box_with_check:"â˜‘ï¸",heavy_check_mark:"âœ”ï¸",x:"âŒ",negative_squared_cross_mark:"âŽ",curly_loop:"âž°",loop:"âž¿",part_alternation_mark:"ã€½ï¸",eight_spoked_asterisk:"âœ³ï¸",eight_pointed_black_star:"âœ´ï¸",sparkle:"â‡ï¸",copyright:"Â©ï¸",registered:"Â®ï¸",tm:"â„¢ï¸",hash:"#ï¸âƒ£",asterisk:"*ï¸âƒ£",zero:"0ï¸âƒ£",one:"1ï¸âƒ£",two:"2ï¸âƒ£",three:"3ï¸âƒ£",four:"4ï¸âƒ£",five:"5ï¸âƒ£",six:"6ï¸âƒ£",seven:"7ï¸âƒ£",eight:"8ï¸âƒ£",nine:"9ï¸âƒ£",keycap_ten:"ðŸ”Ÿ",capital_abcd:"ðŸ” ",abcd:"ðŸ”¡",symbols:"ðŸ”£",abc:"ðŸ”¤",a:"ðŸ…°ï¸",ab:"ðŸ†Ž",b:"ðŸ…±ï¸",cl:"ðŸ†‘",cool:"ðŸ†’",free:"ðŸ†“",information_source:"â„¹ï¸",id:"ðŸ†”",m:"â“‚ï¸",new:"ðŸ†•",ng:"ðŸ†–",o2:"ðŸ…¾ï¸",ok:"ðŸ†—",parking:"ðŸ…¿ï¸",sos:"ðŸ†˜",up:"ðŸ†™",vs:"ðŸ†š",koko:"ðŸˆ",sa:"ðŸˆ‚ï¸",u6708:"ðŸˆ·ï¸",u6709:"ðŸˆ¶",u6307:"ðŸˆ¯",ideograph_advantage:"ðŸ‰",u5272:"ðŸˆ¹",u7121:"ðŸˆš",u7981:"ðŸˆ²",accept:"ðŸ‰‘",u7533:"ðŸˆ¸",u5408:"ðŸˆ´",u7a7a:"ðŸˆ³",congratulations:"ãŠ—ï¸",secret:"ãŠ™ï¸",u55b6:"ðŸˆº",u6e80:"ðŸˆµ",red_circle:"ðŸ”´",orange_circle:"ðŸŸ ",yellow_circle:"ðŸŸ¡",green_circle:"ðŸŸ¢",large_blue_circle:"ðŸ”µ",purple_circle:"ðŸŸ£",brown_circle:"ðŸŸ¤",black_circle:"âš«",white_circle:"âšª",red_square:"ðŸŸ¥",orange_square:"ðŸŸ§",yellow_square:"ðŸŸ¨",green_square:"ðŸŸ©",blue_square:"ðŸŸ¦",purple_square:"ðŸŸª",brown_square:"ðŸŸ«",black_large_square:"â¬›",white_large_square:"â¬œ",black_medium_square:"â—¼ï¸",white_medium_square:"â—»ï¸",black_medium_small_square:"â—¾",white_medium_small_square:"â—½",black_small_square:"â–ªï¸",white_small_square:"â–«ï¸",large_orange_diamond:"ðŸ”¶",large_blue_diamond:"ðŸ”·",small_orange_diamond:"ðŸ”¸",small_blue_diamond:"ðŸ”¹",small_red_triangle:"ðŸ”º",small_red_triangle_down:"ðŸ”»",diamond_shape_with_a_dot_inside:"ðŸ’ ",radio_button:"ðŸ”˜",white_square_button:"ðŸ”³",black_square_button:"ðŸ”²",checkered_flag:"ðŸ",triangular_flag_on_post:"ðŸš©",crossed_flags:"ðŸŽŒ",black_flag:"ðŸ´",white_flag:"ðŸ³ï¸",rainbow_flag:"ðŸ³ï¸â€ðŸŒˆ",transgender_flag:"ðŸ³ï¸â€âš§ï¸",pirate_flag:"ðŸ´â€â˜ ï¸",ascension_island:"ðŸ‡¦ðŸ‡¨",andorra:"ðŸ‡¦ðŸ‡©",united_arab_emirates:"ðŸ‡¦ðŸ‡ª",afghanistan:"ðŸ‡¦ðŸ‡«",antigua_barbuda:"ðŸ‡¦ðŸ‡¬",anguilla:"ðŸ‡¦ðŸ‡®",albania:"ðŸ‡¦ðŸ‡±",armenia:"ðŸ‡¦ðŸ‡²",angola:"ðŸ‡¦ðŸ‡´",antarctica:"ðŸ‡¦ðŸ‡¶",argentina:"ðŸ‡¦ðŸ‡·",american_samoa:"ðŸ‡¦ðŸ‡¸",austria:"ðŸ‡¦ðŸ‡¹",australia:"ðŸ‡¦ðŸ‡º",aruba:"ðŸ‡¦ðŸ‡¼",aland_islands:"ðŸ‡¦ðŸ‡½",azerbaijan:"ðŸ‡¦ðŸ‡¿",bosnia_herzegovina:"ðŸ‡§ðŸ‡¦",barbados:"ðŸ‡§ðŸ‡§",bangladesh:"ðŸ‡§ðŸ‡©",belgium:"ðŸ‡§ðŸ‡ª",burkina_faso:"ðŸ‡§ðŸ‡«",bulgaria:"ðŸ‡§ðŸ‡¬",bahrain:"ðŸ‡§ðŸ‡­",burundi:"ðŸ‡§ðŸ‡®",benin:"ðŸ‡§ðŸ‡¯",st_barthelemy:"ðŸ‡§ðŸ‡±",bermuda:"ðŸ‡§ðŸ‡²",brunei:"ðŸ‡§ðŸ‡³",bolivia:"ðŸ‡§ðŸ‡´",caribbean_netherlands:"ðŸ‡§ðŸ‡¶",brazil:"ðŸ‡§ðŸ‡·",bahamas:"ðŸ‡§ðŸ‡¸",bhutan:"ðŸ‡§ðŸ‡¹",bouvet_island:"ðŸ‡§ðŸ‡»",botswana:"ðŸ‡§ðŸ‡¼",belarus:"ðŸ‡§ðŸ‡¾",belize:"ðŸ‡§ðŸ‡¿",canada:"ðŸ‡¨ðŸ‡¦",cocos_islands:"ðŸ‡¨ðŸ‡¨",congo_kinshasa:"ðŸ‡¨ðŸ‡©",central_african_republic:"ðŸ‡¨ðŸ‡«",congo_brazzaville:"ðŸ‡¨ðŸ‡¬",switzerland:"ðŸ‡¨ðŸ‡­",cote_divoire:"ðŸ‡¨ðŸ‡®",cook_islands:"ðŸ‡¨ðŸ‡°",chile:"ðŸ‡¨ðŸ‡±",cameroon:"ðŸ‡¨ðŸ‡²",cn:"ðŸ‡¨ðŸ‡³",colombia:"ðŸ‡¨ðŸ‡´",clipperton_island:"ðŸ‡¨ðŸ‡µ",costa_rica:"ðŸ‡¨ðŸ‡·",cuba:"ðŸ‡¨ðŸ‡º",cape_verde:"ðŸ‡¨ðŸ‡»",curacao:"ðŸ‡¨ðŸ‡¼",christmas_island:"ðŸ‡¨ðŸ‡½",cyprus:"ðŸ‡¨ðŸ‡¾",czech_republic:"ðŸ‡¨ðŸ‡¿",de:"ðŸ‡©ðŸ‡ª",diego_garcia:"ðŸ‡©ðŸ‡¬",djibouti:"ðŸ‡©ðŸ‡¯",denmark:"ðŸ‡©ðŸ‡°",dominica:"ðŸ‡©ðŸ‡²",dominican_republic:"ðŸ‡©ðŸ‡´",algeria:"ðŸ‡©ðŸ‡¿",ceuta_melilla:"ðŸ‡ªðŸ‡¦",ecuador:"ðŸ‡ªðŸ‡¨",estonia:"ðŸ‡ªðŸ‡ª",egypt:"ðŸ‡ªðŸ‡¬",western_sahara:"ðŸ‡ªðŸ‡­",eritrea:"ðŸ‡ªðŸ‡·",es:"ðŸ‡ªðŸ‡¸",ethiopia:"ðŸ‡ªðŸ‡¹",eu:"ðŸ‡ªðŸ‡º",european_union:"ðŸ‡ªðŸ‡º",finland:"ðŸ‡«ðŸ‡®",fiji:"ðŸ‡«ðŸ‡¯",falkland_islands:"ðŸ‡«ðŸ‡°",micronesia:"ðŸ‡«ðŸ‡²",faroe_islands:"ðŸ‡«ðŸ‡´",fr:"ðŸ‡«ðŸ‡·",gabon:"ðŸ‡¬ðŸ‡¦",gb:"ðŸ‡¬ðŸ‡§",uk:"ðŸ‡¬ðŸ‡§",grenada:"ðŸ‡¬ðŸ‡©",georgia:"ðŸ‡¬ðŸ‡ª",french_guiana:"ðŸ‡¬ðŸ‡«",guernsey:"ðŸ‡¬ðŸ‡¬",ghana:"ðŸ‡¬ðŸ‡­",gibraltar:"ðŸ‡¬ðŸ‡®",greenland:"ðŸ‡¬ðŸ‡±",gambia:"ðŸ‡¬ðŸ‡²",guinea:"ðŸ‡¬ðŸ‡³",guadeloupe:"ðŸ‡¬ðŸ‡µ",equatorial_guinea:"ðŸ‡¬ðŸ‡¶",greece:"ðŸ‡¬ðŸ‡·",south_georgia_south_sandwich_islands:"ðŸ‡¬ðŸ‡¸",guatemala:"ðŸ‡¬ðŸ‡¹",guam:"ðŸ‡¬ðŸ‡º",guinea_bissau:"ðŸ‡¬ðŸ‡¼",guyana:"ðŸ‡¬ðŸ‡¾",hong_kong:"ðŸ‡­ðŸ‡°",heard_mcdonald_islands:"ðŸ‡­ðŸ‡²",honduras:"ðŸ‡­ðŸ‡³",croatia:"ðŸ‡­ðŸ‡·",haiti:"ðŸ‡­ðŸ‡¹",hungary:"ðŸ‡­ðŸ‡º",canary_islands:"ðŸ‡®ðŸ‡¨",indonesia:"ðŸ‡®ðŸ‡©",ireland:"ðŸ‡®ðŸ‡ª",israel:"ðŸ‡®ðŸ‡±",isle_of_man:"ðŸ‡®ðŸ‡²",india:"ðŸ‡®ðŸ‡³",british_indian_ocean_territory:"ðŸ‡®ðŸ‡´",iraq:"ðŸ‡®ðŸ‡¶",iran:"ðŸ‡®ðŸ‡·",iceland:"ðŸ‡®ðŸ‡¸",it:"ðŸ‡®ðŸ‡¹",jersey:"ðŸ‡¯ðŸ‡ª",jamaica:"ðŸ‡¯ðŸ‡²",jordan:"ðŸ‡¯ðŸ‡´",jp:"ðŸ‡¯ðŸ‡µ",kenya:"ðŸ‡°ðŸ‡ª",kyrgyzstan:"ðŸ‡°ðŸ‡¬",cambodia:"ðŸ‡°ðŸ‡­",kiribati:"ðŸ‡°ðŸ‡®",comoros:"ðŸ‡°ðŸ‡²",st_kitts_nevis:"ðŸ‡°ðŸ‡³",north_korea:"ðŸ‡°ðŸ‡µ",kr:"ðŸ‡°ðŸ‡·",kuwait:"ðŸ‡°ðŸ‡¼",cayman_islands:"ðŸ‡°ðŸ‡¾",kazakhstan:"ðŸ‡°ðŸ‡¿",laos:"ðŸ‡±ðŸ‡¦",lebanon:"ðŸ‡±ðŸ‡§",st_lucia:"ðŸ‡±ðŸ‡¨",liechtenstein:"ðŸ‡±ðŸ‡®",sri_lanka:"ðŸ‡±ðŸ‡°",liberia:"ðŸ‡±ðŸ‡·",lesotho:"ðŸ‡±ðŸ‡¸",lithuania:"ðŸ‡±ðŸ‡¹",luxembourg:"ðŸ‡±ðŸ‡º",latvia:"ðŸ‡±ðŸ‡»",libya:"ðŸ‡±ðŸ‡¾",morocco:"ðŸ‡²ðŸ‡¦",monaco:"ðŸ‡²ðŸ‡¨",moldova:"ðŸ‡²ðŸ‡©",montenegro:"ðŸ‡²ðŸ‡ª",st_martin:"ðŸ‡²ðŸ‡«",madagascar:"ðŸ‡²ðŸ‡¬",marshall_islands:"ðŸ‡²ðŸ‡­",macedonia:"ðŸ‡²ðŸ‡°",mali:"ðŸ‡²ðŸ‡±",myanmar:"ðŸ‡²ðŸ‡²",mongolia:"ðŸ‡²ðŸ‡³",macau:"ðŸ‡²ðŸ‡´",northern_mariana_islands:"ðŸ‡²ðŸ‡µ",martinique:"ðŸ‡²ðŸ‡¶",mauritania:"ðŸ‡²ðŸ‡·",montserrat:"ðŸ‡²ðŸ‡¸",malta:"ðŸ‡²ðŸ‡¹",mauritius:"ðŸ‡²ðŸ‡º",maldives:"ðŸ‡²ðŸ‡»",malawi:"ðŸ‡²ðŸ‡¼",mexico:"ðŸ‡²ðŸ‡½",malaysia:"ðŸ‡²ðŸ‡¾",mozambique:"ðŸ‡²ðŸ‡¿",namibia:"ðŸ‡³ðŸ‡¦",new_caledonia:"ðŸ‡³ðŸ‡¨",niger:"ðŸ‡³ðŸ‡ª",norfolk_island:"ðŸ‡³ðŸ‡«",nigeria:"ðŸ‡³ðŸ‡¬",nicaragua:"ðŸ‡³ðŸ‡®",netherlands:"ðŸ‡³ðŸ‡±",norway:"ðŸ‡³ðŸ‡´",nepal:"ðŸ‡³ðŸ‡µ",nauru:"ðŸ‡³ðŸ‡·",niue:"ðŸ‡³ðŸ‡º",new_zealand:"ðŸ‡³ðŸ‡¿",oman:"ðŸ‡´ðŸ‡²",panama:"ðŸ‡µðŸ‡¦",peru:"ðŸ‡µðŸ‡ª",french_polynesia:"ðŸ‡µðŸ‡«",papua_new_guinea:"ðŸ‡µðŸ‡¬",philippines:"ðŸ‡µðŸ‡­",pakistan:"ðŸ‡µðŸ‡°",poland:"ðŸ‡µðŸ‡±",st_pierre_miquelon:"ðŸ‡µðŸ‡²",pitcairn_islands:"ðŸ‡µðŸ‡³",puerto_rico:"ðŸ‡µðŸ‡·",palestinian_territories:"ðŸ‡µðŸ‡¸",portugal:"ðŸ‡µðŸ‡¹",palau:"ðŸ‡µðŸ‡¼",paraguay:"ðŸ‡µðŸ‡¾",qatar:"ðŸ‡¶ðŸ‡¦",reunion:"ðŸ‡·ðŸ‡ª",romania:"ðŸ‡·ðŸ‡´",serbia:"ðŸ‡·ðŸ‡¸",ru:"ðŸ‡·ðŸ‡º",rwanda:"ðŸ‡·ðŸ‡¼",saudi_arabia:"ðŸ‡¸ðŸ‡¦",solomon_islands:"ðŸ‡¸ðŸ‡§",seychelles:"ðŸ‡¸ðŸ‡¨",sudan:"ðŸ‡¸ðŸ‡©",sweden:"ðŸ‡¸ðŸ‡ª",singapore:"ðŸ‡¸ðŸ‡¬",st_helena:"ðŸ‡¸ðŸ‡­",slovenia:"ðŸ‡¸ðŸ‡®",svalbard_jan_mayen:"ðŸ‡¸ðŸ‡¯",slovakia:"ðŸ‡¸ðŸ‡°",sierra_leone:"ðŸ‡¸ðŸ‡±",san_marino:"ðŸ‡¸ðŸ‡²",senegal:"ðŸ‡¸ðŸ‡³",somalia:"ðŸ‡¸ðŸ‡´",suriname:"ðŸ‡¸ðŸ‡·",south_sudan:"ðŸ‡¸ðŸ‡¸",sao_tome_principe:"ðŸ‡¸ðŸ‡¹",el_salvador:"ðŸ‡¸ðŸ‡»",sint_maarten:"ðŸ‡¸ðŸ‡½",syria:"ðŸ‡¸ðŸ‡¾",swaziland:"ðŸ‡¸ðŸ‡¿",tristan_da_cunha:"ðŸ‡¹ðŸ‡¦",turks_caicos_islands:"ðŸ‡¹ðŸ‡¨",chad:"ðŸ‡¹ðŸ‡©",french_southern_territories:"ðŸ‡¹ðŸ‡«",togo:"ðŸ‡¹ðŸ‡¬",thailand:"ðŸ‡¹ðŸ‡­",tajikistan:"ðŸ‡¹ðŸ‡¯",tokelau:"ðŸ‡¹ðŸ‡°",timor_leste:"ðŸ‡¹ðŸ‡±",turkmenistan:"ðŸ‡¹ðŸ‡²",tunisia:"ðŸ‡¹ðŸ‡³",tonga:"ðŸ‡¹ðŸ‡´",tr:"ðŸ‡¹ðŸ‡·",trinidad_tobago:"ðŸ‡¹ðŸ‡¹",tuvalu:"ðŸ‡¹ðŸ‡»",taiwan:"ðŸ‡¹ðŸ‡¼",tanzania:"ðŸ‡¹ðŸ‡¿",ukraine:"ðŸ‡ºðŸ‡¦",uganda:"ðŸ‡ºðŸ‡¬",us_outlying_islands:"ðŸ‡ºðŸ‡²",united_nations:"ðŸ‡ºðŸ‡³",us:"ðŸ‡ºðŸ‡¸",uruguay:"ðŸ‡ºðŸ‡¾",uzbekistan:"ðŸ‡ºðŸ‡¿",vatican_city:"ðŸ‡»ðŸ‡¦",st_vincent_grenadines:"ðŸ‡»ðŸ‡¨",venezuela:"ðŸ‡»ðŸ‡ª",british_virgin_islands:"ðŸ‡»ðŸ‡¬",us_virgin_islands:"ðŸ‡»ðŸ‡®",vietnam:"ðŸ‡»ðŸ‡³",vanuatu:"ðŸ‡»ðŸ‡º",wallis_futuna:"ðŸ‡¼ðŸ‡«",samoa:"ðŸ‡¼ðŸ‡¸",kosovo:"ðŸ‡½ðŸ‡°",yemen:"ðŸ‡¾ðŸ‡ª",mayotte:"ðŸ‡¾ðŸ‡¹",south_africa:"ðŸ‡¿ðŸ‡¦",zambia:"ðŸ‡¿ðŸ‡²",zimbabwe:"ðŸ‡¿ðŸ‡¼",england:"ðŸ´ó §ó ¢ó ¥ó ®ó §ó ¿",scotland:"ðŸ´ó §ó ¢ó ³ó £ó ´ó ¿",wales:"ðŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿"};function Bj(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function zd(e,t,n){const r=Xl((n||{}).ignore||[]),o=Oj(t);let a=-1;for(;++a<o.length;)af(e,"text",l);function l(u,h){let d=-1,f;for(;++d<h.length;){const g=h[d],m=f?f.children:void 0;if(r(g,m?m.indexOf(g):void 0,f))return;f=g}if(f)return c(u,h)}function c(u,h){const d=h[h.length-1],f=o[a][0],g=o[a][1];let m=0;const b=d.children.indexOf(u);let v=!1,_=[];f.lastIndex=0;let x=f.exec(u.value);for(;x;){const w=x.index,j={index:x.index,input:x.input,stack:[...h,u]};let C=g(...x,j);if(typeof C=="string"&&(C=C.length>0?{type:"text",value:C}:void 0),C===!1?f.lastIndex=w+1:(m!==w&&_.push({type:"text",value:u.value.slice(m,w)}),Array.isArray(C)?_.push(...C):C&&_.push(C),m=w+x[0].length,v=!0),!f.global)break;x=f.exec(u.value)}return v?(m<u.value.length&&_.push({type:"text",value:u.value.slice(m)}),d.children.splice(b,1,..._)):_=[u],b+_.length}}function Oj(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let s=-1;for(;++s<n.length;){const r=n[s];t.push([Fj(r[0]),Vj(r[1])])}return t}function Fj(e){return typeof e=="string"?new RegExp(Bj(e),"g"):e}function Vj(e){return typeof e=="function"?e:function(){return e}}function zj(){return function(e){zd(e,[/:(\+1|[-\w]+):/g,function(t,n){return Object.hasOwn(kl,n)?kl[n]:!1}])}}function Cl(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let s=0,r=n.indexOf(t);for(;r!==-1;)s++,r=n.indexOf(t,r+t.length);return s}const Si="phrasing",ki=["autolink","link","image","label"];function Uj(){return{transforms:[Xj],enter:{literalAutolink:Wj,literalAutolinkEmail:Ci,literalAutolinkHttp:Ci,literalAutolinkWww:Ci},exit:{literalAutolink:Yj,literalAutolinkEmail:Hj,literalAutolinkHttp:Kj,literalAutolinkWww:qj}}}function Gj(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Si,notInConstruct:ki},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Si,notInConstruct:ki},{character:":",before:"[ps]",after:"\\/",inConstruct:Si,notInConstruct:ki}]}}function Wj(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Ci(e){this.config.enter.autolinkProtocol.call(this,e)}function Kj(e){this.config.exit.autolinkProtocol.call(this,e)}function qj(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];nn(t.type==="link"),t.url="http://"+this.sliceSerialize(e)}function Hj(e){this.config.exit.autolinkEmail.call(this,e)}function Yj(e){this.exit(e)}function Xj(e){zd(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Jj],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Zj]],{ignore:["link","linkReference"]})}function Jj(e,t,n,s,r){let o="";if(!Ud(r)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!Qj(n)))return!1;const a=e_(n+s);if(!a[0])return!1;const l={type:"link",title:null,url:o+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[l,{type:"text",value:a[1]}]:l}function Zj(e,t,n,s){return!Ud(s,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Qj(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function e_(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],s=n.indexOf(")");const r=Cl(e,"(");let o=Cl(e,")");for(;s!==-1&&r>o;)e+=n.slice(0,s+1),n=n.slice(s+1),s=n.indexOf(")"),o++;return[e,n]}function Ud(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Ht(n)||wr(n))&&(!t||n!==47)}Gd.peek=c_;function t_(){this.buffer()}function n_(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function s_(){this.buffer()}function i_(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function r_(e){const t=this.resume(),n=this.stack[this.stack.length-1];nn(n.type==="footnoteReference"),n.identifier=zn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function o_(e){this.exit(e)}function a_(e){const t=this.resume(),n=this.stack[this.stack.length-1];nn(n.type==="footnoteDefinition"),n.identifier=zn(this.sliceSerialize(e)).toLowerCase(),n.label=t}function l_(e){this.exit(e)}function c_(){return"["}function Gd(e,t,n,s){const r=n.createTracker(s);let o=r.move("[^");const a=n.enter("footnoteReference"),l=n.enter("reference");return o+=r.move(n.safe(n.associationId(e),{after:"]",before:o})),l(),a(),o+=r.move("]"),o}function u_(){return{enter:{gfmFootnoteCallString:t_,gfmFootnoteCall:n_,gfmFootnoteDefinitionLabelString:s_,gfmFootnoteDefinition:i_},exit:{gfmFootnoteCallString:r_,gfmFootnoteCall:o_,gfmFootnoteDefinitionLabelString:a_,gfmFootnoteDefinition:l_}}}function d_(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Gd},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(s,r,o,a){const l=o.createTracker(a);let c=l.move("[^");const u=o.enter("footnoteDefinition"),h=o.enter("label");return c+=l.move(o.safe(o.associationId(s),{before:c,after:"]"})),h(),c+=l.move("]:"),s.children&&s.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+o.indentLines(o.containerFlow(s,l.current()),t?Wd:h_))),u(),c}}function h_(e,t,n){return t===0?e:Wd(e,t,n)}function Wd(e,t,n){return(n?"":"    ")+e}const f_=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Kd.peek=x_;function m_(){return{canContainEols:["delete"],enter:{strikethrough:g_},exit:{strikethrough:y_}}}function p_(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:f_}],handlers:{delete:Kd}}}function g_(e){this.enter({type:"delete",children:[]},e)}function y_(e){this.exit(e)}function Kd(e,t,n,s){const r=n.createTracker(s),o=n.enter("strikethrough");let a=r.move("~~");return a+=n.containerPhrasing(e,{...r.current(),before:a,after:"~"}),a+=r.move("~~"),o(),a}function x_(){return"~"}function b_(e){return e.length}function v_(e,t){const n=t||{},s=(n.align||[]).concat(),r=n.stringLength||b_,o=[],a=[],l=[],c=[];let u=0,h=-1;for(;++h<e.length;){const y=[],b=[];let v=-1;for(e[h].length>u&&(u=e[h].length);++v<e[h].length;){const _=w_(e[h][v]);if(n.alignDelimiters!==!1){const x=r(_);b[v]=x,(c[v]===void 0||x>c[v])&&(c[v]=x)}y.push(_)}a[h]=y,l[h]=b}let d=-1;if(typeof s=="object"&&"length"in s)for(;++d<u;)o[d]=Tl(s[d]);else{const y=Tl(s);for(;++d<u;)o[d]=y}d=-1;const f=[],g=[];for(;++d<u;){const y=o[d];let b="",v="";y===99?(b=":",v=":"):y===108?b=":":y===114&&(v=":");let _=n.alignDelimiters===!1?1:Math.max(1,c[d]-b.length-v.length);const x=b+"-".repeat(_)+v;n.alignDelimiters!==!1&&(_=b.length+_+v.length,_>c[d]&&(c[d]=_),g[d]=_),f[d]=x}a.splice(1,0,f),l.splice(1,0,g),h=-1;const m=[];for(;++h<a.length;){const y=a[h],b=l[h];d=-1;const v=[];for(;++d<u;){const _=y[d]||"";let x="",w="";if(n.alignDelimiters!==!1){const j=c[d]-(b[d]||0),C=o[d];C===114?x=" ".repeat(j):C===99?j%2?(x=" ".repeat(j/2+.5),w=" ".repeat(j/2-.5)):(x=" ".repeat(j/2),w=x):w=" ".repeat(j)}n.delimiterStart!==!1&&!d&&v.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&_==="")&&(n.delimiterStart!==!1||d)&&v.push(" "),n.alignDelimiters!==!1&&v.push(x),v.push(_),n.alignDelimiters!==!1&&v.push(w),n.padding!==!1&&v.push(" "),(n.delimiterEnd!==!1||d!==u-1)&&v.push("|")}m.push(n.delimiterEnd===!1?v.join("").replace(/ +$/,""):v.join(""))}return m.join(`
`)}function w_(e){return e==null?"":String(e)}function Tl(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function j_(e,t,n,s){const r=n.enter("blockquote"),o=n.createTracker(s);o.move("> "),o.shift(2);const a=n.indentLines(n.containerFlow(e,o.current()),__);return r(),a}function __(e,t,n){return">"+(n?"":" ")+e}function S_(e,t){return Al(e,t.inConstruct,!0)&&!Al(e,t.notInConstruct,!1)}function Al(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let s=-1;for(;++s<t.length;)if(e.includes(t[s]))return!0;return!1}function Pl(e,t,n,s){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&S_(n.stack,n.unsafe[r]))return/[ \t]/.test(s.before)?"":" ";return`\\
`}function k_(e,t){const n=String(e);let s=n.indexOf(t),r=s,o=0,a=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;s!==-1;)s===r?++o>a&&(a=o):o=1,r=s+t.length,s=n.indexOf(t,r);return a}function C_(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function T_(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function A_(e,t,n,s){const r=T_(n),o=e.value||"",a=r==="`"?"GraveAccent":"Tilde";if(C_(e,n)){const d=n.enter("codeIndented"),f=n.indentLines(o,P_);return d(),f}const l=n.createTracker(s),c=r.repeat(Math.max(k_(o,r)+1,3)),u=n.enter("codeFenced");let h=l.move(c);if(e.lang){const d=n.enter(`codeFencedLang${a}`);h+=l.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...l.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${a}`);h+=l.move(" "),h+=l.move(n.safe(e.meta,{before:h,after:`
`,encode:["`"],...l.current()})),d()}return h+=l.move(`
`),o&&(h+=l.move(o+`
`)),h+=l.move(c),u(),h}function P_(e,t,n){return(n?"":"    ")+e}function So(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function E_(e,t,n,s){const r=So(n),o=r==='"'?"Quote":"Apostrophe",a=n.enter("definition");let l=n.enter("label");const c=n.createTracker(s);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${o}`),u+=c.move(" "+r),u+=c.move(n.safe(e.title,{before:u,after:r,...c.current()})),u+=c.move(r),l()),a(),u}function I_(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Fn(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Es(e,t,n){const s=vs(e),r=vs(t);return s===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:s===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}qd.peek=L_;function qd(e,t,n,s){const r=I_(n),o=n.enter("emphasis"),a=n.createTracker(s),l=a.move(r);let c=a.move(n.containerPhrasing(e,{after:r,before:l,...a.current()}));const u=c.charCodeAt(0),h=Es(s.before.charCodeAt(s.before.length-1),u,r);h.inside&&(c=Fn(u)+c.slice(1));const d=c.charCodeAt(c.length-1),f=Es(s.after.charCodeAt(0),d,r);f.inside&&(c=c.slice(0,-1)+Fn(d));const g=a.move(r);return o(),n.attentionEncodeSurroundingInfo={after:f.outside,before:h.outside},l+c+g}function L_(e,t,n){return n.options.emphasis||"*"}function M_(e,t){let n=!1;return lf(e,function(s){if("value"in s&&/\r?\n|\r/.test(s.value)||s.type==="break")return n=!0,cf}),!!((!e.depth||e.depth<3)&&Jl(e)&&(t.options.setext||n))}function R_(e,t,n,s){const r=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(s);if(M_(e,n)){const h=n.enter("headingSetext"),d=n.enter("phrasing"),f=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return d(),h(),f+`
`+(r===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const a="#".repeat(r),l=n.enter("headingAtx"),c=n.enter("phrasing");o.move(a+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(u)&&(u=Fn(u.charCodeAt(0))+u.slice(1)),u=u?a+" "+u:a,n.options.closeAtx&&(u+=" "+a),c(),l(),u}Hd.peek=$_;function Hd(e){return e.value||""}function $_(){return"<"}Yd.peek=D_;function Yd(e,t,n,s){const r=So(n),o=r==='"'?"Quote":"Apostrophe",a=n.enter("image");let l=n.enter("label");const c=n.createTracker(s);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${o}`),u+=c.move(" "+r),u+=c.move(n.safe(e.title,{before:u,after:r,...c.current()})),u+=c.move(r),l()),u+=c.move(")"),a(),u}function D_(){return"!"}Xd.peek=N_;function Xd(e,t,n,s){const r=e.referenceType,o=n.enter("imageReference");let a=n.enter("label");const l=n.createTracker(s);let c=l.move("![");const u=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),a();const h=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return a(),n.stack=h,o(),r==="full"||!u||u!==d?c+=l.move(d+"]"):r==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function N_(){return"!"}Jd.peek=B_;function Jd(e,t,n){let s=e.value||"",r="`",o=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(s);)r+="`";for(/[^ \r\n]/.test(s)&&(/^[ \r\n]/.test(s)&&/[ \r\n]$/.test(s)||/^`|`$/.test(s))&&(s=" "+s+" ");++o<n.unsafe.length;){const a=n.unsafe[o],l=n.compilePattern(a);let c;if(a.atBreak)for(;c=l.exec(s);){let u=c.index;s.charCodeAt(u)===10&&s.charCodeAt(u-1)===13&&u--,s=s.slice(0,u)+" "+s.slice(c.index+1)}}return r+s+r}function B_(){return"`"}function Zd(e,t){const n=Jl(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}Qd.peek=O_;function Qd(e,t,n,s){const r=So(n),o=r==='"'?"Quote":"Apostrophe",a=n.createTracker(s);let l,c;if(Zd(e,n)){const h=n.stack;n.stack=[],l=n.enter("autolink");let d=a.move("<");return d+=a.move(n.containerPhrasing(e,{before:d,after:">",...a.current()})),d+=a.move(">"),l(),n.stack=h,d}l=n.enter("link"),c=n.enter("label");let u=a.move("[");return u+=a.move(n.containerPhrasing(e,{before:u,after:"](",...a.current()})),u+=a.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(n.safe(e.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(c=n.enter("destinationRaw"),u+=a.move(n.safe(e.url,{before:u,after:e.title?" ":")",...a.current()}))),c(),e.title&&(c=n.enter(`title${o}`),u+=a.move(" "+r),u+=a.move(n.safe(e.title,{before:u,after:r,...a.current()})),u+=a.move(r),c()),u+=a.move(")"),l(),u}function O_(e,t,n){return Zd(e,n)?"<":"["}eh.peek=F_;function eh(e,t,n,s){const r=e.referenceType,o=n.enter("linkReference");let a=n.enter("label");const l=n.createTracker(s);let c=l.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),a();const h=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return a(),n.stack=h,o(),r==="full"||!u||u!==d?c+=l.move(d+"]"):r==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function F_(){return"["}function ko(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function V_(e){const t=ko(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function z_(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function th(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function U_(e,t,n,s){const r=n.enter("list"),o=n.bulletCurrent;let a=e.ordered?z_(n):ko(n);const l=e.ordered?a==="."?")":".":V_(n);let c=t&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),th(n)===a&&h){let d=-1;for(;++d<e.children.length;){const f=e.children[d];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(a=l),n.bulletCurrent=a;const u=n.containerFlow(e,s);return n.bulletLastUsed=a,n.bulletCurrent=o,r(),u}function G_(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function W_(e,t,n,s){const r=G_(n);let o=n.bulletCurrent||ko(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let a=o.length+1;(r==="tab"||r==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const l=n.createTracker(s);l.move(o+" ".repeat(a-o.length)),l.shift(a);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,l.current()),h);return c(),u;function h(d,f,g){return f?(g?"":" ".repeat(a))+d:(g?o:o+" ".repeat(a-o.length))+d}}function K_(e,t,n,s){const r=n.enter("paragraph"),o=n.enter("phrasing"),a=n.containerPhrasing(e,s);return o(),r(),a}const q_=Xl(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function H_(e,t,n,s){return(e.children.some(function(a){return q_(a)})?n.containerPhrasing:n.containerFlow).call(n,e,s)}function Y_(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}nh.peek=X_;function nh(e,t,n,s){const r=Y_(n),o=n.enter("strong"),a=n.createTracker(s),l=a.move(r+r);let c=a.move(n.containerPhrasing(e,{after:r,before:l,...a.current()}));const u=c.charCodeAt(0),h=Es(s.before.charCodeAt(s.before.length-1),u,r);h.inside&&(c=Fn(u)+c.slice(1));const d=c.charCodeAt(c.length-1),f=Es(s.after.charCodeAt(0),d,r);f.inside&&(c=c.slice(0,-1)+Fn(d));const g=a.move(r+r);return o(),n.attentionEncodeSurroundingInfo={after:f.outside,before:h.outside},l+c+g}function X_(e,t,n){return n.options.strong||"*"}function J_(e,t,n,s){return n.safe(e.value,s)}function Z_(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Q_(e,t,n){const s=(th(n)+(n.options.ruleSpaces?" ":"")).repeat(Z_(n));return n.options.ruleSpaces?s.slice(0,-1):s}const sh={blockquote:j_,break:Pl,code:A_,definition:E_,emphasis:qd,hardBreak:Pl,heading:R_,html:Hd,image:Yd,imageReference:Xd,inlineCode:Jd,link:Qd,linkReference:eh,list:U_,listItem:W_,paragraph:K_,root:H_,strong:nh,text:J_,thematicBreak:Q_};function e1(){return{enter:{table:t1,tableData:El,tableHeader:El,tableRow:s1},exit:{codeText:i1,table:n1,tableData:Ti,tableHeader:Ti,tableRow:Ti}}}function t1(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function n1(e){this.exit(e),this.data.inTable=void 0}function s1(e){this.enter({type:"tableRow",children:[]},e)}function Ti(e){this.exit(e)}function El(e){this.enter({type:"tableCell",children:[]},e)}function i1(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,r1));const n=this.stack[this.stack.length-1];nn(n.type==="inlineCode"),n.value=t,this.exit(e)}function r1(e,t){return t==="|"?t:e}function o1(e){const t=e||{},n=t.tableCellPadding,s=t.tablePipeAlign,r=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:a,tableCell:c,tableRow:l}};function a(g,m,y,b){return u(h(g,y,b),g.align)}function l(g,m,y,b){const v=d(g,y,b),_=u([v]);return _.slice(0,_.indexOf(`
`))}function c(g,m,y,b){const v=y.enter("tableCell"),_=y.enter("phrasing"),x=y.containerPhrasing(g,{...b,before:o,after:o});return _(),v(),x}function u(g,m){return v_(g,{align:m,alignDelimiters:s,padding:n,stringLength:r})}function h(g,m,y){const b=g.children;let v=-1;const _=[],x=m.enter("table");for(;++v<b.length;)_[v]=d(b[v],m,y);return x(),_}function d(g,m,y){const b=g.children;let v=-1;const _=[],x=m.enter("tableRow");for(;++v<b.length;)_[v]=c(b[v],g,m,y);return x(),_}function f(g,m,y){let b=sh.inlineCode(g,m,y);return y.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function a1(){return{exit:{taskListCheckValueChecked:Il,taskListCheckValueUnchecked:Il,paragraph:c1}}}function l1(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:u1}}}function Il(e){const t=this.stack[this.stack.length-2];nn(t.type==="listItem"),t.checked=e.type==="taskListCheckValueChecked"}function c1(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];nn(n.type==="paragraph");const s=n.children[0];if(s&&s.type==="text"){const r=t.children;let o=-1,a;for(;++o<r.length;){const l=r[o];if(l.type==="paragraph"){a=l;break}}a===n&&(s.value=s.value.slice(1),s.value.length===0?n.children.shift():n.position&&s.position&&typeof s.position.start.offset=="number"&&(s.position.start.column++,s.position.start.offset++,n.position.start=Object.assign({},s.position.start)))}}this.exit(e)}function u1(e,t,n,s){const r=e.children[0],o=typeof e.checked=="boolean"&&r&&r.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",l=n.createTracker(s);o&&l.move(a);let c=sh.listItem(e,t,n,{...s,...l.current()});return o&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(h){return h+a}}function d1(){return[Uj(),u_(),m_(),e1(),a1()]}function h1(e){return{extensions:[Gj(),d_(e),p_(),o1(e),l1()]}}const f1={tokenize:b1,partial:!0},ih={tokenize:v1,partial:!0},rh={tokenize:w1,partial:!0},oh={tokenize:j1,partial:!0},m1={tokenize:_1,partial:!0},ah={name:"wwwAutolink",tokenize:y1,previous:ch},lh={name:"protocolAutolink",tokenize:x1,previous:uh},ct={name:"emailAutolink",tokenize:g1,previous:dh},tt={};function p1(){return{text:tt}}let vt=48;for(;vt<123;)tt[vt]=ct,vt++,vt===58?vt=65:vt===91&&(vt=97);tt[43]=ct;tt[45]=ct;tt[46]=ct;tt[95]=ct;tt[72]=[ct,lh];tt[104]=[ct,lh];tt[87]=[ct,ah];tt[119]=[ct,ah];function g1(e,t,n){const s=this;let r,o;return a;function a(d){return!dr(d)||!dh.call(s,s.previous)||Co(s.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(d))}function l(d){return dr(d)?(e.consume(d),l):d===64?(e.consume(d),c):n(d)}function c(d){return d===46?e.check(m1,h,u)(d):d===45||d===95||jr(d)?(o=!0,e.consume(d),c):h(d)}function u(d){return e.consume(d),r=!0,c}function h(d){return o&&r&&Tn(s.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function y1(e,t,n){const s=this;return r;function r(a){return a!==87&&a!==119||!ch.call(s,s.previous)||Co(s.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(f1,e.attempt(ih,e.attempt(rh,o),n),n)(a))}function o(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function x1(e,t,n){const s=this;let r="",o=!1;return a;function a(d){return(d===72||d===104)&&uh.call(s,s.previous)&&!Co(s.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),r+=String.fromCodePoint(d),e.consume(d),l):n(d)}function l(d){if(Tn(d)&&r.length<5)return r+=String.fromCodePoint(d),e.consume(d),l;if(d===58){const f=r.toLowerCase();if(f==="http"||f==="https")return e.consume(d),c}return n(d)}function c(d){return d===47?(e.consume(d),o?u:(o=!0,c)):n(d)}function u(d){return d===null||uf(d)||$e(d)||Ht(d)||wr(d)?n(d):e.attempt(ih,e.attempt(rh,h),n)(d)}function h(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function b1(e,t,n){let s=0;return r;function r(a){return(a===87||a===119)&&s<3?(s++,e.consume(a),r):a===46&&s===3?(e.consume(a),o):n(a)}function o(a){return a===null?n(a):t(a)}}function v1(e,t,n){let s,r,o;return a;function a(u){return u===46||u===95?e.check(oh,c,l)(u):u===null||$e(u)||Ht(u)||u!==45&&wr(u)?c(u):(o=!0,e.consume(u),a)}function l(u){return u===95?s=!0:(r=s,s=void 0),e.consume(u),a}function c(u){return r||s||!o?n(u):t(u)}}function w1(e,t){let n=0,s=0;return r;function r(a){return a===40?(n++,e.consume(a),r):a===41&&s<n?o(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check(oh,t,o)(a):a===null||$e(a)||Ht(a)?t(a):(e.consume(a),r)}function o(a){return a===41&&s++,e.consume(a),r}}function j1(e,t,n){return s;function s(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),s):l===38?(e.consume(l),o):l===93?(e.consume(l),r):l===60||l===null||$e(l)||Ht(l)?t(l):n(l)}function r(l){return l===null||l===40||l===91||$e(l)||Ht(l)?t(l):s(l)}function o(l){return Tn(l)?a(l):n(l)}function a(l){return l===59?(e.consume(l),s):Tn(l)?(e.consume(l),a):n(l)}}function _1(e,t,n){return s;function s(o){return e.consume(o),r}function r(o){return jr(o)?n(o):t(o)}}function ch(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||$e(e)}function uh(e){return!Tn(e)}function dh(e){return!(e===47||dr(e))}function dr(e){return e===43||e===45||e===46||e===95||jr(e)}function Co(e){let t=e.length,n=!1;for(;t--;){const s=e[t][1];if((s.type==="labelLink"||s.type==="labelImage")&&!s._balanced){n=!0;break}if(s._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const S1={tokenize:L1,partial:!0};function k1(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:P1,continuation:{tokenize:E1},exit:I1}},text:{91:{name:"gfmFootnoteCall",tokenize:A1},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:C1,resolveTo:T1}}}}function C1(e,t,n){const s=this;let r=s.events.length;const o=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let a;for(;r--;){const c=s.events[r][1];if(c.type==="labelImage"){a=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!a||!a._balanced)return n(c);const u=zn(s.sliceSerialize({start:a.end,end:s.now()}));return u.codePointAt(0)!==94||!o.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function T1(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},l=[e[n+1],e[n+2],["enter",s,t],e[n+3],e[n+4],["enter",r,t],["exit",r,t],["enter",o,t],["enter",a,t],["exit",a,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",s,t]];return e.splice(n,e.length-n+1,...l),e}function A1(e,t,n){const s=this,r=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let o=0,a;return l;function l(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(d){if(o>999||d===93&&!a||d===null||d===91||$e(d))return n(d);if(d===93){e.exit("chunkString");const f=e.exit("gfmFootnoteCallString");return r.includes(zn(s.sliceSerialize(f)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return $e(d)||(a=!0),o++,e.consume(d),d===92?h:u}function h(d){return d===91||d===92||d===93?(e.consume(d),o++,u):u(d)}}function P1(e,t,n){const s=this,r=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let o,a=0,l;return c;function c(m){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(m){return m===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):n(m)}function h(m){if(a>999||m===93&&!l||m===null||m===91||$e(m))return n(m);if(m===93){e.exit("chunkString");const y=e.exit("gfmFootnoteDefinitionLabelString");return o=zn(s.sliceSerialize(y)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),f}return $e(m)||(l=!0),a++,e.consume(m),m===92?d:h}function d(m){return m===91||m===92||m===93?(e.consume(m),a++,h):h(m)}function f(m){return m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),r.includes(o)||r.push(o),ft(e,g,"gfmFootnoteDefinitionWhitespace")):n(m)}function g(m){return t(m)}}function E1(e,t,n){return e.check(df,t,e.attempt(S1,t,n))}function I1(e){e.exit("gfmFootnoteDefinition")}function L1(e,t,n){const s=this;return ft(e,r,"gfmFootnoteDefinitionIndent",5);function r(o){const a=s.events[s.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(o):n(o)}}function M1(e){let n=(e||{}).singleTilde;const s={name:"strikethrough",tokenize:o,resolveAll:r};return n==null&&(n=!0),{text:{126:s},insideSpan:{null:[s]},attentionMarkers:{null:[126]}};function r(a,l){let c=-1;for(;++c<a.length;)if(a[c][0]==="enter"&&a[c][1].type==="strikethroughSequenceTemporary"&&a[c][1]._close){let u=c;for(;u--;)if(a[u][0]==="exit"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._open&&a[c][1].end.offset-a[c][1].start.offset===a[u][1].end.offset-a[u][1].start.offset){a[c][1].type="strikethroughSequence",a[u][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},a[u][1].start),end:Object.assign({},a[c][1].end)},d={type:"strikethroughText",start:Object.assign({},a[u][1].end),end:Object.assign({},a[c][1].start)},f=[["enter",h,l],["enter",a[u][1],l],["exit",a[u][1],l],["enter",d,l]],g=l.parser.constructs.insideSpan.null;g&&Zs(f,f.length,0,hf(g,a.slice(u+1,c),l)),Zs(f,f.length,0,[["exit",d,l],["enter",a[c][1],l],["exit",a[c][1],l],["exit",h,l]]),Zs(a,u-1,c-u+3,f),c=u+f.length-2;break}}for(c=-1;++c<a.length;)a[c][1].type==="strikethroughSequenceTemporary"&&(a[c][1].type="data");return a}function o(a,l,c){const u=this.previous,h=this.events;let d=0;return f;function f(m){return u===126&&h[h.length-1][1].type!=="characterEscape"?c(m):(a.enter("strikethroughSequenceTemporary"),g(m))}function g(m){const y=vs(u);if(m===126)return d>1?c(m):(a.consume(m),d++,g);if(d<2&&!n)return c(m);const b=a.exit("strikethroughSequenceTemporary"),v=vs(m);return b._open=!v||v===2&&!!y,b._close=!y||y===2&&!!v,l(m)}}}class R1{constructor(){this.map=[]}add(t,n,s){$1(this,t,n,s)}consume(t){if(this.map.sort(function(o,a){return o[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const s=[];for(;n>0;)n-=1,s.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];s.push(t.slice()),t.length=0;let r=s.pop();for(;r;){for(const o of r)t.push(o);r=s.pop()}this.map.length=0}}function $1(e,t,n,s){let r=0;if(!(n===0&&s.length===0)){for(;r<e.map.length;){if(e.map[r][0]===t){e.map[r][1]+=n,e.map[r][2].push(...s);return}r+=1}e.map.push([t,n,s])}}function D1(e,t){let n=!1;const s=[];for(;t<e.length;){const r=e[t];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&s.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=s.length-1;s[o]=s[o]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return s}function N1(){return{flow:{null:{name:"table",tokenize:B1,resolveAll:O1}}}}function B1(e,t,n){const s=this;let r=0,o=0,a;return l;function l(k){let I=s.events.length-1;for(;I>-1;){const R=s.events[I][1].type;if(R==="lineEnding"||R==="linePrefix")I--;else break}const N=I>-1?s.events[I][1].type:null,D=N==="tableHead"||N==="tableRow"?C:c;return D===C&&s.parser.lazy[s.now().line]?n(k):D(k)}function c(k){return e.enter("tableHead"),e.enter("tableRow"),u(k)}function u(k){return k===124||(a=!0,o+=1),h(k)}function h(k){return k===null?n(k):dn(k)?o>1?(o=0,s.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),g):n(k):Dt(k)?ft(e,h,"whitespace")(k):(o+=1,a&&(a=!1,r+=1),k===124?(e.enter("tableCellDivider"),e.consume(k),e.exit("tableCellDivider"),a=!0,h):(e.enter("data"),d(k)))}function d(k){return k===null||k===124||$e(k)?(e.exit("data"),h(k)):(e.consume(k),k===92?f:d)}function f(k){return k===92||k===124?(e.consume(k),d):d(k)}function g(k){return s.interrupt=!1,s.parser.lazy[s.now().line]?n(k):(e.enter("tableDelimiterRow"),a=!1,Dt(k)?ft(e,m,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):m(k))}function m(k){return k===45||k===58?b(k):k===124?(a=!0,e.enter("tableCellDivider"),e.consume(k),e.exit("tableCellDivider"),y):j(k)}function y(k){return Dt(k)?ft(e,b,"whitespace")(k):b(k)}function b(k){return k===58?(o+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(k),e.exit("tableDelimiterMarker"),v):k===45?(o+=1,v(k)):k===null||dn(k)?w(k):j(k)}function v(k){return k===45?(e.enter("tableDelimiterFiller"),_(k)):j(k)}function _(k){return k===45?(e.consume(k),_):k===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(k),e.exit("tableDelimiterMarker"),x):(e.exit("tableDelimiterFiller"),x(k))}function x(k){return Dt(k)?ft(e,w,"whitespace")(k):w(k)}function w(k){return k===124?m(k):k===null||dn(k)?!a||r!==o?j(k):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(k)):j(k)}function j(k){return n(k)}function C(k){return e.enter("tableRow"),S(k)}function S(k){return k===124?(e.enter("tableCellDivider"),e.consume(k),e.exit("tableCellDivider"),S):k===null||dn(k)?(e.exit("tableRow"),t(k)):Dt(k)?ft(e,S,"whitespace")(k):(e.enter("data"),T(k))}function T(k){return k===null||k===124||$e(k)?(e.exit("data"),S(k)):(e.consume(k),k===92?L:T)}function L(k){return k===92||k===124?(e.consume(k),T):T(k)}}function O1(e,t){let n=-1,s=!0,r=0,o=[0,0,0,0],a=[0,0,0,0],l=!1,c=0,u,h,d;const f=new R1;for(;++n<e.length;){const g=e[n],m=g[1];g[0]==="enter"?m.type==="tableHead"?(l=!1,c!==0&&(Ll(f,t,c,u,h),h=void 0,c=0),u={type:"table",start:Object.assign({},m.start),end:Object.assign({},m.end)},f.add(n,0,[["enter",u,t]])):m.type==="tableRow"||m.type==="tableDelimiterRow"?(s=!0,d=void 0,o=[0,0,0,0],a=[0,n+1,0,0],l&&(l=!1,h={type:"tableBody",start:Object.assign({},m.start),end:Object.assign({},m.end)},f.add(n,0,[["enter",h,t]])),r=m.type==="tableDelimiterRow"?2:h?3:1):r&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")?(s=!1,a[2]===0&&(o[1]!==0&&(a[0]=a[1],d=es(f,t,o,r,void 0,d),o=[0,0,0,0]),a[2]=n)):m.type==="tableCellDivider"&&(s?s=!1:(o[1]!==0&&(a[0]=a[1],d=es(f,t,o,r,void 0,d)),o=a,a=[o[1],n,0,0])):m.type==="tableHead"?(l=!0,c=n):m.type==="tableRow"||m.type==="tableDelimiterRow"?(c=n,o[1]!==0?(a[0]=a[1],d=es(f,t,o,r,n,d)):a[1]!==0&&(d=es(f,t,a,r,n,d)),r=0):r&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")&&(a[3]=n)}for(c!==0&&Ll(f,t,c,u,h),f.consume(t.events),n=-1;++n<t.events.length;){const g=t.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=D1(t.events,n))}return e}function es(e,t,n,s,r,o){const a=s===1?"tableHeader":s===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(o.end=Object.assign({},Nt(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const c=Nt(t.events,n[1]);if(o={type:a,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const u=Nt(t.events,n[2]),h=Nt(t.events,n[3]),d={type:l,start:Object.assign({},u),end:Object.assign({},h)};if(e.add(n[2],0,[["enter",d,t]]),s!==2){const f=t.events[n[2]],g=t.events[n[3]];if(f[1].end=Object.assign({},g[1].end),f[1].type="chunkText",f[1].contentType="text",n[3]>n[2]+1){const m=n[2]+1,y=n[3]-n[2]-1;e.add(m,y,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return r!==void 0&&(o.end=Object.assign({},Nt(t.events,r)),e.add(r,0,[["exit",o,t]]),o=void 0),o}function Ll(e,t,n,s,r){const o=[],a=Nt(t.events,n);r&&(r.end=Object.assign({},a),o.push(["exit",r,t])),s.end=Object.assign({},a),o.push(["exit",s,t]),e.add(n+1,0,o)}function Nt(e,t){const n=e[t],s=n[0]==="enter"?"start":"end";return n[1][s]}const F1={name:"tasklistCheck",tokenize:z1};function V1(){return{text:{91:F1}}}function z1(e,t,n){const s=this;return r;function r(c){return s.previous!==null||!s._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),o)}function o(c){return $e(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),a):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),a):n(c)}function a(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return dn(c)?t(c):Dt(c)?e.check({tokenize:U1},t,n)(c):n(c)}}function U1(e,t,n){return ft(e,s,"whitespace");function s(r){return r===null?n(r):t(r)}}function G1(e){return ff([p1(),k1(),M1(e),N1(),V1()])}const W1={};function K1(e){const t=this,n=e||W1,s=t.data(),r=s.micromarkExtensions||(s.micromarkExtensions=[]),o=s.fromMarkdownExtensions||(s.fromMarkdownExtensions=[]),a=s.toMarkdownExtensions||(s.toMarkdownExtensions=[]);r.push(G1(n)),o.push(d1()),a.push(h1(n))}const Ml=6e4;function q1(e){return typeof e=="object"&&e!==null&&"base64String"in e&&"format"in e&&typeof e.base64String=="string"&&typeof e.format=="string"}function H1({message:e,isOwnMessage:t,isTransparent:n,currentGameBoardSize:s=40,room:r}){const{t:o,i18n:a}=F(),[l,c]=p.useState(!1),[u,h]=p.useState(null),d=p.useCallback(()=>{c(!1)},[]),f=p.useCallback(R=>{h(R.currentTarget)},[]),g=p.useCallback(()=>{h(null)},[]),{id:m,displayName:y,text:b,uid:v,timestamp:_,type:x}=e;let w,j,C;if(x==="settings"||x==="room"){const R=e;w=R.boardSize,j=R.gameBoardId}x==="media"&&(C=e.image);const S=x==="settings"&&w===s,T=p.useMemo(()=>{const R=Tr(_);if(!R)return"";const V=new Date(Math.floor(R.getTime()/Ml)*Ml),O=a.resolvedLanguage||a.language,M=Ex(V,O);let $=M.fromNow();return Math.abs(M.diff(mt(),"seconds"))<30&&($=M.subtract(1,"minute").fromNow()),$},[_,a.language,a.resolvedLanguage]),L=p.useMemo(()=>x!=="media"?!1:q1(C)?`data:image/${C.format};base64,${C.base64String}`:typeof C=="string"&&C?C:typeof b=="string"&&b&&b.startsWith("http")?b:!1,[x,C,b]),k=p.useMemo(()=>x==="actions"||!b||b.trim()===""?null:i.jsx(mf,{remarkPlugins:[K1,zj],children:b}),[b,x]),I=p.useMemo(()=>Mj(x,b,o),[x,b,o]),N=x==="settings"||x==="room",D=p.useMemo(()=>N?Rj(y,I):!1,[N,y,I]);return N?i.jsxs("li",{className:En("message","system-message",n&&"transparent",D&&"full-width"),"data-testid":`message-${m}`,children:[i.jsxs(A,{component:"div",sx:{display:"flex",alignItems:"center",gap:.5},children:[i.jsx(A,{component:"span",sx:{display:"flex",alignItems:"center",color:"text.secondary"},children:x==="settings"?i.jsx(Bs,{fontSize:"small"}):i.jsx(Um,{fontSize:"small"})}),i.jsxs(A,{sx:{flex:1,minWidth:0,ml:.5},children:[i.jsxs(P,{variant:"body2",component:"span",sx:{lineHeight:1.2},children:[i.jsx("strong",{children:y})," ",I]}),i.jsx(P,{variant:"caption",sx:{display:"block",opacity:.7,fontSize:"0.65rem",mt:.25},children:T})]}),i.jsx(Z,{size:"small",onClick:f,"aria-label":"View details","data-testid":`details-button-${m}`,children:i.jsx(Gm,{fontSize:"small"})})]}),i.jsx(Hl,{open:!!u,anchorEl:u,onClose:g,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},"data-testid":`details-popover-${m}`,children:i.jsxs(A,{className:"system-details-popover",children:[i.jsx("div",{className:"system-details-content",children:k}),x==="settings"&&i.jsx(A,{className:"system-action-buttons",children:S?i.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",gap:1,children:[i.jsx(z,{component:pf,to:`?importBoard=${j}`,variant:"contained",size:"small",color:"primary",children:i.jsx(E,{i18nKey:"importBoard"})}),i.jsx(Mn,{text:`${window.location.href}?importBoard=${j}`,copiedText:o("copiedLink"),icon:i.jsx(js,{})})]}):i.jsx(P,{variant:"body2",color:"text.secondary",children:i.jsx(E,{i18nKey:"incompatibleBoard"})})}),x==="room"&&i.jsx(A,{className:"system-action-buttons",children:i.jsxs(A,{display:"flex",justifyContent:"space-between",alignItems:"center",gap:1,children:[i.jsxs(P,{variant:"body2",children:[o("room"),": ",i.jsx("strong",{children:r})]}),i.jsx(Mn,{text:window.location.href,copiedText:o("copiedLink"),icon:i.jsx(js,{})})]})})]})})]}):i.jsxs("li",{className:En("message",t&&"own-message",n&&"transparent"),"data-testid":`message-${m}`,children:[i.jsxs("div",{className:"message-header",children:[i.jsxs("div",{className:"sender",children:[i.jsx(Gs,{uid:v,displayName:y,size:"small"}),i.jsx("span",{className:"sender-name",children:y}),i.jsx(te,{label:T,size:"small",variant:"outlined",className:"timestamp-chip"})]}),i.jsx("div",{className:"message-actions",children:!!t&&["media","chat"].includes(x)&&m&&i.jsx(Nj,{room:r,id:m})})]}),i.jsxs("div",{className:"message-message",children:[x==="actions"?i.jsx(Dj,{text:b}):k,!!L&&i.jsx("img",{src:L,alt:"uploaded by user"}),b.includes(o("finish"))&&t&&i.jsxs(A,{textAlign:"center",className:"message-action-box",children:[i.jsx(z,{onClick:()=>c(!0),variant:"outlined",size:"small",children:i.jsx(P,{children:o("playAgain")})}),i.jsx(ru,{isOpen:l,close:d})]})]})]})}function Y1({count:e=3}){return i.jsx(i.Fragment,{children:Array.from({length:e},(t,n)=>i.jsxs("li",{style:{padding:"16px",listStyle:"none"},children:[i.jsxs(A,{display:"flex",alignItems:"center",gap:1,mb:1,children:[i.jsx(cn,{variant:"circular",width:32,height:32}),i.jsx(cn,{variant:"text",width:120,height:20}),i.jsx(A,{flexGrow:1}),i.jsx(cn,{variant:"text",width:80,height:16})]}),i.jsx(ce,{sx:{mb:1}}),i.jsxs(A,{ml:5,children:[i.jsx(cn,{variant:"text",width:"90%",height:20}),i.jsx(cn,{variant:"text",width:"70%",height:20})]})]},`skeleton-${n}`))})}function X1({room:e,isTransparent:t,currentGameBoardSize:n=40}){const s=p.useRef(null),{user:r}=De(),{messages:o,isLoading:a}=Mt();Ej(r,o,a);const[l,c]=p.useState(0),[u,h]=p.useState(null),{t:d}=F(),f=p.useMemo(()=>o.filter(_=>l===1?["settings","room"].includes(_.type):l===2?["chat","media"].includes(_.type):l===3?_.type==="actions":!0),[o,l]),g=p.useRef(null);p.useEffect(()=>{const _=o[o.length-1],x=(_==null?void 0:_.id)||null;if(x&&x!==g.current&&(g.current=x,s.current)){const w=()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)};w(),requestAnimationFrame(w),setTimeout(w,10)}},[o.length,o]);const m=p.useCallback(_=>{h(_.currentTarget)},[]),y=p.useCallback(()=>{h(null)},[]),b=p.useCallback(_=>{c(_),h(null)},[]),v=[{label:d("all"),value:0},{label:d("setting"),value:1},{label:d("chat"),value:2},{label:d("actions"),value:3}];return i.jsxs("div",{className:"message-list-container",children:[i.jsx("div",{className:"message-list-scroll transparent-scrollbar",ref:s,children:i.jsx("div",{className:"message-list-scroll-content",children:i.jsx("ul",{className:"message-list",children:a&&f.length===0?i.jsx(Y1,{count:5}):f.map(_=>{const x=_.uid===r.uid;return i.jsx(H1,{message:_,isOwnMessage:x,isTransparent:t,currentGameBoardSize:n,room:e},_.id)})})})}),i.jsx("div",{className:"message-filter-header",children:i.jsx(ql,{size:"medium",color:"primary","aria-label":"filter messages",onClick:m,className:"message-filter-fab",sx:{transform:"scale(0.8)"},children:i.jsx(Wm,{})})}),i.jsx(gs,{anchorEl:u,open:!!u,onClose:y,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{style:{maxHeight:"200px",minWidth:"120px"}}},children:v.map(_=>i.jsxs(W,{onClick:()=>b(_.value),selected:l===_.value,children:[i.jsx(We,{children:l===_.value&&i.jsx(Km,{})}),i.jsx(Ae,{primary:_.label})]},_.value))})]})}function J1({title:e,description:t,players:n,current:s,isTransparent:r,className:o,index:a}){const l=p.useMemo(()=>n.map(h=>i.jsx(Gs,{displayName:h.displayName||"",uid:h.uid||""},h.uid)),[n]),c=p.useRef(null),u=[s&&"pulse-animation",r&&"gray-tiles",o].filter(h=>typeof h=="string"&&h.trim().length>0).map(h=>h.trim()).join(" ");return i.jsxs("li",{className:u,ref:c,"data-tile-index":a,children:[i.jsxs("div",{className:"tile-title-row",children:[i.jsx("div",{className:`tile-title ${r&&"pop-text"}`,children:e}),i.jsx("div",{className:"player-indicator",children:i.jsx(gf,{max:4,children:l})})]}),i.jsx(ce,{sx:{margin:"0.5rem 0"}}),i.jsx("div",{className:`tile-description ${r&&"pop-text"}`,children:t})]})}const Z1=({id:e,displayName:t,isCurrent:n,flipData:s,onAnimationComplete:r,onAnimationProgress:o})=>{const a=ur(s.from.x),l=ur(s.from.y),c=mj(a,[s.from.x,s.to.x],[1,n?1.15:1.05]),u=s.from.x,h=s.from.y,d=s.to.x,f=s.to.y,g=d-u,m=f-h,y=g*g+m*m,b=Math.atan2(s.to.y-s.from.y,s.to.x-s.from.x);return i.jsxs(Gt.div,{className:`animated-token ${n?"current-player":"other-player"}`,initial:{x:s.from.x,y:s.from.y,scale:1,opacity:1},animate:{x:s.to.x,y:s.to.y,scale:n?1.15:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:s.duration/1e3,ease:"easeInOut"},onUpdate:v=>{if(!o)return;const _=typeof v.x=="number"?v.x:parseFloat(String(v.x)),x=typeof v.y=="number"?v.y:parseFloat(String(v.y));let w=1;y>0&&(w=((_-u)*g+(x-h)*m)/y,w=Math.max(0,Math.min(1,w))),o(e,w,x)},onAnimationComplete:()=>{r==null||r()},style:{x:a,y:l,position:"absolute",zIndex:1e3,pointerEvents:"none",willChange:"transform"},children:[n&&i.jsx(Gt.div,{className:"token-glow",initial:{opacity:.6},animate:{opacity:[.6,1,.6]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",top:-4,left:-4,right:-4,bottom:-4,borderRadius:"50%",background:"radial-gradient(circle, rgba(34, 211, 238, 0.6) 0%, transparent 70%)",filter:"blur(4px)",zIndex:-1}}),i.jsx(Gt.div,{style:{scale:c,filter:n?"drop-shadow(0 0 8px rgba(34, 211, 238, 0.8))":"drop-shadow(0 2px 4px rgba(0,0,0,0.3))",borderRadius:"50%",border:n?"2px solid rgba(34, 211, 238, 0.9)":"none"},children:i.jsx(Gs,{uid:e,displayName:t,size:"medium"})}),i.jsx(Gt.div,{className:"flight-trail",initial:{opacity:0,scaleX:0},animate:{opacity:[0,.6,0],scaleX:[0,1,0]},transition:{duration:s.duration/1e3,ease:"easeInOut"},style:{position:"absolute",top:"50%",left:"50%","--trail-distance":`${s.distance}px`,height:2,background:n?"linear-gradient(90deg, transparent, rgba(34, 211, 238, 0.6), transparent)":"linear-gradient(90deg, transparent, rgba(148, 163, 184, 0.4), transparent)",transformOrigin:"left center",transform:`translate(-50%, -50%) rotate(${b}rad)`,zIndex:-2,pointerEvents:"none"}})]})};var Q1=Object.defineProperty,eS=(e,t,n)=>t in e?Q1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ts=(e,t,n)=>eS(e,typeof t!="symbol"?t+"":t,n);class tS{constructor(t,n={}){ts(this,"gameBoard"),ts(this,"options"),ts(this,"cache",new Map),ts(this,"disposed",!1),this.gameBoard=t,this.options={baseDuration:800,maxDuration:1200,minDuration:400,easing:"cubic-bezier(0.4, 0, 0.2, 1)",...n}}calculateFLIPPositions(t,n){if(this.disposed)return null;try{const s=this.getTileElement(t),r=this.getTileElement(n);if(!s||!r)return null;const o=this.gameBoard.querySelector("ol"),a=o?o.getBoundingClientRect():this.gameBoard.getBoundingClientRect(),l=this.getRelativeRect(s,a),c=this.getRelativeRect(r,a),u=this.calculateAvatarPosition(l),h=this.calculateAvatarPosition(c),d=Math.sqrt(Math.pow(h.x-u.x,2)+Math.pow(h.y-u.y,2)),f=this.calculateDuration(d);return{from:{x:u.x,y:u.y,width:40,height:40},to:{x:h.x,y:h.y,width:40,height:40},distance:d,duration:f}}catch(s){return null}}getTileElement(t){return this.gameBoard.querySelectorAll("li")[t]||null}getRelativeRect(t,n){const s=t.getBoundingClientRect();return{x:s.x-n.x,y:s.y-n.y,width:s.width,height:s.height,top:s.top-n.top,right:s.right-n.left,bottom:s.bottom-n.top,left:s.left-n.left,toJSON:s.toJSON}}calculateAvatarPosition(t){return{x:t.x+t.width-8-20,y:t.y+8+20}}calculateDuration(t){const n=this.options.baseDuration,s=Math.min(t/500,2),r=n*(.5+s*.5);return Math.max(this.options.minDuration,Math.min(this.options.maxDuration,r))}getPerformanceInfo(){return{isMobile:window.innerWidth<=768,hasReducedMotion:window.matchMedia("(prefers-reduced-motion: reduce)").matches,devicePixelRatio:window.devicePixelRatio||1,containerSize:this.gameBoard.getBoundingClientRect()}}clearCache(){this.cache.clear()}dispose(){this.disposed=!0,this.cache.clear()}isDisposed(){return this.disposed}}function nS(){const[e,t]=p.useState([]),n=p.useCallback(a=>{t(l=>[...l.filter(u=>u.id!==a.id),a])},[]),s=p.useCallback(a=>{t(l=>l.filter(c=>c.id!==a))},[]),r=p.useCallback(()=>{t([])},[]),o=p.useCallback(a=>e.some(l=>l.id===a),[e]);return{animatingTokens:e,addAnimatingToken:n,removeAnimatingToken:s,clearAllTokens:r,isTokenAnimating:o}}const hh=p.forwardRef(({gameBoard:e,onAnimationComplete:t,onAnimationStart:n,onAnimationProgress:s},r)=>{const o=p.useRef(null),a=p.useRef(null),{animatingTokens:l,addAnimatingToken:c,removeAnimatingToken:u,clearAllTokens:h}=nS();return p.useEffect(()=>{var d,f;if(!e){(d=a.current)==null||d.dispose(),a.current=null;return}return(f=a.current)==null||f.dispose(),a.current=new tS(e),()=>{var g;(g=a.current)==null||g.dispose(),a.current=null}},[e]),p.useImperativeHandle(r,()=>({animateTokenMovement:async d=>{if(!a.current)return;const{playerId:f,displayName:g,fromTile:m,toTile:y,isCurrent:b}=d;try{n==null||n(f);const v=a.current.calculateFLIPPositions(m,y);if(!v)return;const _={id:f,displayName:g,fromTile:m,toTile:y,isCurrent:b||!1,flipData:v,startTime:Date.now(),onAnimationProgress:s};c(_)}catch(v){u(f)}},isAnimating:()=>l.length>0,cancelAllAnimations:()=>{h()}}),[l.length,c,u,h,n,s]),p.useEffect(()=>()=>{a.current&&a.current.dispose()},[]),i.jsx("div",{ref:o,className:"token-animation-layer","aria-hidden":"true",role:"presentation",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1e3,overflow:"hidden"},children:i.jsx(Qu,{mode:"wait",children:l.map(d=>i.jsx(Z1,{id:d.id,displayName:d.displayName,isCurrent:d.isCurrent,flipData:d.flipData,onAnimationComplete:()=>{u(d.id),t==null||t(d.id)},onAnimationProgress:d.onAnimationProgress},d.id))})})});hh.displayName="TokenAnimationLayer";function sS({playerList:e,isTransparent:t,gameBoard:n,settings:s}){const{user:r}=De(),o=p.useRef(null),a=p.useRef(null),[l,c]=p.useState(null),u=p.useRef(new Map),h=p.useRef(null),d=p.useRef(null),f=p.useCallback(()=>{a.current&&e.forEach(x=>{var w;const j=x.location||0,C=u.current.get(x.uid);if(C!==void 0&&C!==j){x.isSelf&&(h.current={playerId:x.uid,targetTile:j}),d.current={playerId:x.uid,targetTile:j};const S={playerId:x.uid,displayName:x.displayName,fromTile:C,toTile:j,isCurrent:x.isSelf||!1};(w=a.current)==null||w.animateTokenMovement(S)}u.current.set(x.uid,j)})},[e]);p.useEffect(()=>{f()},[f]);const g=p.useCallback(x=>{},[]),m=p.useCallback(x=>{var w,j;((w=h.current)==null?void 0:w.playerId)===x&&(h.current=null),((j=d.current)==null?void 0:j.playerId)===x&&(d.current=null)},[]),y=p.useCallback((x,w,j)=>{var C,S;if(((C=h.current)==null?void 0:C.playerId)!==x)return;const T=h.current.targetTile,L=(S=o.current)==null?void 0:S.querySelector(`[data-tile-index="${T}"]`);if(!L||!o.current)return;const k=L.getBoundingClientRect(),I=o.current.getBoundingClientRect(),N=o.current.scrollTop+(k.top-I.top)-I.height/2+k.height/2,D=o.current.scrollTop,R=D+(N-D)*w;try{/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||window.innerWidth<=768?(o.current.scrollTop=R,o.current.getBoundingClientRect()):o.current.scrollTo({top:R,behavior:"auto"})}catch(V){o.current&&(o.current.scrollTop=R)}},[]);if(!Array.isArray(n)||!n.length)return null;const b=[];e&&Array.isArray(e)&&e.forEach(w=>{Bi(w)&&b.push({id:w.localId,name:w.displayName,role:w.role,order:w.order,isActive:w.isSelf,deviceId:"local-device",location:w.location,isFinished:w.isFinished})});const v=new Set;n.forEach(({title:x},w)=>{x&&w!==0&&w!==n.length-1&&v.add(x)});const _=n.map((x,w)=>{var j,C,S;const T=e.filter(V=>V.location===w),L=((j=d.current)==null?void 0:j.targetTile)===w,k=(C=d.current)==null?void 0:C.playerId,I=L&&k?e.find(V=>V.uid===k)||null:w>0&&(S=T.find(V=>V.isSelf))!=null?S:null,N=Array.from(v).indexOf(x.title)%10+1,D=!s.hideBoardActions||w===0||I?Vd(x.description||"",s.role||"sub",(r==null?void 0:r.displayName)||"",b.length>0?b:void 0,!0):(x.description||"").replace(/[^\w\s]/g,"").replace(/[a-zA-Z0-9]/g,"?"),R={title:x.title,description:x.description,players:T.map(V=>({...V,isSelf:V.isSelf||!1,isFinished:!1})),current:I?{...I,isSelf:I.isSelf||!1,isFinished:!1}:null,isTransparent:t,className:`hue${N}`};return i.jsx(J1,{title:`#${w+1}: ${x.title}`,description:D,players:R.players,current:R.current,isTransparent:R.isTransparent,className:R.className},w)});return i.jsx("div",{ref:x=>{o.current=x,c(x)},className:"gameboard transparent-scrollbar",style:{position:"relative"},children:i.jsxs("div",{style:{position:"relative"},children:[i.jsx("ol",{children:_}),i.jsx(hh,{ref:a,gameBoard:l,onAnimationStart:g,onAnimationComplete:m,onAnimationProgress:y})]})})}function iS(){var e,t;const n=Le(),s=n.id||"",r=Ie(),{t:o}=F(),[a,l]=Me();Sj(s);const[c,u]=p.useState({value:0,time:0}),{localPlayers:h,sessionSettings:d,currentPlayerIndex:f}=rn(),[g,m]=p.useState(!1),[y,b]=p.useState(""),v=p.useRef(f),_=(e=Je($s))==null?void 0:e.tiles,x=p.useCallback(me=>{u({value:me,time:Date.now()})},[]);p.useEffect(()=>{if(!h.length||!d)return;const me=f!=null?f:0,Ne=v.current;if(me!==Ne&&Ne!==void 0){const Te=h[me];if(Te&&(d.showTurnTransitions&&(b(Te.name),m(!0)),d.enableTurnSounds&&Te.sound)){const se=Uc(Te.sound);se&&zc(se).catch(nt=>{console.warn("Failed to play turn sound:",nt)})}}v.current=me},[f,h,d]);const w=p.useCallback(()=>{m(!1)},[]),{playerList:j,tile:C}=jj(s,c,_),S=Zc(),{roller:T}=Cj(s,_),[L,k,I]=Tj(a,l);if((!_||!_.length||!Object.keys(a).length||Q(s)&&!Se(a.gameMode))&&!I)return i.jsxs(i.Fragment,{children:[i.jsx(as,{room:n.id,playerList:j}),i.jsx(Jc,{open:!0})]});if(I)return i.jsxs(i.Fragment,{children:[i.jsx(as,{room:n.id,playerList:j}),i.jsx(A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:i.jsx(Ee,{size:48})})]});const{isVideo:N,url:D}=nx(a,s),R=N?"video-adjust":"",O=D&&(N||!N&&D)?"":"default-room-background",{background:M,roomBackground:$}=a,G=M==="useRoomBackground"?$||null:M||null,U=G!=="color",H=!!(G&&!["color","gray"].includes(G)),X=i.jsx(sS,{playerList:S,isTransparent:U,gameBoard:_||[],settings:a}),ye=i.jsxs("div",{className:"messages-container",children:[i.jsx(X1,{room:s,isTransparent:H,currentGameBoardSize:(_==null?void 0:_.length)||0}),i.jsx(vx,{room:s,isTransparent:H})]});return i.jsxs(i.Fragment,{children:[i.jsx(as,{room:s,playerList:S}),i.jsx(yj,{setRollValue:x,dice:T,isEndOfBoard:(C==null?void 0:C.index)!==void 0&&C.index>=((t=_==null?void 0:_.length)!=null?t:0)-1}),i.jsx(Oi,{isVideo:N,url:D}),i.jsx(xj,{playerName:y,show:g,onComplete:w,duration:2e3}),r?i.jsx(Aj,{tab1:X,tab2:ye}):i.jsxs(A,{className:En("desktop-container",R,O),children:[X,ye]}),i.jsx(Lx,{}),i.jsx(gt,{type:L===o("updated")?"success":"error",open:!!L,close:k,children:L})]})}function Rl({children:e}){const{id:t}=Le(),n=Wl(),s=vf();return p.useEffect(()=>{if(t&&t!==t.toUpperCase()){const r=s.pathname.replace(t,t.toUpperCase());n(r+s.search+s.hash,{replace:!0})}},[t,n,s]),i.jsx(i.Fragment,{children:e})}function rS(){const e=p.useContext(_r);if(p.useEffect(()=>(e&&(window.authContext=e),()=>{window.authContext=null}),[e]),!e||e.initializing)return i.jsx(Er,{});const t=e.user?i.jsx(iS,{}):i.jsx(_y,{});return i.jsxs(xf,{children:[i.jsx(Qs,{path:"/",element:i.jsx(bf,{replace:!0,to:"/PUBLIC"})}),i.jsx(Qs,{path:"/:id/cast",element:i.jsx(Rl,{children:i.jsx(Bo,{children:i.jsx(Oo,{children:i.jsx(ax,{})})})})}),i.jsx(Qs,{path:"/:id",element:i.jsx(Rl,{children:i.jsx(Bo,{children:i.jsx(Oo,{children:t})})})})]})}function oS(){return i.jsx(yf,{children:i.jsx(rS,{})})}function aS(){const e=p.useContext(_r);return!e||e.initializing?i.jsx(Er,{}):i.jsx(Qf,{children:i.jsx(oS,{})})}function lS(){return i.jsx(Zf,{children:i.jsx(aS,{})})}function cS(){const{initializing:e}=em();return e?i.jsx(Er,{}):i.jsx(lS,{})}const uS=["insertBefore","not a child of this node"],dS=["Importing a module script failed","Failed to resolve module specifier","Method not found","module script failed"],hS=dS.map(e=>e.toLowerCase());function hr(e){const t=typeof e=="string"?e.toLowerCase():"";if(!t)return!1;const[n,s]=uS,r=t.includes(n.toLowerCase()),o=t.includes(s.toLowerCase());return!!(r&&o||t.includes("failed to execute 'insertbefore'"))}function fS(e){const t=typeof e=="string"?e.toLowerCase():"";return t?hS.some(n=>t.includes(n)):!1}const ns={DOM_RECONCILIATION:"react_dom_insertion_error",MODULE_LOADING:"module_resolution_error",IOS_SAFARI_MODULE:"ios_safari_module_error",FIREFOX_MOBILE_AUTH:"firefox_mobile_auth_error"};function mS(){wf()===void 0&&jf({dsn:"https://648e7e08e36307ea3dea4554e1d41501@o4509823318818816.ingest.us.sentry.io/4509823321047040",environment:"production",debug:!1,integrations:[_f(),Sf({maskAllText:!1,blockAllMedia:!1})],tracesSampleRate:.2,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1,beforeSend(e){var t,n,s,r,o,a,l,c,u,h,d,f;const g=(navigator.userAgent||"").toLowerCase(),m=g.includes("firefox")&&(g.includes("mobile")||g.includes("tablet")),y=((s=(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0])==null?void 0:s.value)||e.message||"",b=y.toLowerCase();return b.includes("module script failed")&&(e.tags={...(r=e.tags)!=null?r:{},[ns.IOS_SAFARI_MODULE]:!0},(o=e.fingerprint)!=null&&o.length||(e.fingerprint=["ios-safari-module-loading-error"])),hr(y)?null:((b.includes("insertbefore")||b.includes("not a child of this node"))&&(e.tags={...(a=e.tags)!=null?a:{},[ns.DOM_RECONCILIATION]:!0},(l=e.fingerprint)!=null&&l.length||(e.fingerprint=["react-dom-insertion-error"])),fS(y)&&(e.tags={...(c=e.tags)!=null?c:{},[ns.MODULE_LOADING]:!0},(u=e.fingerprint)!=null&&u.length||(e.fingerprint=["module-resolution-error"])),m&&(e.tags={...(h=e.tags)!=null?h:{},firefox_mobile:!0},(b.includes("login")||b.includes("auth")||b.includes("firebase"))&&(e.tags={...(d=e.tags)!=null?d:{},[ns.FIREFOX_MOBILE_AUTH]:!0},(f=e.fingerprint)!=null&&f.length||(e.fingerprint=["firefox-mobile-auth-error"]))),e)}})}const pS=["development","test"].includes("production"),gS=()=>{const e=(t,n,s)=>{if(pS||t==="warn"||t==="error"){const r=console[t]||console.log;s?r(`[${t.toUpperCase()}] ${n}`,s):r(`[${t.toUpperCase()}] ${n}`)}};return{debug:(t,n)=>e("debug",t,n),info:(t,n)=>e("info",t,n),warn:(t,n)=>e("warn",t,n),error:(t,n)=>e("error",t,n)}},Vn=gS();function yS(e){if(!e)return"Unknown error occurred";if(e instanceof Error)return e.stack||e.message||e.toString();try{return JSON.stringify(e,null,2)}catch(t){return String(e)}}function xS({error:e,resetError:t}){const{t:n}=F(),s=p.useMemo(()=>{var r,o;if(!(typeof window!="undefined"))return ei("light");try{const c=(r=window.localStorage)==null?void 0:r.getItem("gameSettings");if(c){const u=JSON.parse(c),h=((o=u.state)==null?void 0:o.settings)||u.settings;if(h!=null&&h.themeMode)return ei(h.themeMode)}}catch(c){}const l=!!window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;return ei(l?"dark":"light")},[]);return i.jsx(kf,{theme:s,children:i.jsxs(A,{sx:{p:2.5,textAlign:"center"},children:[i.jsx("h2",{children:n("somethingWentWrong")}),i.jsx("p",{children:n("errorReportedToTeam")}),i.jsx("p",{children:n("errorPersistsCheckBack")}),i.jsxs(A,{component:"details",sx:{mt:1.25},children:[i.jsx(A,{component:"summary",sx:{cursor:"pointer"},children:n("errorDetails")}),i.jsx(A,{component:"pre",sx:{textAlign:"left",bgcolor:"action.hover",p:1.25,my:1.25,borderRadius:1,overflow:"auto"},children:yS(e)})]}),i.jsx(z,{variant:"contained",onClick:t,sx:{mt:1.25},children:n("tryAgain")})]})})}class bS extends Fe.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){const n=t instanceof Error?t.message:String(t!=null?t:"");return hr(n)?{hasError:!1,error:null}:{hasError:!0,error:t instanceof Error?t:new Error(n)}}componentDidCatch(t,n){const s=t.message||"";hr(s)||Cf(r=>{r.setTag("component_error_boundary",!0),r.setContext("errorInfo",{componentStack:n.componentStack}),Tf(t)})}render(){if(this.state.hasError&&this.state.error){const t=this.props.fallback;return i.jsx(t,{error:this.state.error,resetError:()=>this.setState({hasError:!1,error:null})})}return this.props.children}}var vS=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,r){s.__proto__=r}||function(s,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}})(),fh=function(e,t,n,s){function r(o){return o instanceof n?o:new n((function(a){a(o)}))}return new(n||(n=Promise))((function(o,a){function l(h){try{u(s.next(h))}catch(d){a(d)}}function c(h){try{u(s.throw(h))}catch(d){a(d)}}function u(h){h.done?o(h.value):r(h.value).then(l,c)}u((s=s.apply(e,t||[])).next())}))},mh=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,r,o,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(h){return c([u,h])}}function c(u){if(s)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(n=0)),n;)try{if(s=1,r&&(o=u[0]&2?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,r=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(h){u=[6,h],r=0}finally{s=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},$l=function(e,t,n){if(n||arguments.length===2)for(var s=0,r=t.length,o;s<r;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))},wS="ionicpwaelements",hs,ph,Re=!1,fr=!1,lt=function(e,t){return function(){}},jS=function(e,t){return function(){}},_S="{visibility:hidden}.hydrated{visibility:inherit}",Dl={},SS="http://www.w3.org/2000/svg",kS="http://www.w3.org/1999/xhtml",CS=function(e){return e!=null},To=function(e){return e=typeof e,e==="object"||e==="function"};function gh(e){var t,n,s;return(s=(n=(t=e.head)===null||t===void 0?void 0:t.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&s!==void 0?s:void 0}var TS=function(e,t){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];var r=null,o=!1,a=!1,l=[],c=function(d){for(var f=0;f<d.length;f++)r=d[f],Array.isArray(r)?c(r):r!=null&&typeof r!="boolean"&&((o=typeof e!="function"&&!To(r))&&(r=String(r)),o&&a?l[l.length-1].$text$+=r:l.push(o?mr(null,r):r),a=o)};if(c(n),t){var u=t.className||t.class;u&&(t.class=typeof u!="object"?u:Object.keys(u).filter((function(d){return u[d]})).join(" "))}var h=mr(e,null);return h.$attrs$=t,l.length>0&&(h.$children$=l),h},mr=function(e,t){var n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return n.$attrs$=null,n},AS={},PS=function(e){return e&&e.$tag$===AS},ES=function(e,t){return e!=null&&!To(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e},IS=function(e){return xt(e).$hostElement$},mk=function(e,t,n){var s=IS(e);return{emit:function(r){return yh(s,t,{bubbles:!0,composed:!0,cancelable:!0,detail:r})}}},yh=function(e,t,n){var s=ge.ce(t,n);return e.dispatchEvent(s),s},Nl=new WeakMap,LS=function(e,t,n){var s=Is.get(e);tk&&n?(s=s||new CSSStyleSheet,typeof s=="string"?s=t:s.replaceSync(t)):s=t,Is.set(e,s)},MS=function(e,t,n,s){var r,o=xh(t),a=Is.get(o);if(e=e.nodeType===11?e:Ke,a)if(typeof a=="string"){e=e.head||e;var l=Nl.get(e),c=void 0;if(l||Nl.set(e,l=new Set),!l.has(o)){{c=Ke.createElement("style"),c.innerHTML=a;var u=(r=ge.$nonce$)!==null&&r!==void 0?r:gh(Ke);u!=null&&c.setAttribute("nonce",u),e.insertBefore(c,e.querySelector("link"))}l&&l.add(o)}}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=$l($l([],e.adoptedStyleSheets,!0),[a],!1));return o},RS=function(e){var t=e.$cmpMeta$,n=e.$hostElement$,s=t.$flags$,r=lt("attachStyles",t.$tagName$),o=MS(n.shadowRoot?n.shadowRoot:n.getRootNode(),t);s&10&&(n["s-sc"]=o,n.classList.add(o+"-h")),r()},xh=function(e,t){return"sc-"+e.$tagName$},Bl=function(e,t,n,s,r,o){if(n!==s){var a=Fl(e,t),l=t.toLowerCase();if(t==="class"){var c=e.classList,u=Ol(n),h=Ol(s);c.remove.apply(c,u.filter((function(m){return m&&!h.includes(m)}))),c.add.apply(c,h.filter((function(m){return m&&!u.includes(m)})))}else if(t==="style"){for(var d in n)(!s||s[d]==null)&&(d.includes("-")?e.style.removeProperty(d):e.style[d]="");for(var d in s)(!n||s[d]!==n[d])&&(d.includes("-")?e.style.setProperty(d,s[d]):e.style[d]=s[d])}else if(t==="ref")s&&s(e);else if(!a&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):Fl(Js,l)?t=l.slice(2):t=l[2]+t.slice(3),n&&ge.rel(e,t,n,!1),s&&ge.ael(e,t,s,!1);else{var f=To(s);if((a||f&&s!==null)&&!r)try{if(e.tagName.includes("-"))e[t]=s;else{var g=s==null?"":s;t==="list"?a=!1:(n==null||e[t]!=g)&&(e[t]=g)}}catch(m){}s==null||s===!1?(s!==!1||e.getAttribute(t)==="")&&e.removeAttribute(t):(!a||o&4||r)&&!f&&(s=s===!0?"":s,e.setAttribute(t,s))}}},$S=/\s/,Ol=function(e){return e?e.split($S):[]},bh=function(e,t,n,s){var r=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||Dl,a=t.$attrs$||Dl;for(s in o)s in a||Bl(r,s,o[s],void 0,n,t.$flags$);for(s in a)Bl(r,s,o[s],a[s],n,t.$flags$)},Ao=function(e,t,n,s){var r=t.$children$[n],o=0,a,l;if(r.$text$!==null)a=r.$elm$=Ke.createTextNode(r.$text$);else{if(Re||(Re=r.$tag$==="svg"),a=r.$elm$=Ke.createElementNS(Re?SS:kS,r.$tag$),Re&&r.$tag$==="foreignObject"&&(Re=!1),bh(null,r,Re),CS(hs)&&a["s-si"]!==hs&&a.classList.add(a["s-si"]=hs),r.$children$)for(o=0;o<r.$children$.length;++o)l=Ao(e,r,o),l&&a.appendChild(l);r.$tag$==="svg"?Re=!1:a.tagName==="foreignObject"&&(Re=!0)}return a},vh=function(e,t,n,s,r,o){var a=e,l;for(a.shadowRoot&&a.tagName===ph&&(a=a.shadowRoot);r<=o;++r)s[r]&&(l=Ao(null,n,r),l&&(s[r].$elm$=l,a.insertBefore(l,t)))},wh=function(e,t,n){for(var s=t;s<=n;++s){var r=e[s];if(r){var o=r.$elm$;jh(r),o&&o.remove()}}},DS=function(e,t,n,s){for(var r=0,o=0,a=t.length-1,l=t[0],c=t[a],u=s.length-1,h=s[0],d=s[u],f;r<=a&&o<=u;)l==null?l=t[++r]:c==null?c=t[--a]:h==null?h=s[++o]:d==null?d=s[--u]:ss(l,h)?(mn(l,h),l=t[++r],h=s[++o]):ss(c,d)?(mn(c,d),c=t[--a],d=s[--u]):ss(l,d)?(mn(l,d),e.insertBefore(l.$elm$,c.$elm$.nextSibling),l=t[++r],d=s[--u]):ss(c,h)?(mn(c,h),e.insertBefore(c.$elm$,l.$elm$),c=t[--a],h=s[++o]):(f=Ao(t&&t[o],n,o),h=s[++o],f&&l.$elm$.parentNode.insertBefore(f,l.$elm$));r>a?vh(e,s[u+1]==null?null:s[u+1].$elm$,n,s,o,u):o>u&&wh(t,r,a)},ss=function(e,t){return e.$tag$===t.$tag$},mn=function(e,t){var n=t.$elm$=e.$elm$,s=e.$children$,r=t.$children$,o=t.$tag$,a=t.$text$;a===null?(Re=o==="svg"?!0:o==="foreignObject"?!1:Re,bh(e,t,Re),s!==null&&r!==null?DS(n,s,t,r):r!==null?(e.$text$!==null&&(n.textContent=""),vh(n,null,t,r,0,r.length-1)):s!==null&&wh(s,0,s.length-1),Re&&o==="svg"&&(Re=!1)):e.$text$!==a&&(n.data=a)},jh=function(e){e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(jh)},NS=function(e,t){var n=e.$hostElement$,s=e.$vnode$||mr(null,null),r=PS(t)?t:TS(null,null,t);ph=n.tagName,r.$tag$=null,r.$flags$|=4,e.$vnode$=r,r.$elm$=s.$elm$=n.shadowRoot||n,hs=n["s-sc"],mn(s,r)},_h=function(e,t){t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise((function(n){return e.$onRenderResolve$=n})))},Xs=function(e,t){if(e.$flags$|=16,e.$flags$&4){e.$flags$|=512;return}_h(e,e.$ancestorComponent$);var n=function(){return BS(e,t)};return sk(n)},BS=function(e,t){var n=lt("scheduleUpdate",e.$cmpMeta$.$tagName$),s=e.$lazyInstance$,r;return t&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map((function(o){var a=o[0],l=o[1];return Po(s,a,l)})),e.$queuedListeners$=void 0)),n(),OS(r,(function(){return VS(e,s,t)}))},OS=function(e,t){return FS(e)?e.then(t):t()},FS=function(e){return e instanceof Promise||e&&e.then&&typeof e.then=="function"},VS=function(e,t,n){return fh(void 0,void 0,void 0,(function(){var s,r,o,a,l,c,u;return mh(this,(function(h){return r=e.$hostElement$,o=lt("update",e.$cmpMeta$.$tagName$),a=r["s-rc"],n&&RS(e),l=lt("render",e.$cmpMeta$.$tagName$),zS(e,t),a&&(a.map((function(d){return d()})),r["s-rc"]=void 0),l(),o(),c=(s=r["s-p"])!==null&&s!==void 0?s:[],u=function(){return US(e)},c.length===0?u():(Promise.all(c).then(u),e.$flags$|=4,c.length=0),[2]}))}))},zS=function(e,t,n){try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,NS(e,t)}catch(s){Ge(s,e.$hostElement$)}return null},US=function(e){e.$cmpMeta$.$tagName$;var t=e.$hostElement$,n=lt(),s=e.$lazyInstance$,r=e.$ancestorComponent$;e.$flags$&64?n():(e.$flags$|=64,kh(t),Po(s,"componentDidLoad"),n(),e.$onReadyResolve$(t),r||Sh()),e.$onInstanceResolve$(t),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),e.$flags$&512&&Io((function(){return Xs(e,!1)})),e.$flags$&=-517},pk=function(e){{var t=xt(e),n=t.$hostElement$.isConnected;return n&&(t.$flags$&18)===2&&Xs(t,!1),n}},Sh=function(e){kh(Ke.documentElement),Io((function(){return yh(Js,"appload",{detail:{namespace:wS}})}))},Po=function(e,t,n){if(e&&e[t])try{return e[t](n)}catch(s){Ge(s)}},kh=function(e){return e.classList.add("hydrated")},GS=function(e,t){return xt(e).$instanceValues$.get(t)},WS=function(e,t,n,s){var r=xt(e),o=r.$instanceValues$.get(t),a=r.$flags$,l=r.$lazyInstance$;n=ES(n,s.$members$[t][0]);var c=Number.isNaN(o)&&Number.isNaN(n),u=n!==o&&!c;(!(a&8)||o===void 0)&&u&&(r.$instanceValues$.set(t,n),l&&(a&18)===2&&Xs(r,!1))},Ch=function(e,t,n){if(t.$members$){var s=Object.entries(t.$members$),r=e.prototype;if(s.map((function(a){var l=a[0],c=a[1][0];c&31||n&2&&c&32?Object.defineProperty(r,l,{get:function(){return GS(this,l)},set:function(u){WS(this,l,u,t)},configurable:!0,enumerable:!0}):n&1&&c&64&&Object.defineProperty(r,l,{value:function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];var d=xt(this);return d.$onInstancePromise$.then((function(){var f;return(f=d.$lazyInstance$)[l].apply(f,u)}))}})})),n&1){var o=new Map;r.attributeChangedCallback=function(a,l,c){var u=this;ge.jmp((function(){var h=o.get(a);if(u.hasOwnProperty(h))c=u[h],delete u[h];else if(r.hasOwnProperty(h)&&typeof u[h]=="number"&&u[h]==c)return;u[h]=c===null&&typeof u[h]=="boolean"?!1:c}))},e.observedAttributes=s.filter((function(a){a[0];var l=a[1];return l[0]&15})).map((function(a){var l=a[0],c=a[1],u=c[1]||l;return o.set(u,l),u}))}}return e},KS=function(e,t,n,s,r){return fh(void 0,void 0,void 0,(function(){var o,a,l,c,u,h,d;return mh(this,(function(f){switch(f.label){case 0:return(t.$flags$&32)!==0?[3,3]:(t.$flags$|=32,r=ek(n),r.then?(o=jS(),[4,r]):[3,2]);case 1:r=f.sent(),o(),f.label=2;case 2:r.isProxied||(Ch(r,n,2),r.isProxied=!0),a=lt("createInstance",n.$tagName$),t.$flags$|=8;try{new r(t)}catch(g){Ge(g)}t.$flags$&=-9,a(),r.style&&(l=r.style,c=xh(n),Is.has(c)||(u=lt("registerStyles",n.$tagName$),LS(c,l,!!(n.$flags$&1)),u())),f.label=3;case 3:return h=t.$ancestorComponent$,d=function(){return Xs(t,!0)},h&&h["s-rc"]?h["s-rc"].push(d):d(),[2]}}))}))},qS=function(e){if((ge.$flags$&1)===0){var t=xt(e),n=t.$cmpMeta$,s=lt("connectedCallback",n.$tagName$);if(t.$flags$&1)Th(e,t,n.$listeners$);else{t.$flags$|=1;for(var r=e;r=r.parentNode||r.host;)if(r["s-p"]){_h(t,t.$ancestorComponent$=r);break}n.$members$&&Object.entries(n.$members$).map((function(o){var a=o[0],l=o[1][0];if(l&31&&e.hasOwnProperty(a)){var c=e[a];delete e[a],e[a]=c}})),KS(e,t,n)}s()}},HS=function(e){if((ge.$flags$&1)===0){var t=xt(e),n=t.$lazyInstance$;t.$rmListeners$&&(t.$rmListeners$.map((function(s){return s()})),t.$rmListeners$=void 0),Po(n,"disconnectedCallback")}},YS=function(e,t){t===void 0&&(t={});var n,s=lt(),r=[],o=t.exclude||[],a=Js.customElements,l=Ke.head,c=l.querySelector("meta[charset]"),u=Ke.createElement("style"),h=[],d,f=!0;Object.assign(ge,t),ge.$resourcesUrl$=new URL(t.resourcesUrl||"./",Ke.baseURI).href,e.map((function(m){m[1].map((function(y){var b={$flags$:y[0],$tagName$:y[1],$members$:y[2],$listeners$:y[3]};b.$members$=y[2],b.$listeners$=y[3];var v=b.$tagName$,_=(function(x){vS(w,x);function w(j){var C=x.call(this,j)||this;return j=C,QS(j,b),b.$flags$&1&&j.attachShadow({mode:"open"}),C}return w.prototype.connectedCallback=function(){var j=this;d&&(clearTimeout(d),d=null),f?h.push(this):ge.jmp((function(){return qS(j)}))},w.prototype.disconnectedCallback=function(){var j=this;ge.jmp((function(){return HS(j)}))},w.prototype.componentOnReady=function(){return xt(this).$onReadyPromise$},w})(HTMLElement);b.$lazyBundleId$=m[0],!o.includes(v)&&!a.get(v)&&(r.push(v),a.define(v,Ch(_,b,1)))}))}));{u.innerHTML=r+_S,u.setAttribute("data-styles","");var g=(n=ge.$nonce$)!==null&&n!==void 0?n:gh(Ke);g!=null&&u.setAttribute("nonce",g),l.insertBefore(u,c?c.nextSibling:l.firstChild)}f=!1,h.length?h.map((function(m){return m.connectedCallback()})):ge.jmp((function(){return d=setTimeout(Sh,30)})),s()},Th=function(e,t,n,s){n&&n.map((function(r){var o=r[0],a=r[1],l=r[2],c=JS(e,o),u=XS(t,l),h=ZS(o);ge.ael(c,a,u,h),(t.$rmListeners$=t.$rmListeners$||[]).push((function(){return ge.rel(c,a,u,h)}))}))},XS=function(e,t){return function(n){try{e.$flags$&256?e.$lazyInstance$[t](n):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,n])}catch(s){Ge(s)}}},JS=function(e,t){return t&16?Ke.body:e},ZS=function(e){return(e&2)!==0},Eo=new WeakMap,xt=function(e){return Eo.get(e)},gk=function(e,t){return Eo.set(t.$lazyInstance$=e,t)},QS=function(e,t){var n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return n.$onInstancePromise$=new Promise((function(s){return n.$onInstanceResolve$=s})),n.$onReadyPromise$=new Promise((function(s){return n.$onReadyResolve$=s})),e["s-p"]=[],e["s-rc"]=[],Th(e,n,t.$listeners$),Eo.set(e,n)},Fl=function(e,t){return t in e},Ge=function(e,t){return(0,console.error)(e,t)},Ai=new Map,ek=function(e,t,n){var s=e.$tagName$.replace(/-/g,"_"),r=e.$lazyBundleId$,o=Ai.get(r);if(o)return o[s];{var a=function(l){return Ai.set(r,l),l[s]};switch(r){case"pwa-action-sheet":return ht(()=>import("../js/pwa-action-sheet.entry.js-C5gCw_UB.js"),__vite__mapDeps([6,1,2,3,0,4])).then(a,Ge);case"pwa-camera-modal":return ht(()=>import("../js/pwa-camera-modal.entry.js-CM6e-dVW.js"),__vite__mapDeps([7,1,2,3,0,4])).then(a,Ge);case"pwa-toast":return ht(()=>import("../js/pwa-toast.entry.js-VRjbOFcX.js"),__vite__mapDeps([8,1,2,3,0,4])).then(a,Ge);case"pwa-camera-modal-instance":return ht(()=>import("../js/pwa-camera-modal-instance.entry.js-CsPPsHxe.js"),__vite__mapDeps([9,1,2,3,0,4])).then(a,Ge);case"pwa-camera":return ht(()=>import("../js/pwa-camera.entry.js-YQ3YOhdW.js"),__vite__mapDeps([10,1,2,3,0,4])).then(a,Ge)}}return ht(()=>import("./".concat(r,".entry.js").concat("")),[]).then((function(l){return Ai.set(r,l),l[s]}),Ge)},Is=new Map,Js=typeof window!="undefined"?window:{},Ke=Js.document||{head:{}},ge={$flags$:0,$resourcesUrl$:"",jmp:function(e){return e()},raf:function(e){return requestAnimationFrame(e)},ael:function(e,t,n,s){return e.addEventListener(t,n,s)},rel:function(e,t,n,s){return e.removeEventListener(t,n,s)},ce:function(e,t){return new CustomEvent(e,t)}},Ah=function(e){return Promise.resolve(e)},tk=(function(){try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(e){}return!1})(),Vl=[],Ph=[],nk=function(e,t){return function(n){e.push(n),fr||(fr=!0,ge.$flags$&4?Io(pr):ge.raf(pr))}},zl=function(e){for(var t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){Ge(n)}e.length=0},pr=function(){zl(Vl),zl(Ph),(fr=Vl.length>0)&&ge.raf(pr)},Io=function(e){return Ah().then(e)},sk=nk(Ph),ik=function(){return Ah()},rk=function(e,t){return typeof window=="undefined"?Promise.resolve():ik().then((function(){return YS([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],hidePicker:[4,"hide-picker"],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[16,"keyup","handleBackdropKeyUp"]]]]]],t)}))};(function(){if(typeof window!="undefined"&&window.Reflect!==void 0&&window.customElements!==void 0){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}})();typeof window!="undefined"&&!window.importShim&&(window.addEventListener("error",function(e){const t=e.message||e.error&&e.error.message;if(t&&typeof t=="string"&&(t.includes("Importing a module script failed")||t.includes("Failed to resolve module specifier")||t.includes("Method not found"))&&(Vn.warn("Module loading/resolution issue detected:",{message:t,event:e}),!sessionStorage.getItem("module_reload_attempted"))){sessionStorage.setItem("module_reload_attempted","1"),setTimeout(()=>window.location.reload(),1e3),e.preventDefault();return}}),window.addEventListener("unhandledrejection",function(e){const t=e.reason;if(t&&t.message){const n=t.message;(n.includes("module script failed")||n.includes("Failed to resolve module specifier")||n.includes("Method not found"))&&(Vn.warn("Dynamic import/method resolution failed:",{message:n,reason:t}),e.preventDefault())}}));mS();const Ul=()=>{try{rk(window)}catch(e){Vn.warn("Failed to load PWA elements:",e)}},is=(e,t=!1)=>{const n=document.createElement("link");return n.rel="stylesheet",n.href=`https://fonts.googleapis.com/css2?family=Roboto:wght@${e.join(";")}&display=swap`,n.crossOrigin="anonymous",n.onerror=()=>{Vn.warn("Failed to load Roboto font weights:",{weights:e})},t?document.head.insertBefore(n,document.head.firstChild):document.head.appendChild(n),n};typeof window!="undefined"&&("requestIdleCallback"in window?window.requestIdleCallback(()=>{if(Ul(),is(["400","500"],!0),document.readyState==="complete"){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;(!e||e.effectiveType!=="slow-2g")&&is(["300","700"])}else window.addEventListener("load",()=>{const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;(!e||e.effectiveType!=="slow-2g")&&is(["300","700"])},{once:!0})},{timeout:500}):setTimeout(()=>{Ul(),is(["400","500"],!0)},100));const ok=()=>{const e=document.getElementById("instant-loading");e&&(e.style.transition="opacity 200ms ease-out",e.style.opacity="0",requestAnimationFrame(()=>{setTimeout(()=>{const t=document.getElementById("instant-loading");if(t&&t.parentNode&&t.parentNode.contains(t))try{t.parentNode.removeChild(t)}catch(n){Vn.warn("Failed to remove instant loading element:",n),t.style.display="none"}},250)}))},ak=Af.createRoot(document.getElementById("root"));ak.render(i.jsx(Fe.StrictMode,{children:i.jsx(bS,{fallback:xS,children:i.jsx(tm,{children:i.jsx(Fe.Suspense,{fallback:null,children:i.jsx(cS,{})})})})}));ok();export{AS as H,Rc as a,mk as c,pk as f,IS as g,TS as h,gk as r};
//# sourceMappingURL=index-o_3bxXCz.js.map
