const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Lkj3T3Gh.js","assets/mui-BMKXmDCw.js","assets/vendor-Bf6wU4zJ.js","assets/strings-DTYIG9gV.js","assets/translations-CairTNs2.js","assets/index-BDe15ZUQ.js","assets/firebase-C4LKcFbe.js","assets/index-BLb_hXVt.css","assets/index-pvQLKx4n.js","assets/index-BB-q-kK8.js","assets/urls-bwAPA7IR.js","assets/useActionList-BpRU5kQQ.js","assets/languages-KK0t13AM.js","assets/index-CignLajt.css","assets/index-DmZQA156.js","assets/index-0XjfPz8-.css","assets/index-dMnzdKrw.js","assets/index-DwbJp8YE.js","assets/index-D516uYFG.js"])))=>i.map(i=>d[i]);
import{a as t,b as F,u as N}from"./vendor-Bf6wU4zJ.js";import{S as G,A as q,j as V,r as $,k as J,_ as I}from"./index-BDe15ZUQ.js";import{E as H,a0 as U,j as e,k as T,a1 as Q,o as Y,q as X,p as Z,f as j,a2 as A,g as v,B as b,a3 as D,h as E,D as ee,a4 as se,a5 as te,a6 as ne,a7 as oe,a8 as ae,a9 as re,aa as ie,ab as le,ac as ce,ad as ue,ae as de,af as me,ag as ge,ah as xe,ai as he,aj as B,ak as pe,al as fe,l as R,am as je,an as we,w as Se,ao as ye,ap as Ce,aq as be,ar as O,as as ve,at as ke,au as Ie,av as Ae}from"./mui-BMKXmDCw.js";import{u as _,T as m}from"./translations-CairTNs2.js";import{i as Ee}from"./strings-DTYIG9gV.js";function z(s="sm"){const o=H();return U(o.breakpoints.down(s))}function _e(s,o){const a=localStorage.getItem(s);if(!a)return o;const r=JSON.parse(a);return typeof o=="object"&&Object.keys(o).length?{...o,...r}:r}function Ze(s,o={}){const a=`${s}Storage`,[r,i]=t.useState(()=>_e(s,o));t.useEffect(()=>{const l=g=>i(g.newValue);return window.addEventListener(a,l),()=>window.removeEventListener(a,l)},[a]);const c=t.useCallback(l=>{localStorage.setItem(s,JSON.stringify(l));const g=new Event(a);g.newValue=l,window.dispatchEvent(g)},[s,a]);return[r,c]}function Le(){const s=F.useContext(G);if(!s)throw new Error("ScheduleContext's value is undefined.");return s}const Te="/assets/blitzed-out-DGhYHOgx.png";function M(){const s=t.useContext(q);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}function De({close:s}){return e.jsx(T,{"aria-label":"close",onClick:s,sx:{position:"absolute",right:8,top:8},children:e.jsx(Q,{})})}function W({children:s,open:o,close:a=null,isMobile:r=null,title:i=null,isLoading:c=!1}){const l=r||z();return c?null:e.jsxs(Y,{fullScreen:l,open:o,maxWidth:"md",children:[e.jsxs(X,{children:[i,typeof a=="function"&&e.jsx(De,{close:a})]}),e.jsx(Z,{children:s})]})}function Pe({onSuccess:s,onSwitchToRegister:o,onSwitchToForgotPassword:a,isLinking:r=!1}){const{t:i}=_(),[c,l]=t.useState(""),[g,h]=t.useState(""),[x,u]=t.useState(""),[n,d]=t.useState(!1),y=async w=>{w.preventDefault(),u(""),d(!0);try{await V(c,g),s&&s()}catch(S){console.error("Login error:",S),u(S.message||"Failed to sign in")}finally{d(!1)}};return e.jsxs(j,{component:"form",onSubmit:y,sx:{mt:1},children:[x&&e.jsx(A,{severity:"error",sx:{mb:2},children:x}),e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:i("email"),name:"email",autoComplete:"email",autoFocus:!0,value:c,onChange:w=>l(w.target.value)}),e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:i("password"),type:"password",id:"password",autoComplete:"current-password",value:g,onChange:w=>h(w.target.value)}),e.jsx(b,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:n,children:n?e.jsx(D,{size:24}):r?e.jsx(m,{i18nKey:"linkAccount",children:"Link Account"}):e.jsx(m,{i18nKey:"signIn"})}),e.jsxs(E,{align:"center",children:[e.jsx(b,{onClick:o,variant:"text",children:e.jsx(m,{i18nKey:"needAccount"})})," | ",e.jsx(b,{onClick:a,variant:"text",children:e.jsx(m,{i18nKey:"forgotPassword"})})]})]})}function Oe({onSuccess:s,onSwitchToLogin:o,isAnonymous:a=!1}){const{t:r}=_(),[i,c]=t.useState(""),[l,g]=t.useState(""),[h,x]=t.useState(""),[u,n]=t.useState(""),[d,y]=t.useState(""),[w,S]=t.useState(!1),L=async f=>{if(f.preventDefault(),y(""),h!==u){y(r("passwordsDoNotMatch")||"Passwords do not match");return}S(!0);try{await $(l==null?void 0:l.trim(),h,i==null?void 0:i.trim()),s&&s()}catch(C){console.error("Registration error:",C),y(C.message||"Failed to create account")}finally{S(!1)}};return e.jsxs(j,{component:"form",onSubmit:L,sx:{mt:1},children:[d&&e.jsx(A,{severity:"error",sx:{mb:2},children:d}),e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,id:"displayName",label:r("displayName"),name:"displayName",autoComplete:"name",autoFocus:!0,value:i,onChange:f=>c(f.target.value)}),e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:r("email"),name:"email",autoComplete:"email",value:l,onChange:f=>g(f.target.value)}),e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:r("password"),type:"password",id:"password",autoComplete:"new-password",value:h,onChange:f=>x(f.target.value)}),e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:r("confirmPassword"),type:"password",id:"confirmPassword",autoComplete:"new-password",value:u,onChange:f=>n(f.target.value)}),e.jsx(b,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:w,children:w?e.jsx(D,{size:24}):a?e.jsx(m,{i18nKey:"linkAccount"}):e.jsx(m,{i18nKey:"createAccount"})}),e.jsx(E,{align:"center",children:e.jsx(b,{onClick:o,variant:"text",children:e.jsx(m,{i18nKey:"alreadyHaveAccount"})})})]})}function ze({onSuccess:s,isLinking:o=!1}){const[a,r]=t.useState(""),[i,c]=t.useState(!1),l=async()=>{r(""),c(!0);try{await J(),s&&s()}catch(g){r(g.message||"Failed to sign in with Google")}finally{c(!1)}};return e.jsxs(j,{sx:{mt:2,mb:2},children:[a&&e.jsx(A,{severity:"error",sx:{mb:2},children:a}),e.jsx(ee,{sx:{mb:2},children:e.jsx(E,{variant:"body2",color:"text.secondary",children:e.jsx(m,{i18nKey:"or",children:"OR"})})}),e.jsx(b,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(se,{}),onClick:l,disabled:i,sx:{mb:1},"aria-busy":i,"aria-live":"polite",children:i?e.jsx(D,{size:24}):o?e.jsx(m,{i18nKey:"linkWithGoogle",children:"Link with Google"}):e.jsx(m,{i18nKey:"signInWithGoogle",children:"Sign in with Google"})})]})}function Me({onToggleForm:s}){const[o,a]=t.useState(""),[r,i]=t.useState(""),[c,l]=t.useState(!1),[g,h]=t.useState(!1),{forgotPassword:x}=M(),u=async n=>{n.preventDefault(),i(""),l(!1),h(!0);try{await x(o),l(!0)}catch(d){i(d.message||"Failed to send reset email")}finally{h(!1)}};return e.jsxs(j,{component:"form",onSubmit:u,sx:{mt:1},children:[r&&e.jsx(A,{severity:"error",sx:{mb:2},children:r}),c&&e.jsx(A,{severity:"success",sx:{mb:2},children:e.jsx(m,{i18nKey:"resetEmailSent"})}),e.jsx(v,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:e.jsx(m,{i18nKey:"email"}),name:"email",autoComplete:"email",autoFocus:!0,value:o,onChange:n=>a(n.target.value)}),e.jsx(b,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:g,children:g?e.jsx(D,{size:24}):e.jsx(m,{i18nKey:"sendResetLink"})}),e.jsx(j,{sx:{textAlign:"center"},children:e.jsx(b,{variant:"text",onClick:()=>s("login"),children:e.jsx(m,{i18nKey:"backToLogin"})})})]})}function Ne({open:s,close:o,initialView:a="login"}){const[r,i]=t.useState(a),{isAnonymous:c}=M(),{t:l}=_(),g=()=>{switch(r){case"login":return l(c?"linkAccount":"signIn");case"register":return l("createAccount");case"reset":return l("resetPassword");default:return l("Authentication")}};return e.jsxs(W,{title:g(),open:s,close:o,children:[r==="login"&&e.jsxs(e.Fragment,{children:[e.jsx(Pe,{onSwitchToRegister:()=>i("register"),onSwitchToForgotPassword:()=>i("reset"),onSuccess:o,isLinking:c}),e.jsx(ze,{onSuccess:o,isLinking:c})]}),r==="reset"&&e.jsx(Me,{onToggleForm:i}),r==="register"&&e.jsx(Oe,{onSwitchToLogin:()=>i("login"),onSuccess:o,isAnonymous:c})]})}const Be=t.lazy(()=>I(()=>import("./index-Lkj3T3Gh.js").then(s=>s.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),Re=t.lazy(()=>I(()=>import("./index-DmZQA156.js"),__vite__mapDeps([14,1,2,4,5,6,7,3,15]))),We=t.lazy(()=>I(()=>import("./index-dMnzdKrw.js"),__vite__mapDeps([16,1,2,8,5,6,4,7,9,3]))),Ke=t.lazy(()=>I(()=>import("./index-DwbJp8YE.js"),__vite__mapDeps([17,1,2,9,4,5,6,7,10,3]))),Fe=t.lazy(()=>I(()=>import("./index-D516uYFG.js"),__vite__mapDeps([18,1,2,11,8,5,6,4,7,9,3])));function Ge(){const{id:s}=N(),{user:o,logout:a,isAnonymous:r}=M(),i=z(),{i18n:c}=_(),[l,g]=t.useState(!1),h=p=>g(p),[x,u]=t.useState({settings:!1,gameBoard:!1,about:!1,schedule:!1,customTiles:!1,linkAccount:!1}),n=(p,k)=>u({...x,[p]:k}),d=async()=>{await a(),h(!1)},y=p=>window.open(p,"_blank","noreferrer"),w=e.jsx(me,{children:e.jsx("path",{d:"M18.942 5.556a16.299 16.299 0 0 0-4.126-1.297c-.178.321-.385.754-.529 1.097a15.175 15.175 0 0 0-4.573 0 11.583 11.583 0 0 0-.535-1.097 16.274 16.274 0 0 0-4.129 1.3c-2.611 3.946-3.319 7.794-2.965 11.587a16.494 16.494 0 0 0 5.061 2.593 12.65 12.65 0 0 0 1.084-1.785 10.689 10.689 0 0 1-1.707-.831c.143-.106.283-.217.418-.331 3.291 1.539 6.866 1.539 10.118 0 .137.114.277.225.418.331-.541.326-1.114.606-1.71.832a12.52 12.52 0 0 0 1.084 1.785 16.46 16.46 0 0 0 5.064-2.595c.415-4.396-.709-8.209-2.973-11.589zM8.678 14.813c-.988 0-1.798-.922-1.798-2.045s.793-2.047 1.798-2.047 1.815.922 1.798 2.047c.001 1.123-.793 2.045-1.798 2.045zm6.644 0c-.988 0-1.798-.922-1.798-2.045s.793-2.047 1.798-2.047 1.815.922 1.798 2.047c0 1.123-.793 2.045-1.798 2.045z"})}),S=p=>{c.changeLanguage(p),localStorage.setItem("gameSettings",JSON.stringify({...JSON.parse(localStorage.getItem("gameSettings")||"{}"),locale:p}))},f=t.useMemo(()=>{const p=[{key:"gameBoard",title:e.jsx(m,{i18nKey:"gameBoards"}),icon:e.jsx(ge,{}),onClick:()=>n("gameBoard",!0)},{key:"customTiles",title:e.jsx(m,{i18nKey:"customTilesLabel"}),icon:e.jsx(xe,{}),onClick:()=>n("customTiles",!0)},{key:"cast",title:e.jsx(m,{i18nKey:"cast"}),icon:e.jsx(he,{}),onClick:()=>y(`/${s.toUpperCase()}/cast`)},{key:"schedule",title:e.jsx(m,{i18nKey:"schedule"}),icon:e.jsx(B,{}),onClick:()=>n("schedule",!0)},{key:"discord",title:"Discord",icon:w,onClick:()=>y("https://discord.gg/mSPBE2hFef")},{key:"about",title:e.jsx(m,{i18nKey:"about"}),icon:e.jsx(pe,{}),onClick:()=>n("about",!0)}];return o&&(p.unshift({key:"settings",title:e.jsx(m,{i18nKey:"settings"}),icon:e.jsx(te,{}),onClick:()=>n("settings",!0)}),r&&p.push({key:"linkAccount",title:e.jsx(m,{i18nKey:"linkAccount"}),icon:e.jsx(ne,{}),onClick:()=>n("linkAccount",!0)}),p.push({key:"logout",title:e.jsx(m,{i18nKey:"logout"}),icon:e.jsx(oe,{}),onClick:()=>d()})),p},[o,s,r]).map(({key:p,title:k,icon:P,onClick:K})=>e.jsx(ae,{disablePadding:!0,onClick:K,children:e.jsxs(re,{children:[e.jsx(ie,{children:P}),e.jsx(le,{primary:k})]})},p)),C=(p,k,P={})=>e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(p,{open:x[k],close:()=>n(k,!1),isMobile:i,...P})});return e.jsxs(e.Fragment,{children:[e.jsx(T,{onClick:()=>h(!0),"aria-label":"open menu",children:e.jsx(ce,{})}),e.jsx(ue,{anchor:"right",open:l,onClose:()=>h(!1),children:e.jsxs(j,{role:"presentation",onClick:()=>h(!1),sx:{width:250,display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(de,{sx:{flexGrow:1},children:f}),e.jsxs(j,{sx:{borderTop:"1px solid rgba(0, 0, 0, 0.12)",p:2,display:"flex",justifyContent:"center",gap:1},children:[e.jsx(j,{component:"span",onClick:()=>S("en"),sx:{cursor:"pointer",fontWeight:c.language==="en"?"bold":"normal",color:c.language==="en"?"primary.main":"inherit"},children:"English"}),e.jsx(j,{component:"span",children:"|"}),e.jsx(j,{component:"span",onClick:()=>S("fr"),sx:{cursor:"pointer",fontWeight:c.language==="fr"?"bold":"normal",color:c.language==="fr"?"primary.main":"inherit"},children:"Français"}),e.jsx(j,{component:"span",children:"|"}),e.jsx(j,{component:"span",onClick:()=>S("es"),sx:{cursor:"pointer",fontWeight:c.language==="es"?"bold":"normal",color:c.language==="es"?"primary.main":"inherit"},children:"Español"})]})]})}),x.settings&&C(Be,"settings"),x.about&&e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(W,{open:x.about,close:()=>n("about",!1),fullScreen:i,children:e.jsx(Re,{close:()=>n("about",!1),isMobile:i})})}),x.gameBoard&&C(We,"gameBoard"),x.schedule&&C(Ke,"schedule"),x.customTiles&&C(Fe,"customTiles"),x.linkAccount&&C(Ne,"linkAccount")]})}function qe({playerList:s,innerRef:o,...a}){return e.jsxs("div",{...a,ref:o,children:[e.jsx(fe,{color:"success",sx:{fontSize:8,marginRight:"0.2rem"}}),s.length]})}function Ve(){const[s,o]=t.useState(!1),[a,r]=t.useState(!1),[i,c]=t.useState(!1),{id:l}=N(),g="1227B8DE",h=()=>{if(!window.cast||!window.cast.framework)return console.log("Cast framework not available yet"),!1;try{console.log("Initializing Cast API");const u=window.cast.framework.CastContext.getInstance();return u.setOptions({receiverApplicationId:g,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}),u.addEventListener(window.cast.framework.CastContextEventType.SESSION_STATE_CHANGED,n=>{const d=n.sessionState;r(d===window.cast.framework.SessionState.SESSION_STARTED||d===window.cast.framework.SessionState.SESSION_RESUMED)}),o(!0),!0}catch(u){return console.error("Error initializing Cast API:",u),!1}};t.useEffect(()=>{if(window.__onGCastApiAvailable=function(n){console.log("Cast API available:",n),n&&(c(!0),h()&&console.log("Cast API initialized successfully"))},window.cast&&window.cast.framework)console.log("Cast API already loaded"),c(!0),h();else if(console.log("Loading Cast SDK script"),document.querySelector('script[src*="cast_sender.js"]'))console.log("Cast SDK script already exists in document");else{const d=document.createElement("script");d.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",d.async=!0,document.head.appendChild(d),console.log("Cast SDK script added to document")}const u=setInterval(()=>{window.cast&&window.cast.framework&&!s&&(console.log("Attempting to initialize Cast API"),h()&&clearInterval(u))},1e3);return()=>{if(clearInterval(u),window.cast&&window.cast.framework)try{const d=window.cast.framework.CastContext.getInstance().getCurrentSession();d&&d.endSession(!0)}catch(n){console.error("Error cleaning up cast session:",n)}}},[]);const x=()=>{if(!window.cast||!window.cast.framework){console.error("Cast framework not available");return}try{const u=window.cast.framework.CastContext.getInstance();if(a){const n=u.getCurrentSession();n&&n.endSession(!0)}else u.requestSession().then(n=>{const d=u.getCurrentSession();if(d){const y={type:"ROOM_INFO",roomId:l};d.sendMessage("urn:x-cast:com.blitzedout.cast",JSON.stringify(y)).then(()=>console.log("Message sent successfully")).catch(f=>console.error("Error sending message:",f));const w=`${window.location.origin}/cast/${l}`,S=new chrome.cast.media.MediaInfo(w,"text/html"),L=new chrome.cast.media.LoadRequest(S);d.loadMedia(L).then(()=>console.log("Media loaded successfully"),f=>console.error("Error loading media:",f))}},n=>console.error("Error starting cast session:",n))}catch(u){console.error("Error with cast operation:",u)}};return e.jsx(R,{title:a?"Stop Casting":"Cast to TV",children:e.jsx("span",{children:e.jsx(T,{color:a?"primary":"default",onClick:x,"aria-label":a?"Stop Casting":"Cast to TV",disabled:!i,children:a?e.jsx(je,{}):e.jsx(we,{})})})})}const $e=t.lazy(()=>I(()=>import("./index-DwbJp8YE.js"),__vite__mapDeps([17,1,2,9,4,5,6,7,10,3])));function es({room:s,playerList:o=[]}){const{t:a}=_(),[r,i]=t.useState(!1),[c,l]=t.useState(!1),{schedule:g}=Le(),{isMobile:h}=z(),x=()=>{i(!0),l(!0)},u=e.jsxs(e.Fragment,{children:[e.jsx(E,{variant:"h6",children:e.jsx(m,{i18nKey:"online"})}),e.jsx("ul",{children:o.map(n=>e.jsx("li",{children:e.jsx(E,{variant:"body1",children:n.displayName})},n.uid))})]});return e.jsx(Se,{position:"fixed",children:e.jsxs(ye,{disableGutters:!0,variant:"dense",component:"nav",className:"nav",children:[e.jsxs("div",{className:"site-name",children:[e.jsx(j,{component:"img",sx:{height:32},alt:"Blitzed Out Logo",src:Te}),e.jsx("h1",{children:"Blitzed Out"})]}),e.jsx("div",{children:e.jsxs("div",{className:"nav-room-name",children:[e.jsx("h2",{children:Ee(s)||s===void 0?a("public"):s}),e.jsx(R,{title:u,children:e.jsx(Je,{playerList:o})}),e.jsx(T,{onClick:x,"aria-label":"schedule game",sx:{ml:2},children:e.jsx(Ce,{color:"primary",badgeContent:c?null:g.length,children:e.jsx(B,{})})}),r&&e.jsx(be,{children:e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx($e,{open:r,close:()=>i(!1),isMobile:h})})})]})}),e.jsxs("div",{className:"menu-drawer",children:[e.jsx(Ve,{}),e.jsx(Ge,{})]})]})})}const Je=t.forwardRef((s,o)=>e.jsx(qe,{...s,innerRef:o})),ss=O(s=>e.jsx(ve,{disableGutters:!0,elevation:0,square:!0,...s}))(({theme:s})=>({border:`1px solid ${s.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}})),ts=O(s=>e.jsx(ke,{expandIcon:e.jsx(Ie,{sx:{fontSize:"0.9rem"}}),...s}))(({theme:s})=>({backgroundColor:s.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:s.spacing(1)}})),ns=O(Ae)(({theme:s})=>({padding:s.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}));export{Ne as A,De as C,es as N,Ze as a,ss as b,ts as c,ns as d,Le as e,z as u};
