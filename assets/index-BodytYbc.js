const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index.tsx-D40sKPhb.js","js/chunk-DDoLnHI0.js","js/chunk-CtIAsvv6.js","js/chunk-D59Sa5ya.js","js/chunk-CoPHbQIg.js","js/chunk-CXIw3Iqt.js","js/chunk-BICGdz9x.js","js/chunk-BmcVylZL.js","js/chunk-dH9yT-e4.js","js/chunk-Dk7I1tJi.js","js/chunk-CrCBoQmf.js","js/chunk-Bt1viq1_.js","js/chunk-Bp62TkGl.js","js/index.tsx-DikmS6Cq.js","js/chunk-BFzXl2Wc.js","js/chunk-C7YV9Ru2.js","js/chunk-bqvoNmJe.js","js/chunk-CbUvEgHM.js","js/chunk-COViFSNc.js","js/index.tsx-1yhCiafl.js","js/chunk-BDM5WtNj.js","js/chunk-CbNvPdBh.js","js/chunk-B4PEA_xj.js","js/chunk-jE3-WMs2.js","js/index.tsx--pXpUxEL.js","js/index.tsx-BlmnKiIW.js","js/index.tsx-ChW8R_IK.js","js/chunk-4GWdBvrH.js","js/chunk-8ZYOspRI.js","js/chunk-B0nG6Nel.js","js/chunk-Ds_NjC-1.js","js/index.tsx-Ca1Lw518.js","js/chunk-r8FSinrW.js","js/index.tsx-o0iBdZOY.js","js/chunk-JjknM9L9.js","js/index.tsx-BB1mxAS-.js"])))=>i.map(i=>d[i]);
var Je=Object.defineProperty;var Ke=(o,n,t)=>n in o?Je(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t;var ee=(o,n,t)=>Ke(o,typeof n!="symbol"?n+"":n,t);import{X as a,Y as Xe}from"../js/chunk-CtIAsvv6.js";import{r as m,j as f,g as ce,u as le,B as Ze,i as et,l as te,N as tt,m as ot,n as nt,o as rt,p as st,R as ye}from"../js/chunk-DDoLnHI0.js";import{i as at,g as xe,a as Ue,b as v,r as N,o as Ve,c as G,d as O,s as it,u as ct,e as q,f as Se,h as lt,G as ut,j as dt,k as _t,l as ue,q as k,w as B,m as mt,n as ft,E as ht,p as pt,t as gt,v as yt,x as Et,T as wt,y as W,z as Q,A as ke,B as Be,C as Ee,D as oe,F as we,H as Tt,I as qe}from"../js/chunk-CbUvEgHM.js";import{s as vt,D as At,p as bt,d as Dt}from"../js/chunk-CoPHbQIg.js";import{i as Y,t as Pt,B as Ct,r as Rt}from"../js/chunk-Dk7I1tJi.js";import{b as It,d as jt,F as Lt,B as Ot,C as Mt,T as xt,e as Ut,f as Vt,L as St,A as kt}from"../js/chunk-D59Sa5ya.js";import{l as Bt}from"../js/chunk-COViFSNc.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(e){if(e.ep)return;e.ep=!0;const s=t(e);fetch(e.href,s)}})();const qt={apiKey:"AIzaSyCKS7tWQRYRWHsawNfN42uAmISdUbJHJJw",authDomain:"blitzout-49b39.firebaseapp.com",projectId:"blitzout-49b39",storageBucket:"blitzout-49b39.appspot.com",messagingSenderId:"852428606926",appId:"1:852428606926:web:17444e6f8dbc2f95f0ef9f",measurementId:"G-93YN1YMTQ7"},$t=at(qt),R=xe($t);async function Ht(o=""){try{const n=v();return await Et(n),n.currentUser?(await ue(n.currentUser,{displayName:o}),n.currentUser):null}catch(n){return console.error(n),null}}async function Nt(o,n,t=""){try{const r=v(),e=await _t(r,o,n);return await ue(e.user,{displayName:t}),e.user}catch(r){throw console.error("Registration error:",r),r}}async function Ft(o,n){try{const t=v();return(await lt(t,o,n)).user}catch(t){throw console.error("Email login error:",t),t}}async function zt(){try{const o=v(),n=new ut;return(await dt(o,n)).user}catch(o){throw console.error("Google login error:",o),o}}async function Wt(o){try{const n=v();return await yt(n,o),!0}catch(n){throw console.error("Password reset error:",n),n}}async function Qt(o,n){try{const r=v().currentUser;if(r?.isAnonymous){const e=ht.credential(o,n);return(await pt(r,e)).user}else throw new Error("User is not anonymous or not logged in")}catch(t){throw console.error("Account conversion error:",t),t}}async function Yt(){try{const o=v();return await gt(o),!0}catch(o){throw console.error(o),o}}function cn({newRoom:o,oldRoom:n,newDisplayName:t,oldDisplayName:r,removeOnDisconnect:e=!0}){const s=Ue(),c=v().currentUser?.uid,l=o?.toUpperCase(),_=n?.toUpperCase(),u=N(s,`rooms/${l}/uids/${c}`),d=N(s,`rooms/${_}/uids/${c}`),h=N(s,".info/connected");let y,w;Ve(h,T=>{T.val()===!0&&(y=Ee(u),w=Ee(d),(_!==l||r!==t)&&oe(d),e&&(we(w).remove(),we(y).remove()),Tt(y,{displayName:t,lastActive:Date.now()}))}),document.addEventListener("beforeunload",()=>{w&&oe(w),y&&oe(y)})}function Gt(o,n,t={},r={}){if(!o)return;const{enableCache:e=!0,enableDebounce:s=!0}=r,i=o.toUpperCase(),c=_e("userList",i),l=Date.now();if(e){const u=A.get(c);if(u&&me(u,c)){u.queryCount++,A.set(c,u),D(c,Date.now()-l,!0);const d=Object.keys(u.data).sort().join(","),h=t?Object.keys(t).sort().join(","):"";d!==h&&n(u.data);return}}const _=async()=>{let u=!1;try{await J();const d=Ue(),h=N(d,`rooms/${i}/uids`);Ve(h,y=>{const w=Date.now(),T=w-l,P=y.val();if(!P)return;if(e){de();const C=$(c);A.set(c,{data:P,timestamp:w,queryCount:1,priority:C})}D(c,T,!1,u);const j=Object.keys(P).sort().join(","),b=t?Object.keys(t).sort().join(","):"";j!==b&&n(P)},y=>{u=!0,console.error("getUserList error:",y),D(c,Date.now()-l,!1,!0)})}catch(d){u=!0,console.error("getUserList connection error:",d),D(c,Date.now()-l,!1,!0)}finally{K()}};s?fe(c,_):_()}async function Jt(o=""){try{const n=v();return n.currentUser?(await ue(n.currentUser,{displayName:o}),n.currentUser):null}catch(n){return console.error(n),null}}async function ln(o,n){try{await G(O(R,"custom-actions"),{grouping:o,customAction:n,ttl:new Date(Date.now()+5760*60*1e3)})}catch(t){console.error(t)}}async function Kt(o){const n=k(O(R,"game-boards"),B("checksum","==",o)),t=await mt(n);return t.size?t.docs[0]:null}async function un({title:o,gameBoard:n,settings:t}){if(o)try{const r=vt.sha256(n),e=await Kt(r);return e?(ct(e.ref,{ttl:new Date(Date.now()+720*60*60*1e3)}),e):await Xt({title:o,gameBoard:n,settings:t,checksum:r})}catch(r){console.error(r)}}async function Xt({title:o,gameBoard:n,settings:t,checksum:r}){try{return await G(O(R,"game-boards"),{title:o,gameBoard:n,settings:t,checksum:r,ttl:new Date(Date.now()+720*60*60*1e3)})}catch(e){console.error(e);return}}async function dn(o){try{const n=q(R,"game-boards",o),t=await Se(n);return t.exists()?t.data():void 0}catch(n){console.error(n);return}}let Te={};const A=new Map,U=new Map,ve=15e3,Zt=5e3,Ae=150,eo=50,$e=50,to=100,x={activeConnections:0,maxConnections:15,connectionQueue:[]},be=new Map;function D(o,n,t,r=!1){const e=be.get(o)||{queryCount:0,totalLatency:0,cacheHits:0,lastQueryTime:0,avgLatency:0,p95Latency:0,connectionPoolHits:0,networkErrors:0,latencyHistory:[]};if(e.queryCount++,e.totalLatency+=n,e.lastQueryTime=Date.now(),e.avgLatency=e.totalLatency/e.queryCount,e.latencyHistory.push(n),e.latencyHistory.length>20&&e.latencyHistory.shift(),e.latencyHistory.length>=5){const s=[...e.latencyHistory].sort((c,l)=>c-l),i=Math.floor(s.length*.95);e.p95Latency=s[i]}t&&e.cacheHits++,r&&e.networkErrors++,be.set(o,e)}function $(o){return o.includes("messages")?"high":o.includes("userList")?"medium":"low"}function oo(o){switch(o){case"high":return Zt;case"medium":return ve;case"low":return ve*2}}function no(o){switch(o){case"high":return eo;case"medium":return Ae;case"low":return Ae*2}}function de(){if(A.size<=to)return;const o=Array.from(A.entries());o.sort(([,t],[,r])=>{const e={low:0,medium:1,high:2},s=e[t.priority]-e[r.priority];if(s!==0)return s;const i=t.queryCount-r.queryCount;return i!==0?i:t.timestamp-r.timestamp});const n=Math.ceil(A.size*.2);for(let t=0;t<n;t++)A.delete(o[t][0])}function J(){return new Promise(o=>{x.activeConnections<x.maxConnections?(x.activeConnections++,o()):x.connectionQueue.push(()=>{x.activeConnections++,o()})})}function K(){if(x.activeConnections--,x.connectionQueue.length>0){const o=x.connectionQueue.shift();o&&o()}}function _e(o,n,t){return`${o}:${n||"global"}:${t||""}`}function me(o,n){const t=$(n),r=oo(t);return Date.now()-o.timestamp<r}function fe(o,n,...t){const r=$(o),e=no(r),s=U.get(o);s&&clearTimeout(s);const i=setTimeout(async()=>{try{await J(),n(...t)}catch(c){console.error("Query execution error:",c)}finally{K(),U.delete(o)}},e);U.set(o,i)}async function _n({room:o,user:n,text:t="",type:r="chat",...e}){const s=["chat","actions","settings","room","media"];if(!s.includes(r)){let l="Invalid message type. Was expecting ";return l+=s.join(", "),l+=` but got ${r}`,console.error(l)}const i={room:o,user:n.uid,text:t,type:r,...e};if(JSON.stringify(i)===JSON.stringify(Te))return;Te=i;const c=Date.now();try{return await G(O(R,"chat-rooms",o?.toUpperCase()||"PUBLIC","messages"),{text:t.trim(),ttl:new Date(c+1440*60*1e3),type:r,...e,uid:n.uid,displayName:n.displayName,timestamp:it()})}catch(l){return console.error(l)}}async function mn(o,n){return ft(q(R,`/chat-rooms/${o.toUpperCase()}/messages/${n}`))}function ro(o,n,t={}){if(!o)return;const{limitCount:r=$e,startAfterDoc:e,enableCache:s=!0,enableDebounce:i=!0}=t,c=o.toUpperCase(),l=_e("messages",c,`limit:${r}`),_=Date.now();if(s){const d=A.get(l);if(d&&me(d,l))return d.queryCount++,A.set(l,d),D(l,Date.now()-_,!0),n(d.data),()=>{}}const u=()=>{let d=!1,h;try{J();const y=new Date;y.setHours(y.getHours()-3);let w=k(O(R,"chat-rooms",c,"messages"),B("timestamp",">",y),W("timestamp","asc"),Q(r));return e&&(w=k(O(R,"chat-rooms",c,"messages"),B("timestamp",">",y),W("timestamp","asc"),ke(e),Q(r))),h=Be(w,T=>{const P=Date.now(),j=P-_,b=T.docs.map(C=>({id:C.id,...C.data()}));if(s&&b.length>0){de();const C=T.docs[T.docs.length-1],Z=$(l);A.set(l,{data:b,timestamp:P,lastVisible:C,queryCount:1,priority:Z})}D(l,j,!1,d),n(b)},T=>{d=!0,console.error("getMessages error:",T),D(l,Date.now()-_,!1,!0)}),h}catch(y){return d=!0,console.error("getMessages connection error:",y),D(l,Date.now()-_,!1,!0),()=>{}}finally{K()}};if(i){let d;return fe(l,()=>{d=u()}),()=>{const h=U.get(l);h&&(clearTimeout(h),U.delete(l)),d&&d()}}return u()}function so(o,n={}){const{limitCount:t=$e,startAfterDoc:r,enableCache:e=!0,enableDebounce:s=!0}=n,i=_e("schedule",null,`limit:${t}`),c=Date.now();if(e){const u=A.get(i);if(u&&me(u,i))return u.queryCount++,A.set(i,u),D(i,Date.now()-c,!0),o(u.data),()=>{}}const l=async()=>{let u=!1,d;try{await J();const h=new Date;h.setMinutes(h.getMinutes()-5);let y=k(O(R,"schedule"),B("dateTime",">",h),W("dateTime","asc"),Q(t));return r&&(y=k(O(R,"schedule"),B("dateTime",">",h),W("dateTime","asc"),ke(r),Q(t))),d=Be(y,w=>{const T=Date.now(),P=T-c,j=w.docs.map(b=>({id:b.id,...b.data()}));if(e&&j.length>0){de();const b=w.docs[w.docs.length-1],C=$(i);A.set(i,{data:j,timestamp:T,lastVisible:b,queryCount:1,priority:C})}D(i,P,!1,u),o(j)},w=>{u=!0,console.error("getSchedule error:",w),D(i,Date.now()-c,!1,!0)}),d||(()=>{})}catch(h){return u=!0,console.error("getSchedule connection error:",h),D(i,Date.now()-c,!1,!0),()=>{}}finally{K()}};if(s){let u;return fe(i,async()=>{u=await l()}),()=>{const d=U.get(i);d&&(clearTimeout(d),U.delete(i)),u&&u()}}const _=l();return _ instanceof Promise?()=>{}:_}async function ao(o,n,t="PUBLIC"){try{return await G(O(R,"schedule"),{dateTime:wt.fromDate(o),url:n,room:t})}catch(r){return console.error(r)}}function io(o={tables:["customTiles","gameBoard"]}){const{tables:n}=o,t=new Set(n),r={timeouts:{},queue:new Set,scheduleSync(e){this.timeouts[e]&&clearTimeout(this.timeouts[e]),this.queue.add(e),this.timeouts[e]=setTimeout(()=>{this.processSyncQueue()},2e3)},processSyncQueue(){if(this.queue.size===0)return;const e=window;e.authContext?.user&&!e.authContext.user.isAnonymous&&e.authContext.syncData(),this.queue.clear(),Object.keys(this.timeouts).forEach(s=>{clearTimeout(this.timeouts[s]),delete this.timeouts[s]})}};return{stack:"dbcore",name:"syncMiddleware",create(e){return{...e,table(s){const i=e.table(s);return t.has(s)?{...i,mutate:async c=>{const l=await i.mutate(c);return["put","add","delete","deleteRange","update"].includes(c.type)&&r.scheduleSync(s),l}}:i}}}}}class co extends At{constructor(){super("blitzedOut");ee(this,"customTiles");ee(this,"gameBoard");this.version(2).stores({customTiles:"++id, group, intensity, action, isEnabled, tags, gameMode, isCustom, locale",gameBoard:"++id, title, tiles, tags, gameMode, isActive"})}}const V=new co;V.use(io({tables:["customTiles","gameBoard"]}));const{customTiles:I}=V;I.hook("creating",function(o,n,t){n.locale===void 0&&(n.locale="en"),n.gameMode===void 0&&(n.gameMode="online"),n.isCustom===void 0&&(n.isCustom=1)});const lo=async o=>{const n=o.map(t=>({...t,isEnabled:1}));return await I.bulkAdd(n)},He=o=>{const n=["locale","gameMode","group","intensity","tag","isCustom","action"];let t=I.toCollection();return Object.entries(o).filter(([e])=>n.includes(e)).forEach(([e,s])=>{s==null||s===""||(e==="tag"?t=t.filter(i=>i.tags.includes(s)):t=t.filter(i=>i[e]===s))}),t},Ne=async(o={})=>{try{return await He(o).toArray()}catch(n){return console.error("Error in getTiles:",n),[]}},Fe=async o=>{const{page:n=1,limit:t=50}=o;try{const r=He(o),e=await r.count(),s=(n-1)*t;return{items:await r.offset(s).limit(t).toArray(),total:e,page:n,limit:t,totalPages:Math.ceil(e/t)}}catch(r){return console.error("Error in getPaginatedTiles:",r),{items:[],total:0,page:n,limit:t,totalPages:0}}},fn=async(o="en",n="online",t=null)=>{let r=I.where("locale").equals(o).and(s=>s.gameMode===n);return t&&(r=r.and(s=>s.tags.some(i=>t.includes(i)))),(await r.toArray()).reduce((s,i)=>{const c=i.group;s[c]||(s[c]={label:c,count:0,intensities:{}}),s[c].count++;const l=Number(i.intensity);return s[c].intensities[l]||(s[c].intensities[l]=0),s[c].intensities[l]++,s},{})},hn=(o=null)=>{const n=Y.resolvedLanguage||Y.language||"en";let t=I.where("locale").equals(n).and(r=>r.isEnabled===1);return o&&(t=t.and(r=>r.gameMode===o)),t.toArray()},uo=async o=>await I.add({...o,isEnabled:1}),pn=async(o,n)=>await I.update(o,n),gn=async o=>{const n=await I.get(o);if(!n)throw new Error(`Custom tile with id ${o} not found`);return await I.update(o,{isEnabled:n.isEnabled?0:1})};async function _o(){try{return await V.customTiles.where("isCustom").equals(1).delete(),!0}catch(o){return console.error("Error deleting custom tiles:",o),!1}}const yn=async o=>{await I.delete(o)},{gameBoard:M}=V,mo=()=>M.orderBy("title").toArray(),En=async()=>M.where("isActive").equals(1)?.first(),fo=async o=>M.add(o),ho=async(o,n)=>M.update(o.id,{...o,...n}),po=async o=>{const n={title:o.title===void 0?"":o.title,tiles:o.tiles||[],isActive:o.isActive===void 0?1:o.isActive,tags:o.tags||[],gameMode:o.gameMode||"online"};if(!n?.title?.length&&n?.tiles?.length)return;const t=await M.where("title").equals(n.title).first();return V.transaction("rw",V.gameBoard,async()=>(n.isActive&&await go(),t?(await ho(t,o),t.id):await fo(n)))},wn=async o=>{const t=(await M.toArray()).map(r=>({...r,isActive:r.id===o?1:0}));await M.bulkPut(t)},Tn=async o=>{await M.delete(o)},go=async()=>{await M.where("isActive").equals(1).modify({isActive:0})},he=xe();async function yo(){const n=v().currentUser;if(!n)return console.error("No user logged in"),!1;try{const t=await Ne({isCustom:1});return await qe(q(he,"user-data",n.uid),{customTiles:t,lastUpdated:new Date},{merge:!0}),!0}catch(t){return console.error("Error syncing custom tiles:",t),!1}}async function Eo(){const n=v().currentUser;if(!n)return console.error("No user logged in"),!1;try{const t=await mo();return t.length&&await qe(q(he,"user-data",n.uid),{gameBoards:t,lastUpdated:new Date},{merge:!0}),!0}catch(t){return console.error("Error syncing game boards:",t),!1}}async function ne(){return await yo(),await Eo(),!0}async function ze(){const n=v().currentUser;if(!n)return console.error("No user logged in"),!1;try{const t=q(he,"user-data",n.uid),r=await Se(t);if(!r.exists())return!1;const e=r.data();if(e.customTiles!==void 0)if(await _o(),await new Promise(s=>setTimeout(s,500)),e.customTiles&&e.customTiles.length>0){for(const s of e.customTiles)try{(await Ne({gameMode:s.gameMode,group:s.group,intensity:s.intensity,action:s.action})).length===0&&await uo(s)}catch(i){console.error("Error importing custom tile:",s,i)}console.log(`${e.customTiles.length} custom tiles imported`)}else console.log("No custom tiles to import");if(e.gameBoards&&e.gameBoards.length>0){for(const s of e.gameBoards)await po({title:s.title,tiles:s.tiles,tags:s.tags||[],gameMode:s.gameMode||"online",isActive:s.isActive||0});console.log(`${e.gameBoards?.length} game boards imported`)}return!0}catch(t){return console.error("Error syncing data:",t),!1}}let F=null;function wo(o=5){ae();const n=o*60*1e3;return F=window.setInterval(async()=>{const t=v();t.currentUser&&!t.currentUser.isAnonymous?(console.log("Performing periodic sync from Firebase..."),await ze()):console.log("Skipping periodic sync - no user logged in")},n),!0}function ae(){return F?(window.clearInterval(F),F=null,!0):!1}const We=m.createContext(void 0);function To(o){const[n,t]=m.useState(null),[r,e]=m.useState(!1),[s,i]=m.useState(!0),[c,l]=m.useState(null),[_,u]=m.useState({syncing:!1,lastSync:null}),d=m.useRef(null),h=m.useRef(!1),y=m.useCallback(async g=>{if(d.current&&(clearTimeout(d.current),d.current=null),!n||n.isAnonymous)return!1;try{return u({syncing:!0,lastSync:_.lastSync}),await g(),u({syncing:!1,lastSync:new Date}),!0}catch(p){return console.error("Sync error:",p),p instanceof Error?l(p.message):l("An unknown error occurred"),u({syncing:!1,lastSync:_.lastSync}),!1}},[n,d,u,_.lastSync,l]);async function w(g=""){try{const p=await Ht(g);return t(p),p}catch(p){throw l(p.message),p}}async function T(g,p){try{e(!0);const E=await Ft(g,p);return t(E),E}catch(E){throw E instanceof Error&&l(E.message),E}finally{e(!1)}}async function P(){try{e(!0);const g=await zt();return t(g),g}catch(g){throw g instanceof Error&&l(g.message),g}finally{e(!1)}}async function j(g,p,E){try{e(!0);const L=await Nt(g,p,E);return t(L),L}catch(L){throw L instanceof Error&&l(L.message),L}finally{e(!1)}}async function b(g){try{return await Wt(g),!0}catch(p){throw p instanceof Error&&l(p.message),p}}const C=m.useCallback(async(g,p)=>{try{e(!0);const E=await Qt(g,p);return t(E),await y(ne),E}catch(E){throw E instanceof Error&&l(E.message),E}finally{e(!1)}},[e,t,y,l]);async function Z(g=""){try{const p=await Jt(g);return t(p),p}catch(p){throw p instanceof Error&&l(p.message),p}}const pe=m.useCallback(async()=>{try{if(n&&!n.isAnonymous){const g=y(ne),p=new Promise(E=>setTimeout(E,5e3,!1));await Promise.race([g,p])}await Yt(),t(null)}catch(g){throw g instanceof Error&&l(g.message),g}},[n,y,t,l]),ge=m.useCallback(async()=>y(ne),[y]);m.useEffect(()=>{const p=v().onAuthStateChanged(E=>{if(t(E||null),h.current||(h.current=!0,i(!1)),E&&!E.isAnonymous){const L=()=>{d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{u({syncing:!0,lastSync:null}),ze().then(()=>{u({syncing:!1,lastSync:new Date}),wo()}).catch(Ge=>{console.error("Error syncing from Firebase:",Ge),u({syncing:!1,lastSync:null})}).finally(()=>{d.current=null})},1e3)};typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(L,{timeout:5e3}):setTimeout(L,100)}else ae()});return window.authContext={user:null},()=>{p(),d.current&&clearTimeout(d.current),ae(),window.authContext=void 0}},[]),m.useEffect(()=>{window.authContext&&(window.authContext.user=n)},[n]);const Ye=m.useMemo(()=>({user:n,loading:r,initializing:s,error:c,syncStatus:_,login:w,loginEmail:T,loginGoogle:P,register:j,updateUser:Z,forgotPassword:b,convertToRegistered:C,logout:pe,syncData:ge,isAnonymous:n?.isAnonymous||!1}),[n,r,s,c,_,C,pe,ge]);return f.jsx(We.Provider,{value:Ye,...o})}function re(o){return o.sort((n,t)=>n.timestamp.toDate().getTime()-t.timestamp.toDate().getTime())}function X(o){return JSON.parse(JSON.stringify(o)).reverse()}function vo(o,n){return X(o).find(t=>t.type===n)}function Ao(o,n,t="ASC"){let r=X(o);return t==="DESC"&&(r=r.reverse()),r.filter(e=>e.type===n)}function vn(o,n){return X(o).find(n)}function bo(o){return X(o)[0]}function Do(o){if(!o)return null;try{if(typeof o.toDate=="function")return o.toDate();if(typeof o=="string"){const n=new Date(o);if(isNaN(n.getTime()))throw new Error("Invalid serialized timestamp format");return n}else if(typeof o=="number"){const n=o<3250368e4?o*1e3:o,t=new Date(n);if(isNaN(t.getTime()))throw new Error("Invalid numeric timestamp format");return t}else if(typeof o=="object"&&o.seconds!==void 0){const n=o,t=new Date(n.seconds*1e3+(n.nanoseconds||0)/1e6);if(isNaN(t.getTime()))throw new Error("Invalid Firestore timestamp object format");return t}else{if(o instanceof Date)return o;throw console.warn("Unsupported timestamp format:",typeof o,o),new Error(`Unsupported timestamp format: ${typeof o}`)}}catch(n){return console.warn("Failed to parse timestamp:",n),null}}const Po={messages:[],loading:!0,error:null,room:null,paginationCursor:null},Co=ce()(bt((o,n)=>({...Po,loadMessages:t=>{const e=re(t);o({messages:e,loading:!1,error:null})},addMessage:t=>{const{messages:r}=n();if(r.find(c=>c.id===t.id))return;const s=[...r,t],i=re(s);o({messages:i})},updateMessage:(t,r)=>{const{messages:e}=n();let s=!1;const i=e.map(c=>{if(c.id===t){const l={...c,...r};if(Object.keys(r).some(u=>c[u]!==r[u]))return s=!0,l}return c});if(s){const c=re(i);o({messages:c})}},clearMessages:()=>{o({messages:[],loading:!1,error:null})},setLoading:t=>{const{loading:r}=n();r!==t&&o({loading:t})},setError:t=>{const{error:r}=n();r!==t&&o({error:t})},setRoom:t=>{const{room:r}=n();r!==t&&o({room:t})},setPaginationCursor:t=>{const{paginationCursor:r}=n();r!==t&&o({paginationCursor:t})},getMessagesByType:t=>{const{messages:r}=n(),e=[];for(let s=0;s<r.length;s++)r[s].type===t&&e.push(r[s]);return e},getLatestMessage:()=>{const{messages:t}=n();return bo(t)},getLatestMessageByType:t=>{const{messages:r}=n();return vo(r,t)},getFilteredMessages:t=>{const{messages:r}=n(),e=[];for(let s=0;s<r.length;s++)t(r[s])&&e.push(r[s]);return e},getOrderedMessagesByType:(t,r="ASC")=>{const{messages:e}=n();return Ao(e,t,r)}}),{name:"messages-storage",partialize:o=>({messages:o.messages,room:o.room,paginationCursor:o.paginationCursor}),onRehydrateStorage:()=>o=>{if(o){const n=new Date;n.setHours(n.getHours()-24);const t=o.messages.filter(r=>{try{const e=Do(r.timestamp);if(!e)throw console.warn(`Failed to parse timestamp for message ${r.id}:`,typeof r.timestamp,r.timestamp),new Error(`Failed to parse timestamp for message ${r.id}`);return e>n}catch(e){return console.warn(`Failed to parse message timestamp for message ID ${r.id}:`,e.message),!0}});t.length!==o.messages.length&&o.loadMessages(t)}}})),Ro=m.createContext(void 0);function Io(o){const{id:n}=le(),{messages:t,loading:r,loadMessages:e,setLoading:s,setRoom:i,clearMessages:c}=Co();m.useEffect(()=>{if(s(!0),i(n||null),!n){c();return}return ro(n,_=>{e(_)})},[n,e,s,i,c]);const l={messages:t,isLoading:r};return f.jsx(Ro.Provider,{value:l,...o})}const De=50,jo=ce((o,n)=>({onlineUsers:{},loading:!1,error:null,room:null,_performanceMetrics:{lastUpdateTime:Date.now(),updateCount:0,averageUpdateInterval:0},_pendingUpdates:{},_batchTimeout:null,setUsers:t=>{const r=Date.now();o(e=>{const s=r-e._performanceMetrics.lastUpdateTime,i=e._performanceMetrics.updateCount+1,c=(e._performanceMetrics.averageUpdateInterval*e._performanceMetrics.updateCount+s)/i;return{onlineUsers:t,loading:!1,error:null,_performanceMetrics:{lastUpdateTime:r,updateCount:i,averageUpdateInterval:c}}})},addUser:(t,r)=>{const e=n();e._pendingUpdates[t]=r,e._batchTimeout&&clearTimeout(e._batchTimeout);const s=setTimeout(()=>{e.flushPendingUpdates()},De);o({_batchTimeout:s})},removeUser:t=>{const r=n();r._pendingUpdates[t]=null,r._batchTimeout&&clearTimeout(r._batchTimeout);const e=setTimeout(()=>{r.flushPendingUpdates()},De);o({_batchTimeout:e})},batchUpdateUsers:t=>o(r=>{const e={...r.onlineUsers};Object.entries(t).forEach(([_,u])=>{if(u===null){const{[_]:d,...h}=e;Object.assign(e,h)}else e[_]=u});const s=Date.now(),i=s-r._performanceMetrics.lastUpdateTime,c=r._performanceMetrics.updateCount+1,l=(r._performanceMetrics.averageUpdateInterval*r._performanceMetrics.updateCount+i)/c;return{onlineUsers:e,_performanceMetrics:{lastUpdateTime:s,updateCount:c,averageUpdateInterval:l}}}),flushPendingUpdates:()=>{const t=n();Object.keys(t._pendingUpdates).length!==0&&(t.batchUpdateUsers(t._pendingUpdates),o(()=>({_pendingUpdates:{}})))},clearUsers:()=>o(()=>({onlineUsers:{},loading:!1,error:null,_pendingUpdates:{}})),setLoading:t=>o(()=>({loading:t})),setError:t=>o(()=>({error:t,loading:!1})),setRoom:t=>o(()=>({room:t})),getUsersByRoom:t=>{const r=n();return r.onlineUsers},getActiveUserCount:()=>{const t=n();return Object.keys(t.onlineUsers).length},getPerformanceMetrics:()=>n()._performanceMetrics})),Lo=m.createContext(void 0);function Oo(o){const{id:n}=le(),{onlineUsers:t,setUsers:r,setRoom:e,clearUsers:s,flushPendingUpdates:i}=jo(),c=m.useRef(null),l=m.useRef(n),_=m.useCallback(h=>{h===null?s():r(h)},[r,s]),u=m.useCallback(()=>{c.current&&(c.current(),c.current=null),i()},[i]);m.useEffect(()=>{if(l.current!==n&&(e(n||null),l.current=n),!n){u(),s();return}return u(),Gt(n,_),c.current=null,u},[n,e,s,_,u]),m.useEffect(()=>u,[u]);const d=m.useMemo(()=>({onlineUsers:t}),[t]);return f.jsx(Lo.Provider,{value:d,...o})}const Pe=300*1e3,Mo=100,xo=ce((o,n)=>({schedule:[],loading:!1,error:null,_cache:{upcomingSchedule:{data:[],timestamp:0,limit:0},roomSchedule:{}},_performanceMetrics:{lastUpdateTime:Date.now(),updateCount:0,cacheHitRate:0},_pendingUpdates:[],_batchTimeout:null,loadSchedule:t=>{const r=Date.now();o(e=>{const s=e._performanceMetrics.updateCount+1;return{schedule:t,loading:!1,error:null,_performanceMetrics:{lastUpdateTime:r,updateCount:s,cacheHitRate:e._performanceMetrics.cacheHitRate}}}),n().invalidateCache()},addScheduleItem:t=>{const r=n();o(s=>({_pendingUpdates:[...s._pendingUpdates,t]})),r._batchTimeout&&clearTimeout(r._batchTimeout);const e=setTimeout(()=>{n().flushPendingScheduleUpdates()},Mo);o(()=>({_batchTimeout:e}))},batchAddScheduleItems:t=>o(r=>{const e=[...r.schedule,...t],s=Date.now(),i=r._performanceMetrics.updateCount+1;return{schedule:e,_performanceMetrics:{lastUpdateTime:s,updateCount:i,cacheHitRate:r._performanceMetrics.cacheHitRate}}}),flushPendingScheduleUpdates:()=>{const t=n();t._pendingUpdates.length!==0&&(t._batchTimeout&&clearTimeout(t._batchTimeout),t.batchAddScheduleItems(t._pendingUpdates),o(()=>({_pendingUpdates:[],_batchTimeout:null})),t.invalidateCache())},removeScheduleItem:t=>{o(r=>({schedule:r.schedule.filter(e=>e.id!==t)})),n().invalidateCache()},clearSchedule:()=>{const t=n();t._batchTimeout&&clearTimeout(t._batchTimeout),o(()=>({schedule:[],loading:!1,error:null,_pendingUpdates:[],_batchTimeout:null})),n().invalidateCache()},invalidateCache:()=>o(()=>({_cache:{upcomingSchedule:{data:[],timestamp:0,limit:0},roomSchedule:{}}})),setLoading:t=>o(()=>({loading:t})),setError:t=>o(()=>({error:t,loading:!1})),getUpcomingSchedule:(t=10)=>{const r=n(),e=Date.now(),s=r._cache.upcomingSchedule;if(s.timestamp>0&&e-s.timestamp<Pe&&s.limit>=t){const _=r._performanceMetrics.updateCount+1,d=(r._performanceMetrics.cacheHitRate*(_-1)+1)/_;return o(h=>({_performanceMetrics:{...h._performanceMetrics,cacheHitRate:d}})),s.data.slice(0,t)}const c=Dt(),l=r.schedule.filter(_=>_.dateTime.isAfter(c)).sort((_,u)=>_.dateTime.valueOf()-u.dateTime.valueOf()).slice(0,Math.max(t,20));return o(_=>({_cache:{..._._cache,upcomingSchedule:{data:l,timestamp:e,limit:Math.max(t,20)}}})),l.slice(0,t)},getScheduleByRoom:t=>{const r=n(),e=Date.now(),s=r._cache.roomSchedule[t];if(s&&s.timestamp>0&&e-s.timestamp<Pe){const l=r._performanceMetrics.updateCount+1,u=(r._performanceMetrics.cacheHitRate*(l-1)+1)/l;return o(d=>({_performanceMetrics:{...d._performanceMetrics,cacheHitRate:u}})),s.data}const c=r.schedule.filter(l=>l.room===t);return o(l=>({_cache:{...l._cache,roomSchedule:{...l._cache.roomSchedule,[t]:{data:c,timestamp:e}}}})),c},getPerformanceMetrics:()=>n()._performanceMetrics})),Uo=m.createContext(void 0);function Vo(o){const{schedule:n,loadSchedule:t,flushPendingScheduleUpdates:r}=xo(),e=m.useRef(null),s=m.useCallback(_=>{t(_)},[t]),i=m.useCallback(async(_,u,d)=>{try{const h=await ao(_,u,d);return r(),h}catch(h){throw console.error("Error adding to schedule:",h),h}},[r]),c=m.useCallback(()=>{e.current&&(e.current(),e.current=null),r()},[r]);m.useEffect(()=>(c(),e.current=so(s),c),[s,c]),m.useEffect(()=>c,[c]);const l=m.useMemo(()=>({schedule:n,addToSchedule:i}),[n,i]);return f.jsx(Uo.Provider,{value:l,...o})}let ie=It({palette:{mode:"dark",background:{default:"#0f172a",paper:"#1e293b"},text:{primary:"#f8fafc",secondary:"#cbd5e1"},divider:"rgba(148, 163, 184, 0.12)",error:{main:"#b91c1c"},warning:{main:"#b45309"},info:{main:"#1d4ed8"},success:{main:"#047857"}},typography:{h1:{fontWeight:700,letterSpacing:"-0.025em"},h2:{fontWeight:700,letterSpacing:"-0.025em"},h3:{fontWeight:600,letterSpacing:"-0.025em"},h4:{fontWeight:600},h5:{fontWeight:600},h6:{fontWeight:600},button:{fontWeight:500,textTransform:"none"}},components:{MuiButton:{styleOverrides:{root:{borderRadius:8,padding:"8px 16px",transition:"all 0.2s ease-in-out"},contained:{boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}}},MuiCard:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",background:"rgb(75, 75, 75, 0.5)",transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out"}}},MuiPaper:{styleOverrides:{root:{backgroundImage:"none"},elevation1:{boxShadow:"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24)"},elevation2:{boxShadow:"0 3px 6px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.12)"},elevation4:{boxShadow:"0 10px 20px rgba(0, 0, 0, 0.15), 0 3px 6px rgba(0, 0, 0, 0.1)"}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{transition:"border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out","&:hover":{borderColor:"#4f46e5"},"&.Mui-focused":{boxShadow:"0 0 0 2px rgba(79, 70, 229, 0.2)"}}}}},MuiCssBaseline:{styleOverrides:{body:{scrollbarWidth:"thin",scrollbarColor:"#4b5563 #1f2937","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"#1f2937"},"&::-webkit-scrollbar-thumb":{background:"#4b5563",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#6b7280"}}}}}});ie=jt(ie);const So=ie;async function ko(o="en",n="online"){const t={},r=Object.assign({"../locales/en/local/alcohol.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.b),[]),"../locales/en/local/ballBusting.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.c),[]),"../locales/en/local/bating.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.d),[]),"../locales/en/local/bondage.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.e),[]),"../locales/en/local/breathPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.f),[]),"../locales/en/local/buttPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.g),[]),"../locales/en/local/electric.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.h),[]),"../locales/en/local/footPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.i),[]),"../locales/en/local/gasMask.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.j),[]),"../locales/en/local/humiliation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.k),[]),"../locales/en/local/kissing.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.m),[]),"../locales/en/local/pissPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.p),[]),"../locales/en/local/poppers.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.n),[]),"../locales/en/local/spanking.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.s),[]),"../locales/en/local/throatTraining.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.t),[]),"../locales/en/local/tickling.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.o),[]),"../locales/en/local/titTorture.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.q),[]),"../locales/en/local/vaping.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.v),[]),"../locales/en/online/alcohol.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.r),[]),"../locales/en/online/ballBusting.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.u),[]),"../locales/en/online/bating.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.w),[]),"../locales/en/online/buttPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.x),[]),"../locales/en/online/gasMask.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.y),[]),"../locales/en/online/pissPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.z),[]),"../locales/en/online/poppers.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.A),[]),"../locales/en/online/throatTraining.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.B),[]),"../locales/en/online/titTorture.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.C),[]),"../locales/en/online/vaping.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.D),[]),"../locales/en/translation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.E),[]),"../locales/es/local/alcohol.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.F),[]),"../locales/es/local/ballBusting.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.G),[]),"../locales/es/local/bating.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.H),[]),"../locales/es/local/bondage.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.I),[]),"../locales/es/local/breathPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.J),[]),"../locales/es/local/buttPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.K),[]),"../locales/es/local/electric.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.L),[]),"../locales/es/local/footPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.M),[]),"../locales/es/local/gasMask.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.N),[]),"../locales/es/local/humiliation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.O),[]),"../locales/es/local/kissing.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.P),[]),"../locales/es/local/pissPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.Q),[]),"../locales/es/local/poppers.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.R),[]),"../locales/es/local/spanking.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.S),[]),"../locales/es/local/throatTraining.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.T),[]),"../locales/es/local/tickling.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.U),[]),"../locales/es/local/titTorture.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.V),[]),"../locales/es/local/vaping.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.W),[]),"../locales/es/online/alcohol.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.X),[]),"../locales/es/online/ballBusting.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.Y),[]),"../locales/es/online/bating.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.Z),[]),"../locales/es/online/buttPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e._),[]),"../locales/es/online/gasMask.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.$),[]),"../locales/es/online/pissPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.a0),[]),"../locales/es/online/poppers.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.a1),[]),"../locales/es/online/throatTraining.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.a2),[]),"../locales/es/online/titTorture.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.a3),[]),"../locales/es/online/vaping.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.a4),[]),"../locales/es/translation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.a5),[]),"../locales/fr/local/alcohol.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.a6),[]),"../locales/fr/local/ballBusting.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.a7),[]),"../locales/fr/local/bating.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.a8),[]),"../locales/fr/local/bondage.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.a9),[]),"../locales/fr/local/breathPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.aa),[]),"../locales/fr/local/buttPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.ab),[]),"../locales/fr/local/electric.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.ac),[]),"../locales/fr/local/footPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.ad),[]),"../locales/fr/local/gasMask.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.ae),[]),"../locales/fr/local/humiliation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.af),[]),"../locales/fr/local/kissing.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.ag),[]),"../locales/fr/local/pissPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.ah),[]),"../locales/fr/local/poppers.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.ai),[]),"../locales/fr/local/spanking.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.aj),[]),"../locales/fr/local/throatTraining.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.ak),[]),"../locales/fr/local/tickling.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.al),[]),"../locales/fr/local/titTorture.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.am),[]),"../locales/fr/local/vaping.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.an),[]),"../locales/fr/online/alcohol.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.ao),[]),"../locales/fr/online/ballBusting.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.ap),[]),"../locales/fr/online/bating.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.aq),[]),"../locales/fr/online/buttPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.ar),[]),"../locales/fr/online/gasMask.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.as),[]),"../locales/fr/online/pissPlay.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.at),[]),"../locales/fr/online/poppers.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.au),[]),"../locales/fr/online/throatTraining.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.av),[]),"../locales/fr/online/titTorture.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.aw),[]),"../locales/fr/online/vaping.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.ax),[]),"../locales/fr/translation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.ay),[]),"../locales/languages.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(e=>e.a),[])});for(const e in r)if(e.startsWith(`../locales/${o}/${n}/`)){const s=e.split("/").pop()?.replace(".json","")||"";s&&(t[s]=await r[e]())}return t}const An=Bt,{customTiles:Qe}=V,S={online:!1,local:!1};function Bo(o,n="en",t="online"){const r=[];return Object.entries(o).forEach(([e,s])=>{!s.actions||Object.keys(s.actions).length===0||Object.entries(s.actions).forEach(([i,c],l)=>{!c||c.length===0||c.forEach(_=>{r.push({group:e,intensity:l,action:_,isEnabled:1,tags:[Pt("default","Default")],gameMode:t,isCustom:0,locale:n})})})}),r}function qo(o,n,t){return!Array.isArray(o)||o.length===0?!1:o.filter(s=>s.locale===n&&s.gameMode===t&&s.isCustom===0).length>=4}async function $o(o){const n=o||"en",t=["online","local"];try{for(const r of t)if(!S[r]){S[r]=!0;try{const e=await Fe({locale:n,gameMode:r,paginated:!1}),s=Array.isArray(e)?e:[];if(qo(s,n,r))continue;const i=await ko(n,r),c=Bo(i,n,r),l=await Ho(c,n,r);l.length>0&&await lo(l)}finally{S[r]=!1}}}catch(r){console.error(`Error importing default actions for ${n}:`,r),S.online=!1,S.local=!1}}async function Ho(o,n,t){const r=await Qe.where("locale").equals(n).and(s=>s.gameMode===t&&s.isCustom===0).toArray(),e=new Set;return r.forEach(s=>{const i=`${s.group}-${s.intensity}-${s.action}`;e.add(i)}),o.filter(s=>{const i=`${s.group}-${s.intensity}-${s.action}`;return!e.has(i)})}async function Ce(o,n){try{const t=await Fe({locale:o,gameMode:n,paginated:!1});if(!Array.isArray(t)||t.length===0)return;const r=t.filter(i=>i.isCustom===0);if(r.length<=1)return;const e=new Map,s=[];if(r.forEach(i=>{const c=`${i.group}-${i.intensity}-${i.action}`;e.has(c)?i.id!==void 0&&s.push(i.id):e.set(c,i.id)}),s.length>0)for(const i of s)await Qe.delete(i)}catch(t){console.error(`Error removing duplicate default actions for ${o}/${n}:`,t)}}async function No(o){await Ce(o,"online"),await Ce(o,"local"),await $o(o)}let H=null;function Fo(o){H&&clearTimeout(H),H=window.setTimeout(()=>{try{No(o).catch(n=>{console.error("Error during initial default actions import:",n)})}catch(n){console.error("Error during initial default actions import:",n)}H=null},1e3)}function se(){return f.jsx(Lt,{in:!0,timeout:300,children:f.jsxs(Ot,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",backgroundColor:"#0f172a",color:"#f8fafc",position:"fixed",top:0,left:0,zIndex:9999},children:[f.jsx(Mt,{size:60,thickness:4,sx:{color:"#4f46e5",mb:3}}),f.jsx(xt,{variant:"h6",sx:{opacity:.8,fontWeight:400,letterSpacing:"0.02em"},children:"Loading..."})]})})}const zo=m.lazy(()=>a(()=>import("../js/index.tsx-D40sKPhb.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),Wo=m.lazy(()=>a(()=>import("../js/index.tsx-1yhCiafl.js"),__vite__mapDeps([19,1,2,3,4,20,10,21,12,22,23,8,9,5,17,18]))),Qo=m.lazy(()=>a(()=>import("../js/index.tsx--pXpUxEL.js"),__vite__mapDeps([24,2,1,3,4,25,5,20,17,9,18,26,16,27,6,28,12,7,29,14,30,10,22,23,8,21,31,32,11]))),Re=()=>{Promise.all([a(()=>import("../js/index.tsx--pXpUxEL.js"),__vite__mapDeps([24,2,1,3,4,25,5,20,17,9,18,26,16,27,6,28,12,7,29,14,30,10,22,23,8,21,31,32,11])),a(()=>import("../js/index.tsx-o0iBdZOY.js"),__vite__mapDeps([33,1,2,3,4,12,5,10,28,20,7,29,6,14,30,9,22,27,16,34,17,18])),a(()=>import("../js/index.tsx-BB1mxAS-.js"),__vite__mapDeps([35,1,2,3,4,5,32,9,34,17,18])),a(()=>import("../js/chunk-Bt1viq1_.js").then(o=>o.i),__vite__mapDeps([11,2,1,3,4,6,9,12])),a(()=>import("../js/index.tsx-BlmnKiIW.js"),__vite__mapDeps([25,1,2,3,4,5,20,17,9,18])),a(()=>import("../js/index.tsx-ChW8R_IK.js"),__vite__mapDeps([26,1,2,3,4,16,27,6,28,20,12,5,7,29,14,30,9,10,22,23,8,17,18]))]).catch(console.warn)};if(typeof window<"u"){const o=()=>{"requestIdleCallback"in window?window.requestIdleCallback(Re,{timeout:1e3}):setTimeout(Re,100)};document.readyState==="loading"?window.addEventListener("DOMContentLoaded",o):o()}function Ie({children:o}){return f.jsx(Oo,{children:f.jsx(Vo,{children:f.jsx(Io,{children:o})})})}function je({children:o}){const{id:n}=le(),t=ot(),r=nt();return m.useEffect(()=>{if(n&&n!==n.toUpperCase()){const e=r.pathname.replace(n,n.toUpperCase());t(e+r.search+r.hash,{replace:!0})}},[n,t,r]),f.jsx(f.Fragment,{children:o})}function Yo(){const o=m.useContext(We);if(m.useEffect(()=>(o&&(window.authContext=o),()=>{window.authContext=null}),[o]),m.useEffect(()=>{Y.on("languageChanged",t=>{Fo(t)})},[]),!o||o.initializing)return f.jsx(se,{});const n=o.user?f.jsx(Qo,{}):f.jsx(zo,{});return f.jsxs(et,{children:[f.jsx(te,{path:"/",element:f.jsx(tt,{replace:!0,to:"/PUBLIC"})}),f.jsx(te,{path:"/:id/cast",element:f.jsx(je,{children:f.jsx(Ie,{children:f.jsx(m.Suspense,{fallback:f.jsx(se,{}),children:f.jsx(Wo,{})})})})}),f.jsx(te,{path:"/:id",element:f.jsx(je,{children:f.jsx(Ie,{children:f.jsx(m.Suspense,{fallback:f.jsx(se,{}),children:n})})})})]})}function Go(){return f.jsxs(Ut,{theme:So,children:[f.jsx(Vt,{}),f.jsx(St,{dateAdapter:kt,children:f.jsx(Ze,{children:f.jsx(Yo,{})})})]})}const z=(o,n,t)=>{const r=o[n];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((e,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+n+(n.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Le={fallbackLng:"en",supportedLngs:["en","es","fr"],ns:["translation","errors"],defaultNS:"translation",interpolation:{escapeValue:!1},react:{useSuspense:!0},detection:{order:["querystring","cookie","localStorage","navigator","htmlTag"],caches:["localStorage","cookie"]}},Jo=async()=>{const o=localStorage.getItem("i18nextLng")||"en";try{const n=await z(Object.assign({"./locales/en/translation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(t=>t.E),[]),"./locales/es/translation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(t=>t.a5),[]),"./locales/fr/translation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(t=>t.ay),[])}),`./locales/${o}/translation.json`,4);return{[o]:{translation:n.default||n}}}catch{const n=await a(()=>import("../js/chunk-COViFSNc.js").then(t=>t.E),[]);return{en:{translation:n.default||n}}}},Ko=(o,n)=>n==="translation"?z(Object.assign({"./locales/en/translation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(t=>t.E),[]),"./locales/es/translation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(t=>t.a5),[]),"./locales/fr/translation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(t=>t.ay),[])}),`./locales/${o}/translation.json`,4):z(Object.assign({"./locales/en/translation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(t=>t.E),[]),"./locales/es/translation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(t=>t.a5),[]),"./locales/fr/translation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(t=>t.ay),[])}),`./locales/${o}/${n}.json`,4).catch(()=>z(Object.assign({"./locales/en/translation.json":()=>a(()=>import("../js/chunk-COViFSNc.js").then(t=>t.E),[])}),`./locales/en/${n}.json`,4)),Oe=Y.use(rt).use(Ct).use(Rt(Ko));Jo().then(o=>{Oe.init({...Le,resources:o})}).catch(()=>{Oe.init(Le)});const Me=()=>{a(()=>import("../js/chunk-CtIAsvv6.js").then(o=>o.a3),__vite__mapDeps([2,1,3,4])).catch(()=>{}),a(()=>import("../js/chunk-CtIAsvv6.js").then(o=>o.a4),__vite__mapDeps([2,1,3,4])).catch(()=>{})};typeof window<"u"&&("requestIdleCallback"in window?window.requestIdleCallback(Me,{timeout:2e3}):setTimeout(Me,1e3));const Xo=st.createRoot(document.getElementById("root"));Xo.render(f.jsx(ye.StrictMode,{children:f.jsx(To,{children:f.jsx(ye.Suspense,{children:f.jsx(Go,{})})})}));Xe();export{We as A,Ne as B,ho as C,wn as D,Tn as E,mo as F,Ro as M,Uo as S,Lo as U,vo as a,bo as b,cn as c,dn as d,En as e,vn as f,hn as g,mn as h,ko as i,Ft as j,zt as k,An as l,un as m,ln as n,Ao as o,Do as p,pn as q,Nt as r,_n as s,uo as t,po as u,fn as v,Fe as w,yn as x,gn as y,lo as z};
